{"version":3,"file":"bundle.js","sources":["../../node_modules/svelte/internal/index.mjs","../../node_modules/svelte/store/index.mjs","../../src/store.js","../../src/Terminal.svelte","../../node_modules/@snlab/florence/src/utils/detect.js","../../node_modules/@snlab/florence/src/components/Core/Graphic/GraphicContext/index.js","../../node_modules/@snlab/florence/src/components/Core/utils/padding.js","../../node_modules/@snlab/florence/src/components/Core/Section/SectionContext/getRanges.js","../../node_modules/d3-array/src/ascending.js","../../node_modules/d3-array/src/bisector.js","../../node_modules/d3-array/src/bisect.js","../../node_modules/d3-array/src/number.js","../../node_modules/d3-array/src/fsum.js","../../node_modules/d3-array/src/ticks.js","../../node_modules/d3-scale/src/init.js","../../node_modules/d3-color/src/define.js","../../node_modules/d3-color/src/color.js","../../node_modules/d3-interpolate/src/constant.js","../../node_modules/d3-interpolate/src/color.js","../../node_modules/d3-interpolate/src/rgb.js","../../node_modules/d3-interpolate/src/numberArray.js","../../node_modules/d3-interpolate/src/array.js","../../node_modules/d3-interpolate/src/date.js","../../node_modules/d3-interpolate/src/number.js","../../node_modules/d3-interpolate/src/object.js","../../node_modules/d3-interpolate/src/string.js","../../node_modules/d3-interpolate/src/value.js","../../node_modules/d3-interpolate/src/round.js","../../node_modules/d3-scale/src/number.js","../../node_modules/d3-scale/src/continuous.js","../../node_modules/d3-scale/src/constant.js","../../node_modules/d3-format/src/formatDecimal.js","../../node_modules/d3-format/src/exponent.js","../../node_modules/d3-format/src/formatSpecifier.js","../../node_modules/d3-format/src/formatPrefixAuto.js","../../node_modules/d3-format/src/formatRounded.js","../../node_modules/d3-format/src/formatTypes.js","../../node_modules/d3-format/src/identity.js","../../node_modules/d3-format/src/locale.js","../../node_modules/d3-format/src/defaultLocale.js","../../node_modules/d3-format/src/formatGroup.js","../../node_modules/d3-format/src/formatNumerals.js","../../node_modules/d3-format/src/formatTrim.js","../../node_modules/d3-scale/src/tickFormat.js","../../node_modules/d3-format/src/precisionPrefix.js","../../node_modules/d3-format/src/precisionRound.js","../../node_modules/d3-format/src/precisionFixed.js","../../node_modules/d3-scale/src/linear.js","../../node_modules/@snlab/florence/src/components/Core/Section/SectionContext/createScales.js","../../node_modules/@snlab/florence/src/components/Core/Section/SectionContext/polar.js","../../node_modules/@snlab/florence/src/components/Core/Section/SectionContext/attachTransformations.js","../../node_modules/@snlab/florence/src/components/Core/Section/SectionContext/createSectionContext.js","../../node_modules/@snlab/florence/src/components/Core/Section/SectionContext/index.js","../../node_modules/@snlab/florence/src/components/Core/Graphic/EventManagerContext/index.js","../../node_modules/@snlab/florence/src/components/Core/Section/InteractionManagerContext/index.js","../../node_modules/@snlab/florence/src/interactivity/events/EventTracker.js","../../node_modules/@snlab/florence/src/interactivity/events/BaseEventManager.js","../../node_modules/@snlab/florence/src/utils/capitalize.js","../../node_modules/@snlab/florence/src/interactivity/events/MouseEventManager.js","../../node_modules/@snlab/florence/src/interactivity/events/TouchEventManager.js","../../node_modules/@snlab/florence/src/interactivity/events/EventManager.js","../../node_modules/@snlab/florence/src/interactivity/interactions/base/managers/BaseInteractionManager.js","../../node_modules/@snlab/florence/src/interactivity/interactions/base/interfaces/BaseInteractionInterface.js","../../node_modules/@snlab/florence/src/interactivity/interactions/base/interfaces/createIndexableData/indexPoint.js","../../node_modules/d3-geo/src/math.js","../../node_modules/d3-geo/src/noop.js","../../node_modules/d3-geo/src/stream.js","../../node_modules/d3-geo/src/path/area.js","../../node_modules/d3-geo/src/identity.js","../../node_modules/d3-geo/src/path/bounds.js","../../node_modules/d3-geo/src/path/centroid.js","../../node_modules/d3-geo/src/path/context.js","../../node_modules/d3-geo/src/path/measure.js","../../node_modules/d3-geo/src/path/string.js","../../node_modules/d3-geo/src/path/index.js","../../node_modules/@snlab/florence/src/utils/equals.js","../../node_modules/@snlab/florence/src/utils/geometryUtils/calculateBbox.js","../../node_modules/@snlab/florence/src/utils/geometryUtils/geometryDetectors.js","../../node_modules/@snlab/florence/src/utils/geometryUtils/polygonArea.js","../../node_modules/@snlab/florence/src/utils/geometryUtils/distance.js","../../node_modules/@snlab/florence/src/utils/geometryUtils/calculateCentroid.js","../../node_modules/@snlab/florence/src/utils/geometryUtils/closestPointOnLine.js","../../node_modules/two-product/two-product.js","../../node_modules/robust-sum/robust-sum.js","../../node_modules/two-sum/two-sum.js","../../node_modules/robust-scale/robust-scale.js","../../node_modules/robust-subtract/robust-diff.js","../../node_modules/robust-orientation/orientation.js","../../node_modules/robust-point-in-polygon/robust-pnp.js","../../node_modules/@snlab/florence/src/utils/geometryUtils/pointInPolygon.js","../../node_modules/@snlab/rendervous/dist/rendervous.esm.js","../../node_modules/@snlab/transshape/node_modules/d3-color/src/define.js","../../node_modules/@snlab/transshape/node_modules/d3-color/src/color.js","../../node_modules/@snlab/transshape/node_modules/d3-interpolate/src/constant.js","../../node_modules/@snlab/transshape/node_modules/d3-interpolate/src/color.js","../../node_modules/@snlab/transshape/node_modules/d3-interpolate/src/rgb.js","../../node_modules/@snlab/transshape/node_modules/d3-interpolate/src/numberArray.js","../../node_modules/@snlab/transshape/node_modules/d3-interpolate/src/array.js","../../node_modules/@snlab/transshape/node_modules/d3-interpolate/src/date.js","../../node_modules/@snlab/transshape/node_modules/d3-interpolate/src/number.js","../../node_modules/@snlab/transshape/node_modules/d3-interpolate/src/object.js","../../node_modules/@snlab/transshape/node_modules/d3-interpolate/src/string.js","../../node_modules/@snlab/transshape/node_modules/d3-interpolate/src/value.js","../../node_modules/earcut/src/earcut.js","../../node_modules/topojson-client/src/identity.js","../../node_modules/topojson-client/src/feature.js","../../node_modules/topojson-client/src/transform.js","../../node_modules/topojson-client/src/reverse.js","../../node_modules/topojson-client/src/stitch.js","../../node_modules/topojson-client/src/merge.js","../../node_modules/@snlab/transshape/dist/transshape.esm.js","../../node_modules/@snlab/florence/src/utils/geometryUtils/transition.js","../../node_modules/@snlab/florence/src/interactivity/interactions/utils/createItemFromBbox.js","../../node_modules/@snlab/florence/src/interactivity/interactions/base/interfaces/createIndexableData/indexRectangle.js","../../node_modules/@snlab/florence/src/interactivity/interactions/base/interfaces/createIndexableData/indexPolygon.js","../../node_modules/@snlab/florence/src/interactivity/interactions/base/interfaces/createIndexableData/indexLine.js","../../node_modules/@snlab/florence/src/interactivity/interactions/base/interfaces/createIndexableData/indexArea.js","../../node_modules/@snlab/florence/src/interactivity/interactions/base/interfaces/createIndexableData/indexSymbol.js","../../node_modules/@snlab/florence/src/interactivity/interactions/base/interfaces/createIndexableData/index.js","../../node_modules/@snlab/florence/src/interactivity/interactions/base/interfaces/MarkInteractionInterface.js","../../node_modules/@snlab/florence/src/interactivity/interactions/base/interfaces/SectionInteractionInterface.js","../../node_modules/@snlab/florence/src/interactivity/interactions/base/handlers/BaseInteractionHandler.js","../../node_modules/rbush/rbush.min.js","../../node_modules/@snlab/florence/src/interactivity/interactions/SpatialIndex/collisionTests/pointCollision.js","../../node_modules/@snlab/florence/src/interactivity/interactions/SpatialIndex/collisionTests/index.js","../../node_modules/@snlab/florence/src/interactivity/interactions/SpatialIndex/collisionTests/rectangleCollision.js","../../node_modules/@snlab/florence/src/interactivity/interactions/SpatialIndex/collisionTests/polygonCollision.js","../../node_modules/@snlab/florence/src/interactivity/interactions/SpatialIndex/collisionTests/lineCollision.js","../../node_modules/@snlab/florence/src/interactivity/interactions/SpatialIndex/collisionTests/symbolCollision.js","../../node_modules/@snlab/florence/src/interactivity/interactions/SpatialIndex/collisionTests/areaCollision.js","../../node_modules/@snlab/florence/src/interactivity/interactions/SpatialIndex/index.js","../../node_modules/@snlab/florence/src/interactivity/interactions/base/handlers/MarkInteractionHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/utils/createEvent.js","../../node_modules/@snlab/florence/src/interactivity/interactions/utils/getLocalCoordinates.js","../../node_modules/@snlab/florence/src/interactivity/interactions/utils/hitUtils.js","../../node_modules/@snlab/florence/src/interactivity/interactions/mouse/mark/ClickHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/mouse/mark/MouseoverHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/mouse/mark/MouseoutHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/mouse/mark/MousedownHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/mouse/mark/MouseupHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/mouse/mark/MousedragHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/base/handlers/SectionInteractionHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/mouse/section/WheelHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/utils/getScrollLineHeight.js","../../node_modules/@snlab/florence/src/interactivity/interactions/mouse/section/ClickHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/mouse/section/MousedownHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/mouse/section/MouseupHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/mouse/section/MouseoverHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/mouse/section/MouseoutHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/mouse/section/MousemoveHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/mouse/MouseInteractionManager.js","../../node_modules/@snlab/florence/src/interactivity/interactions/utils/numberOfTouches.js","../../node_modules/@snlab/florence/src/interactivity/interactions/touch/mark/TouchdownHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/touch/mark/TouchupHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/touch/mark/TouchoverHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/touch/mark/TouchoutHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/touch/mark/TouchdragHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/touch/section/PinchHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/touch/section/TouchdownHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/touch/section/TouchmoveHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/touch/section/TouchupHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/touch/section/TouchoverHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/touch/section/TouchoutHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/touch/TouchInteractionManager.js","../../node_modules/@snlab/florence/src/interactivity/interactions/select/createIndexableData/utils/bboxPoint.js","../../node_modules/@snlab/florence/src/interactivity/interactions/select/createIndexableData/indexPoint.js","../../node_modules/@snlab/florence/src/interactivity/interactions/select/createIndexableData/indexRectangle.js","../../node_modules/@snlab/florence/src/interactivity/interactions/select/createIndexableData/indexPolygon.js","../../node_modules/@snlab/florence/src/interactivity/interactions/select/createIndexableData/indexLine.js","../../node_modules/@snlab/florence/src/interactivity/interactions/select/createIndexableData/indexArea.js","../../node_modules/@snlab/florence/src/interactivity/interactions/select/createIndexableData/index.js","../../node_modules/@snlab/florence/src/interactivity/interactions/select/SelectManager.js","../../node_modules/@snlab/florence/src/interactivity/interactions/InteractionManager.js","../../node_modules/@snlab/florence/src/components/Core/Graphic/Graphic.svelte","../../node_modules/@snlab/florence/src/components/Core/Section/getClipProps.js","../../node_modules/@snlab/florence/src/components/Marks/utils/getKeyArray.js","../../node_modules/@snlab/florence/src/components/Marks/utils/createPixelGeometryFromGeometry.js","../../node_modules/@snlab/florence/src/components/Marks/Rectangle/createPixelGeometry.js","../../node_modules/@snlab/florence/src/components/Marks/Point/aesthetics.js","../../node_modules/@snlab/florence/src/components/Marks/Rectangle/aesthetics.js","../../node_modules/@snlab/florence/src/components/Marks/Polygon/aesthetics.js","../../node_modules/@snlab/florence/src/components/Marks/Line/aesthetics.js","../../node_modules/@snlab/florence/src/components/Marks/Label/aesthetics.js","../../node_modules/@snlab/florence/src/components/Marks/Symbol/aesthetics.js","../../node_modules/@snlab/florence/src/components/Marks/Area/aesthetics.js","../../node_modules/@snlab/florence/src/components/Marks/Mark/validateAesthetics.js","../../node_modules/@snlab/florence/src/components/Marks/utils/geometryPropTools.js","../../node_modules/@snlab/florence/src/components/Marks/utils/propNeedsScaling.js","../../node_modules/@snlab/florence/src/components/Marks/Point/createPixelGeometry.js","../../node_modules/@snlab/florence/src/components/Marks/utils/createPixelGeometryFromXYArrays.js","../../node_modules/@snlab/florence/src/components/Marks/Symbol/geometryAlias.js","../../node_modules/@snlab/florence/src/components/Marks/Point/representPointAsPolygon.js","../../node_modules/@snlab/florence/src/components/Marks/Symbol/createPixelGeometry.js","../../node_modules/@snlab/florence/src/components/Marks/Area/createPixelGeometry.js","../../node_modules/@snlab/florence/src/components/Marks/Point/createPixelGeometryObject.js","../../node_modules/@snlab/florence/src/components/Marks/utils/generateArrayOfLength.js","../../node_modules/@snlab/florence/src/components/Marks/Rectangle/createPixelGeometryObject.js","../../node_modules/@snlab/florence/src/components/Marks/Symbol/createPixelGeometryObject.js","../../node_modules/@snlab/florence/src/components/Marks/Mark/pixelGeometryFuncs.js","../../node_modules/@snlab/florence/src/components/Marks/Polygon/createPixelGeometry.js","../../node_modules/@snlab/florence/src/components/Marks/Line/createPixelGeometry.js","../../node_modules/@snlab/florence/src/components/Marks/Polygon/createPixelGeometryObject.js","../../node_modules/@snlab/florence/src/components/Marks/Line/createPixelGeometryObject.js","../../node_modules/@snlab/florence/src/components/Marks/Area/createPixelGeometryObject.js","../../node_modules/@snlab/florence/src/components/Marks/Line/representLineAsPolygon.js","../../node_modules/@snlab/florence/src/components/Marks/Mark/representAsPolygonFuncs.js","../../node_modules/svelte/easing/index.mjs","../../node_modules/svelte/motion/index.mjs","../../node_modules/@snlab/florence/src/components/Marks/utils/transitions/createTransitionable.js","../../node_modules/@snlab/florence/src/components/Marks/utils/transitions/createTransitionableLayer.js","../../node_modules/@snlab/florence/src/components/Marks/utils/any.js","../../node_modules/@snlab/florence/src/components/Marks/utils/parseRenderSettings.js","../../node_modules/@snlab/florence/src/components/Marks/utils/generatePath.js","../../node_modules/@snlab/florence/src/components/Marks/utils/textAnchorPoint.js","../../node_modules/@snlab/florence/src/components/Marks/Mark/Mark.svelte","../../node_modules/@snlab/florence/src/components/Marks/Mark/createDataNecessaryForIndexing.js","../../node_modules/@snlab/florence/src/components/Marks/Point/Point.svelte","../../node_modules/@snlab/florence/src/components/Marks/Line/Line.svelte","../../node_modules/@snlab/florence/src/components/Marks/Label/Label.svelte","../../node_modules/@snlab/florence/src/components/Marks/utils/generatePropObject.js","../../node_modules/@snlab/florence/src/components/Marks/Mark/Layer.svelte","../../node_modules/@snlab/florence/src/components/Marks/Line/LineLayer.svelte","../../node_modules/@snlab/florence/src/components/Marks/Label/LabelLayer.svelte","../../node_modules/@snlab/florence/src/components/Guides/Axes/just.js","../../node_modules/@snlab/florence/src/components/Guides/Axes/ticks.js","../../node_modules/@snlab/florence/src/components/Guides/Axes/tickLabels.js","../../node_modules/@snlab/florence/src/components/Guides/Axes/title.js","../../node_modules/@snlab/florence/src/components/Guides/Axes/XAxis.svelte","../../node_modules/@snlab/florence/src/components/Guides/Axes/baseLine.js","../../node_modules/@snlab/florence/src/components/Guides/Axes/YAxis.svelte","../../node_modules/@snlab/florence/src/components/Guides/GridLines/XGridLines.svelte","../../node_modules/@snlab/florence/src/components/Guides/GridLines/getCoordinates.js","../../node_modules/@snlab/florence/src/components/Guides/GridLines/YGridLines.svelte","../../src/App.svelte","../../src/main.js"],"sourcesContent":["function noop() { }\nconst identity = x => x;\nfunction assign(tar, src) {\n    // @ts-ignore\n    for (const k in src)\n        tar[k] = src[k];\n    return tar;\n}\nfunction is_promise(value) {\n    return value && typeof value === 'object' && typeof value.then === 'function';\n}\nfunction add_location(element, file, line, column, char) {\n    element.__svelte_meta = {\n        loc: { file, line, column, char }\n    };\n}\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nfunction not_equal(a, b) {\n    return a != a ? b == b : a !== b;\n}\nfunction is_empty(obj) {\n    return Object.keys(obj).length === 0;\n}\nfunction validate_store(store, name) {\n    if (store != null && typeof store.subscribe !== 'function') {\n        throw new Error(`'${name}' is not a store with a 'subscribe' method`);\n    }\n}\nfunction subscribe(store, ...callbacks) {\n    if (store == null) {\n        return noop;\n    }\n    const unsub = store.subscribe(...callbacks);\n    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\nfunction get_store_value(store) {\n    let value;\n    subscribe(store, _ => value = _)();\n    return value;\n}\nfunction component_subscribe(component, store, callback) {\n    component.$$.on_destroy.push(subscribe(store, callback));\n}\nfunction create_slot(definition, ctx, $$scope, fn) {\n    if (definition) {\n        const slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n        return definition[0](slot_ctx);\n    }\n}\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n    return definition[1] && fn\n        ? assign($$scope.ctx.slice(), definition[1](fn(ctx)))\n        : $$scope.ctx;\n}\nfunction get_slot_changes(definition, $$scope, dirty, fn) {\n    if (definition[2] && fn) {\n        const lets = definition[2](fn(dirty));\n        if ($$scope.dirty === undefined) {\n            return lets;\n        }\n        if (typeof lets === 'object') {\n            const merged = [];\n            const len = Math.max($$scope.dirty.length, lets.length);\n            for (let i = 0; i < len; i += 1) {\n                merged[i] = $$scope.dirty[i] | lets[i];\n            }\n            return merged;\n        }\n        return $$scope.dirty | lets;\n    }\n    return $$scope.dirty;\n}\nfunction update_slot(slot, slot_definition, ctx, $$scope, dirty, get_slot_changes_fn, get_slot_context_fn) {\n    const slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n    if (slot_changes) {\n        const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n        slot.p(slot_context, slot_changes);\n    }\n}\nfunction update_slot_spread(slot, slot_definition, ctx, $$scope, dirty, get_slot_changes_fn, get_slot_spread_changes_fn, get_slot_context_fn) {\n    const slot_changes = get_slot_spread_changes_fn(dirty) | get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n    if (slot_changes) {\n        const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n        slot.p(slot_context, slot_changes);\n    }\n}\nfunction exclude_internal_props(props) {\n    const result = {};\n    for (const k in props)\n        if (k[0] !== '$')\n            result[k] = props[k];\n    return result;\n}\nfunction compute_rest_props(props, keys) {\n    const rest = {};\n    keys = new Set(keys);\n    for (const k in props)\n        if (!keys.has(k) && k[0] !== '$')\n            rest[k] = props[k];\n    return rest;\n}\nfunction compute_slots(slots) {\n    const result = {};\n    for (const key in slots) {\n        result[key] = true;\n    }\n    return result;\n}\nfunction once(fn) {\n    let ran = false;\n    return function (...args) {\n        if (ran)\n            return;\n        ran = true;\n        fn.call(this, ...args);\n    };\n}\nfunction null_to_empty(value) {\n    return value == null ? '' : value;\n}\nfunction set_store_value(store, ret, value = ret) {\n    store.set(value);\n    return ret;\n}\nconst has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\nfunction action_destroyer(action_result) {\n    return action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\nconst is_client = typeof window !== 'undefined';\nlet now = is_client\n    ? () => window.performance.now()\n    : () => Date.now();\nlet raf = is_client ? cb => requestAnimationFrame(cb) : noop;\n// used internally for testing\nfunction set_now(fn) {\n    now = fn;\n}\nfunction set_raf(fn) {\n    raf = fn;\n}\n\nconst tasks = new Set();\nfunction run_tasks(now) {\n    tasks.forEach(task => {\n        if (!task.c(now)) {\n            tasks.delete(task);\n            task.f();\n        }\n    });\n    if (tasks.size !== 0)\n        raf(run_tasks);\n}\n/**\n * For testing purposes only!\n */\nfunction clear_loops() {\n    tasks.clear();\n}\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n */\nfunction loop(callback) {\n    let task;\n    if (tasks.size === 0)\n        raf(run_tasks);\n    return {\n        promise: new Promise(fulfill => {\n            tasks.add(task = { c: callback, f: fulfill });\n        }),\n        abort() {\n            tasks.delete(task);\n        }\n    };\n}\n\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction detach(node) {\n    node.parentNode.removeChild(node);\n}\nfunction destroy_each(iterations, detaching) {\n    for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i])\n            iterations[i].d(detaching);\n    }\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction element_is(name, is) {\n    return document.createElement(name, { is });\n}\nfunction object_without_properties(obj, exclude) {\n    const target = {};\n    for (const k in obj) {\n        if (has_prop(obj, k)\n            // @ts-ignore\n            && exclude.indexOf(k) === -1) {\n            // @ts-ignore\n            target[k] = obj[k];\n        }\n    }\n    return target;\n}\nfunction svg_element(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction space() {\n    return text(' ');\n}\nfunction empty() {\n    return text('');\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction prevent_default(fn) {\n    return function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_propagation(fn) {\n    return function (event) {\n        event.stopPropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction self(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.target === this)\n            fn.call(this, event);\n    };\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else if (node.getAttribute(attribute) !== value)\n        node.setAttribute(attribute, value);\n}\nfunction set_attributes(node, attributes) {\n    // @ts-ignore\n    const descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n    for (const key in attributes) {\n        if (attributes[key] == null) {\n            node.removeAttribute(key);\n        }\n        else if (key === 'style') {\n            node.style.cssText = attributes[key];\n        }\n        else if (key === '__value') {\n            node.value = node[key] = attributes[key];\n        }\n        else if (descriptors[key] && descriptors[key].set) {\n            node[key] = attributes[key];\n        }\n        else {\n            attr(node, key, attributes[key]);\n        }\n    }\n}\nfunction set_svg_attributes(node, attributes) {\n    for (const key in attributes) {\n        attr(node, key, attributes[key]);\n    }\n}\nfunction set_custom_element_data(node, prop, value) {\n    if (prop in node) {\n        node[prop] = value;\n    }\n    else {\n        attr(node, prop, value);\n    }\n}\nfunction xlink_attr(node, attribute, value) {\n    node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\nfunction get_binding_group_value(group, __value, checked) {\n    const value = new Set();\n    for (let i = 0; i < group.length; i += 1) {\n        if (group[i].checked)\n            value.add(group[i].__value);\n    }\n    if (!checked) {\n        value.delete(__value);\n    }\n    return Array.from(value);\n}\nfunction to_number(value) {\n    return value === '' ? null : +value;\n}\nfunction time_ranges_to_array(ranges) {\n    const array = [];\n    for (let i = 0; i < ranges.length; i += 1) {\n        array.push({ start: ranges.start(i), end: ranges.end(i) });\n    }\n    return array;\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction claim_element(nodes, name, attributes, svg) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeName === name) {\n            let j = 0;\n            const remove = [];\n            while (j < node.attributes.length) {\n                const attribute = node.attributes[j++];\n                if (!attributes[attribute.name]) {\n                    remove.push(attribute.name);\n                }\n            }\n            for (let k = 0; k < remove.length; k++) {\n                node.removeAttribute(remove[k]);\n            }\n            return nodes.splice(i, 1)[0];\n        }\n    }\n    return svg ? svg_element(name) : element(name);\n}\nfunction claim_text(nodes, data) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeType === 3) {\n            node.data = '' + data;\n            return nodes.splice(i, 1)[0];\n        }\n    }\n    return text(data);\n}\nfunction claim_space(nodes) {\n    return claim_text(nodes, ' ');\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.wholeText !== data)\n        text.data = data;\n}\nfunction set_input_value(input, value) {\n    input.value = value == null ? '' : value;\n}\nfunction set_input_type(input, type) {\n    try {\n        input.type = type;\n    }\n    catch (e) {\n        // do nothing\n    }\n}\nfunction set_style(node, key, value, important) {\n    node.style.setProperty(key, value, important ? 'important' : '');\n}\nfunction select_option(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        if (option.__value === value) {\n            option.selected = true;\n            return;\n        }\n    }\n}\nfunction select_options(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        option.selected = ~value.indexOf(option.__value);\n    }\n}\nfunction select_value(select) {\n    const selected_option = select.querySelector(':checked') || select.options[0];\n    return selected_option && selected_option.__value;\n}\nfunction select_multiple_value(select) {\n    return [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\nlet crossorigin;\nfunction is_crossorigin() {\n    if (crossorigin === undefined) {\n        crossorigin = false;\n        try {\n            if (typeof window !== 'undefined' && window.parent) {\n                void window.parent.document;\n            }\n        }\n        catch (error) {\n            crossorigin = true;\n        }\n    }\n    return crossorigin;\n}\nfunction add_resize_listener(node, fn) {\n    const computed_style = getComputedStyle(node);\n    if (computed_style.position === 'static') {\n        node.style.position = 'relative';\n    }\n    const iframe = element('iframe');\n    iframe.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n        'overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;');\n    iframe.setAttribute('aria-hidden', 'true');\n    iframe.tabIndex = -1;\n    const crossorigin = is_crossorigin();\n    let unsubscribe;\n    if (crossorigin) {\n        iframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n        unsubscribe = listen(window, 'message', (event) => {\n            if (event.source === iframe.contentWindow)\n                fn();\n        });\n    }\n    else {\n        iframe.src = 'about:blank';\n        iframe.onload = () => {\n            unsubscribe = listen(iframe.contentWindow, 'resize', fn);\n        };\n    }\n    append(node, iframe);\n    return () => {\n        if (crossorigin) {\n            unsubscribe();\n        }\n        else if (unsubscribe && iframe.contentWindow) {\n            unsubscribe();\n        }\n        detach(iframe);\n    };\n}\nfunction toggle_class(element, name, toggle) {\n    element.classList[toggle ? 'add' : 'remove'](name);\n}\nfunction custom_event(type, detail) {\n    const e = document.createEvent('CustomEvent');\n    e.initCustomEvent(type, false, false, detail);\n    return e;\n}\nfunction query_selector_all(selector, parent = document.body) {\n    return Array.from(parent.querySelectorAll(selector));\n}\nclass HtmlTag {\n    constructor(anchor = null) {\n        this.a = anchor;\n        this.e = this.n = null;\n    }\n    m(html, target, anchor = null) {\n        if (!this.e) {\n            this.e = element(target.nodeName);\n            this.t = target;\n            this.h(html);\n        }\n        this.i(anchor);\n    }\n    h(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.childNodes);\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert(this.t, this.n[i], anchor);\n        }\n    }\n    p(html) {\n        this.d();\n        this.h(html);\n        this.i(this.a);\n    }\n    d() {\n        this.n.forEach(detach);\n    }\n}\nfunction attribute_to_object(attributes) {\n    const result = {};\n    for (const attribute of attributes) {\n        result[attribute.name] = attribute.value;\n    }\n    return result;\n}\nfunction get_custom_elements_slots(element) {\n    const result = {};\n    element.childNodes.forEach((node) => {\n        result[node.slot || 'default'] = true;\n    });\n    return result;\n}\n\nconst active_docs = new Set();\nlet active = 0;\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i--)\n        hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n    const step = 16.666 / duration;\n    let keyframes = '{\\n';\n    for (let p = 0; p <= 1; p += step) {\n        const t = a + (b - a) * ease(p);\n        keyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n    }\n    const rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n    const name = `__svelte_${hash(rule)}_${uid}`;\n    const doc = node.ownerDocument;\n    active_docs.add(doc);\n    const stylesheet = doc.__svelte_stylesheet || (doc.__svelte_stylesheet = doc.head.appendChild(element('style')).sheet);\n    const current_rules = doc.__svelte_rules || (doc.__svelte_rules = {});\n    if (!current_rules[name]) {\n        current_rules[name] = true;\n        stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n    }\n    const animation = node.style.animation || '';\n    node.style.animation = `${animation ? `${animation}, ` : ''}${name} ${duration}ms linear ${delay}ms 1 both`;\n    active += 1;\n    return name;\n}\nfunction delete_rule(node, name) {\n    const previous = (node.style.animation || '').split(', ');\n    const next = previous.filter(name\n        ? anim => anim.indexOf(name) < 0 // remove specific animation\n        : anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n    );\n    const deleted = previous.length - next.length;\n    if (deleted) {\n        node.style.animation = next.join(', ');\n        active -= deleted;\n        if (!active)\n            clear_rules();\n    }\n}\nfunction clear_rules() {\n    raf(() => {\n        if (active)\n            return;\n        active_docs.forEach(doc => {\n            const stylesheet = doc.__svelte_stylesheet;\n            let i = stylesheet.cssRules.length;\n            while (i--)\n                stylesheet.deleteRule(i);\n            doc.__svelte_rules = {};\n        });\n        active_docs.clear();\n    });\n}\n\nfunction create_animation(node, from, fn, params) {\n    if (!from)\n        return noop;\n    const to = node.getBoundingClientRect();\n    if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom)\n        return noop;\n    const { delay = 0, duration = 300, easing = identity, \n    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n    start: start_time = now() + delay, \n    // @ts-ignore todo:\n    end = start_time + duration, tick = noop, css } = fn(node, { from, to }, params);\n    let running = true;\n    let started = false;\n    let name;\n    function start() {\n        if (css) {\n            name = create_rule(node, 0, 1, duration, delay, easing, css);\n        }\n        if (!delay) {\n            started = true;\n        }\n    }\n    function stop() {\n        if (css)\n            delete_rule(node, name);\n        running = false;\n    }\n    loop(now => {\n        if (!started && now >= start_time) {\n            started = true;\n        }\n        if (started && now >= end) {\n            tick(1, 0);\n            stop();\n        }\n        if (!running) {\n            return false;\n        }\n        if (started) {\n            const p = now - start_time;\n            const t = 0 + 1 * easing(p / duration);\n            tick(t, 1 - t);\n        }\n        return true;\n    });\n    start();\n    tick(0, 1);\n    return stop;\n}\nfunction fix_position(node) {\n    const style = getComputedStyle(node);\n    if (style.position !== 'absolute' && style.position !== 'fixed') {\n        const { width, height } = style;\n        const a = node.getBoundingClientRect();\n        node.style.position = 'absolute';\n        node.style.width = width;\n        node.style.height = height;\n        add_transform(node, a);\n    }\n}\nfunction add_transform(node, a) {\n    const b = node.getBoundingClientRect();\n    if (a.left !== b.left || a.top !== b.top) {\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error('Function called outside component initialization');\n    return current_component;\n}\nfunction beforeUpdate(fn) {\n    get_current_component().$$.before_update.push(fn);\n}\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\nfunction afterUpdate(fn) {\n    get_current_component().$$.after_update.push(fn);\n}\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\nfunction createEventDispatcher() {\n    const component = get_current_component();\n    return (type, detail) => {\n        const callbacks = component.$$.callbacks[type];\n        if (callbacks) {\n            // TODO are there situations where events could be dispatched\n            // in a server (non-DOM) environment?\n            const event = custom_event(type, detail);\n            callbacks.slice().forEach(fn => {\n                fn.call(component, event);\n            });\n        }\n    };\n}\nfunction setContext(key, context) {\n    get_current_component().$$.context.set(key, context);\n}\nfunction getContext(key) {\n    return get_current_component().$$.context.get(key);\n}\nfunction hasContext(key) {\n    return get_current_component().$$.context.has(key);\n}\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n    const callbacks = component.$$.callbacks[event.type];\n    if (callbacks) {\n        callbacks.slice().forEach(fn => fn(event));\n    }\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nfunction add_flush_callback(fn) {\n    flush_callbacks.push(fn);\n}\nlet flushing = false;\nconst seen_callbacks = new Set();\nfunction flush() {\n    if (flushing)\n        return;\n    flushing = true;\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        for (let i = 0; i < dirty_components.length; i += 1) {\n            const component = dirty_components[i];\n            set_current_component(component);\n            update(component.$$);\n        }\n        set_current_component(null);\n        dirty_components.length = 0;\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n                callback();\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n    flushing = false;\n    seen_callbacks.clear();\n}\nfunction update($$) {\n    if ($$.fragment !== null) {\n        $$.update();\n        run_all($$.before_update);\n        const dirty = $$.dirty;\n        $$.dirty = [-1];\n        $$.fragment && $$.fragment.p($$.ctx, dirty);\n        $$.after_update.forEach(add_render_callback);\n    }\n}\n\nlet promise;\nfunction wait() {\n    if (!promise) {\n        promise = Promise.resolve();\n        promise.then(() => {\n            promise = null;\n        });\n    }\n    return promise;\n}\nfunction dispatch(node, direction, kind) {\n    node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n    outros = {\n        r: 0,\n        c: [],\n        p: outros // parent group\n    };\n}\nfunction check_outros() {\n    if (!outros.r) {\n        run_all(outros.c);\n    }\n    outros = outros.p;\n}\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\nfunction transition_out(block, local, detach, callback) {\n    if (block && block.o) {\n        if (outroing.has(block))\n            return;\n        outroing.add(block);\n        outros.c.push(() => {\n            outroing.delete(block);\n            if (callback) {\n                if (detach)\n                    block.d(1);\n                callback();\n            }\n        });\n        block.o(local);\n    }\n}\nconst null_transition = { duration: 0 };\nfunction create_in_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = false;\n    let animation_name;\n    let task;\n    let uid = 0;\n    function cleanup() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n        tick(0, 1);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        if (task)\n            task.abort();\n        running = true;\n        add_render_callback(() => dispatch(node, true, 'start'));\n        task = loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(1, 0);\n                    dispatch(node, true, 'end');\n                    cleanup();\n                    return running = false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(t, 1 - t);\n                }\n            }\n            return running;\n        });\n    }\n    let started = false;\n    return {\n        start() {\n            if (started)\n                return;\n            delete_rule(node);\n            if (is_function(config)) {\n                config = config();\n                wait().then(go);\n            }\n            else {\n                go();\n            }\n        },\n        invalidate() {\n            started = false;\n        },\n        end() {\n            if (running) {\n                cleanup();\n                running = false;\n            }\n        }\n    };\n}\nfunction create_out_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = true;\n    let animation_name;\n    const group = outros;\n    group.r += 1;\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        add_render_callback(() => dispatch(node, false, 'start'));\n        loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(0, 1);\n                    dispatch(node, false, 'end');\n                    if (!--group.r) {\n                        // this will result in `end()` being called,\n                        // so we don't need to clean up here\n                        run_all(group.c);\n                    }\n                    return false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(1 - t, t);\n                }\n            }\n            return running;\n        });\n    }\n    if (is_function(config)) {\n        wait().then(() => {\n            // @ts-ignore\n            config = config();\n            go();\n        });\n    }\n    else {\n        go();\n    }\n    return {\n        end(reset) {\n            if (reset && config.tick) {\n                config.tick(1, 0);\n            }\n            if (running) {\n                if (animation_name)\n                    delete_rule(node, animation_name);\n                running = false;\n            }\n        }\n    };\n}\nfunction create_bidirectional_transition(node, fn, params, intro) {\n    let config = fn(node, params);\n    let t = intro ? 0 : 1;\n    let running_program = null;\n    let pending_program = null;\n    let animation_name = null;\n    function clear_animation() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function init(program, duration) {\n        const d = program.b - t;\n        duration *= Math.abs(d);\n        return {\n            a: t,\n            b: program.b,\n            d,\n            duration,\n            start: program.start,\n            end: program.start + duration,\n            group: program.group\n        };\n    }\n    function go(b) {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        const program = {\n            start: now() + delay,\n            b\n        };\n        if (!b) {\n            // @ts-ignore todo: improve typings\n            program.group = outros;\n            outros.r += 1;\n        }\n        if (running_program || pending_program) {\n            pending_program = program;\n        }\n        else {\n            // if this is an intro, and there's a delay, we need to do\n            // an initial tick and/or apply CSS animation immediately\n            if (css) {\n                clear_animation();\n                animation_name = create_rule(node, t, b, duration, delay, easing, css);\n            }\n            if (b)\n                tick(0, 1);\n            running_program = init(program, duration);\n            add_render_callback(() => dispatch(node, b, 'start'));\n            loop(now => {\n                if (pending_program && now > pending_program.start) {\n                    running_program = init(pending_program, duration);\n                    pending_program = null;\n                    dispatch(node, running_program.b, 'start');\n                    if (css) {\n                        clear_animation();\n                        animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n                    }\n                }\n                if (running_program) {\n                    if (now >= running_program.end) {\n                        tick(t = running_program.b, 1 - t);\n                        dispatch(node, running_program.b, 'end');\n                        if (!pending_program) {\n                            // we're done\n                            if (running_program.b) {\n                                // intro — we can tidy up immediately\n                                clear_animation();\n                            }\n                            else {\n                                // outro — needs to be coordinated\n                                if (!--running_program.group.r)\n                                    run_all(running_program.group.c);\n                            }\n                        }\n                        running_program = null;\n                    }\n                    else if (now >= running_program.start) {\n                        const p = now - running_program.start;\n                        t = running_program.a + running_program.d * easing(p / running_program.duration);\n                        tick(t, 1 - t);\n                    }\n                }\n                return !!(running_program || pending_program);\n            });\n        }\n    }\n    return {\n        run(b) {\n            if (is_function(config)) {\n                wait().then(() => {\n                    // @ts-ignore\n                    config = config();\n                    go(b);\n                });\n            }\n            else {\n                go(b);\n            }\n        },\n        end() {\n            clear_animation();\n            running_program = pending_program = null;\n        }\n    };\n}\n\nfunction handle_promise(promise, info) {\n    const token = info.token = {};\n    function update(type, index, key, value) {\n        if (info.token !== token)\n            return;\n        info.resolved = value;\n        let child_ctx = info.ctx;\n        if (key !== undefined) {\n            child_ctx = child_ctx.slice();\n            child_ctx[key] = value;\n        }\n        const block = type && (info.current = type)(child_ctx);\n        let needs_flush = false;\n        if (info.block) {\n            if (info.blocks) {\n                info.blocks.forEach((block, i) => {\n                    if (i !== index && block) {\n                        group_outros();\n                        transition_out(block, 1, 1, () => {\n                            if (info.blocks[i] === block) {\n                                info.blocks[i] = null;\n                            }\n                        });\n                        check_outros();\n                    }\n                });\n            }\n            else {\n                info.block.d(1);\n            }\n            block.c();\n            transition_in(block, 1);\n            block.m(info.mount(), info.anchor);\n            needs_flush = true;\n        }\n        info.block = block;\n        if (info.blocks)\n            info.blocks[index] = block;\n        if (needs_flush) {\n            flush();\n        }\n    }\n    if (is_promise(promise)) {\n        const current_component = get_current_component();\n        promise.then(value => {\n            set_current_component(current_component);\n            update(info.then, 1, info.value, value);\n            set_current_component(null);\n        }, error => {\n            set_current_component(current_component);\n            update(info.catch, 2, info.error, error);\n            set_current_component(null);\n            if (!info.hasCatch) {\n                throw error;\n            }\n        });\n        // if we previously had a then/catch block, destroy it\n        if (info.current !== info.pending) {\n            update(info.pending, 0);\n            return true;\n        }\n    }\n    else {\n        if (info.current !== info.then) {\n            update(info.then, 1, info.value, promise);\n            return true;\n        }\n        info.resolved = promise;\n    }\n}\n\nconst globals = (typeof window !== 'undefined'\n    ? window\n    : typeof globalThis !== 'undefined'\n        ? globalThis\n        : global);\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction outro_and_destroy_block(block, lookup) {\n    transition_out(block, 1, 1, () => {\n        lookup.delete(block.key);\n    });\n}\nfunction fix_and_destroy_block(block, lookup) {\n    block.f();\n    destroy_block(block, lookup);\n}\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n    block.f();\n    outro_and_destroy_block(block, lookup);\n}\nfunction update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            block.p(child_ctx, dirty);\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next);\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    return new_blocks;\n}\nfunction validate_each_keys(ctx, list, get_context, get_key) {\n    const keys = new Set();\n    for (let i = 0; i < list.length; i++) {\n        const key = get_key(get_context(ctx, list, i));\n        if (keys.has(key)) {\n            throw new Error('Cannot have duplicate keys in a keyed each');\n        }\n        keys.add(key);\n    }\n}\n\nfunction get_spread_update(levels, updates) {\n    const update = {};\n    const to_null_out = {};\n    const accounted_for = { $$scope: 1 };\n    let i = levels.length;\n    while (i--) {\n        const o = levels[i];\n        const n = updates[i];\n        if (n) {\n            for (const key in o) {\n                if (!(key in n))\n                    to_null_out[key] = 1;\n            }\n            for (const key in n) {\n                if (!accounted_for[key]) {\n                    update[key] = n[key];\n                    accounted_for[key] = 1;\n                }\n            }\n            levels[i] = n;\n        }\n        else {\n            for (const key in o) {\n                accounted_for[key] = 1;\n            }\n        }\n    }\n    for (const key in to_null_out) {\n        if (!(key in update))\n            update[key] = undefined;\n    }\n    return update;\n}\nfunction get_spread_object(spread_props) {\n    return typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n\n// source: https://html.spec.whatwg.org/multipage/indices.html\nconst boolean_attributes = new Set([\n    'allowfullscreen',\n    'allowpaymentrequest',\n    'async',\n    'autofocus',\n    'autoplay',\n    'checked',\n    'controls',\n    'default',\n    'defer',\n    'disabled',\n    'formnovalidate',\n    'hidden',\n    'ismap',\n    'loop',\n    'multiple',\n    'muted',\n    'nomodule',\n    'novalidate',\n    'open',\n    'playsinline',\n    'readonly',\n    'required',\n    'reversed',\n    'selected'\n]);\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nfunction spread(args, classes_to_add) {\n    const attributes = Object.assign({}, ...args);\n    if (classes_to_add) {\n        if (attributes.class == null) {\n            attributes.class = classes_to_add;\n        }\n        else {\n            attributes.class += ' ' + classes_to_add;\n        }\n    }\n    let str = '';\n    Object.keys(attributes).forEach(name => {\n        if (invalid_attribute_name_character.test(name))\n            return;\n        const value = attributes[name];\n        if (value === true)\n            str += ' ' + name;\n        else if (boolean_attributes.has(name.toLowerCase())) {\n            if (value)\n                str += ' ' + name;\n        }\n        else if (value != null) {\n            str += ` ${name}=\"${String(value).replace(/\"/g, '&#34;').replace(/'/g, '&#39;')}\"`;\n        }\n    });\n    return str;\n}\nconst escaped = {\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;'\n};\nfunction escape(html) {\n    return String(html).replace(/[\"'&<>]/g, match => escaped[match]);\n}\nfunction each(items, fn) {\n    let str = '';\n    for (let i = 0; i < items.length; i += 1) {\n        str += fn(items[i], i);\n    }\n    return str;\n}\nconst missing_component = {\n    $$render: () => ''\n};\nfunction validate_component(component, name) {\n    if (!component || !component.$$render) {\n        if (name === 'svelte:component')\n            name += ' this={...}';\n        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);\n    }\n    return component;\n}\nfunction debug(file, line, column, values) {\n    console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n    console.log(values); // eslint-disable-line no-console\n    return '';\n}\nlet on_destroy;\nfunction create_ssr_component(fn) {\n    function $$render(result, props, bindings, slots, context) {\n        const parent_component = current_component;\n        const $$ = {\n            on_destroy,\n            context: new Map(parent_component ? parent_component.$$.context : context || []),\n            // these will be immediately discarded\n            on_mount: [],\n            before_update: [],\n            after_update: [],\n            callbacks: blank_object()\n        };\n        set_current_component({ $$ });\n        const html = fn(result, props, bindings, slots);\n        set_current_component(parent_component);\n        return html;\n    }\n    return {\n        render: (props = {}, { $$slots = {}, context = new Map() } = {}) => {\n            on_destroy = [];\n            const result = { title: '', head: '', css: new Set() };\n            const html = $$render(result, props, {}, $$slots, context);\n            run_all(on_destroy);\n            return {\n                html,\n                css: {\n                    code: Array.from(result.css).map(css => css.code).join('\\n'),\n                    map: null // TODO\n                },\n                head: result.title + result.head\n            };\n        },\n        $$render\n    };\n}\nfunction add_attribute(name, value, boolean) {\n    if (value == null || (boolean && !value))\n        return '';\n    return ` ${name}${value === true ? '' : `=${typeof value === 'string' ? JSON.stringify(escape(value)) : `\"${value}\"`}`}`;\n}\nfunction add_classes(classes) {\n    return classes ? ` class=\"${classes}\"` : '';\n}\n\nfunction bind(component, name, callback) {\n    const index = component.$$.props[name];\n    if (index !== undefined) {\n        component.$$.bound[index] = callback;\n        callback(component.$$.ctx[index]);\n    }\n}\nfunction create_component(block) {\n    block && block.c();\n}\nfunction claim_component(block, parent_nodes) {\n    block && block.l(parent_nodes);\n}\nfunction mount_component(component, target, anchor, customElement) {\n    const { fragment, on_mount, on_destroy, after_update } = component.$$;\n    fragment && fragment.m(target, anchor);\n    if (!customElement) {\n        // onMount happens before the initial afterUpdate\n        add_render_callback(() => {\n            const new_on_destroy = on_mount.map(run).filter(is_function);\n            if (on_destroy) {\n                on_destroy.push(...new_on_destroy);\n            }\n            else {\n                // Edge case - component was destroyed immediately,\n                // most likely as a result of a binding initialising\n                run_all(new_on_destroy);\n            }\n            component.$$.on_mount = [];\n        });\n    }\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    const $$ = component.$$;\n    if ($$.fragment !== null) {\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = [];\n    }\n}\nfunction make_dirty(component, i) {\n    if (component.$$.dirty[0] === -1) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty.fill(0);\n    }\n    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));\n}\nfunction init(component, options, instance, create_fragment, not_equal, props, dirty = [-1]) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: null,\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        on_disconnect: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(parent_component ? parent_component.$$.context : options.context || []),\n        // everything else\n        callbacks: blank_object(),\n        dirty,\n        skip_bound: false\n    };\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, options.props || {}, (i, ret, ...rest) => {\n            const value = rest.length ? rest[0] : ret;\n            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n                if (!$$.skip_bound && $$.bound[i])\n                    $$.bound[i](value);\n                if (ready)\n                    make_dirty(component, i);\n            }\n            return ret;\n        })\n        : [];\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    // `false` as a special case of no DOM component\n    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n    if (options.target) {\n        if (options.hydrate) {\n            const nodes = children(options.target);\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.l(nodes);\n            nodes.forEach(detach);\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor, options.customElement);\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement === 'function') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            const { on_mount } = this.$$;\n            this.$$.on_disconnect = on_mount.map(run).filter(is_function);\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        disconnectedCallback() {\n            run_all(this.$$.on_disconnect);\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set($$props) {\n            if (this.$$set && !is_empty($$props)) {\n                this.$$.skip_bound = true;\n                this.$$set($$props);\n                this.$$.skip_bound = false;\n            }\n        }\n    };\n}\n/**\n * Base class for Svelte components. Used when dev=false.\n */\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set($$props) {\n        if (this.$$set && !is_empty($$props)) {\n            this.$$.skip_bound = true;\n            this.$$set($$props);\n            this.$$.skip_bound = false;\n        }\n    }\n}\n\nfunction dispatch_dev(type, detail) {\n    document.dispatchEvent(custom_event(type, Object.assign({ version: '3.37.0' }, detail)));\n}\nfunction append_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append(target, node);\n}\nfunction insert_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert(target, node, anchor);\n}\nfunction detach_dev(node) {\n    dispatch_dev('SvelteDOMRemove', { node });\n    detach(node);\n}\nfunction detach_between_dev(before, after) {\n    while (before.nextSibling && before.nextSibling !== after) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction detach_before_dev(after) {\n    while (after.previousSibling) {\n        detach_dev(after.previousSibling);\n    }\n}\nfunction detach_after_dev(before) {\n    while (before.nextSibling) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation) {\n    const modifiers = options === true ? ['capture'] : options ? Array.from(Object.keys(options)) : [];\n    if (has_prevent_default)\n        modifiers.push('preventDefault');\n    if (has_stop_propagation)\n        modifiers.push('stopPropagation');\n    dispatch_dev('SvelteDOMAddEventListener', { node, event, handler, modifiers });\n    const dispose = listen(node, event, handler, options);\n    return () => {\n        dispatch_dev('SvelteDOMRemoveEventListener', { node, event, handler, modifiers });\n        dispose();\n    };\n}\nfunction attr_dev(node, attribute, value) {\n    attr(node, attribute, value);\n    if (value == null)\n        dispatch_dev('SvelteDOMRemoveAttribute', { node, attribute });\n    else\n        dispatch_dev('SvelteDOMSetAttribute', { node, attribute, value });\n}\nfunction prop_dev(node, property, value) {\n    node[property] = value;\n    dispatch_dev('SvelteDOMSetProperty', { node, property, value });\n}\nfunction dataset_dev(node, property, value) {\n    node.dataset[property] = value;\n    dispatch_dev('SvelteDOMSetDataset', { node, property, value });\n}\nfunction set_data_dev(text, data) {\n    data = '' + data;\n    if (text.wholeText === data)\n        return;\n    dispatch_dev('SvelteDOMSetData', { node: text, data });\n    text.data = data;\n}\nfunction validate_each_argument(arg) {\n    if (typeof arg !== 'string' && !(arg && typeof arg === 'object' && 'length' in arg)) {\n        let msg = '{#each} only iterates over array-like objects.';\n        if (typeof Symbol === 'function' && arg && Symbol.iterator in arg) {\n            msg += ' You can use a spread to convert this iterable into an array.';\n        }\n        throw new Error(msg);\n    }\n}\nfunction validate_slots(name, slot, keys) {\n    for (const slot_key of Object.keys(slot)) {\n        if (!~keys.indexOf(slot_key)) {\n            console.warn(`<${name}> received an unexpected slot \"${slot_key}\".`);\n        }\n    }\n}\n/**\n * Base class for Svelte components with some minor dev-enhancements. Used when dev=true.\n */\nclass SvelteComponentDev extends SvelteComponent {\n    constructor(options) {\n        if (!options || (!options.target && !options.$$inline)) {\n            throw new Error(\"'target' is a required option\");\n        }\n        super();\n    }\n    $destroy() {\n        super.$destroy();\n        this.$destroy = () => {\n            console.warn('Component was already destroyed'); // eslint-disable-line no-console\n        };\n    }\n    $capture_state() { }\n    $inject_state() { }\n}\n/**\n * Base class to create strongly typed Svelte components.\n * This only exists for typing purposes and should be used in `.d.ts` files.\n *\n * ### Example:\n *\n * You have component library on npm called `component-library`, from which\n * you export a component called `MyComponent`. For Svelte+TypeScript users,\n * you want to provide typings. Therefore you create a `index.d.ts`:\n * ```ts\n * import { SvelteComponentTyped } from \"svelte\";\n * export class MyComponent extends SvelteComponentTyped<{foo: string}> {}\n * ```\n * Typing this makes it possible for IDEs like VS Code with the Svelte extension\n * to provide intellisense and to use the component like this in a Svelte file\n * with TypeScript:\n * ```svelte\n * <script lang=\"ts\">\n * \timport { MyComponent } from \"component-library\";\n * </script>\n * <MyComponent foo={'bar'} />\n * ```\n *\n * #### Why not make this part of `SvelteComponent(Dev)`?\n * Because\n * ```ts\n * class ASubclassOfSvelteComponent extends SvelteComponent<{foo: string}> {}\n * const component: typeof SvelteComponent = ASubclassOfSvelteComponent;\n * ```\n * will throw a type error, so we need to seperate the more strictly typed class.\n */\nclass SvelteComponentTyped extends SvelteComponentDev {\n    constructor(options) {\n        super(options);\n    }\n}\nfunction loop_guard(timeout) {\n    const start = Date.now();\n    return () => {\n        if (Date.now() - start > timeout) {\n            throw new Error('Infinite loop detected');\n        }\n    };\n}\n\nexport { HtmlTag, SvelteComponent, SvelteComponentDev, SvelteComponentTyped, SvelteElement, action_destroyer, add_attribute, add_classes, add_flush_callback, add_location, add_render_callback, add_resize_listener, add_transform, afterUpdate, append, append_dev, assign, attr, attr_dev, attribute_to_object, beforeUpdate, bind, binding_callbacks, blank_object, bubble, check_outros, children, claim_component, claim_element, claim_space, claim_text, clear_loops, component_subscribe, compute_rest_props, compute_slots, createEventDispatcher, create_animation, create_bidirectional_transition, create_component, create_in_transition, create_out_transition, create_slot, create_ssr_component, current_component, custom_event, dataset_dev, debug, destroy_block, destroy_component, destroy_each, detach, detach_after_dev, detach_before_dev, detach_between_dev, detach_dev, dirty_components, dispatch_dev, each, element, element_is, empty, escape, escaped, exclude_internal_props, fix_and_destroy_block, fix_and_outro_and_destroy_block, fix_position, flush, getContext, get_binding_group_value, get_current_component, get_custom_elements_slots, get_slot_changes, get_slot_context, get_spread_object, get_spread_update, get_store_value, globals, group_outros, handle_promise, hasContext, has_prop, identity, init, insert, insert_dev, intros, invalid_attribute_name_character, is_client, is_crossorigin, is_empty, is_function, is_promise, listen, listen_dev, loop, loop_guard, missing_component, mount_component, noop, not_equal, now, null_to_empty, object_without_properties, onDestroy, onMount, once, outro_and_destroy_block, prevent_default, prop_dev, query_selector_all, raf, run, run_all, safe_not_equal, schedule_update, select_multiple_value, select_option, select_options, select_value, self, setContext, set_attributes, set_current_component, set_custom_element_data, set_data, set_data_dev, set_input_type, set_input_value, set_now, set_raf, set_store_value, set_style, set_svg_attributes, space, spread, stop_propagation, subscribe, svg_element, text, tick, time_ranges_to_array, to_number, toggle_class, transition_in, transition_out, update_keyed_each, update_slot, update_slot_spread, validate_component, validate_each_argument, validate_each_keys, validate_slots, validate_store, xlink_attr };\n","import { noop, safe_not_equal, subscribe, run_all, is_function } from '../internal/index.mjs';\nexport { get_store_value as get } from '../internal/index.mjs';\n\nconst subscriber_queue = [];\n/**\n * Creates a `Readable` store that allows reading by subscription.\n * @param value initial value\n * @param {StartStopNotifier}start start and stop notifications for subscriptions\n */\nfunction readable(value, start) {\n    return {\n        subscribe: writable(value, start).subscribe\n    };\n}\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n * @param {*=}value initial value\n * @param {StartStopNotifier=}start start and stop notifications for subscriptions\n */\nfunction writable(value, start = noop) {\n    let stop;\n    const subscribers = [];\n    function set(new_value) {\n        if (safe_not_equal(value, new_value)) {\n            value = new_value;\n            if (stop) { // store is ready\n                const run_queue = !subscriber_queue.length;\n                for (let i = 0; i < subscribers.length; i += 1) {\n                    const s = subscribers[i];\n                    s[1]();\n                    subscriber_queue.push(s, value);\n                }\n                if (run_queue) {\n                    for (let i = 0; i < subscriber_queue.length; i += 2) {\n                        subscriber_queue[i][0](subscriber_queue[i + 1]);\n                    }\n                    subscriber_queue.length = 0;\n                }\n            }\n        }\n    }\n    function update(fn) {\n        set(fn(value));\n    }\n    function subscribe(run, invalidate = noop) {\n        const subscriber = [run, invalidate];\n        subscribers.push(subscriber);\n        if (subscribers.length === 1) {\n            stop = start(set) || noop;\n        }\n        run(value);\n        return () => {\n            const index = subscribers.indexOf(subscriber);\n            if (index !== -1) {\n                subscribers.splice(index, 1);\n            }\n            if (subscribers.length === 0) {\n                stop();\n                stop = null;\n            }\n        };\n    }\n    return { set, update, subscribe };\n}\nfunction derived(stores, fn, initial_value) {\n    const single = !Array.isArray(stores);\n    const stores_array = single\n        ? [stores]\n        : stores;\n    const auto = fn.length < 2;\n    return readable(initial_value, (set) => {\n        let inited = false;\n        const values = [];\n        let pending = 0;\n        let cleanup = noop;\n        const sync = () => {\n            if (pending) {\n                return;\n            }\n            cleanup();\n            const result = fn(single ? values[0] : values, set);\n            if (auto) {\n                set(result);\n            }\n            else {\n                cleanup = is_function(result) ? result : noop;\n            }\n        };\n        const unsubscribers = stores_array.map((store, i) => subscribe(store, (value) => {\n            values[i] = value;\n            pending &= ~(1 << i);\n            if (inited) {\n                sync();\n            }\n        }, () => {\n            pending |= (1 << i);\n        }));\n        inited = true;\n        sync();\n        return function stop() {\n            run_all(unsubscribers);\n            cleanup();\n        };\n    });\n}\n\nexport { derived, readable, writable };\n","import { writable } from 'svelte/store'\n\nexport const logs = writable([\"Try 'help' command\"])\n\nexport const Print = (message) => {\n    logs.update((l) => {\n        if (l.length > 100) {\n            return [...l, message].slice(l.length - 100)\n        }\n        return [...l, message]\n    })\n}\n\nexport const BreakLine = () => {\n    logs.update((l) => [...l, 1])\n}\n\nexport const ClearLog = () => {\n    logs.set([])\n}\n\nexport const Prompt = (command) => {\n    Print(`USER>${command}`)\n}\n","<script>\n    import { createEventDispatcher, beforeUpdate, afterUpdate } from 'svelte'\n    import { logs, Print, ClearLog, BreakLine, Prompt } from './store'\n    const dispatch = createEventDispatcher()\n\n    let history = []\n    let command = 'help'\n\n    let logs_list\n    let autoscroll\n\n    beforeUpdate(() => {\n        autoscroll =\n            logs_list &&\n            logs_list.offsetHeight + logs_list.scrollTop >\n                logs_list.scrollHeight - 20\n    })\n\n    afterUpdate(() => {\n        if (autoscroll) logs_list.scrollTo(0, logs_list.scrollHeight)\n    })\n\n    const COMMAND_LIB = {\n        help: () => {\n            Print('==============K-MEANS CLUSTERING==============')\n            BreakLine()\n            Print('help')\n            Print('Show this help')\n            BreakLine()\n            Print('assign')\n            Print(\n                'Assign each observation to the cluster with the nearest mean.'\n            )\n            BreakLine()\n            Print('update')\n            Print(\n                'Recalculate means (centroids) for observations assigned to each cluster.'\n            )\n            BreakLine()\n            Print('fit')\n            Print(\n                'Repeat assign and update until the assignments no longer change.'\n            )\n            BreakLine()\n            Print('set --help')\n            Print('To show how to set variables')\n            BreakLine()\n            Print('reset')\n            Print(\n                'Shuffle data again, it will recreate centers of data and random change position of labels'\n            )\n            BreakLine()\n            Print('git be email web')\n            Print('Show about me')\n            BreakLine()\n            Print('clear history')\n            Print('Same with terminal')\n        },\n        assign: () => {\n            dispatch('assign')\n        },\n        update: () => {\n            dispatch('update')\n        },\n        fit: () => {\n            dispatch('fit')\n        },\n        reset: () => {\n            dispatch('reset')\n        },\n        history: () => {\n            history.forEach((c) => {\n                Print(c)\n            })\n        },\n        clear: () => {\n            ClearLog()\n        },\n        git: () => {\n            window.open(\n                'https://github.com/vanviethieuanh/k-means-clustering',\n                '_blank'\n            )\n        },\n        github: () => {\n            window.open(\n                'https://github.com/vanviethieuanh/k-means-clustering',\n                '_blank'\n            )\n        },\n        be: () => {\n            window.open('https://www.behance.net/vanviethieuanh', '_blank')\n        },\n        behance: () => {\n            window.open('https://www.behance.net/vanviethieuanh', '_blank')\n        },\n        web: () => {\n            window.open('https://vanviethieuanh.com/', '_blank')\n        },\n        email: () => {\n            navigator.clipboard.writeText('vanviethieuanh@gmail.com')\n            Print('✉ Email copied to clipboard!')\n        },\n        mail: () => {\n            navigator.clipboard.writeText('vanviethieuanh@gmail.com')\n            Print('✉ Email copied to clipboard!')\n        },\n    }\n\n    function Excute() {\n        history.push(command)\n        Prompt(command)\n\n        if (command.slice(0, 3) == 'set') {\n            const commands = command.split(' ')\n            command = ''\n\n            if (commands[1] == '--help') {\n                Print(`set label <n>`)\n                Print(`Set the amount of label (2≤n≤9)`)\n                BreakLine()\n                Print(`set data <n>`)\n                Print(\n                    `Set the amount data for each label (n ≥ 10 , should be < 100 for better visualize)`\n                )\n                BreakLine()\n                Print(`set error <n>`)\n                Print(`Set the error range for data from center point (5≤n≤50)`)\n                return\n            }\n\n            if (commands[1] == 'label' && commands[2] && !isNaN(commands[2])) {\n                if (commands[2] <= 9 && commands[2] >= 2) {\n                    dispatch('setLabel', { num: parseInt(commands[2]) })\n                    return\n                }\n            }\n\n            if (commands[1] == 'data' && commands[2] && !isNaN(commands[2])) {\n                if (commands[2] >= 10) {\n                    dispatch('setData', { num: parseInt(commands[2]) })\n                    return\n                }\n            }\n            if (commands[1] == 'error' && commands[2] && !isNaN(commands[2])) {\n                if (commands[2] <= 50 && commands[2] >= 5) {\n                    dispatch('setError', { num: parseInt(commands[2]) })\n                    return\n                }\n            }\n\n            Print(`Type \"set --help\" for more information`)\n            return\n        }\n\n        if (COMMAND_LIB[command]) {\n            COMMAND_LIB[command]()\n        } else {\n            Print(`Command not found: ${command}`)\n        }\n        command = ''\n    }\n\n    const onKeyPress = (e) => {\n        if (e.charCode === 13) Excute()\n    }\n</script>\n\n<div class=\"terminal\">\n    <div class=\"logs\">\n        <ul bind:this={logs_list}>\n            {#each $logs as log}\n                {#if log == 1}\n                    <br />\n                {:else}\n                    <li>{log}</li>\n                {/if}\n            {/each}\n        </ul>\n    </div>\n\n    <div class=\"prompt\">\n        <p>USER></p>\n        <input bind:value={command} on:keypress={onKeyPress} />\n    </div>\n</div>\n\n<style>\n    .terminal {\n        height: 100%;\n        width: 45ch;\n\n        display: grid;\n        flex-direction: column;\n        grid-auto-rows: 1fr auto;\n\n        font-size: 14px;\n        font-family: 'Source Code Pro', monospace;\n    }\n\n    .terminal input {\n        margin-top: auto;\n\n        background: transparent;\n        border: none;\n        outline: none;\n        border-radius: 0;\n\n        color: white;\n\n        margin: 0;\n    }\n\n    .prompt {\n        display: flex;\n        align-items: center;\n    }\n\n    .prompt > p {\n        color: white;\n        padding: 0;\n        margin: 0;\n\n        height: fit-content;\n    }\n\n    .logs {\n        height: 100%;\n        width: 100%;\n        overflow: hidden;\n        position: relative;\n    }\n    ul {\n        position: absolute;\n        top: 0px;\n        bottom: 0px;\n        left: 0px;\n        right: -15px;\n        overflow: auto;\n\n        padding: 0;\n        margin: 0;\n\n        scrollbar-width: 4px;\n\n        display: flex;\n        flex-direction: column;\n        justify-content: flex-start;\n        align-items: flex-start;\n    }\n\n    ul::-webkit-scrollbar {\n        width: 4px;\n    }\n    li {\n        list-style: none;\n        padding: 0;\n\n        text-align: left;\n        color: white;\n    }\n\n    @media only screen and (min-device-width: 375px) and (max-device-width: 812px) and (-webkit-min-device-pixel-ratio: 3) and (orientation: portrait) {\n        ul,\n        .prompt {\n            padding: 0 2rem;\n        }\n    }\n</style>\n","// Taken from https://github.com/rafgraph/detect-it/blob/main/src/index.ts\n\nconst w = typeof window !== 'undefined' ? window : { screen: {}, navigator: {} }\nconst matchMedia = w.matchMedia || (() => ({ matches: false }))\n\nlet passiveOptionAccessed = false\nconst options = {\n  get passive () {\n    return (passiveOptionAccessed = true)\n  }\n}\n\nconst noop = () => {}\nw.addEventListener && w.addEventListener('p', noop, options)\nw.removeEventListener && w.removeEventListener('p', noop, false)\n\nexport const supportsPassiveEvents = passiveOptionAccessed\n\nexport const supportsPointerEvents = 'PointerEvent' in w\n\nconst onTouchStartInWindow = 'ontouchstart' in w\nconst touchEventInWindow = 'TouchEvent' in w\n\nexport const supportsTouchEvents =\n  onTouchStartInWindow || (touchEventInWindow && matchMedia('(any-pointer: coarse)').matches)\n\nconst hasTouch = (w.navigator.maxTouchPoints || 0) > 0 || supportsTouchEvents\n\nconst userAgent = w.navigator.userAgent || ''\n\nconst isIPad =\n  matchMedia('(pointer: coarse)').matches &&\n  /iPad|Macintosh/.test(userAgent) &&\n  Math.min(w.screen.width || 0, w.screen.height || 0) >= 768\n\nconst hasCoarsePrimaryPointer =\n  (matchMedia('(pointer: coarse)').matches ||\n  (!matchMedia('(pointer: fine)').matches && onTouchStartInWindow)) &&\n  !/Windows.*Firefox/.test(userAgent)\n\nconst hasAnyHoverOrAnyFinePointer =\n  matchMedia('(any-pointer: fine)').matches ||\n  matchMedia('(any-hover: hover)').matches ||\n  isIPad || !onTouchStartInWindow\n\nexport const deviceType =\n  hasTouch && (hasAnyHoverOrAnyFinePointer || !hasCoarsePrimaryPointer)\n    ? 'hybrid'\n    : hasTouch\n      ? 'touchOnly'\n      : 'mouseOnly'\n\nexport const primaryInput =\n  deviceType === 'mouseOnly'\n    ? 'mouse'\n    : deviceType === 'touchOnly'\n      ? 'touch'\n      : hasCoarsePrimaryPointer\n        ? 'touch'\n        : 'mouse'\n","import { getContext, setContext } from 'svelte'\nimport { writable } from 'svelte/store'\n\nclass GraphicContext {\n  constructor ({ renderer }) {\n    if (!renderer) {\n      this._rendererOptions = { output: 'svg' }\n    }\n\n    if (renderer) {\n      validateRendererOptions(renderer)\n      this._rendererOptions = renderer\n    }\n  }\n\n  output () {\n    return this._rendererOptions.output\n  }\n}\n\nfunction validateRendererOptions (options) {\n  if (!(\n    options.constructor === Object &&\n    'output' in options &&\n    ['svg'].includes(options.output)\n  )) {\n    throw new Error(`Invalid renderer options: ${JSON.stringify(options)}`)\n  }\n}\n\nconst key = {}\n\nexport function subscribe () {\n  return getContext(key)\n}\n\nexport function init () {\n  const graphicContext = writable()\n  setContext(key, graphicContext)\n\n  return graphicContext\n}\n\nexport function update (graphicContext, options) {\n  graphicContext.set(new GraphicContext(options))\n}\n","export function parsePadding (_padding) {\n  const padding = _padding === undefined\n    ? 0\n    : _padding\n\n  if (padding.constructor === Number) {\n    return { left: padding, right: padding, top: padding, bottom: padding }\n  }\n\n  if (padding.constructor === Object) {\n    return Object.assign(\n      parsePadding(0),\n      padding\n    )\n  }\n\n  throw invalidPaddingError\n}\n\nconst invalidPaddingError = new Error('Invalid padding specification')\n\nexport function applyPadding (range, offsetMin, offsetMax) {\n  ensurePaddingSmallerThanRange(range, offsetMin, offsetMax)\n\n  if (range[0] < range[1]) {\n    return [range[0] + offsetMin, range[1] - offsetMax]\n  } else {\n    return [range[0] - offsetMax, range[1] + offsetMin]\n  }\n}\n\nexport function removePadding (range, offsetMin, offsetMax) {\n  if (range[0] < range[1]) {\n    return [range[0] - offsetMin, range[1] + offsetMax]\n  } else {\n    return [range[0] + offsetMax, range[1] - offsetMin]\n  }\n}\n\nfunction ensurePaddingSmallerThanRange (range, min, max) {\n  if (Math.abs(range[0] - range[1]) < (min + max)) {\n    console.warn('Padding cannot exceed width or height')\n  }\n}\n","import { applyPadding } from '../../utils/padding.js'\n\nexport function getRanges ({ coordinates }) {\n  return {\n    rangeX: [coordinates.x1, coordinates.x2],\n    rangeY: [coordinates.y1, coordinates.y2]\n  }\n}\n\nexport function getFinalRanges (sectionContext, ranges, padding) {\n  const { flipX, flipY, zoomIdentity } = sectionContext\n  const { rangeX, rangeY } = ranges\n  const { left, right, top, bottom } = padding\n\n  let finalRangeX = applyFlip(rangeX, flipX)\n  finalRangeX = applyPadding(finalRangeX, left, right)\n\n  if (zoomIdentity) {\n    validateZoomFactor(zoomIdentity.kx)\n    finalRangeX = applyZoom(finalRangeX, zoomIdentity.kx, zoomIdentity.x)\n  }\n\n  let finalRangeY = applyFlip(rangeY, flipY)\n  finalRangeY = applyPadding(finalRangeY, top, bottom)\n\n  if (zoomIdentity) {\n    validateZoomFactor(zoomIdentity.ky)\n    finalRangeY = applyZoom(finalRangeY, zoomIdentity.ky, zoomIdentity.y)\n  }\n\n  return { finalRangeX, finalRangeY }\n}\n\nfunction applyFlip (range, flip) {\n  return flip\n    ? [range[1], range[0]]\n    : range\n}\n\nfunction applyZoom (range, k, translate) {\n  return [\n    range[0] * k + translate,\n    range[1] * k + translate\n  ]\n}\n\nfunction validateZoomFactor (k) {\n  if (k < 0) throw new Error('Zoom factors have to be positive')\n}\n","export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import ascending from \"./ascending.js\";\n\nexport default function(f) {\n  let delta = f;\n  let compare = f;\n\n  if (f.length === 1) {\n    delta = (d, x) => f(d) - x;\n    compare = ascendingComparator(f);\n  }\n\n  function left(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    while (lo < hi) {\n      const mid = (lo + hi) >>> 1;\n      if (compare(a[mid], x) < 0) lo = mid + 1;\n      else hi = mid;\n    }\n    return lo;\n  }\n\n  function right(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    while (lo < hi) {\n      const mid = (lo + hi) >>> 1;\n      if (compare(a[mid], x) > 0) hi = mid;\n      else lo = mid + 1;\n    }\n    return lo;\n  }\n\n  function center(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    const i = left(a, x, lo, hi - 1);\n    return i > lo && delta(a[i - 1], x) > -delta(a[i], x) ? i - 1 : i;\n  }\n\n  return {left, center, right};\n}\n\nfunction ascendingComparator(f) {\n  return (d, x) => ascending(f(d), x);\n}\n","import ascending from \"./ascending.js\";\nimport bisector from \"./bisector.js\";\nimport number from \"./number.js\";\n\nconst ascendingBisect = bisector(ascending);\nexport const bisectRight = ascendingBisect.right;\nexport const bisectLeft = ascendingBisect.left;\nexport const bisectCenter = bisector(number).center;\nexport default bisectRight;\n","export default function(x) {\n  return x === null ? NaN : +x;\n}\n\nexport function* numbers(values, valueof) {\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  }\n}\n","// https://github.com/python/cpython/blob/a74eea238f5baba15797e2e8b570d153bc8690a7/Modules/mathmodule.c#L1423\nexport class Adder {\n  constructor() {\n    this._partials = new Float64Array(32);\n    this._n = 0;\n  }\n  add(x) {\n    const p = this._partials;\n    let i = 0;\n    for (let j = 0; j < this._n && j < 32; j++) {\n      const y = p[j],\n        hi = x + y,\n        lo = Math.abs(x) < Math.abs(y) ? x - (hi - y) : y - (hi - x);\n      if (lo) p[i++] = lo;\n      x = hi;\n    }\n    p[i] = x;\n    this._n = i + 1;\n    return this;\n  }\n  valueOf() {\n    const p = this._partials;\n    let n = this._n, x, y, lo, hi = 0;\n    if (n > 0) {\n      hi = p[--n];\n      while (n > 0) {\n        x = hi;\n        y = p[--n];\n        hi = x + y;\n        lo = y - (hi - x);\n        if (lo) break;\n      }\n      if (n > 0 && ((lo < 0 && p[n - 1] < 0) || (lo > 0 && p[n - 1] > 0))) {\n        y = lo * 2;\n        x = hi + y;\n        if (y == x - hi) hi = x;\n      }\n    }\n    return hi;\n  }\n}\n\nexport function fsum(values, valueof) {\n  const adder = new Adder();\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value = +value) {\n        adder.add(value);\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if (value = +valueof(value, ++index, values)) {\n        adder.add(value);\n      }\n    }\n  }\n  return +adder;\n}\n\nexport function fcumsum(values, valueof) {\n  const adder = new Adder();\n  let index = -1;\n  return Float64Array.from(values, valueof === undefined\n      ? v => adder.add(+v || 0)\n      : v => adder.add(+valueof(v, ++index, values) || 0)\n  );\n}\n","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nexport default function(start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    let r0 = Math.round(start / step), r1 = Math.round(stop / step);\n    if (r0 * step < start) ++r0;\n    if (r1 * step > stop) --r1;\n    ticks = new Array(n = r1 - r0 + 1);\n    while (++i < n) ticks[i] = (r0 + i) * step;\n  } else {\n    step = -step;\n    let r0 = Math.round(start * step), r1 = Math.round(stop * step);\n    if (r0 / step < start) ++r0;\n    if (r1 / step > stop) --r1;\n    ticks = new Array(n = r1 - r0 + 1);\n    while (++i < n) ticks[i] = (r0 + i) / step;\n  }\n\n  if (reverse) ticks.reverse();\n\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0\n      ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)\n      : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\n\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;\n  else if (error >= e5) step1 *= 5;\n  else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}\n","export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.range(domain); break;\n    default: this.range(range).domain(domain); break;\n  }\n  return this;\n}\n\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: {\n      if (typeof domain === \"function\") this.interpolator(domain);\n      else this.range(domain);\n      break;\n    }\n    default: {\n      this.domain(domain);\n      if (typeof interpolator === \"function\") this.interpolator(interpolator);\n      else this.range(interpolator);\n      break;\n    }\n  }\n  return this;\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy: function(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n}\n\nfunction rgb_formatRgb() {\n  var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n  return (a === 1 ? \"rgb(\" : \"rgba(\")\n      + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n      + (a === 1 ? \")\" : \", \" + a + \")\");\n}\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"hsl(\" : \"hsla(\")\n        + (this.h || 0) + \", \"\n        + (this.s || 0) * 100 + \"%, \"\n        + (this.l || 0) * 100 + \"%\"\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export default x => () => x;\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function(t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n}\n\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n","import value from \"./value.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\n\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import value from \"./value.js\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport {genericArray} from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : isNumberArray(b) ? numberArray\n      : Array.isArray(b) ? genericArray\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return Math.round(a * (1 - t) + b * t);\n  };\n}\n","export default function number(x) {\n  return +x;\n}\n","import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateNumber, interpolateRound} from \"d3-interpolate\";\nimport constant from \"./constant.js\";\nimport number from \"./number.js\";\n\nvar unit = [0, 1];\n\nexport function identity(x) {\n  return x;\n}\n\nfunction normalize(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(isNaN(b) ? NaN : 0.5);\n}\n\nfunction clamper(a, b) {\n  var t;\n  if (a > b) t = a, a = b, b = t;\n  return function(x) { return Math.max(a, Math.min(b, x)); };\n}\n\n// normalize(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// interpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding range value x in [a,b].\nfunction bimap(domain, range, interpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = normalize(d1, d0), r0 = interpolate(r1, r0);\n  else d0 = normalize(d0, d1), r0 = interpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, interpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = normalize(domain[i], domain[i + 1]);\n    r[i] = interpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport function transformer() {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      transform,\n      untransform,\n      unknown,\n      clamp = identity,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    var n = Math.min(domain.length, range.length);\n    if (clamp !== identity) clamp = clamper(domain[0], domain[n - 1]);\n    piecewise = n > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return x == null || isNaN(x = +x) ? unknown : (output || (output = piecewise(domain.map(transform), range, interpolate)))(transform(clamp(x)));\n  }\n\n  scale.invert = function(y) {\n    return clamp(untransform((input || (input = piecewise(range, domain.map(transform), interpolateNumber)))(y)));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = Array.from(_, number), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = Array.from(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = _ ? true : identity, rescale()) : clamp !== identity;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t, u) {\n    transform = t, untransform = u;\n    return rescale();\n  };\n}\n\nexport default function continuous() {\n  return transformer()(identity, identity);\n}\n","export default function constants(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function(x) {\n  return Math.abs(x = Math.round(x)) >= 1e21\n      ? x.toLocaleString(\"en\").replace(/,/g, \"\")\n      : x.toString(10);\n}\n\n// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimalParts(1.23) returns [\"123\", 0].\nexport function formatDecimalParts(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, ±Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x) {\n  return x = formatDecimalParts(Math.abs(x)), x ? x[1] : NaN;\n}\n","// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  return new FormatSpecifier({\n    fill: match[1],\n    align: match[2],\n    sign: match[3],\n    symbol: match[4],\n    zero: match[5],\n    width: match[6],\n    comma: match[7],\n    precision: match[8] && match[8].slice(1),\n    trim: match[9],\n    type: match[10]\n  });\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nexport function FormatSpecifier(specifier) {\n  this.fill = specifier.fill === undefined ? \" \" : specifier.fill + \"\";\n  this.align = specifier.align === undefined ? \">\" : specifier.align + \"\";\n  this.sign = specifier.sign === undefined ? \"-\" : specifier.sign + \"\";\n  this.symbol = specifier.symbol === undefined ? \"\" : specifier.symbol + \"\";\n  this.zero = !!specifier.zero;\n  this.width = specifier.width === undefined ? undefined : +specifier.width;\n  this.comma = !!specifier.comma;\n  this.precision = specifier.precision === undefined ? undefined : +specifier.precision;\n  this.trim = !!specifier.trim;\n  this.type = specifier.type === undefined ? \"\" : specifier.type + \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width === undefined ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision === undefined ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimalParts(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","import formatDecimal from \"./formatDecimal.js\";\nimport formatPrefixAuto from \"./formatPrefixAuto.js\";\nimport formatRounded from \"./formatRounded.js\";\n\nexport default {\n  \"%\": (x, p) => (x * 100).toFixed(p),\n  \"b\": (x) => Math.round(x).toString(2),\n  \"c\": (x) => x + \"\",\n  \"d\": formatDecimal,\n  \"e\": (x, p) => x.toExponential(p),\n  \"f\": (x, p) => x.toFixed(p),\n  \"g\": (x, p) => x.toPrecision(p),\n  \"o\": (x) => Math.round(x).toString(8),\n  \"p\": (x, p) => formatRounded(x * 100, p),\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": (x) => Math.round(x).toString(16).toUpperCase(),\n  \"x\": (x) => Math.round(x).toString(16)\n};\n","export default function(x) {\n  return x;\n}\n","import exponent from \"./exponent.js\";\nimport formatGroup from \"./formatGroup.js\";\nimport formatNumerals from \"./formatNumerals.js\";\nimport formatSpecifier from \"./formatSpecifier.js\";\nimport formatTrim from \"./formatTrim.js\";\nimport formatTypes from \"./formatTypes.js\";\nimport {prefixExponent} from \"./formatPrefixAuto.js\";\nimport identity from \"./identity.js\";\n\nvar map = Array.prototype.map,\n    prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"µ\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping === undefined || locale.thousands === undefined ? identity : formatGroup(map.call(locale.grouping, Number), locale.thousands + \"\"),\n      currencyPrefix = locale.currency === undefined ? \"\" : locale.currency[0] + \"\",\n      currencySuffix = locale.currency === undefined ? \"\" : locale.currency[1] + \"\",\n      decimal = locale.decimal === undefined ? \".\" : locale.decimal + \"\",\n      numerals = locale.numerals === undefined ? identity : formatNumerals(map.call(locale.numerals, String)),\n      percent = locale.percent === undefined ? \"%\" : locale.percent + \"\",\n      minus = locale.minus === undefined ? \"−\" : locale.minus + \"\",\n      nan = locale.nan === undefined ? \"NaN\" : locale.nan + \"\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision === undefined && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currencyPrefix : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currencySuffix : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision === undefined ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Determine the sign. -0 is not less than 0, but 1 / -0 is!\n        var valueNegative = value < 0 || 1 / value < 0;\n\n        // Perform the initial formatting.\n        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero after formatting, and no explicit positive sign is requested, hide the sign.\n        if (valueNegative && +value === 0 && sign !== \"+\") valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : minus) : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer “value” part that can be\n        // grouped, and fractional or exponential “suffix” part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n","// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nexport default function(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (!+s[i]) break out; if (i0 > 0) i0 = 0; break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n","import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function tickFormat(start, stop, count, specifier) {\n  var step = tickStep(start, stop, count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step) {\n  return Math.max(0, -exponent(Math.abs(step)));\n}\n","import {ticks, tickIncrement} from \"d3-array\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport tickFormat from \"./tickFormat.js\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    var d = domain();\n    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);\n  };\n\n  scale.nice = function(count) {\n    if (count == null) count = 10;\n\n    var d = domain();\n    var i0 = 0;\n    var i1 = d.length - 1;\n    var start = d[i0];\n    var stop = d[i1];\n    var prestep;\n    var step;\n    var maxIter = 10;\n\n    if (stop < start) {\n      step = start, start = stop, stop = step;\n      step = i0, i0 = i1, i1 = step;\n    }\n    \n    while (maxIter-- > 0) {\n      step = tickIncrement(start, stop, count);\n      if (step === prestep) {\n        d[i0] = start\n        d[i1] = stop\n        return domain(d);\n      } else if (step > 0) {\n        start = Math.floor(start / step) * step;\n        stop = Math.ceil(stop / step) * step;\n      } else if (step < 0) {\n        start = Math.ceil(start * step) / step;\n        stop = Math.floor(stop * step) / step;\n      } else {\n        break;\n      }\n      prestep = step;\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous();\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return linearish(scale);\n}\n","import { scaleLinear } from 'd3-scale'\n\nexport function createScales ({ scaleX, scaleY }, { rangeX, rangeY }) {\n  return {\n    scaleX: createScale(scaleX, rangeX),\n    scaleY: createScale(scaleY, rangeY)\n  }\n}\nfunction createScale (scale, range) {\n  if (scale) {\n    if (scale.constructor === Array) {\n      return scaleLinear().domain(scale).range(range)\n    }\n\n    const newScale = scale.copy().range(range)\n    newScale.invert = createInvertMethod(newScale)\n\n    return newScale\n  }\n\n  if (!scale) {\n    return scaleLinear().domain(range).range(range)\n  }\n}\n\n/**\n * Taken from react-vis:\n * https://github.com/uber/react-vis/blob/master/src/utils/scales-utils.js#L161\n *\n * By default, d3.scaleBand and d3.scalePoint do not have an .invert method, which is why\n * we are doing this. There are some PRs open for this, though, so hopefully we can\n * get rid of this in the future:\n * - https://github.com/d3/d3-scale/pull/151\n * - https://github.com/d3/d3-scale/pull/60\n */\nfunction createInvertMethod (scale) {\n  if (scale.invert) {\n    return scale.invert\n  }\n\n  return function invert (value) {\n    const [lower, upper] = scale.range()\n    const start = Math.min(lower, upper)\n    const stop = Math.max(lower, upper)\n\n    const flipped = upper < lower\n\n    const domain = scale.domain()\n    const lastIndex = domain.length - 1\n\n    if (value < start + scale.padding() * scale.step()) {\n      return domain[0]\n    }\n\n    if (value > stop - scale.padding() * scale.step()) {\n      return domain[lastIndex]\n    }\n\n    let index\n\n    if (isPointScale(scale)) {\n      index = Math.round((value - start - scale.padding() * scale.step()) / scale.step())\n    }\n\n    if (isBandScale(scale)) {\n      index = Math.round((value - start - scale.padding() * scale.step()) / scale.step())\n      if (index > lastIndex) index = lastIndex\n    }\n\n    return domain[flipped ? lastIndex - index : index]\n  }\n}\n\nfunction isPointScale (scale) {\n  return !('paddingInner' in scale)\n}\n\nfunction isBandScale (scale) {\n  return 'paddingInner' in scale\n}\n\nexport function createFinalScales ({ rangeX, rangeY }, { finalRangeX, finalRangeY }) {\n  const finalScaleX = scaleLinear().domain(rangeX).range(finalRangeX)\n  const finalScaleY = scaleLinear().domain(rangeY).range(finalRangeY)\n\n  return { finalScaleX, finalScaleY }\n}\n","import { scaleLinear } from 'd3-scale'\n\nexport function createPolarTransformation (\n  { rangeX, rangeY },\n  { finalRangeX, finalRangeY }\n) {\n  const toTheta = scaleLinear().domain(rangeX).range([0, 2 * Math.PI])\n  const toRadius = scaleLinear().domain(rangeY).range([0, 1])\n\n  const fitX = scaleLinear().domain([-1, 1]).range(finalRangeX)\n  const fitY = scaleLinear().domain([-1, 1]).range(finalRangeY)\n\n  const transform = function transform ([x, y]) {\n    const theta = toTheta(x)\n    const radius = toRadius(y)\n    const coords = polarToCartesian(theta, radius)\n\n    return [fitX(coords[0]), fitY(coords[1])]\n  }\n\n  const invert = function invert ([x, y]) {\n    const smallCoords = [fitX.invert(x), fitY.invert(y)]\n    const [theta, radius] = cartesianToPolar(...smallCoords)\n\n    return [toTheta.invert(theta), toRadius.invert(radius)]\n  }\n\n  transform.invert = invert\n\n  return transform\n}\n\nfunction polarToCartesian (theta, radius) {\n  const x = radius * Math.sin(theta)\n  const y = radius * Math.cos(theta)\n\n  return [x, y]\n}\n\n// https://www.mathsisfun.com/polar-cartesian-coordinates.html\nfunction cartesianToPolar (x, y) {\n  const quadrant = getQuadrant(x, y)\n\n  const r = Math.sqrt(y ** 2 + x ** 2)\n  let theta = Math.atan(x / y)\n\n  if (quadrant === 2) {\n    theta += Math.PI * 2\n  }\n\n  if (quadrant === 3) {\n    theta += Math.PI\n  }\n\n  if (quadrant === 4) {\n    theta += Math.PI\n  }\n\n  return [theta, r]\n}\n\nfunction getQuadrant (x, y) {\n  if (x >= 0 && y >= 0) return 1\n  if (x < 0 && y >= 0) return 2\n  if (x < 0 && y < 0) return 3\n  if (x >= 0 && y < 0) return 4\n}\n","import { createPolarTransformation } from './polar.js'\n\nexport function attachTransformations (sectionContext) {\n  const {\n    transformation,\n    rangeX,\n    rangeY,\n    finalRangeX,\n    finalRangeY,\n    scaleX,\n    scaleY,\n    finalScaleX,\n    finalScaleY\n  } = sectionContext\n\n  if (transformation !== 'polar') {\n    sectionContext.getTotalTransformation = needsScaling => {\n      const { xNeedsScaling, yNeedsScaling } = parseNeedsScaling(needsScaling)\n\n      return ([x, y]) => ([\n        finalScaleX(xNeedsScaling ? scaleX(x) : x),\n        finalScaleY(yNeedsScaling ? scaleY(y) : y)\n      ])\n    }\n\n    sectionContext.inverseTotalTransformation = ([x, y]) => ([\n      scaleX.invert(finalScaleX.invert(x)),\n      scaleY.invert(finalScaleY.invert(y))\n    ])\n  }\n\n  if (transformation === 'polar') {\n    const getScaleTransformation = needsScaling => {\n      const { xNeedsScaling, yNeedsScaling } = parseNeedsScaling(needsScaling)\n\n      return ([x, y]) => ([\n        xNeedsScaling ? scaleX(x) : x,\n        yNeedsScaling ? scaleY(y) : y\n      ])\n    }\n\n    const postScaleTransformation = createPolarTransformation(\n      { rangeX, rangeY },\n      { finalRangeX, finalRangeY }\n    )\n\n    sectionContext.getScaleTransformation = getScaleTransformation\n    sectionContext.postScaleTransformation = postScaleTransformation\n\n    sectionContext.getTotalTransformation = needsScaling => {\n      const scaleTransformation = getScaleTransformation(needsScaling)\n\n      return point => (\n        postScaleTransformation(scaleTransformation(point))\n      )\n    }\n\n    const inverseScaleTransformation = ([x, y]) => ([\n      scaleX.invert(x),\n      scaleY.invert(y)\n    ])\n\n    sectionContext.inverseTotalTransformation = point => (\n      inverseScaleTransformation(postScaleTransformation.invert(point))\n    )\n  }\n}\n\nfunction parseNeedsScaling (needsScaling) {\n  if (needsScaling === undefined) {\n    return {\n      xNeedsScaling: true,\n      yNeedsScaling: true\n    }\n  }\n\n  if (needsScaling.constructor === Boolean) {\n    return {\n      xNeedsScaling: needsScaling,\n      yNeedsScaling: needsScaling\n    }\n  }\n\n  if (needsScaling.constructor === Object) {\n    return needsScaling\n  }\n}\n","import { parsePadding } from '../../utils/padding.js'\nimport { getRanges, getFinalRanges } from './getRanges.js'\nimport { createScales, createFinalScales } from './createScales.js'\nimport { attachTransformations } from './attachTransformations.js'\n\nexport function createSectionContext (sectionData) {\n  sectionData.zoomIdentity = parseZoomIdentity(sectionData.zoomIdentity)\n\n  const padding = parsePadding(sectionData.padding)\n  const ranges = getRanges(sectionData)\n  const finalRanges = getFinalRanges(sectionData, ranges, padding)\n  const scales = createScales(sectionData, ranges)\n  const finalScales = createFinalScales(ranges, finalRanges)\n\n  const sectionContext = constructSectionContext(\n    sectionData,\n    padding,\n    ranges,\n    finalRanges,\n    scales,\n    finalScales\n  )\n\n  attachTransformations(sectionContext)\n\n  return sectionContext\n}\n\nfunction parseZoomIdentity (zoomIdentity) {\n  return Object.assign({ x: 0, y: 0, kx: 1, ky: 1 }, zoomIdentity)\n}\n\nfunction constructSectionContext (\n  { scaleX, scaleY, padding: _, ...sectionData },\n  padding,\n  ranges,\n  finalRanges,\n  scales,\n  finalScales\n) {\n  return {\n    ...sectionData,\n    padding,\n    ...ranges,\n    ...finalRanges,\n    ...scales,\n    ...finalScales,\n    bbox: getBbox(ranges),\n    paddedBbox: getPaddedBbox(ranges, padding)\n  }\n}\n\nfunction getBbox ({ rangeX, rangeY }) {\n  return {\n    minX: Math.min(...rangeX),\n    maxX: Math.max(...rangeX),\n    minY: Math.min(...rangeY),\n    maxY: Math.max(...rangeY)\n  }\n}\n\nfunction getPaddedBbox ({ rangeX, rangeY }, { left, right, top, bottom }) {\n  return {\n    minX: Math.min(...rangeX) + left,\n    maxX: Math.max(...rangeX) - right,\n    minY: Math.min(...rangeY) + top,\n    maxY: Math.max(...rangeY) - bottom\n  }\n}\n","import { getContext, setContext } from 'svelte'\nimport { writable } from 'svelte/store'\nimport { createSectionContext } from './createSectionContext.js'\n\nconst key = {}\n\nexport function subscribe () {\n  return getContext(key)\n}\n\nexport function init () {\n  const sectionContext = writable()\n  setContext(key, sectionContext)\n\n  return sectionContext\n}\n\nexport function update (sectionContext, options) {\n  sectionContext.set(createSectionContext(options))\n}\n","import { getContext, setContext } from 'svelte'\nimport { writable } from 'svelte/store'\n\nconst key = {}\n\nexport function subscribe () {\n  return getContext(key)\n}\n\nexport function init () {\n  const eventManagerContext = writable()\n  setContext(key, eventManagerContext)\n\n  return eventManagerContext\n}\n\nexport function update (eventManagerContext, eventManager) {\n  eventManagerContext.set(eventManager)\n}\n","import { getContext, setContext } from 'svelte'\nimport { writable } from 'svelte/store'\n\nconst key = {}\n\nexport function subscribe () {\n  return getContext(key)\n}\n\nexport function init () {\n  const interactionManagerContext = writable()\n  setContext(key, interactionManagerContext)\n\n  return interactionManagerContext\n}\n\nexport function update (interactionManagerContext, interactionManager) {\n  interactionManagerContext.set(interactionManager)\n}\n","let handler\n\nexport default class EventTracker {\n  constructor (eventManager, { eventName, nativeEventName, useWindow, preventDefault }) {\n    this._eventManager = eventManager\n    this._eventName = eventName\n    this._nativeEventName = nativeEventName\n    this._useWindow = useWindow\n    this._preventDefault = preventDefault\n\n    this._numberOfActiveListeners = 0\n    this._callbacks = {}\n  }\n\n  setNativeEventName (nativeEventName) {\n    this._nativeEventName = nativeEventName\n  }\n\n  addListener (listenerId, callback) {\n    this._callbacks[listenerId] = callback\n\n    if (this._eventManagerHasBeenMounted()) {\n      this._attachNativeListenerIfNecessary()\n    }\n  }\n\n  attachAllListeners () {\n    /* eslint-disable-next-line */\n    for (const _ in this._callbacks) {\n      this._attachNativeListenerIfNecessary()\n    }\n  }\n\n  removeListener (listenerId) {\n    delete this._callbacks[listenerId]\n\n    if (this._eventManagerHasBeenMounted()) {\n      this._removeNativeListenerIfNecessary()\n    }\n  }\n\n  _eventManagerHasBeenMounted () {\n    return this._eventManager._mounted\n  }\n\n  _attachNativeListenerIfNecessary () {\n    if (this._numberOfActiveListeners === 0) {\n      handler = this._handleEvent.bind(this)\n      const nativeEventName = this._nativeEventName\n\n      if (this._useWindow) {\n        window.addEventListener(nativeEventName, handler)\n      }\n\n      if (!this._useWindow) {\n        this._eventManager._domNode.addEventListener(nativeEventName, handler)\n      }\n    }\n\n    this._numberOfActiveListeners++\n  }\n\n  _removeNativeListenerIfNecessary () {\n    this._numberOfActiveListeners--\n\n    if (this._numberOfActiveListeners === 0) {\n      const nativeEventName = this._nativeEventName\n\n      if (this._useWindow) {\n        window.removeEventListener(nativeEventName, handler)\n      }\n\n      if (!this._useWindow) {\n        this._eventManager._domNode.removeEventListener(nativeEventName, handler)\n      }\n    }\n  }\n\n  _handleEvent (nativeEvent) {\n    if (this._preventDefault) nativeEvent.preventDefault()\n\n    const screenCoordinates = this._getScreenCoordinates(nativeEvent)\n    nativeEvent.eventName = this._eventName\n\n    for (const listenerId in this._callbacks) {\n      this._callbacks[listenerId](screenCoordinates, nativeEvent)\n    }\n  }\n\n  _getScreenCoordinates (nativeEvent) {\n    return this._eventManager._getScreenCoordinates(nativeEvent)\n  }\n}\n","import EventTracker from './EventTracker.js'\n\nexport default class BaseEventManager {\n  constructor (EXPOSED_EVENTS, managerType) {\n    this._domNode = undefined\n    this._svgPoint = undefined\n    this._mounted = false\n    this._trackers = {}\n    this._BROWSER_TYPE = undefined\n    this._managerType = managerType\n\n    for (const event of EXPOSED_EVENTS) {\n      this._trackers[event.eventName] = new EventTracker(this, event)\n    }\n  }\n\n  // Svelte can only bind to DOM nodes after initialization\n  addRootNode (domNode) {\n    this._domNode = domNode\n    this._svgPoint = this._domNode.createSVGPoint()\n\n    // set browser type only after mount\n    this._BROWSER_TYPE = window.navigator.pointerEnabled\n      ? 'IE11 / MSEdge'\n      : window.navigator.msPointerEnabled\n        ? 'IE10 / WP8'\n        : 'other'\n\n    this._mounted = true\n  }\n\n  attachEventListeners () {\n    if (this._mounted === false) throw new Error('root node must be added first')\n\n    for (const eventName in this._trackers) {\n      // set native event names here, just before attaching actual listeners\n      if (this._managerType === 'mouse') {\n        this._trackers[eventName].setNativeEventName(this._getNativeMouseEventName(eventName, this._BROWSER_TYPE))\n      }\n      if (this._managerType === 'touch') {\n        this._trackers[eventName].setNativeEventName(this._getNativeTouchEventName(eventName, this._BROWSER_TYPE))\n      }\n\n      this._trackers[eventName].attachAllListeners()\n    }\n  }\n\n  eventTracker (eventName) {\n    return this._trackers[eventName]\n  }\n}\n","export default str => str.charAt(0).toUpperCase() + str.slice(1)\n","import BaseEventManager from './BaseEventManager.js'\nimport capitalize from '../../utils/capitalize.js'\n\nexport default class MouseEventManager extends BaseEventManager {\n  constructor () {\n    super(EXPOSED_EVENTS, 'mouse')\n  }\n\n  _getNativeMouseEventName (exposedEventName, BROWSER_TYPE) {\n    // 'click' has the same name in every non-mobile browser\n    if (exposedEventName === 'click') return 'click'\n\n    // 'wheel' has the same name in every non-mobile browser\n    if (exposedEventName === 'wheel') return 'wheel'\n\n    // In this non-mobile browser type, events are called 'pointerup' etc\n    if (BROWSER_TYPE === 'IE11 / MSEdge') {\n      const lastPart = sliceOffMouse(exposedEventName)\n      return 'pointer' + lastPart\n    }\n\n    // In this non-mobile browser type, events are called 'MSPointerUp' etc\n    if (BROWSER_TYPE === 'IE10 / WP8') {\n      const lastPart = sliceOffMouse(exposedEventName)\n      return 'MSPointer' + capitalize(lastPart)\n    }\n\n    // In other non-mobile browsers, events are called like the exposed ones\n    if (BROWSER_TYPE === 'other') {\n      return exposedEventName\n    }\n  }\n\n  _getScreenCoordinates (nativeEvent) {\n    this._svgPoint.x = nativeEvent.clientX\n    this._svgPoint.y = nativeEvent.clientY\n\n    return this._svgPoint.matrixTransform(this._domNode.getScreenCTM().inverse())\n  }\n}\n\nconst EVENT_NAMES = ['mousedown', 'mouseup', 'mousemove', 'mouseout', 'click', 'wheel']\nconst WINDOW_EVENTS = ['mousemove', 'mouseup']\nconst PREVENT_DEFAULT = ['mousedown']\n\nconst EXPOSED_EVENTS = EVENT_NAMES.map(eventName => ({\n  eventName,\n  nativeEventName: undefined,\n  useWindow: WINDOW_EVENTS.includes(eventName),\n  preventDefault: PREVENT_DEFAULT.includes(eventName)\n}))\n\nconst sliceOffMouse = str => str.slice(5, str.length)\n","import BaseEventManager from './BaseEventManager.js'\nimport capitalize from '../../utils/capitalize.js'\n\nexport default class TouchEventManager extends BaseEventManager {\n  constructor () {\n    super(EXPOSED_EVENTS, 'touch')\n  }\n\n  _getNativeTouchEventName (exposedEventName, BROWSER_TYPE) {\n    // In this mobile browser type, events are called 'pointerup' etc\n    if (BROWSER_TYPE === 'IE11 / MSEdge') {\n      const lastPart = sliceOffTouch(exposedEventName)\n      return 'pointer' + lastPart\n    }\n\n    // In this mobile browser type, events are called 'MSPointerUp' etc\n    if (BROWSER_TYPE === 'IE10 / WP8') {\n      const lastPart = sliceOffTouch(exposedEventName)\n      return 'MSPointer' + capitalize(lastPart)\n    }\n\n    // In other mobile browsers, events are called like the exposed ones\n    if (BROWSER_TYPE === 'other') {\n      return exposedEventName\n    }\n  }\n\n  _getScreenCoordinates (nativeEvent) {\n    const touches = getTouches(nativeEvent)\n\n    if (touches.length === 1) {\n      return this._getScreenCoordinatesSingle(touches[0])\n    }\n\n    if (touches.length > 1) {\n      return this._getScreenCoordinatesMulti(touches)\n    }\n  }\n\n  _getScreenCoordinatesSingle (touch) {\n    this._svgPoint.x = touch.clientX\n    this._svgPoint.y = touch.clientY\n\n    return this._svgPoint.matrixTransform(this._domNode.getScreenCTM().inverse())\n  }\n\n  _getScreenCoordinatesMulti (touches) {\n    const touchesInScreenCoordinates = []\n\n    for (const touch of touches) {\n      touchesInScreenCoordinates.push(this._getScreenCoordinatesSingle(touch))\n    }\n\n    return touchesInScreenCoordinates\n  }\n}\n\nconst EVENT_NAMES = ['touchstart', 'touchend', 'touchmove', 'touchcancel']\n\nconst EXPOSED_EVENTS = EVENT_NAMES.map(eventName => ({\n  eventName,\n  nativeEventName: undefined,\n  useWindow: false,\n  preventDefault: true\n}))\n\nconst sliceOffTouch = str => str.slice(5, str.length)\n\nfunction getTouches (nativeEvent) {\n  return nativeEvent.touches\n}\n","import * as detectIt from '../../utils/detect.js'\n\nimport MouseEventManager from './MouseEventManager.js'\nimport TouchEventManager from './TouchEventManager.js'\n\nexport default class EventManager {\n  constructor () {\n    if (detectIt.primaryInput === 'mouse') {\n      this._mouseEventManager = new MouseEventManager()\n    }\n\n    if (detectIt.primaryInput === 'touch') {\n      this._touchEventManager = new TouchEventManager()\n    }\n  }\n\n  // Initialization\n  addRootNode (domNode) {\n    this._forEachManager(manager => { manager.addRootNode(domNode) })\n  }\n\n  attachEventListeners () {\n    this._forEachManager(manager => { manager.attachEventListeners() })\n  }\n\n  mouse () {\n    return this._mouseEventManager\n  }\n\n  touch () {\n    return this._touchEventManager\n  }\n\n  _forEachManager (callback) {\n    if (this._mouseEventManager) callback(this._mouseEventManager)\n    if (this._touchEventManager) callback(this._touchEventManager)\n  }\n}\n","export default class BaseInteractionManager {\n  constructor () {\n    this._id = undefined\n    this._eventManager = undefined\n\n    this._section = undefined\n\n    this._markInteractionInterface = undefined\n    this._sectionInteractionInterface = undefined\n  }\n\n  // Initialization\n  setId (id) {\n    this._id = id\n  }\n\n  linkEventManager (eventManager) {\n    this._eventManager = eventManager\n  }\n\n  // Section context loading\n  loadSection (sectionData) {\n    this._section = sectionData\n  }\n\n  // Mark and layer interactions interface\n  marks () {\n    return this._markInteractionInterface\n  }\n\n  // Section interactions interface\n  section () {\n    return this._sectionInteractionInterface\n  }\n}\n","import capitalize from '../../../../utils/capitalize.js'\n\nexport default class BaseInteractionInterface {\n  constructor (interactionManager, InteractionHandlers) {\n    this._interactionManager = interactionManager\n    this._handlers = {}\n\n    for (const handlerName in InteractionHandlers) {\n      this._handlers[handlerName] = new InteractionHandlers[handlerName](this._interactionManager)\n    }\n  }\n\n  _getHandler (interactionName) {\n    const handlerName = interactionNameToHandlerName(interactionName)\n    return this._handlers[handlerName]\n  }\n}\n\nconst interactionNameToHandlerName = interactionName => {\n  return capitalize(interactionName) + 'Handler'\n}\n","export function indexPoint (markData) {\n  const pointAttributes = markData.attributes\n\n  const item = calculateBboxPoint(pointAttributes)\n\n  item.attributes = pointAttributes\n  item.markType = 'Point'\n  item.markId = markData.markId\n\n  return item\n}\n\nexport function indexPointLayer ({ layerAttributes, keyArray, layerId }) {\n  const items = []\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n\n    const pointAttributes = getPointAttributes(layerAttributes, key)\n    const item = calculateBboxPoint(pointAttributes)\n\n    item.key = key\n    item.index = i\n    item.attributes = pointAttributes\n    item.markType = 'Point'\n    item.layerId = layerId\n\n    items.push(item)\n  }\n\n  return items\n}\n\nfunction calculateBboxPoint (pointAttributes) {\n  const x = pointAttributes.pixelGeometry.coordinates[0]\n  const y = pointAttributes.pixelGeometry.coordinates[1]\n\n  return {\n    minX: x - pointAttributes.radius,\n    maxX: x + pointAttributes.radius,\n    minY: y - pointAttributes.radius,\n    maxY: y + pointAttributes.radius\n  }\n}\n\nfunction getPointAttributes (layerAttributes, key) {\n  return {\n    pixelGeometry: layerAttributes.pixelGeometryObject[key],\n    radius: layerAttributes.radiusObject[key]\n  }\n}\n","export var epsilon = 1e-6;\nexport var epsilon2 = 1e-12;\nexport var pi = Math.PI;\nexport var halfPi = pi / 2;\nexport var quarterPi = pi / 4;\nexport var tau = pi * 2;\n\nexport var degrees = 180 / pi;\nexport var radians = pi / 180;\n\nexport var abs = Math.abs;\nexport var atan = Math.atan;\nexport var atan2 = Math.atan2;\nexport var cos = Math.cos;\nexport var ceil = Math.ceil;\nexport var exp = Math.exp;\nexport var floor = Math.floor;\nexport var hypot = Math.hypot;\nexport var log = Math.log;\nexport var pow = Math.pow;\nexport var sin = Math.sin;\nexport var sign = Math.sign || function(x) { return x > 0 ? 1 : x < 0 ? -1 : 0; };\nexport var sqrt = Math.sqrt;\nexport var tan = Math.tan;\n\nexport function acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\n\nexport function asin(x) {\n  return x > 1 ? halfPi : x < -1 ? -halfPi : Math.asin(x);\n}\n\nexport function haversin(x) {\n  return (x = sin(x / 2)) * x;\n}\n","export default function noop() {}\n","function streamGeometry(geometry, stream) {\n  if (geometry && streamGeometryType.hasOwnProperty(geometry.type)) {\n    streamGeometryType[geometry.type](geometry, stream);\n  }\n}\n\nvar streamObjectType = {\n  Feature: function(object, stream) {\n    streamGeometry(object.geometry, stream);\n  },\n  FeatureCollection: function(object, stream) {\n    var features = object.features, i = -1, n = features.length;\n    while (++i < n) streamGeometry(features[i].geometry, stream);\n  }\n};\n\nvar streamGeometryType = {\n  Sphere: function(object, stream) {\n    stream.sphere();\n  },\n  Point: function(object, stream) {\n    object = object.coordinates;\n    stream.point(object[0], object[1], object[2]);\n  },\n  MultiPoint: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) object = coordinates[i], stream.point(object[0], object[1], object[2]);\n  },\n  LineString: function(object, stream) {\n    streamLine(object.coordinates, stream, 0);\n  },\n  MultiLineString: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) streamLine(coordinates[i], stream, 0);\n  },\n  Polygon: function(object, stream) {\n    streamPolygon(object.coordinates, stream);\n  },\n  MultiPolygon: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) streamPolygon(coordinates[i], stream);\n  },\n  GeometryCollection: function(object, stream) {\n    var geometries = object.geometries, i = -1, n = geometries.length;\n    while (++i < n) streamGeometry(geometries[i], stream);\n  }\n};\n\nfunction streamLine(coordinates, stream, closed) {\n  var i = -1, n = coordinates.length - closed, coordinate;\n  stream.lineStart();\n  while (++i < n) coordinate = coordinates[i], stream.point(coordinate[0], coordinate[1], coordinate[2]);\n  stream.lineEnd();\n}\n\nfunction streamPolygon(coordinates, stream) {\n  var i = -1, n = coordinates.length;\n  stream.polygonStart();\n  while (++i < n) streamLine(coordinates[i], stream, 1);\n  stream.polygonEnd();\n}\n\nexport default function(object, stream) {\n  if (object && streamObjectType.hasOwnProperty(object.type)) {\n    streamObjectType[object.type](object, stream);\n  } else {\n    streamGeometry(object, stream);\n  }\n}\n","import {Adder} from \"d3-array\";\nimport {abs} from \"../math.js\";\nimport noop from \"../noop.js\";\n\nvar areaSum = new Adder(),\n    areaRingSum = new Adder(),\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar areaStream = {\n  point: noop,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: function() {\n    areaStream.lineStart = areaRingStart;\n    areaStream.lineEnd = areaRingEnd;\n  },\n  polygonEnd: function() {\n    areaStream.lineStart = areaStream.lineEnd = areaStream.point = noop;\n    areaSum.add(abs(areaRingSum));\n    areaRingSum = new Adder();\n  },\n  result: function() {\n    var area = areaSum / 2;\n    areaSum = new Adder();\n    return area;\n  }\n};\n\nfunction areaRingStart() {\n  areaStream.point = areaPointFirst;\n}\n\nfunction areaPointFirst(x, y) {\n  areaStream.point = areaPoint;\n  x00 = x0 = x, y00 = y0 = y;\n}\n\nfunction areaPoint(x, y) {\n  areaRingSum.add(y0 * x - x0 * y);\n  x0 = x, y0 = y;\n}\n\nfunction areaRingEnd() {\n  areaPoint(x00, y00);\n}\n\nexport default areaStream;\n","export default x => x;\n","import noop from \"../noop.js\";\n\nvar x0 = Infinity,\n    y0 = x0,\n    x1 = -x0,\n    y1 = x1;\n\nvar boundsStream = {\n  point: boundsPoint,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: noop,\n  polygonEnd: noop,\n  result: function() {\n    var bounds = [[x0, y0], [x1, y1]];\n    x1 = y1 = -(y0 = x0 = Infinity);\n    return bounds;\n  }\n};\n\nfunction boundsPoint(x, y) {\n  if (x < x0) x0 = x;\n  if (x > x1) x1 = x;\n  if (y < y0) y0 = y;\n  if (y > y1) y1 = y;\n}\n\nexport default boundsStream;\n","import {sqrt} from \"../math.js\";\n\n// TODO Enforce positive area for exterior, negative area for interior?\n\nvar X0 = 0,\n    Y0 = 0,\n    Z0 = 0,\n    X1 = 0,\n    Y1 = 0,\n    Z1 = 0,\n    X2 = 0,\n    Y2 = 0,\n    Z2 = 0,\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar centroidStream = {\n  point: centroidPoint,\n  lineStart: centroidLineStart,\n  lineEnd: centroidLineEnd,\n  polygonStart: function() {\n    centroidStream.lineStart = centroidRingStart;\n    centroidStream.lineEnd = centroidRingEnd;\n  },\n  polygonEnd: function() {\n    centroidStream.point = centroidPoint;\n    centroidStream.lineStart = centroidLineStart;\n    centroidStream.lineEnd = centroidLineEnd;\n  },\n  result: function() {\n    var centroid = Z2 ? [X2 / Z2, Y2 / Z2]\n        : Z1 ? [X1 / Z1, Y1 / Z1]\n        : Z0 ? [X0 / Z0, Y0 / Z0]\n        : [NaN, NaN];\n    X0 = Y0 = Z0 =\n    X1 = Y1 = Z1 =\n    X2 = Y2 = Z2 = 0;\n    return centroid;\n  }\n};\n\nfunction centroidPoint(x, y) {\n  X0 += x;\n  Y0 += y;\n  ++Z0;\n}\n\nfunction centroidLineStart() {\n  centroidStream.point = centroidPointFirstLine;\n}\n\nfunction centroidPointFirstLine(x, y) {\n  centroidStream.point = centroidPointLine;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nfunction centroidPointLine(x, y) {\n  var dx = x - x0, dy = y - y0, z = sqrt(dx * dx + dy * dy);\n  X1 += z * (x0 + x) / 2;\n  Y1 += z * (y0 + y) / 2;\n  Z1 += z;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nfunction centroidLineEnd() {\n  centroidStream.point = centroidPoint;\n}\n\nfunction centroidRingStart() {\n  centroidStream.point = centroidPointFirstRing;\n}\n\nfunction centroidRingEnd() {\n  centroidPointRing(x00, y00);\n}\n\nfunction centroidPointFirstRing(x, y) {\n  centroidStream.point = centroidPointRing;\n  centroidPoint(x00 = x0 = x, y00 = y0 = y);\n}\n\nfunction centroidPointRing(x, y) {\n  var dx = x - x0,\n      dy = y - y0,\n      z = sqrt(dx * dx + dy * dy);\n\n  X1 += z * (x0 + x) / 2;\n  Y1 += z * (y0 + y) / 2;\n  Z1 += z;\n\n  z = y0 * x - x0 * y;\n  X2 += z * (x0 + x);\n  Y2 += z * (y0 + y);\n  Z2 += z * 3;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nexport default centroidStream;\n","import {tau} from \"../math.js\";\nimport noop from \"../noop.js\";\n\nexport default function PathContext(context) {\n  this._context = context;\n}\n\nPathContext.prototype = {\n  _radius: 4.5,\n  pointRadius: function(_) {\n    return this._radius = _, this;\n  },\n  polygonStart: function() {\n    this._line = 0;\n  },\n  polygonEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line === 0) this._context.closePath();\n    this._point = NaN;\n  },\n  point: function(x, y) {\n    switch (this._point) {\n      case 0: {\n        this._context.moveTo(x, y);\n        this._point = 1;\n        break;\n      }\n      case 1: {\n        this._context.lineTo(x, y);\n        break;\n      }\n      default: {\n        this._context.moveTo(x + this._radius, y);\n        this._context.arc(x, y, this._radius, 0, tau);\n        break;\n      }\n    }\n  },\n  result: noop\n};\n","import {Adder} from \"d3-array\";\nimport {sqrt} from \"../math.js\";\nimport noop from \"../noop.js\";\n\nvar lengthSum = new Adder(),\n    lengthRing,\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar lengthStream = {\n  point: noop,\n  lineStart: function() {\n    lengthStream.point = lengthPointFirst;\n  },\n  lineEnd: function() {\n    if (lengthRing) lengthPoint(x00, y00);\n    lengthStream.point = noop;\n  },\n  polygonStart: function() {\n    lengthRing = true;\n  },\n  polygonEnd: function() {\n    lengthRing = null;\n  },\n  result: function() {\n    var length = +lengthSum;\n    lengthSum = new Adder();\n    return length;\n  }\n};\n\nfunction lengthPointFirst(x, y) {\n  lengthStream.point = lengthPoint;\n  x00 = x0 = x, y00 = y0 = y;\n}\n\nfunction lengthPoint(x, y) {\n  x0 -= x, y0 -= y;\n  lengthSum.add(sqrt(x0 * x0 + y0 * y0));\n  x0 = x, y0 = y;\n}\n\nexport default lengthStream;\n","export default function PathString() {\n  this._string = [];\n}\n\nPathString.prototype = {\n  _radius: 4.5,\n  _circle: circle(4.5),\n  pointRadius: function(_) {\n    if ((_ = +_) !== this._radius) this._radius = _, this._circle = null;\n    return this;\n  },\n  polygonStart: function() {\n    this._line = 0;\n  },\n  polygonEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line === 0) this._string.push(\"Z\");\n    this._point = NaN;\n  },\n  point: function(x, y) {\n    switch (this._point) {\n      case 0: {\n        this._string.push(\"M\", x, \",\", y);\n        this._point = 1;\n        break;\n      }\n      case 1: {\n        this._string.push(\"L\", x, \",\", y);\n        break;\n      }\n      default: {\n        if (this._circle == null) this._circle = circle(this._radius);\n        this._string.push(\"M\", x, \",\", y, this._circle);\n        break;\n      }\n    }\n  },\n  result: function() {\n    if (this._string.length) {\n      var result = this._string.join(\"\");\n      this._string = [];\n      return result;\n    } else {\n      return null;\n    }\n  }\n};\n\nfunction circle(radius) {\n  return \"m0,\" + radius\n      + \"a\" + radius + \",\" + radius + \" 0 1,1 0,\" + -2 * radius\n      + \"a\" + radius + \",\" + radius + \" 0 1,1 0,\" + 2 * radius\n      + \"z\";\n}\n","import identity from \"../identity.js\";\nimport stream from \"../stream.js\";\nimport pathArea from \"./area.js\";\nimport pathBounds from \"./bounds.js\";\nimport pathCentroid from \"./centroid.js\";\nimport PathContext from \"./context.js\";\nimport pathMeasure from \"./measure.js\";\nimport PathString from \"./string.js\";\n\nexport default function(projection, context) {\n  var pointRadius = 4.5,\n      projectionStream,\n      contextStream;\n\n  function path(object) {\n    if (object) {\n      if (typeof pointRadius === \"function\") contextStream.pointRadius(+pointRadius.apply(this, arguments));\n      stream(object, projectionStream(contextStream));\n    }\n    return contextStream.result();\n  }\n\n  path.area = function(object) {\n    stream(object, projectionStream(pathArea));\n    return pathArea.result();\n  };\n\n  path.measure = function(object) {\n    stream(object, projectionStream(pathMeasure));\n    return pathMeasure.result();\n  };\n\n  path.bounds = function(object) {\n    stream(object, projectionStream(pathBounds));\n    return pathBounds.result();\n  };\n\n  path.centroid = function(object) {\n    stream(object, projectionStream(pathCentroid));\n    return pathCentroid.result();\n  };\n\n  path.projection = function(_) {\n    return arguments.length ? (projectionStream = _ == null ? (projection = null, identity) : (projection = _).stream, path) : projection;\n  };\n\n  path.context = function(_) {\n    if (!arguments.length) return context;\n    contextStream = _ == null ? (context = null, new PathString) : new PathContext(context = _);\n    if (typeof pointRadius !== \"function\") contextStream.pointRadius(pointRadius);\n    return path;\n  };\n\n  path.pointRadius = function(_) {\n    if (!arguments.length) return pointRadius;\n    pointRadius = typeof _ === \"function\" ? _ : (contextStream.pointRadius(+_), +_);\n    return path;\n  };\n\n  return path.projection(projection).context(context);\n}\n","export function isInvalid (value) {\n  if (value === undefined || value === null) { return true }\n\n  if (value.constructor === Number) {\n    return !isFinite(value)\n  }\n\n  return false\n}\n\nexport function isValid (value) {\n  return !isInvalid(value)\n}\n\nexport function isDefined (value) {\n  return value !== undefined\n}\n\nexport function isUndefined (value) {\n  return value === undefined\n}\n","import { geoPath } from 'd3-geo'\nimport { isInvalid } from '../equals.js'\n\nexport function calculateBboxGeometries (geometries) {\n  let bbox = [[Infinity, Infinity], [-Infinity, -Infinity]]\n\n  for (let i = 0; i < geometries.length; i++) {\n    const geometry = geometries[i]\n\n    if (!isInvalid(geometry)) {\n      bbox = updateBbox(bbox, geometry)\n    }\n  }\n\n  const bboxObj = {\n    x: [bbox[0][0], bbox[1][0]],\n    y: [bbox[0][1], bbox[1][1]]\n  }\n\n  return bboxObj\n}\n\nexport function calculateBboxGeometry (geometry) {\n  const bbox = path.bounds(geometry)\n\n  const bboxObj = {\n    x: [bbox[0][0], bbox[1][0]],\n    y: [bbox[0][1], bbox[1][1]]\n  }\n\n  return bboxObj\n}\n\nconst path = geoPath()\n\nfunction updateBbox (bbox, geometry) {\n  const newBbox = path.bounds(geometry)\n\n  bbox[0][0] = bbox[0][0] < newBbox[0][0] ? bbox[0][0] : newBbox[0][0]\n  bbox[0][1] = bbox[0][1] < newBbox[0][1] ? bbox[0][1] : newBbox[0][1]\n  bbox[1][0] = bbox[1][0] > newBbox[1][0] ? bbox[1][0] : newBbox[1][0]\n  bbox[1][1] = bbox[1][1] > newBbox[1][1] ? bbox[1][1] : newBbox[1][1]\n\n  return bbox\n}\n","export function isLinearRing (ring) {\n  return ring.constructor === Array\n}\n\nexport function isPolygon (geometry) {\n  return geometry.constructor === Object && geometry.type === 'Polygon'\n}\n\nexport function isMultiPolygon (geometry) {\n  return geometry.constructor === Object && geometry.type === 'MultiPolygon'\n}\n\nexport function isPolygonOrMultiPolygon (geometry) {\n  return isPolygon(geometry) || isMultiPolygon(geometry)\n}\n\nexport function isLineString (geometry) {\n  return geometry.constructor === Object && geometry.type === 'LineString'\n}\n\nexport function isMultiLineString (geometry) {\n  return geometry.constructor === Object && geometry.type === 'MultiLineString'\n}\n\nexport function isLineStringOrMultiLineString (geometry) {\n  return isLineString(geometry) || isMultiLineString(geometry)\n}\n","import { isLinearRing, isPolygon, isMultiPolygon } from './geometryDetectors.js'\n\nexport function polygonArea (polygon) {\n  if (isLinearRing(polygon)) {\n    return getRingArea(polygon)\n  }\n\n  if (isPolygon(polygon)) {\n    return getPolygonArea(polygon)\n  }\n\n  if (isMultiPolygon(polygon)) {\n    return getMultiPolygonArea(polygon)\n  }\n\n  throw new Error('Invalid input')\n}\n\nexport function linearRingIsClockwise (ring) {\n  return getSignedRingArea(ring) < 0\n}\n\nfunction getRingArea (ring) {\n  return Math.abs(getSignedRingArea(ring))\n}\n\n// Taken from: https://stackoverflow.com/a/33670691/7237112\nfunction getSignedRingArea (ring) {\n  let total = 0\n\n  for (let i = 0, l = ring.length; i < l; i++) {\n    const addX = ring[i][0]\n    const addY = ring[i === ring.length - 1 ? 0 : i + 1][1]\n    const subX = ring[i === ring.length - 1 ? 0 : i + 1][0]\n    const subY = ring[i][1]\n\n    total += (addX * addY * 0.5)\n    total -= (subX * subY * 0.5)\n  }\n\n  return total\n}\n\nfunction getPolygonArea (polygon) {\n  let totalArea = getRingArea(polygon.coordinates[0])\n\n  for (let i = 1; i < polygon.coordinates.length; i++) {\n    const holeArea = getRingArea(polygon.coordinates[i])\n    totalArea -= holeArea\n  }\n\n  return totalArea\n}\n\nfunction getMultiPolygonArea (multiPolygon) {\n  let totalArea = 0\n\n  for (let i = 0; i < multiPolygon.coordinates.length; i++) {\n    totalArea += getPolygonArea(multiPolygon.coordinates[i])\n  }\n\n  return totalArea\n}\n","export function pointDistance (point1, point2) {\n  return Math.sqrt(\n    (point1[0] - point2[0]) ** 2 +\n    (point1[1] - point2[1]) ** 2\n  )\n}\n\nexport function linearRingLength (linearRing) {\n  let totalLength = 0\n\n  for (let i = 0; i < linearRing.length - 1; i++) {\n    const from = linearRing[i]\n    const to = linearRing[i + 1]\n\n    totalLength += pointDistance(from, to)\n  }\n\n  return totalLength\n}\n","import {\n  isLinearRing, isPolygon, isMultiPolygon, isLineString, isMultiLineString\n} from './geometryDetectors.js'\nimport { polygonArea } from './polygonArea.js'\nimport { linearRingLength } from './distance.js'\n\nexport default function calculateCentroid (geometry) {\n  if (isLinearRing(geometry)) {\n    return calculateLinearRingCentroid(geometry)\n  }\n\n  if (isPolygon(geometry)) {\n    return calculatePolygonCentroid(geometry)\n  }\n\n  if (isMultiPolygon(geometry)) {\n    return calculateMultiPolygonCentroid(geometry)\n  }\n\n  if (isLineString(geometry)) {\n    return calculateLineStringCentroid(geometry)\n  }\n\n  if (isMultiLineString(geometry)) {\n    return calculateMultiLineStringCentroid(geometry)\n  }\n}\n\n// https://stackoverflow.com/a/33852627/7237112\nfunction calculateLinearRingCentroid (ring) {\n  const nPts = ring.length\n  const off = ring[0]\n  let twicearea = 0\n  let x = 0\n  let y = 0\n  let p1\n  let p2\n  let f\n\n  for (let i = 0, j = nPts - 1; i < nPts; j = i++) {\n    p1 = ring[i]\n    p2 = ring[j]\n    f = (p1[0] - off[0]) * (p2[1] - off[1]) - (p2[0] - off[0]) * (p1[1] - off[1])\n    twicearea += f\n    x += (p1[0] + p2[0] - 2 * off[0]) * f\n    y += (p1[1] + p2[1] - 2 * off[1]) * f\n  }\n\n  f = twicearea * 3\n\n  return [x / f + off[0], y / f + off[1]]\n}\n\nfunction calculatePolygonCentroid (polygon) {\n  // We will ignore holes and just take the outer ring\n  return calculateLinearRingCentroid(polygon.coordinates[0])\n}\n\nfunction calculateMultiPolygonCentroid (multiPolygon) {\n  // We will take the centroid of each polygon (ignoring holes)\n  // and take the weighted (by area) center of these.\n  let x = 0\n  let y = 0\n  let totalArea = 0\n\n  for (let i = 0; i < multiPolygon.coordinates.length; i++) {\n    const polygon = multiPolygon.coordinates[i]\n    const polygonCentroid = calculateLinearRingCentroid(polygon[0])\n    const area = polygonArea(polygon[0])\n\n    x += polygonCentroid[0] * area\n    y += polygonCentroid[1] * area\n    totalArea += area\n  }\n\n  return [x / totalArea, y / totalArea]\n}\n\nfunction calculateLineStringCentroid (lineString) {\n  return calculateLinearRingCentroid(lineString.coordinates)\n}\n\nfunction calculateMultiLineStringCentroid (multiLineString) {\n  // We will take the centroid of each LineString\n  // and take the weighted (by length) center of these.\n  let x = 0\n  let y = 0\n  let totalLength = 0\n\n  for (let i = 0; i < multiLineString.coordinates.length; i++) {\n    const lineString = multiLineString.coordinates[i]\n    const lineStringCentroid = calculateLinearRingCentroid(lineString)\n    const length = linearRingLength(lineString)\n\n    x += lineStringCentroid[0] * length\n    y += lineStringCentroid[1] * length\n    totalLength += length\n  }\n\n  return [x / totalLength, y / totalLength]\n}\n","import { pointDistance } from './distance.js'\n\nexport function pointIntersectsLineSegment (point, lineSegment, lineWidth) {\n  const distance = distanceClosestPointOnLineSegment(point, lineSegment)\n\n  return distance < (lineWidth / 2)\n}\n\nexport function distanceClosestPointOnLineSegment (point, lineSegment) {\n  const closestPoint = closestPointOnLineSegment(point, lineSegment)\n  return pointDistance(point, closestPoint)\n}\n\n// https://stackoverflow.com/a/6853926/7237112\nexport function closestPointOnLineSegment (point, lineSegment) {\n  // Point coordinates\n  const x = point[0]\n  const y = point[1]\n\n  // Line segment coordinates\n  const x1 = lineSegment[0][0]\n  const y1 = lineSegment[0][1]\n  const x2 = lineSegment[1][0]\n  const y2 = lineSegment[1][1]\n\n  const A = x - x1\n  const B = y - y1\n  const C = x2 - x1\n  const D = y2 - y1\n\n  const dot = A * C + B * D\n  const lengthSquared = C * C + D * D\n  let param = -1\n  if (lengthSquared !== 0) { // in case of 0 length line\n    param = dot / lengthSquared\n  }\n\n  let xx, yy\n\n  if (param < 0) {\n    xx = x1\n    yy = y1\n  } else if (param > 1) {\n    xx = x2\n    yy = y2\n  } else {\n    xx = x1 + param * C\n    yy = y1 + param * D\n  }\n\n  return [xx, yy]\n}\n","\"use strict\"\n\nmodule.exports = twoProduct\n\nvar SPLITTER = +(Math.pow(2, 27) + 1.0)\n\nfunction twoProduct(a, b, result) {\n  var x = a * b\n\n  var c = SPLITTER * a\n  var abig = c - a\n  var ahi = c - abig\n  var alo = a - ahi\n\n  var d = SPLITTER * b\n  var bbig = d - b\n  var bhi = d - bbig\n  var blo = b - bhi\n\n  var err1 = x - (ahi * bhi)\n  var err2 = err1 - (alo * bhi)\n  var err3 = err2 - (ahi * blo)\n\n  var y = alo * blo - err3\n\n  if(result) {\n    result[0] = y\n    result[1] = x\n    return result\n  }\n\n  return [ y, x ]\n}","\"use strict\"\n\nmodule.exports = linearExpansionSum\n\n//Easy case: Add two scalars\nfunction scalarScalar(a, b) {\n  var x = a + b\n  var bv = x - a\n  var av = x - bv\n  var br = b - bv\n  var ar = a - av\n  var y = ar + br\n  if(y) {\n    return [y, x]\n  }\n  return [x]\n}\n\nfunction linearExpansionSum(e, f) {\n  var ne = e.length|0\n  var nf = f.length|0\n  if(ne === 1 && nf === 1) {\n    return scalarScalar(e[0], f[0])\n  }\n  var n = ne + nf\n  var g = new Array(n)\n  var count = 0\n  var eptr = 0\n  var fptr = 0\n  var abs = Math.abs\n  var ei = e[eptr]\n  var ea = abs(ei)\n  var fi = f[fptr]\n  var fa = abs(fi)\n  var a, b\n  if(ea < fa) {\n    b = ei\n    eptr += 1\n    if(eptr < ne) {\n      ei = e[eptr]\n      ea = abs(ei)\n    }\n  } else {\n    b = fi\n    fptr += 1\n    if(fptr < nf) {\n      fi = f[fptr]\n      fa = abs(fi)\n    }\n  }\n  if((eptr < ne && ea < fa) || (fptr >= nf)) {\n    a = ei\n    eptr += 1\n    if(eptr < ne) {\n      ei = e[eptr]\n      ea = abs(ei)\n    }\n  } else {\n    a = fi\n    fptr += 1\n    if(fptr < nf) {\n      fi = f[fptr]\n      fa = abs(fi)\n    }\n  }\n  var x = a + b\n  var bv = x - a\n  var y = b - bv\n  var q0 = y\n  var q1 = x\n  var _x, _bv, _av, _br, _ar\n  while(eptr < ne && fptr < nf) {\n    if(ea < fa) {\n      a = ei\n      eptr += 1\n      if(eptr < ne) {\n        ei = e[eptr]\n        ea = abs(ei)\n      }\n    } else {\n      a = fi\n      fptr += 1\n      if(fptr < nf) {\n        fi = f[fptr]\n        fa = abs(fi)\n      }\n    }\n    b = q0\n    x = a + b\n    bv = x - a\n    y = b - bv\n    if(y) {\n      g[count++] = y\n    }\n    _x = q1 + x\n    _bv = _x - q1\n    _av = _x - _bv\n    _br = x - _bv\n    _ar = q1 - _av\n    q0 = _ar + _br\n    q1 = _x\n  }\n  while(eptr < ne) {\n    a = ei\n    b = q0\n    x = a + b\n    bv = x - a\n    y = b - bv\n    if(y) {\n      g[count++] = y\n    }\n    _x = q1 + x\n    _bv = _x - q1\n    _av = _x - _bv\n    _br = x - _bv\n    _ar = q1 - _av\n    q0 = _ar + _br\n    q1 = _x\n    eptr += 1\n    if(eptr < ne) {\n      ei = e[eptr]\n    }\n  }\n  while(fptr < nf) {\n    a = fi\n    b = q0\n    x = a + b\n    bv = x - a\n    y = b - bv\n    if(y) {\n      g[count++] = y\n    } \n    _x = q1 + x\n    _bv = _x - q1\n    _av = _x - _bv\n    _br = x - _bv\n    _ar = q1 - _av\n    q0 = _ar + _br\n    q1 = _x\n    fptr += 1\n    if(fptr < nf) {\n      fi = f[fptr]\n    }\n  }\n  if(q0) {\n    g[count++] = q0\n  }\n  if(q1) {\n    g[count++] = q1\n  }\n  if(!count) {\n    g[count++] = 0.0  \n  }\n  g.length = count\n  return g\n}","\"use strict\"\n\nmodule.exports = fastTwoSum\n\nfunction fastTwoSum(a, b, result) {\n\tvar x = a + b\n\tvar bv = x - a\n\tvar av = x - bv\n\tvar br = b - bv\n\tvar ar = a - av\n\tif(result) {\n\t\tresult[0] = ar + br\n\t\tresult[1] = x\n\t\treturn result\n\t}\n\treturn [ar+br, x]\n}","\"use strict\"\n\nvar twoProduct = require(\"two-product\")\nvar twoSum = require(\"two-sum\")\n\nmodule.exports = scaleLinearExpansion\n\nfunction scaleLinearExpansion(e, scale) {\n  var n = e.length\n  if(n === 1) {\n    var ts = twoProduct(e[0], scale)\n    if(ts[0]) {\n      return ts\n    }\n    return [ ts[1] ]\n  }\n  var g = new Array(2 * n)\n  var q = [0.1, 0.1]\n  var t = [0.1, 0.1]\n  var count = 0\n  twoProduct(e[0], scale, q)\n  if(q[0]) {\n    g[count++] = q[0]\n  }\n  for(var i=1; i<n; ++i) {\n    twoProduct(e[i], scale, t)\n    var pq = q[1]\n    twoSum(pq, t[0], q)\n    if(q[0]) {\n      g[count++] = q[0]\n    }\n    var a = t[1]\n    var b = q[1]\n    var x = a + b\n    var bv = x - a\n    var y = b - bv\n    q[1] = x\n    if(y) {\n      g[count++] = y\n    }\n  }\n  if(q[1]) {\n    g[count++] = q[1]\n  }\n  if(count === 0) {\n    g[count++] = 0.0\n  }\n  g.length = count\n  return g\n}","\"use strict\"\n\nmodule.exports = robustSubtract\n\n//Easy case: Add two scalars\nfunction scalarScalar(a, b) {\n  var x = a + b\n  var bv = x - a\n  var av = x - bv\n  var br = b - bv\n  var ar = a - av\n  var y = ar + br\n  if(y) {\n    return [y, x]\n  }\n  return [x]\n}\n\nfunction robustSubtract(e, f) {\n  var ne = e.length|0\n  var nf = f.length|0\n  if(ne === 1 && nf === 1) {\n    return scalarScalar(e[0], -f[0])\n  }\n  var n = ne + nf\n  var g = new Array(n)\n  var count = 0\n  var eptr = 0\n  var fptr = 0\n  var abs = Math.abs\n  var ei = e[eptr]\n  var ea = abs(ei)\n  var fi = -f[fptr]\n  var fa = abs(fi)\n  var a, b\n  if(ea < fa) {\n    b = ei\n    eptr += 1\n    if(eptr < ne) {\n      ei = e[eptr]\n      ea = abs(ei)\n    }\n  } else {\n    b = fi\n    fptr += 1\n    if(fptr < nf) {\n      fi = -f[fptr]\n      fa = abs(fi)\n    }\n  }\n  if((eptr < ne && ea < fa) || (fptr >= nf)) {\n    a = ei\n    eptr += 1\n    if(eptr < ne) {\n      ei = e[eptr]\n      ea = abs(ei)\n    }\n  } else {\n    a = fi\n    fptr += 1\n    if(fptr < nf) {\n      fi = -f[fptr]\n      fa = abs(fi)\n    }\n  }\n  var x = a + b\n  var bv = x - a\n  var y = b - bv\n  var q0 = y\n  var q1 = x\n  var _x, _bv, _av, _br, _ar\n  while(eptr < ne && fptr < nf) {\n    if(ea < fa) {\n      a = ei\n      eptr += 1\n      if(eptr < ne) {\n        ei = e[eptr]\n        ea = abs(ei)\n      }\n    } else {\n      a = fi\n      fptr += 1\n      if(fptr < nf) {\n        fi = -f[fptr]\n        fa = abs(fi)\n      }\n    }\n    b = q0\n    x = a + b\n    bv = x - a\n    y = b - bv\n    if(y) {\n      g[count++] = y\n    }\n    _x = q1 + x\n    _bv = _x - q1\n    _av = _x - _bv\n    _br = x - _bv\n    _ar = q1 - _av\n    q0 = _ar + _br\n    q1 = _x\n  }\n  while(eptr < ne) {\n    a = ei\n    b = q0\n    x = a + b\n    bv = x - a\n    y = b - bv\n    if(y) {\n      g[count++] = y\n    }\n    _x = q1 + x\n    _bv = _x - q1\n    _av = _x - _bv\n    _br = x - _bv\n    _ar = q1 - _av\n    q0 = _ar + _br\n    q1 = _x\n    eptr += 1\n    if(eptr < ne) {\n      ei = e[eptr]\n    }\n  }\n  while(fptr < nf) {\n    a = fi\n    b = q0\n    x = a + b\n    bv = x - a\n    y = b - bv\n    if(y) {\n      g[count++] = y\n    } \n    _x = q1 + x\n    _bv = _x - q1\n    _av = _x - _bv\n    _br = x - _bv\n    _ar = q1 - _av\n    q0 = _ar + _br\n    q1 = _x\n    fptr += 1\n    if(fptr < nf) {\n      fi = -f[fptr]\n    }\n  }\n  if(q0) {\n    g[count++] = q0\n  }\n  if(q1) {\n    g[count++] = q1\n  }\n  if(!count) {\n    g[count++] = 0.0  \n  }\n  g.length = count\n  return g\n}","\"use strict\"\n\nvar twoProduct = require(\"two-product\")\nvar robustSum = require(\"robust-sum\")\nvar robustScale = require(\"robust-scale\")\nvar robustSubtract = require(\"robust-subtract\")\n\nvar NUM_EXPAND = 5\n\nvar EPSILON     = 1.1102230246251565e-16\nvar ERRBOUND3   = (3.0 + 16.0 * EPSILON) * EPSILON\nvar ERRBOUND4   = (7.0 + 56.0 * EPSILON) * EPSILON\n\nfunction cofactor(m, c) {\n  var result = new Array(m.length-1)\n  for(var i=1; i<m.length; ++i) {\n    var r = result[i-1] = new Array(m.length-1)\n    for(var j=0,k=0; j<m.length; ++j) {\n      if(j === c) {\n        continue\n      }\n      r[k++] = m[i][j]\n    }\n  }\n  return result\n}\n\nfunction matrix(n) {\n  var result = new Array(n)\n  for(var i=0; i<n; ++i) {\n    result[i] = new Array(n)\n    for(var j=0; j<n; ++j) {\n      result[i][j] = [\"m\", j, \"[\", (n-i-1), \"]\"].join(\"\")\n    }\n  }\n  return result\n}\n\nfunction sign(n) {\n  if(n & 1) {\n    return \"-\"\n  }\n  return \"\"\n}\n\nfunction generateSum(expr) {\n  if(expr.length === 1) {\n    return expr[0]\n  } else if(expr.length === 2) {\n    return [\"sum(\", expr[0], \",\", expr[1], \")\"].join(\"\")\n  } else {\n    var m = expr.length>>1\n    return [\"sum(\", generateSum(expr.slice(0, m)), \",\", generateSum(expr.slice(m)), \")\"].join(\"\")\n  }\n}\n\nfunction determinant(m) {\n  if(m.length === 2) {\n    return [[\"sum(prod(\", m[0][0], \",\", m[1][1], \"),prod(-\", m[0][1], \",\", m[1][0], \"))\"].join(\"\")]\n  } else {\n    var expr = []\n    for(var i=0; i<m.length; ++i) {\n      expr.push([\"scale(\", generateSum(determinant(cofactor(m, i))), \",\", sign(i), m[0][i], \")\"].join(\"\"))\n    }\n    return expr\n  }\n}\n\nfunction orientation(n) {\n  var pos = []\n  var neg = []\n  var m = matrix(n)\n  var args = []\n  for(var i=0; i<n; ++i) {\n    if((i&1)===0) {\n      pos.push.apply(pos, determinant(cofactor(m, i)))\n    } else {\n      neg.push.apply(neg, determinant(cofactor(m, i)))\n    }\n    args.push(\"m\" + i)\n  }\n  var posExpr = generateSum(pos)\n  var negExpr = generateSum(neg)\n  var funcName = \"orientation\" + n + \"Exact\"\n  var code = [\"function \", funcName, \"(\", args.join(), \"){var p=\", posExpr, \",n=\", negExpr, \",d=sub(p,n);\\\nreturn d[d.length-1];};return \", funcName].join(\"\")\n  var proc = new Function(\"sum\", \"prod\", \"scale\", \"sub\", code)\n  return proc(robustSum, twoProduct, robustScale, robustSubtract)\n}\n\nvar orientation3Exact = orientation(3)\nvar orientation4Exact = orientation(4)\n\nvar CACHED = [\n  function orientation0() { return 0 },\n  function orientation1() { return 0 },\n  function orientation2(a, b) { \n    return b[0] - a[0]\n  },\n  function orientation3(a, b, c) {\n    var l = (a[1] - c[1]) * (b[0] - c[0])\n    var r = (a[0] - c[0]) * (b[1] - c[1])\n    var det = l - r\n    var s\n    if(l > 0) {\n      if(r <= 0) {\n        return det\n      } else {\n        s = l + r\n      }\n    } else if(l < 0) {\n      if(r >= 0) {\n        return det\n      } else {\n        s = -(l + r)\n      }\n    } else {\n      return det\n    }\n    var tol = ERRBOUND3 * s\n    if(det >= tol || det <= -tol) {\n      return det\n    }\n    return orientation3Exact(a, b, c)\n  },\n  function orientation4(a,b,c,d) {\n    var adx = a[0] - d[0]\n    var bdx = b[0] - d[0]\n    var cdx = c[0] - d[0]\n    var ady = a[1] - d[1]\n    var bdy = b[1] - d[1]\n    var cdy = c[1] - d[1]\n    var adz = a[2] - d[2]\n    var bdz = b[2] - d[2]\n    var cdz = c[2] - d[2]\n    var bdxcdy = bdx * cdy\n    var cdxbdy = cdx * bdy\n    var cdxady = cdx * ady\n    var adxcdy = adx * cdy\n    var adxbdy = adx * bdy\n    var bdxady = bdx * ady\n    var det = adz * (bdxcdy - cdxbdy) \n            + bdz * (cdxady - adxcdy)\n            + cdz * (adxbdy - bdxady)\n    var permanent = (Math.abs(bdxcdy) + Math.abs(cdxbdy)) * Math.abs(adz)\n                  + (Math.abs(cdxady) + Math.abs(adxcdy)) * Math.abs(bdz)\n                  + (Math.abs(adxbdy) + Math.abs(bdxady)) * Math.abs(cdz)\n    var tol = ERRBOUND4 * permanent\n    if ((det > tol) || (-det > tol)) {\n      return det\n    }\n    return orientation4Exact(a,b,c,d)\n  }\n]\n\nfunction slowOrient(args) {\n  var proc = CACHED[args.length]\n  if(!proc) {\n    proc = CACHED[args.length] = orientation(args.length)\n  }\n  return proc.apply(undefined, args)\n}\n\nfunction generateOrientationProc() {\n  while(CACHED.length <= NUM_EXPAND) {\n    CACHED.push(orientation(CACHED.length))\n  }\n  var args = []\n  var procArgs = [\"slow\"]\n  for(var i=0; i<=NUM_EXPAND; ++i) {\n    args.push(\"a\" + i)\n    procArgs.push(\"o\" + i)\n  }\n  var code = [\n    \"function getOrientation(\", args.join(), \"){switch(arguments.length){case 0:case 1:return 0;\"\n  ]\n  for(var i=2; i<=NUM_EXPAND; ++i) {\n    code.push(\"case \", i, \":return o\", i, \"(\", args.slice(0, i).join(), \");\")\n  }\n  code.push(\"}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation\")\n  procArgs.push(code.join(\"\"))\n\n  var proc = Function.apply(undefined, procArgs)\n  module.exports = proc.apply(undefined, [slowOrient].concat(CACHED))\n  for(var i=0; i<=NUM_EXPAND; ++i) {\n    module.exports[i] = CACHED[i]\n  }\n}\n\ngenerateOrientationProc()","module.exports = robustPointInPolygon\n\nvar orient = require('robust-orientation')\n\nfunction robustPointInPolygon(vs, point) {\n  var x = point[0]\n  var y = point[1]\n  var n = vs.length\n  var inside = 1\n  var lim = n\n  for(var i = 0, j = n-1; i<lim; j=i++) {\n    var a = vs[i]\n    var b = vs[j]\n    var yi = a[1]\n    var yj = b[1]\n    if(yj < yi) {\n      if(yj < y && y < yi) {\n        var s = orient(a, b, point)\n        if(s === 0) {\n          return 0\n        } else {\n          inside ^= (0 < s)|0\n        }\n      } else if(y === yi) {\n        var c = vs[(i+1)%n]\n        var yk = c[1]\n        if(yi < yk) {\n          var s = orient(a, b, point)\n          if(s === 0) {\n            return 0\n          } else {\n            inside ^= (0 < s)|0\n          }\n        }\n      }\n    } else if(yi < yj) {\n      if(yi < y && y < yj) {\n        var s = orient(a, b, point)\n        if(s === 0) {\n          return 0\n        } else {\n          inside ^= (s < 0)|0\n        }\n      } else if(y === yi) {\n        var c = vs[(i+1)%n]\n        var yk = c[1]\n        if(yk < yi) {\n          var s = orient(a, b, point)\n          if(s === 0) {\n            return 0\n          } else {\n            inside ^= (s < 0)|0\n          }\n        }\n      }\n    } else if(y === yi) {\n      var x0 = Math.min(a[0], b[0])\n      var x1 = Math.max(a[0], b[0])\n      if(i === 0) {\n        while(j>0) {\n          var k = (j+n-1)%n\n          var p = vs[k]\n          if(p[1] !== y) {\n            break\n          }\n          var px = p[0]\n          x0 = Math.min(x0, px)\n          x1 = Math.max(x1, px)\n          j = k\n        }\n        if(j === 0) {\n          if(x0 <= x && x <= x1) {\n            return 0\n          }\n          return 1 \n        }\n        lim = j+1\n      }\n      var y0 = vs[(j+n-1)%n][1]\n      while(i+1<lim) {\n        var p = vs[i+1]\n        if(p[1] !== y) {\n          break\n        }\n        var px = p[0]\n        x0 = Math.min(x0, px)\n        x1 = Math.max(x1, px)\n        i += 1\n      }\n      if(x0 <= x && x <= x1) {\n        return 0\n      }\n      var y1 = vs[(i+1)%n][1]\n      if(x < x0 && (y0 < y !== y1 < y)) {\n        inside ^= 1\n      }\n    }\n  }\n  return 2 * inside - 1\n}","import robustPointInPolygon from 'robust-point-in-polygon'\n\nexport default function (point, geometry) {\n  switch (geometry.type) {\n    case 'Polygon': return pointInPolygon(point, geometry)\n    case 'MultiPolygon': return pointInMultiPolygon(point, geometry)\n  }\n}\n\nfunction pointInPolygon (point, geometry) {\n  const coordinates = geometry.coordinates\n  return pointInPolygonCoordinates(point, coordinates)\n}\n\nfunction pointInPolygonCoordinates (point, coordinates) {\n  const outerRing = coordinates[0]\n\n  if (!pointInRing(point, outerRing)) return false\n\n  for (let i = 1; i < coordinates.length; i++) {\n    const hole = coordinates[i]\n\n    if (pointInRing(point, hole)) return false\n  }\n\n  return true\n}\n\nfunction pointInMultiPolygon (point, geometry) {\n  const coordinates = geometry.coordinates\n\n  for (let i = 0; i < coordinates.length; i++) {\n    const polygonCoordinates = coordinates[i]\n\n    if (pointInPolygonCoordinates(point, polygonCoordinates)) return true\n  }\n\n  return false\n}\n\nfunction pointInRing (point, coordinates) {\n  return robustPointInPolygon(coordinates, point) === -1\n}\n","import { scaleLinear } from 'd3-scale';\n\nconst invalidInputError = new Error('Invalid input');\n\nfunction getInput (geometry) {\n  if ('coordinates' in geometry) {\n    return 'geojson'\n  }\n\n  if ('x' in geometry && 'y' in geometry) {\n    if (geometry.type !== 'Point') {\n      ensureSameLength(geometry.x, geometry.y);\n    }\n\n    return 'xy'\n  }\n\n  throw invalidInputError\n}\n\nfunction ensureSameLength (x, y) {\n  if (x !== undefined && y !== undefined) {\n    if (x.constructor === Array && y.constructor === Array) {\n      if (x.length === y.length && x.length > 1) {\n        return\n      }\n    }\n  }\n\n  throw invalidInputError\n}\n\nfunction roundPoint ([x, y], decimals) {\n  const zeroes = 10 ** decimals;\n\n  return [\n    Math.round(x * zeroes) / zeroes,\n    Math.round(y * zeroes) / zeroes\n  ]\n}\n\nfunction pointDistance (p1, p2) {\n  return Math.sqrt(\n    (p1[0] - p2[0]) ** 2 +\n    (p1[1] - p2[1]) ** 2\n  )\n}\n\nfunction transformLinearRing (linearRing, transformation, settings) {\n  if (!settings.simplify || linearRing.length < 3) {\n    return transformLinearRingUnsimplified(linearRing, transformation)\n  }\n\n  if (settings.simplify === true) {\n    return transformLinearRingSimplified(linearRing, transformation, settings.simplificationThreshold)\n  }\n}\n\nfunction transformLinearRingUnsimplified (linearRing, transformation) {\n  const transformedLinearRing = [];\n\n  for (let i = 0; i < linearRing.length; i++) {\n    transformedLinearRing.push(transformation(linearRing[i]));\n  }\n\n  return transformedLinearRing\n}\n\nfunction transformLinearRingSimplified (linearRing, transformation, simplificationThreshold = 1) {\n  const transformedLinearRing = [transformation(linearRing[0])];\n\n  let start = transformedLinearRing[0];\n  let end;\n\n  for (let i = 1; i < linearRing.length - 1; i++) {\n    end = transformation(linearRing[i]);\n\n    const dontSkip = pointDistance(start, end) >= simplificationThreshold;\n\n    if (dontSkip) {\n      transformedLinearRing.push(end);\n      start = end;\n    }\n  }\n\n  const lastPoint = transformation(linearRing[linearRing.length - 1]);\n  transformedLinearRing.push(lastPoint);\n\n  return transformedLinearRing\n}\n\nfunction transformSetOfLinearRings (linearRings, transformation, settings) {\n  const transformedLinearRings = [];\n\n  for (let i = 0; i < linearRings.length; i++) {\n    transformedLinearRings.push(transformLinearRing(linearRings[i], transformation, settings));\n  }\n\n  return transformedLinearRings\n}\n\nfunction transformXYArrays ({ x, y }, transformation, settings) {\n  if (!settings.simplify || x.length < 3) {\n    return transformXYArraysUnsimplified(x, y, transformation)\n  }\n\n  if (settings.simplify === true) {\n    return transformXYArraysSimplified(x, y, transformation, settings.simplificationThreshold)\n  }\n}\n\nfunction transformXYArraysUnsimplified (x, y, transformation) {\n  const transformedLinearRing = [];\n\n  for (let i = 0; i < x.length; i++) {\n    transformedLinearRing.push(transformation([x[i], y[i]]));\n  }\n\n  return transformedLinearRing\n}\n\nfunction transformXYArraysSimplified (x, y, transformation, simplificationThreshold = 1) {\n  const transformedLinearRing = [transformation([x[0], y[0]])];\n\n  let start = transformedLinearRing[0];\n  let end;\n\n  for (let i = 1; i < x.length - 1; i++) {\n    end = transformation([x[i], y[i]]);\n\n    const dontSkip = pointDistance(start, end) >= simplificationThreshold;\n\n    if (dontSkip) {\n      transformedLinearRing.push(end);\n      start = end;\n    }\n  }\n\n  const lastIndex = x.length - 1;\n  const lastPoint = transformation([x[lastIndex], y[lastIndex]]);\n  transformedLinearRing.push(lastPoint);\n\n  return transformedLinearRing\n}\n\nconst transformFunctions = {\n  transformPoint,\n  transformMultiPoint,\n  transformLineString,\n  transformMultiLineString,\n  transformPolygon,\n  transformMultiPolygon\n};\n\nfunction transformGeometry (geometry, _transformation, settings = {}) {\n  const functionName = 'transform' + geometry.type;\n\n  const transformation = settings.decimals\n    ? point => roundPoint(_transformation(point), settings.decimals)\n    : _transformation;\n\n  return transformFunctions[functionName](geometry, transformation, settings)\n}\n\nfunction transformPoint (point, transformation) {\n  const input = getInput(point);\n\n  if (input === 'geojson') {\n    return {\n      type: 'Point',\n      coordinates: transformation(point.coordinates)\n    }\n  }\n\n  if (input === 'xy') {\n    return {\n      type: 'Point',\n      coordinates: transformation([\n        point.x,\n        point.y\n      ])\n    }\n  }\n}\n\nfunction transformMultiPoint (multiPoint, transformation) {\n  const input = getInput(multiPoint);\n\n  if (input === 'geojson') {\n    return {\n      type: 'MultiPoint',\n      coordinates: transformLinearRing(multiPoint.coordinates, transformation, {})\n    }\n  }\n\n  if (input === 'xy') {\n    return {\n      type: 'MultiPoint',\n      coordinates: transformXYArrays(multiPoint, transformation, {})\n    }\n  }\n}\n\nfunction transformLineString (lineString, transformation, settings) {\n  const input = getInput(lineString);\n\n  if (input === 'geojson') {\n    return {\n      type: 'LineString',\n      coordinates: transformLinearRing(lineString.coordinates, transformation, settings)\n    }\n  }\n\n  if (input === 'xy') {\n    return {\n      type: 'LineString',\n      coordinates: transformXYArrays(lineString, transformation, settings)\n    }\n  }\n}\n\nfunction transformMultiLineString (multiLineString, transformation, settings) {\n  const input = getInput(multiLineString);\n\n  if (input === 'geojson') {\n    return {\n      type: 'MultiLineString',\n      coordinates: transformSetOfLinearRings(multiLineString.coordinates, transformation, settings)\n    }\n  }\n\n  if (input === 'xy') {\n    return {\n      type: 'MultiLineString',\n      coordinates: [\n        transformXYArrays(multiLineString, transformation, settings)\n      ]\n    }\n  }\n}\n\nfunction transformPolygon (polygon, transformation, settings) {\n  const input = getInput(polygon);\n\n  if (input === 'geojson') {\n    return {\n      type: 'Polygon',\n      coordinates: transformSetOfLinearRings(polygon.coordinates, transformation, settings)\n    }\n  }\n\n  if (input === 'xy') {\n    return {\n      type: 'Polygon',\n      coordinates: [\n        transformXYArrays(polygon, transformation, settings)\n      ]\n    }\n  }\n}\n\nfunction transformMultiPolygon (multiPolygon, transformation, settings) {\n  const input = getInput(multiPolygon);\n\n  if (input === 'geojson') {\n    const polygons = multiPolygon.coordinates;\n    const transformedPolygons = [];\n\n    for (let i = 0; i < polygons.length; i++) {\n      transformedPolygons.push(transformSetOfLinearRings(polygons[i], transformation, settings));\n    }\n\n    return {\n      type: 'MultiPolygon',\n      coordinates: transformedPolygons\n    }\n  }\n\n  if (input === 'xy') {\n    return {\n      type: 'MultiPolygon',\n      coordinates: [\n        [transformXYArrays(multiPolygon, transformation, settings)]\n      ]\n    }\n  }\n}\n\nfunction getNumberOfInterpolatedPoints (\n  from,\n  to,\n  toPolar,\n  context,\n  { interpolationThreshold = 1 }\n) {\n  const fromScaledDown = toPolar(from);\n  const toScaledDown = toPolar(to);\n\n  const totalScaleFactor = getTotalScaleFactor(context);\n\n  if (straightInYDimension(fromScaledDown, toScaledDown, totalScaleFactor)) {\n    return 0\n  }\n\n  const functionalForm = getFunctionalForm(fromScaledDown, toScaledDown);\n  const scaledDownLength = getPolarLength(functionalForm);\n\n  const realLength = scaledDownLength * totalScaleFactor;\n  const numberOfPointsNeeded = realLength / interpolationThreshold;\n\n  return Math.floor(numberOfPointsNeeded)\n}\n\nfunction getFunctionalForm (from, to) {\n  const pointsSorted = from[0] < to[0]\n    ? [from, to]\n    : [to, from];\n\n  const [[x1, y1], [x2, y2]] = pointsSorted;\n\n  const a = (y2 - y1) / (x2 - x1);\n  const b = y1 - (x1 * a);\n  const interval = [x1, x2];\n\n  return { a, b, interval }\n}\n\nfunction straightInYDimension (from, to, totalScaleFactor) {\n  return Math.abs(from[0] - to[0]) * totalScaleFactor < 1\n}\n\nfunction getPolarLength ({ a, b, interval }) {\n  const [c, d] = interval;\n\n  if (a === 0) {\n    return (d - c) * b\n  }\n\n  const aSq = a ** 2;\n  const bSq = b ** 2;\n\n  /*\n   * This is the integral of:\n   * sqrt( (a * theta + b) ** 2 + a ** 2 )\n   * between c and d\n   */\n  return (\n    aSq * Math.asinh((a * d + b) / a) + (a * d + b) *\n    Math.sqrt(aSq * d ** 2 + 2 * a * b * d + bSq + aSq) -\n    aSq * Math.asinh((a * c + b) / a) + (-a * c - b) *\n    Math.sqrt(aSq * c ** 2 + 2 * a * b * c + bSq + aSq)\n  ) / (2 * a)\n}\n\nfunction getTotalScaleFactor ({ finalRangeX, finalRangeY }) {\n  const totalScaleFactorX = Math.abs(finalRangeX[0] - finalRangeX[1]) / 2;\n  const totalScaleFactorY = Math.abs(finalRangeY[0] - finalRangeY[1]) / 2;\n\n  return Math.max(totalScaleFactorX, totalScaleFactorY)\n}\n\nfunction interpolatePoints (\n  transformedLinearRing,\n  from,\n  to,\n  postScaleTransformation,\n  numberOfPointsNeeded\n) {\n  const interpolator = interpolate(from, to);\n\n  for (let i = 0; i < numberOfPointsNeeded; i++) {\n    const t = (i + 1) / (numberOfPointsNeeded + 1);\n    transformedLinearRing.push(\n      postScaleTransformation(interpolator(t))\n    );\n  }\n}\n\nfunction interpolate (a, b) {\n  const dx = b[0] - a[0];\n  const dy = b[1] - a[1];\n\n  return t => ([\n    a[0] + t * dx,\n    a[1] + t * dy\n  ])\n}\n\nfunction interpolateLinearRing (linearRing, context, transformations, settings) {\n  if (!settings.simplify || linearRing.length < 3) {\n    return interpolateLinearRingUnsimplified(linearRing, context, transformations, settings)\n  }\n\n  if (settings.simplify === true) {\n    return interpolateLinearRingSimplified()\n  }\n}\n\nfunction interpolateLinearRingUnsimplified (linearRing, context, transformations, settings) {\n  const interpolatedLinearRing = [];\n  const { scaleTransformation, postScaleTransformation, toPolar } = transformations;\n\n  for (let i = 0; i < linearRing.length - 1; i++) {\n    const from = linearRing[i];\n    const to = linearRing[i + 1];\n    const fromScaled = scaleTransformation(from);\n    const toScaled = scaleTransformation(to);\n\n    interpolatedLinearRing.push(postScaleTransformation(fromScaled));\n\n    const numberOfPointsNeeded = getNumberOfInterpolatedPoints(\n      fromScaled,\n      toScaled,\n      toPolar,\n      context,\n      settings\n    );\n\n    if (numberOfPointsNeeded > 0) {\n      interpolatePoints(\n        interpolatedLinearRing,\n        fromScaled,\n        toScaled,\n        postScaleTransformation,\n        numberOfPointsNeeded\n      );\n    }\n  }\n\n  const lastPoint = linearRing[linearRing.length - 1];\n  interpolatedLinearRing.push(postScaleTransformation(\n    scaleTransformation(lastPoint)\n  ));\n\n  return interpolatedLinearRing\n}\n\nfunction interpolateLinearRingSimplified (linearRing, context, transformations, settings) {\n\n}\n\nfunction interpolateSetOfLinearRings (linearRings, context, transformations, settings) {\n  const interpolatedLinearRings = [];\n\n  for (let i = 0; i < linearRings.length; i++) {\n    interpolatedLinearRings.push(interpolateLinearRing(linearRings[i], context, transformations, settings));\n  }\n\n  return interpolatedLinearRings\n}\n\nfunction interpolateXYArrays ({ x, y }, context, transformations, settings) {\n  if (!settings.simplify || x.length < 3) {\n    return interpolateXYArraysUnsimplified(x, y, context, transformations, settings)\n  }\n\n  if (settings.simplify === true) {\n    return interpolateXYArraysSimplified()\n  }\n}\n\nfunction interpolateXYArraysUnsimplified (x, y, context, transformations, settings) {\n  const interpolatedLinearRing = [];\n  const { scaleTransformation, postScaleTransformation, toPolar } = transformations;\n\n  for (let i = 0; i < x.length - 1; i++) {\n    const from = [x[i], y[i]];\n    const to = [x[i + 1], y[i + 1]];\n    const fromScaled = scaleTransformation(from);\n    const toScaled = scaleTransformation(to);\n\n    interpolatedLinearRing.push(postScaleTransformation(fromScaled));\n\n    const numberOfPointsNeeded = getNumberOfInterpolatedPoints(\n      fromScaled,\n      toScaled,\n      toPolar,\n      context,\n      settings\n    );\n\n    if (numberOfPointsNeeded > 0) {\n      interpolatePoints(\n        interpolatedLinearRing,\n        fromScaled,\n        toScaled,\n        postScaleTransformation,\n        numberOfPointsNeeded\n      );\n    }\n  }\n\n  const lastIndex = x.length - 1;\n  const lastPoint = [x[lastIndex], y[lastIndex]];\n  interpolatedLinearRing.push(postScaleTransformation(\n    scaleTransformation(lastPoint)\n  ));\n\n  return interpolatedLinearRing\n}\n\nfunction interpolateXYArraysSimplified (x, y, context, transformations, settings) {\n\n}\n\nconst interpolateFunctions = {\n  interpolateLineString,\n  interpolateMultiLineString,\n  interpolatePolygon,\n  interpolateMultiPolygon\n};\n\nfunction polarGeometry (geometry, context, _transformations, settings = {}) {\n  const functionName = 'interpolate' + geometry.type;\n\n  const { scaleTransformation, postScaleTransformation: _postScaleTransformation } = _transformations;\n\n  const postScaleTransformation = settings.decimals !== undefined\n    ? point => roundPoint(_postScaleTransformation(point), settings.decimals)\n    : _postScaleTransformation;\n\n  const toTheta = scaleLinear().domain(context.rangeX).range([0, 2 * Math.PI]);\n  const toRadius = scaleLinear().domain(context.rangeY).range([0, 1]);\n  const toPolar = ([x, y]) => ([toTheta(x), toRadius(y)]);\n\n  const transformations = { scaleTransformation, postScaleTransformation, toPolar };\n\n  return interpolateFunctions[functionName](geometry, context, transformations, settings)\n}\n\nfunction interpolateLineString (lineString, context, transformations, settings) {\n  const input = getInput(lineString);\n\n  if (input === 'geojson') {\n    return {\n      type: 'LineString',\n      coordinates: interpolateLinearRing(lineString.coordinates, context, transformations, settings)\n    }\n  }\n\n  if (input === 'xy') {\n    return {\n      type: 'LineString',\n      coordinates: interpolateXYArrays(lineString, context, transformations, settings)\n    }\n  }\n}\n\nfunction interpolateMultiLineString (multiLineString, context, transformations, settings) {\n  const input = getInput(multiLineString);\n\n  if (input === 'geojson') {\n    return {\n      type: 'MultiLineString',\n      coordinates: interpolateSetOfLinearRings(multiLineString.coordinates, context, transformations, settings)\n    }\n  }\n\n  if (input === 'xy') {\n    return {\n      type: 'MultiLineString',\n      coordinates: [\n        interpolateXYArrays(multiLineString, context, transformations, settings)\n      ]\n    }\n  }\n}\n\nfunction interpolatePolygon (polygon, context, transformations, settings) {\n  const input = getInput(polygon);\n\n  if (input === 'geojson') {\n    return {\n      type: 'Polygon',\n      coordinates: interpolateSetOfLinearRings(polygon.coordinates, context, transformations, settings)\n    }\n  }\n\n  if (input === 'xy') {\n    return {\n      type: 'Polygon',\n      coordinates: [\n        interpolateXYArrays(polygon, context, transformations, settings)\n      ]\n    }\n  }\n}\n\nfunction interpolateMultiPolygon (multiPolygon, context, transformations, settings) {\n  const input = getInput(multiPolygon);\n\n  if (input === 'geojson') {\n    const polygons = multiPolygon.coordinates;\n    const transformedPolygons = [];\n\n    for (let i = 0; i < polygons.length; i++) {\n      transformedPolygons.push(interpolateSetOfLinearRings(polygons[i], context, transformations, settings));\n    }\n\n    return {\n      type: 'MultiPolygon',\n      coordinates: transformedPolygons\n    }\n  }\n\n  if (input === 'xy') {\n    return {\n      type: 'MultiPolygon',\n      coordinates: [\n        [interpolateXYArrays(multiPolygon, context, transformations, settings)]\n      ]\n    }\n  }\n}\n\nexport { polarGeometry, transformGeometry };\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy: function(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n}\n\nfunction rgb_formatRgb() {\n  var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n  return (a === 1 ? \"rgb(\" : \"rgba(\")\n      + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n      + (a === 1 ? \")\" : \", \" + a + \")\");\n}\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"hsl(\" : \"hsla(\")\n        + (this.h || 0) + \", \"\n        + (this.s || 0) * 100 + \"%, \"\n        + (this.l || 0) * 100 + \"%\"\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function(t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n}\n\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n","import value from \"./value.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\n\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import value from \"./value.js\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport {genericArray} from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : isNumberArray(b) ? numberArray\n      : Array.isArray(b) ? genericArray\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","'use strict';\n\nmodule.exports = earcut;\nmodule.exports.default = earcut;\n\nfunction earcut(data, holeIndices, dim) {\n\n    dim = dim || 2;\n\n    var hasHoles = holeIndices && holeIndices.length,\n        outerLen = hasHoles ? holeIndices[0] * dim : data.length,\n        outerNode = linkedList(data, 0, outerLen, dim, true),\n        triangles = [];\n\n    if (!outerNode || outerNode.next === outerNode.prev) return triangles;\n\n    var minX, minY, maxX, maxY, x, y, invSize;\n\n    if (hasHoles) outerNode = eliminateHoles(data, holeIndices, outerNode, dim);\n\n    // if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n    if (data.length > 80 * dim) {\n        minX = maxX = data[0];\n        minY = maxY = data[1];\n\n        for (var i = dim; i < outerLen; i += dim) {\n            x = data[i];\n            y = data[i + 1];\n            if (x < minX) minX = x;\n            if (y < minY) minY = y;\n            if (x > maxX) maxX = x;\n            if (y > maxY) maxY = y;\n        }\n\n        // minX, minY and invSize are later used to transform coords into integers for z-order calculation\n        invSize = Math.max(maxX - minX, maxY - minY);\n        invSize = invSize !== 0 ? 1 / invSize : 0;\n    }\n\n    earcutLinked(outerNode, triangles, dim, minX, minY, invSize);\n\n    return triangles;\n}\n\n// create a circular doubly linked list from polygon points in the specified winding order\nfunction linkedList(data, start, end, dim, clockwise) {\n    var i, last;\n\n    if (clockwise === (signedArea(data, start, end, dim) > 0)) {\n        for (i = start; i < end; i += dim) last = insertNode(i, data[i], data[i + 1], last);\n    } else {\n        for (i = end - dim; i >= start; i -= dim) last = insertNode(i, data[i], data[i + 1], last);\n    }\n\n    if (last && equals(last, last.next)) {\n        removeNode(last);\n        last = last.next;\n    }\n\n    return last;\n}\n\n// eliminate colinear or duplicate points\nfunction filterPoints(start, end) {\n    if (!start) return start;\n    if (!end) end = start;\n\n    var p = start,\n        again;\n    do {\n        again = false;\n\n        if (!p.steiner && (equals(p, p.next) || area(p.prev, p, p.next) === 0)) {\n            removeNode(p);\n            p = end = p.prev;\n            if (p === p.next) break;\n            again = true;\n\n        } else {\n            p = p.next;\n        }\n    } while (again || p !== end);\n\n    return end;\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\nfunction earcutLinked(ear, triangles, dim, minX, minY, invSize, pass) {\n    if (!ear) return;\n\n    // interlink polygon nodes in z-order\n    if (!pass && invSize) indexCurve(ear, minX, minY, invSize);\n\n    var stop = ear,\n        prev, next;\n\n    // iterate through ears, slicing them one by one\n    while (ear.prev !== ear.next) {\n        prev = ear.prev;\n        next = ear.next;\n\n        if (invSize ? isEarHashed(ear, minX, minY, invSize) : isEar(ear)) {\n            // cut off the triangle\n            triangles.push(prev.i / dim);\n            triangles.push(ear.i / dim);\n            triangles.push(next.i / dim);\n\n            removeNode(ear);\n\n            // skipping the next vertex leads to less sliver triangles\n            ear = next.next;\n            stop = next.next;\n\n            continue;\n        }\n\n        ear = next;\n\n        // if we looped through the whole remaining polygon and can't find any more ears\n        if (ear === stop) {\n            // try filtering points and slicing again\n            if (!pass) {\n                earcutLinked(filterPoints(ear), triangles, dim, minX, minY, invSize, 1);\n\n            // if this didn't work, try curing all small self-intersections locally\n            } else if (pass === 1) {\n                ear = cureLocalIntersections(filterPoints(ear), triangles, dim);\n                earcutLinked(ear, triangles, dim, minX, minY, invSize, 2);\n\n            // as a last resort, try splitting the remaining polygon into two\n            } else if (pass === 2) {\n                splitEarcut(ear, triangles, dim, minX, minY, invSize);\n            }\n\n            break;\n        }\n    }\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\nfunction isEar(ear) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    // now make sure we don't have other points inside the potential ear\n    var p = ear.next.next;\n\n    while (p !== ear.prev) {\n        if (pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.next;\n    }\n\n    return true;\n}\n\nfunction isEarHashed(ear, minX, minY, invSize) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    // triangle bbox; min & max are calculated like this for speed\n    var minTX = a.x < b.x ? (a.x < c.x ? a.x : c.x) : (b.x < c.x ? b.x : c.x),\n        minTY = a.y < b.y ? (a.y < c.y ? a.y : c.y) : (b.y < c.y ? b.y : c.y),\n        maxTX = a.x > b.x ? (a.x > c.x ? a.x : c.x) : (b.x > c.x ? b.x : c.x),\n        maxTY = a.y > b.y ? (a.y > c.y ? a.y : c.y) : (b.y > c.y ? b.y : c.y);\n\n    // z-order range for the current triangle bbox;\n    var minZ = zOrder(minTX, minTY, minX, minY, invSize),\n        maxZ = zOrder(maxTX, maxTY, minX, minY, invSize);\n\n    var p = ear.prevZ,\n        n = ear.nextZ;\n\n    // look for points inside the triangle in both directions\n    while (p && p.z >= minZ && n && n.z <= maxZ) {\n        if (p !== ear.prev && p !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n\n        if (n !== ear.prev && n !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y) &&\n            area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    // look for remaining points in decreasing z-order\n    while (p && p.z >= minZ) {\n        if (p !== ear.prev && p !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n    }\n\n    // look for remaining points in increasing z-order\n    while (n && n.z <= maxZ) {\n        if (n !== ear.prev && n !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y) &&\n            area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    return true;\n}\n\n// go through all polygon nodes and cure small local self-intersections\nfunction cureLocalIntersections(start, triangles, dim) {\n    var p = start;\n    do {\n        var a = p.prev,\n            b = p.next.next;\n\n        if (!equals(a, b) && intersects(a, p, p.next, b) && locallyInside(a, b) && locallyInside(b, a)) {\n\n            triangles.push(a.i / dim);\n            triangles.push(p.i / dim);\n            triangles.push(b.i / dim);\n\n            // remove two nodes involved\n            removeNode(p);\n            removeNode(p.next);\n\n            p = start = b;\n        }\n        p = p.next;\n    } while (p !== start);\n\n    return filterPoints(p);\n}\n\n// try splitting polygon into two and triangulate them independently\nfunction splitEarcut(start, triangles, dim, minX, minY, invSize) {\n    // look for a valid diagonal that divides the polygon into two\n    var a = start;\n    do {\n        var b = a.next.next;\n        while (b !== a.prev) {\n            if (a.i !== b.i && isValidDiagonal(a, b)) {\n                // split the polygon in two by the diagonal\n                var c = splitPolygon(a, b);\n\n                // filter colinear points around the cuts\n                a = filterPoints(a, a.next);\n                c = filterPoints(c, c.next);\n\n                // run earcut on each half\n                earcutLinked(a, triangles, dim, minX, minY, invSize);\n                earcutLinked(c, triangles, dim, minX, minY, invSize);\n                return;\n            }\n            b = b.next;\n        }\n        a = a.next;\n    } while (a !== start);\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\nfunction eliminateHoles(data, holeIndices, outerNode, dim) {\n    var queue = [],\n        i, len, start, end, list;\n\n    for (i = 0, len = holeIndices.length; i < len; i++) {\n        start = holeIndices[i] * dim;\n        end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n        list = linkedList(data, start, end, dim, false);\n        if (list === list.next) list.steiner = true;\n        queue.push(getLeftmost(list));\n    }\n\n    queue.sort(compareX);\n\n    // process holes from left to right\n    for (i = 0; i < queue.length; i++) {\n        eliminateHole(queue[i], outerNode);\n        outerNode = filterPoints(outerNode, outerNode.next);\n    }\n\n    return outerNode;\n}\n\nfunction compareX(a, b) {\n    return a.x - b.x;\n}\n\n// find a bridge between vertices that connects hole with an outer ring and and link it\nfunction eliminateHole(hole, outerNode) {\n    outerNode = findHoleBridge(hole, outerNode);\n    if (outerNode) {\n        var b = splitPolygon(outerNode, hole);\n\n        // filter collinear points around the cuts\n        filterPoints(outerNode, outerNode.next);\n        filterPoints(b, b.next);\n    }\n}\n\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\nfunction findHoleBridge(hole, outerNode) {\n    var p = outerNode,\n        hx = hole.x,\n        hy = hole.y,\n        qx = -Infinity,\n        m;\n\n    // find a segment intersected by a ray from the hole's leftmost point to the left;\n    // segment's endpoint with lesser x will be potential connection point\n    do {\n        if (hy <= p.y && hy >= p.next.y && p.next.y !== p.y) {\n            var x = p.x + (hy - p.y) * (p.next.x - p.x) / (p.next.y - p.y);\n            if (x <= hx && x > qx) {\n                qx = x;\n                if (x === hx) {\n                    if (hy === p.y) return p;\n                    if (hy === p.next.y) return p.next;\n                }\n                m = p.x < p.next.x ? p : p.next;\n            }\n        }\n        p = p.next;\n    } while (p !== outerNode);\n\n    if (!m) return null;\n\n    if (hx === qx) return m; // hole touches outer segment; pick leftmost endpoint\n\n    // look for points inside the triangle of hole point, segment intersection and endpoint;\n    // if there are no points found, we have a valid connection;\n    // otherwise choose the point of the minimum angle with the ray as connection point\n\n    var stop = m,\n        mx = m.x,\n        my = m.y,\n        tanMin = Infinity,\n        tan;\n\n    p = m;\n\n    do {\n        if (hx >= p.x && p.x >= mx && hx !== p.x &&\n                pointInTriangle(hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y)) {\n\n            tan = Math.abs(hy - p.y) / (hx - p.x); // tangential\n\n            if (locallyInside(p, hole) &&\n                (tan < tanMin || (tan === tanMin && (p.x > m.x || (p.x === m.x && sectorContainsSector(m, p)))))) {\n                m = p;\n                tanMin = tan;\n            }\n        }\n\n        p = p.next;\n    } while (p !== stop);\n\n    return m;\n}\n\n// whether sector in vertex m contains sector in vertex p in the same coordinates\nfunction sectorContainsSector(m, p) {\n    return area(m.prev, m, p.prev) < 0 && area(p.next, m, m.next) < 0;\n}\n\n// interlink polygon nodes in z-order\nfunction indexCurve(start, minX, minY, invSize) {\n    var p = start;\n    do {\n        if (p.z === null) p.z = zOrder(p.x, p.y, minX, minY, invSize);\n        p.prevZ = p.prev;\n        p.nextZ = p.next;\n        p = p.next;\n    } while (p !== start);\n\n    p.prevZ.nextZ = null;\n    p.prevZ = null;\n\n    sortLinked(p);\n}\n\n// Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\nfunction sortLinked(list) {\n    var i, p, q, e, tail, numMerges, pSize, qSize,\n        inSize = 1;\n\n    do {\n        p = list;\n        list = null;\n        tail = null;\n        numMerges = 0;\n\n        while (p) {\n            numMerges++;\n            q = p;\n            pSize = 0;\n            for (i = 0; i < inSize; i++) {\n                pSize++;\n                q = q.nextZ;\n                if (!q) break;\n            }\n            qSize = inSize;\n\n            while (pSize > 0 || (qSize > 0 && q)) {\n\n                if (pSize !== 0 && (qSize === 0 || !q || p.z <= q.z)) {\n                    e = p;\n                    p = p.nextZ;\n                    pSize--;\n                } else {\n                    e = q;\n                    q = q.nextZ;\n                    qSize--;\n                }\n\n                if (tail) tail.nextZ = e;\n                else list = e;\n\n                e.prevZ = tail;\n                tail = e;\n            }\n\n            p = q;\n        }\n\n        tail.nextZ = null;\n        inSize *= 2;\n\n    } while (numMerges > 1);\n\n    return list;\n}\n\n// z-order of a point given coords and inverse of the longer side of data bbox\nfunction zOrder(x, y, minX, minY, invSize) {\n    // coords are transformed into non-negative 15-bit integer range\n    x = 32767 * (x - minX) * invSize;\n    y = 32767 * (y - minY) * invSize;\n\n    x = (x | (x << 8)) & 0x00FF00FF;\n    x = (x | (x << 4)) & 0x0F0F0F0F;\n    x = (x | (x << 2)) & 0x33333333;\n    x = (x | (x << 1)) & 0x55555555;\n\n    y = (y | (y << 8)) & 0x00FF00FF;\n    y = (y | (y << 4)) & 0x0F0F0F0F;\n    y = (y | (y << 2)) & 0x33333333;\n    y = (y | (y << 1)) & 0x55555555;\n\n    return x | (y << 1);\n}\n\n// find the leftmost node of a polygon ring\nfunction getLeftmost(start) {\n    var p = start,\n        leftmost = start;\n    do {\n        if (p.x < leftmost.x || (p.x === leftmost.x && p.y < leftmost.y)) leftmost = p;\n        p = p.next;\n    } while (p !== start);\n\n    return leftmost;\n}\n\n// check if a point lies within a convex triangle\nfunction pointInTriangle(ax, ay, bx, by, cx, cy, px, py) {\n    return (cx - px) * (ay - py) - (ax - px) * (cy - py) >= 0 &&\n           (ax - px) * (by - py) - (bx - px) * (ay - py) >= 0 &&\n           (bx - px) * (cy - py) - (cx - px) * (by - py) >= 0;\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\nfunction isValidDiagonal(a, b) {\n    return a.next.i !== b.i && a.prev.i !== b.i && !intersectsPolygon(a, b) && // dones't intersect other edges\n           (locallyInside(a, b) && locallyInside(b, a) && middleInside(a, b) && // locally visible\n            (area(a.prev, a, b.prev) || area(a, b.prev, b)) || // does not create opposite-facing sectors\n            equals(a, b) && area(a.prev, a, a.next) > 0 && area(b.prev, b, b.next) > 0); // special zero-length case\n}\n\n// signed area of a triangle\nfunction area(p, q, r) {\n    return (q.y - p.y) * (r.x - q.x) - (q.x - p.x) * (r.y - q.y);\n}\n\n// check if two points are equal\nfunction equals(p1, p2) {\n    return p1.x === p2.x && p1.y === p2.y;\n}\n\n// check if two segments intersect\nfunction intersects(p1, q1, p2, q2) {\n    var o1 = sign(area(p1, q1, p2));\n    var o2 = sign(area(p1, q1, q2));\n    var o3 = sign(area(p2, q2, p1));\n    var o4 = sign(area(p2, q2, q1));\n\n    if (o1 !== o2 && o3 !== o4) return true; // general case\n\n    if (o1 === 0 && onSegment(p1, p2, q1)) return true; // p1, q1 and p2 are collinear and p2 lies on p1q1\n    if (o2 === 0 && onSegment(p1, q2, q1)) return true; // p1, q1 and q2 are collinear and q2 lies on p1q1\n    if (o3 === 0 && onSegment(p2, p1, q2)) return true; // p2, q2 and p1 are collinear and p1 lies on p2q2\n    if (o4 === 0 && onSegment(p2, q1, q2)) return true; // p2, q2 and q1 are collinear and q1 lies on p2q2\n\n    return false;\n}\n\n// for collinear points p, q, r, check if point q lies on segment pr\nfunction onSegment(p, q, r) {\n    return q.x <= Math.max(p.x, r.x) && q.x >= Math.min(p.x, r.x) && q.y <= Math.max(p.y, r.y) && q.y >= Math.min(p.y, r.y);\n}\n\nfunction sign(num) {\n    return num > 0 ? 1 : num < 0 ? -1 : 0;\n}\n\n// check if a polygon diagonal intersects any polygon segments\nfunction intersectsPolygon(a, b) {\n    var p = a;\n    do {\n        if (p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n                intersects(p, p.next, a, b)) return true;\n        p = p.next;\n    } while (p !== a);\n\n    return false;\n}\n\n// check if a polygon diagonal is locally inside the polygon\nfunction locallyInside(a, b) {\n    return area(a.prev, a, a.next) < 0 ?\n        area(a, b, a.next) >= 0 && area(a, a.prev, b) >= 0 :\n        area(a, b, a.prev) < 0 || area(a, a.next, b) < 0;\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\nfunction middleInside(a, b) {\n    var p = a,\n        inside = false,\n        px = (a.x + b.x) / 2,\n        py = (a.y + b.y) / 2;\n    do {\n        if (((p.y > py) !== (p.next.y > py)) && p.next.y !== p.y &&\n                (px < (p.next.x - p.x) * (py - p.y) / (p.next.y - p.y) + p.x))\n            inside = !inside;\n        p = p.next;\n    } while (p !== a);\n\n    return inside;\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\nfunction splitPolygon(a, b) {\n    var a2 = new Node(a.i, a.x, a.y),\n        b2 = new Node(b.i, b.x, b.y),\n        an = a.next,\n        bp = b.prev;\n\n    a.next = b;\n    b.prev = a;\n\n    a2.next = an;\n    an.prev = a2;\n\n    b2.next = a2;\n    a2.prev = b2;\n\n    bp.next = b2;\n    b2.prev = bp;\n\n    return b2;\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\nfunction insertNode(i, x, y, last) {\n    var p = new Node(i, x, y);\n\n    if (!last) {\n        p.prev = p;\n        p.next = p;\n\n    } else {\n        p.next = last.next;\n        p.prev = last;\n        last.next.prev = p;\n        last.next = p;\n    }\n    return p;\n}\n\nfunction removeNode(p) {\n    p.next.prev = p.prev;\n    p.prev.next = p.next;\n\n    if (p.prevZ) p.prevZ.nextZ = p.nextZ;\n    if (p.nextZ) p.nextZ.prevZ = p.prevZ;\n}\n\nfunction Node(i, x, y) {\n    // vertex index in coordinates array\n    this.i = i;\n\n    // vertex coordinates\n    this.x = x;\n    this.y = y;\n\n    // previous and next vertex nodes in a polygon ring\n    this.prev = null;\n    this.next = null;\n\n    // z-order curve value\n    this.z = null;\n\n    // previous and next nodes in z-order\n    this.prevZ = null;\n    this.nextZ = null;\n\n    // indicates whether this is a steiner point\n    this.steiner = false;\n}\n\n// return a percentage difference between the polygon area and its triangulation area;\n// used to verify correctness of triangulation\nearcut.deviation = function (data, holeIndices, dim, triangles) {\n    var hasHoles = holeIndices && holeIndices.length;\n    var outerLen = hasHoles ? holeIndices[0] * dim : data.length;\n\n    var polygonArea = Math.abs(signedArea(data, 0, outerLen, dim));\n    if (hasHoles) {\n        for (var i = 0, len = holeIndices.length; i < len; i++) {\n            var start = holeIndices[i] * dim;\n            var end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n            polygonArea -= Math.abs(signedArea(data, start, end, dim));\n        }\n    }\n\n    var trianglesArea = 0;\n    for (i = 0; i < triangles.length; i += 3) {\n        var a = triangles[i] * dim;\n        var b = triangles[i + 1] * dim;\n        var c = triangles[i + 2] * dim;\n        trianglesArea += Math.abs(\n            (data[a] - data[c]) * (data[b + 1] - data[a + 1]) -\n            (data[a] - data[b]) * (data[c + 1] - data[a + 1]));\n    }\n\n    return polygonArea === 0 && trianglesArea === 0 ? 0 :\n        Math.abs((trianglesArea - polygonArea) / polygonArea);\n};\n\nfunction signedArea(data, start, end, dim) {\n    var sum = 0;\n    for (var i = start, j = end - dim; i < end; i += dim) {\n        sum += (data[j] - data[i]) * (data[i + 1] + data[j + 1]);\n        j = i;\n    }\n    return sum;\n}\n\n// turn a polygon in a multi-dimensional array form (e.g. as in GeoJSON) into a form Earcut accepts\nearcut.flatten = function (data) {\n    var dim = data[0][0].length,\n        result = {vertices: [], holes: [], dimensions: dim},\n        holeIndex = 0;\n\n    for (var i = 0; i < data.length; i++) {\n        for (var j = 0; j < data[i].length; j++) {\n            for (var d = 0; d < dim; d++) result.vertices.push(data[i][j][d]);\n        }\n        if (i > 0) {\n            holeIndex += data[i - 1].length;\n            result.holes.push(holeIndex);\n        }\n    }\n    return result;\n};\n","export default function(x) {\n  return x;\n}\n","import reverse from \"./reverse.js\";\nimport transform from \"./transform.js\";\n\nexport default function(topology, o) {\n  if (typeof o === \"string\") o = topology.objects[o];\n  return o.type === \"GeometryCollection\"\n      ? {type: \"FeatureCollection\", features: o.geometries.map(function(o) { return feature(topology, o); })}\n      : feature(topology, o);\n}\n\nfunction feature(topology, o) {\n  var id = o.id,\n      bbox = o.bbox,\n      properties = o.properties == null ? {} : o.properties,\n      geometry = object(topology, o);\n  return id == null && bbox == null ? {type: \"Feature\", properties: properties, geometry: geometry}\n      : bbox == null ? {type: \"Feature\", id: id, properties: properties, geometry: geometry}\n      : {type: \"Feature\", id: id, bbox: bbox, properties: properties, geometry: geometry};\n}\n\nexport function object(topology, o) {\n  var transformPoint = transform(topology.transform),\n      arcs = topology.arcs;\n\n  function arc(i, points) {\n    if (points.length) points.pop();\n    for (var a = arcs[i < 0 ? ~i : i], k = 0, n = a.length; k < n; ++k) {\n      points.push(transformPoint(a[k], k));\n    }\n    if (i < 0) reverse(points, n);\n  }\n\n  function point(p) {\n    return transformPoint(p);\n  }\n\n  function line(arcs) {\n    var points = [];\n    for (var i = 0, n = arcs.length; i < n; ++i) arc(arcs[i], points);\n    if (points.length < 2) points.push(points[0]); // This should never happen per the specification.\n    return points;\n  }\n\n  function ring(arcs) {\n    var points = line(arcs);\n    while (points.length < 4) points.push(points[0]); // This may happen if an arc has only two points.\n    return points;\n  }\n\n  function polygon(arcs) {\n    return arcs.map(ring);\n  }\n\n  function geometry(o) {\n    var type = o.type, coordinates;\n    switch (type) {\n      case \"GeometryCollection\": return {type: type, geometries: o.geometries.map(geometry)};\n      case \"Point\": coordinates = point(o.coordinates); break;\n      case \"MultiPoint\": coordinates = o.coordinates.map(point); break;\n      case \"LineString\": coordinates = line(o.arcs); break;\n      case \"MultiLineString\": coordinates = o.arcs.map(line); break;\n      case \"Polygon\": coordinates = polygon(o.arcs); break;\n      case \"MultiPolygon\": coordinates = o.arcs.map(polygon); break;\n      default: return null;\n    }\n    return {type: type, coordinates: coordinates};\n  }\n\n  return geometry(o);\n}\n","import identity from \"./identity.js\";\n\nexport default function(transform) {\n  if (transform == null) return identity;\n  var x0,\n      y0,\n      kx = transform.scale[0],\n      ky = transform.scale[1],\n      dx = transform.translate[0],\n      dy = transform.translate[1];\n  return function(input, i) {\n    if (!i) x0 = y0 = 0;\n    var j = 2, n = input.length, output = new Array(n);\n    output[0] = (x0 += input[0]) * kx + dx;\n    output[1] = (y0 += input[1]) * ky + dy;\n    while (j < n) output[j] = input[j], ++j;\n    return output;\n  };\n}\n","export default function(array, n) {\n  var t, j = array.length, i = j - n;\n  while (i < --j) t = array[i], array[i++] = array[j], array[j] = t;\n}\n","export default function(topology, arcs) {\n  var stitchedArcs = {},\n      fragmentByStart = {},\n      fragmentByEnd = {},\n      fragments = [],\n      emptyIndex = -1;\n\n  // Stitch empty arcs first, since they may be subsumed by other arcs.\n  arcs.forEach(function(i, j) {\n    var arc = topology.arcs[i < 0 ? ~i : i], t;\n    if (arc.length < 3 && !arc[1][0] && !arc[1][1]) {\n      t = arcs[++emptyIndex], arcs[emptyIndex] = i, arcs[j] = t;\n    }\n  });\n\n  arcs.forEach(function(i) {\n    var e = ends(i),\n        start = e[0],\n        end = e[1],\n        f, g;\n\n    if (f = fragmentByEnd[start]) {\n      delete fragmentByEnd[f.end];\n      f.push(i);\n      f.end = end;\n      if (g = fragmentByStart[end]) {\n        delete fragmentByStart[g.start];\n        var fg = g === f ? f : f.concat(g);\n        fragmentByStart[fg.start = f.start] = fragmentByEnd[fg.end = g.end] = fg;\n      } else {\n        fragmentByStart[f.start] = fragmentByEnd[f.end] = f;\n      }\n    } else if (f = fragmentByStart[end]) {\n      delete fragmentByStart[f.start];\n      f.unshift(i);\n      f.start = start;\n      if (g = fragmentByEnd[start]) {\n        delete fragmentByEnd[g.end];\n        var gf = g === f ? f : g.concat(f);\n        fragmentByStart[gf.start = g.start] = fragmentByEnd[gf.end = f.end] = gf;\n      } else {\n        fragmentByStart[f.start] = fragmentByEnd[f.end] = f;\n      }\n    } else {\n      f = [i];\n      fragmentByStart[f.start = start] = fragmentByEnd[f.end = end] = f;\n    }\n  });\n\n  function ends(i) {\n    var arc = topology.arcs[i < 0 ? ~i : i], p0 = arc[0], p1;\n    if (topology.transform) p1 = [0, 0], arc.forEach(function(dp) { p1[0] += dp[0], p1[1] += dp[1]; });\n    else p1 = arc[arc.length - 1];\n    return i < 0 ? [p1, p0] : [p0, p1];\n  }\n\n  function flush(fragmentByEnd, fragmentByStart) {\n    for (var k in fragmentByEnd) {\n      var f = fragmentByEnd[k];\n      delete fragmentByStart[f.start];\n      delete f.start;\n      delete f.end;\n      f.forEach(function(i) { stitchedArcs[i < 0 ? ~i : i] = 1; });\n      fragments.push(f);\n    }\n  }\n\n  flush(fragmentByEnd, fragmentByStart);\n  flush(fragmentByStart, fragmentByEnd);\n  arcs.forEach(function(i) { if (!stitchedArcs[i < 0 ? ~i : i]) fragments.push([i]); });\n\n  return fragments;\n}\n","import {object} from \"./feature.js\";\nimport stitch from \"./stitch.js\";\n\nfunction planarRingArea(ring) {\n  var i = -1, n = ring.length, a, b = ring[n - 1], area = 0;\n  while (++i < n) a = b, b = ring[i], area += a[0] * b[1] - a[1] * b[0];\n  return Math.abs(area); // Note: doubled area!\n}\n\nexport default function(topology) {\n  return object(topology, mergeArcs.apply(this, arguments));\n}\n\nexport function mergeArcs(topology, objects) {\n  var polygonsByArc = {},\n      polygons = [],\n      groups = [];\n\n  objects.forEach(geometry);\n\n  function geometry(o) {\n    switch (o.type) {\n      case \"GeometryCollection\": o.geometries.forEach(geometry); break;\n      case \"Polygon\": extract(o.arcs); break;\n      case \"MultiPolygon\": o.arcs.forEach(extract); break;\n    }\n  }\n\n  function extract(polygon) {\n    polygon.forEach(function(ring) {\n      ring.forEach(function(arc) {\n        (polygonsByArc[arc = arc < 0 ? ~arc : arc] || (polygonsByArc[arc] = [])).push(polygon);\n      });\n    });\n    polygons.push(polygon);\n  }\n\n  function area(ring) {\n    return planarRingArea(object(topology, {type: \"Polygon\", arcs: [ring]}).coordinates[0]);\n  }\n\n  polygons.forEach(function(polygon) {\n    if (!polygon._) {\n      var group = [],\n          neighbors = [polygon];\n      polygon._ = 1;\n      groups.push(group);\n      while (polygon = neighbors.pop()) {\n        group.push(polygon);\n        polygon.forEach(function(ring) {\n          ring.forEach(function(arc) {\n            polygonsByArc[arc < 0 ? ~arc : arc].forEach(function(polygon) {\n              if (!polygon._) {\n                polygon._ = 1;\n                neighbors.push(polygon);\n              }\n            });\n          });\n        });\n      }\n    }\n  });\n\n  polygons.forEach(function(polygon) {\n    delete polygon._;\n  });\n\n  return {\n    type: \"MultiPolygon\",\n    arcs: groups.map(function(polygons) {\n      var arcs = [], n;\n\n      // Extract the exterior (unique) arcs.\n      polygons.forEach(function(polygon) {\n        polygon.forEach(function(ring) {\n          ring.forEach(function(arc) {\n            if (polygonsByArc[arc < 0 ? ~arc : arc].length < 2) {\n              arcs.push(arc);\n            }\n          });\n        });\n      });\n\n      // Stitch the arcs into one or more rings.\n      arcs = stitch(topology, arcs);\n\n      // If more than one ring is returned,\n      // at most one of these rings can be the exterior;\n      // choose the one with the greatest absolute area.\n      if ((n = arcs.length) > 1) {\n        for (var i = 1, k = area(arcs[0]), ki, t; i < n; ++i) {\n          if ((ki = area(arcs[i])) > k) {\n            t = arcs[0], arcs[0] = arcs[i], arcs[i] = t, k = ki;\n          }\n        }\n      }\n\n      return arcs;\n    }).filter(function(arcs) {\n      return arcs.length > 0;\n    })\n  };\n}\n","import { interpolate } from 'd3-interpolate';\nimport earcut from 'earcut';\nimport { feature, mergeArcs } from 'topojson-client';\nimport { bisector } from 'd3-array';\n\nfunction pointDistance (point1, point2) {\n  return Math.sqrt(\n    (point1[0] - point2[0]) ** 2 +\n    (point1[1] - point2[1]) ** 2\n  )\n}\n\nfunction linearRingLength (linearRing) {\n  let totalLength = 0;\n\n  for (let i = 0; i < linearRing.length - 1; i++) {\n    const from = linearRing[i];\n    const to = linearRing[i + 1];\n\n    totalLength += pointDistance(from, to);\n  }\n\n  return totalLength\n}\n\n/*\n  Why this weird map function when there is Array.map?\n  Well, usually premature optimization is the root of all evil,\n  but Array.map is just really really slow.\n\n  See, for example,  https://jsperf.com/map-reduce-named-functions/2\n  Array.map is more than 6x slower than a classical for loop,\n  and almost 4x slower than a custom implementation like this one.\n*/\nfunction map (array, callback) {\n  const result = [];\n\n  for (let i = 0; i < array.length; i++) {\n    result.push(callback(array[i], i));\n  }\n\n  return result\n}\n\nfunction every (array, condition) {\n  for (let i = 0; i < array.length; i++) {\n    if (condition(array[i], i)) return false\n  }\n\n  return true\n}\n\nfunction getOrderDescending (array) {\n  const indexArray = map(array, (_, i) => i);\n  indexArray.sort((a, b) => array[b] - array[a]);\n\n  return indexArray\n}\n\nfunction sortIntoOrder (array, order) {\n  return map(order, i => array[i])\n}\n\nfunction getInsertionIndexDescending (arraySortedDescending, value) {\n  if (arraySortedDescending.length === 0) return 0\n\n  for (let i = arraySortedDescending.length - 1; i >= 0; i--) {\n    const arrayValue = arraySortedDescending[i];\n\n    if (value <= arrayValue) return i\n  }\n\n  return 0\n}\n\nfunction removeClosingPoint (linearRing) {\n  linearRing.pop();\n\n  return linearRing\n}\n\nfunction closeRing (linearRing) {\n  let firstPoint = linearRing[0];\n  linearRing.push(firstPoint);\n\n  return linearRing\n}\n\nfunction insertPointsLinearRing (inputLinearRing, numberOfAdditionalPoints) {\n  let linearRing = cloneLinearRing(inputLinearRing);\n  linearRing = removeClosingPoint(linearRing);\n  linearRing = insertPoints(linearRing, numberOfAdditionalPoints, { ring: true });\n  linearRing = closeRing(linearRing);\n\n  return linearRing\n}\n\nfunction insertPointsLineString (inputLineString, numberOfAdditionalPoints) {\n  const lineString = cloneLinearRing(inputLineString);\n  return insertPoints(lineString, numberOfAdditionalPoints, { ring: false })\n}\n\nfunction insertPoints (lineString, numberOfAdditionalPoints, { ring }) {\n  const edgeLengths = getEdgeLengths(lineString, ring);\n  let orderedEdgeIds = getOrderDescending(edgeLengths);\n\n  for (let i = 0; i < numberOfAdditionalPoints; i++) {\n    const longestEdgeId = orderedEdgeIds[0];\n\n    const edge = getEdge(lineString, longestEdgeId);\n\n    const edgeLength = edgeLengths[longestEdgeId];\n\n    const newEdges = splitEdge(edge);\n    const newEdgesLength = edgeLength / 2;\n\n    // Remove old edge\n    orderedEdgeIds.shift();\n    lineString[longestEdgeId] = null;\n    edgeLengths[longestEdgeId] = null;\n\n    // Insert new edges\n    orderedEdgeIds = insertOrderedId(orderedEdgeIds, edgeLengths, longestEdgeId, newEdgesLength);\n\n    lineString[longestEdgeId] = newEdges[0][0];\n    lineString.splice(longestEdgeId + 1, 0, newEdges[1][0]);\n\n    edgeLengths[longestEdgeId] = newEdgesLength;\n    edgeLengths.splice(longestEdgeId + 1, 0, newEdgesLength);\n  }\n\n  return lineString\n}\n\nfunction cloneLinearRing (linearRing) {\n  const clonedLinearRing = [];\n\n  for (let i = 0; i < linearRing.length; i++) {\n    clonedLinearRing.push(linearRing[i].slice(0));\n  }\n\n  return clonedLinearRing\n}\n\nfunction getEdgeLengths (linearRing, ring) {\n  const edgeLengths = [];\n  const edges = ring ? linearRing.length : linearRing.length - 1;\n\n  for (let i = 0; i < edges; i++) {\n    const edge = getEdge(linearRing, i);\n\n    edgeLengths.push(pointDistance(edge[0], edge[1]));\n  }\n\n  return edgeLengths\n}\n\nfunction getEdge (linearRing, index) {\n  return [\n    linearRing[index], linearRing[(index + 1) % linearRing.length]\n  ]\n}\n\nfunction splitEdge (edge) {\n  const pointInBetween = interpolate(edge[0], edge[1])(0.5);\n\n  return [\n    [edge[0], pointInBetween],\n    [pointInBetween, edge[1]]\n  ]\n}\n\nfunction insertOrderedId (orderedIds, edgeLengths, valueIndex, newValue) {\n  // Insert new Ids right place\n  let idsWereInserted = false;\n\n  for (let i = 0; i < orderedIds.length; i++) {\n    const index = orderedIds[i];\n\n    // Increase all indices after the valueIndex with 1\n    if (index > valueIndex) orderedIds[i] = orderedIds[i] + 1;\n\n    const currentArrayValue = edgeLengths[index];\n    if (currentArrayValue === null) continue\n\n    if (newValue >= currentArrayValue) {\n      orderedIds.splice(i, 0, valueIndex);\n      orderedIds.splice(i + 1, 0, valueIndex + 1);\n\n      idsWereInserted = true;\n      break\n    }\n  }\n\n  if (!idsWereInserted) {\n    orderedIds.push(valueIndex);\n    orderedIds.push(valueIndex + 1);\n  }\n\n  return orderedIds\n}\n\n/*\n  Taken from flubber:\n  https://github.com/veltman/flubber\n*/\n\nfunction rotatePointsLinearRing (inputLinearRing, toLinearRing) {\n  let fromLinearRing = cloneLinearRing(inputLinearRing);\n  fromLinearRing = removeClosingPoint(fromLinearRing);\n\n  const fromLength = fromLinearRing.length;\n  let min = Infinity;\n  let bestOffset;\n  let sumOfSquares;\n  let spliced;\n\n  for (let offset = 0; offset < fromLength; offset++) {\n    sumOfSquares = 0;\n\n    toLinearRing.forEach((point, i) => {\n      const distance = pointDistance(fromLinearRing[(offset + i) % fromLength], point);\n      sumOfSquares += distance * distance;\n    });\n\n    if (sumOfSquares < min) {\n      min = sumOfSquares;\n      bestOffset = offset;\n    }\n  }\n\n  if (bestOffset) {\n    spliced = fromLinearRing.splice(0, bestOffset);\n    fromLinearRing.splice(fromLinearRing.length, 0, ...spliced);\n  }\n\n  fromLinearRing = closeRing(fromLinearRing);\n\n  return fromLinearRing\n}\n\nfunction isLinearRing (ring) {\n  return ring.constructor === Array\n}\n\nfunction isPolygon (geometry) {\n  return geometry.constructor === Object && geometry.type === 'Polygon'\n}\n\nfunction isMultiPolygon (geometry) {\n  return geometry.constructor === Object && geometry.type === 'MultiPolygon'\n}\n\nfunction isPolygonOrMultiPolygon (geometry) {\n  return isPolygon(geometry) || isMultiPolygon(geometry)\n}\n\nfunction isLineString (geometry) {\n  return geometry.constructor === Object && geometry.type === 'LineString'\n}\n\nfunction isMultiLineString (geometry) {\n  return geometry.constructor === Object && geometry.type === 'MultiLineString'\n}\n\nfunction isLineStringOrMultiLineString (geometry) {\n  return isLineString(geometry) || isMultiLineString(geometry)\n}\n\nfunction polygonArea (polygon) {\n  if (isLinearRing(polygon)) {\n    return getRingArea(polygon)\n  }\n\n  if (isPolygon(polygon)) {\n    return getPolygonArea(polygon)\n  }\n\n  if (isMultiPolygon(polygon)) {\n    return getMultiPolygonArea(polygon)\n  }\n\n  throw new Error('Invalid input')\n}\n\nfunction linearRingIsClockwise (ring) {\n  return getSignedRingArea(ring) < 0\n}\n\nfunction getRingArea (ring) {\n  return Math.abs(getSignedRingArea(ring))\n}\n\n// Taken from: https://stackoverflow.com/a/33670691/7237112\nfunction getSignedRingArea (ring) {\n  let total = 0;\n\n  for (let i = 0, l = ring.length; i < l; i++) {\n    const addX = ring[i][0];\n    const addY = ring[i === ring.length - 1 ? 0 : i + 1][1];\n    const subX = ring[i === ring.length - 1 ? 0 : i + 1][0];\n    const subY = ring[i][1];\n\n    total += (addX * addY * 0.5);\n    total -= (subX * subY * 0.5);\n  }\n\n  return total\n}\n\nfunction getPolygonArea (polygon) {\n  let totalArea = getRingArea(polygon.coordinates[0]);\n\n  for (let i = 1; i < polygon.coordinates.length; i++) {\n    const holeArea = getRingArea(polygon.coordinates[i]);\n    totalArea -= holeArea;\n  }\n\n  return totalArea\n}\n\nfunction getMultiPolygonArea (multiPolygon) {\n  let totalArea = 0;\n\n  for (let i = 0; i < multiPolygon.coordinates.length; i++) {\n    totalArea += getPolygonArea(multiPolygon.coordinates[i]);\n  }\n\n  return totalArea\n}\n\nfunction matchLinearRings (fromRings, toRings) {\n  if (tooManyRings(fromRings)) {\n    return map(fromRings, (_, i) => i)\n  }\n\n  return bestOrder(fromRings, toRings)\n}\n\nfunction tooManyRings (rings) {\n  // with more than 9 rings, everything will be too chaotic to notice this stuff anyway.\n  return rings.length > 9\n}\n\nfunction bestOrder (fromRings, toRings) {\n  const fromAreas = map(fromRings, polygonArea);\n  const toAreas = map(toRings, polygonArea);\n\n  const fromAreasOrderDescending = getOrderDescending(fromAreas);\n  const toAreasOrderDescending = getOrderDescending(toAreas);\n\n  const pairs = {};\n\n  for (let i = 0; i < toAreasOrderDescending.length; i++) {\n    const fromIndex = fromAreasOrderDescending[i];\n    const toIndex = toAreasOrderDescending[i];\n\n    pairs[toIndex] = fromIndex;\n  }\n\n  const fromOrder = [];\n\n  for (let i = 0; i < toRings.length; i++) {\n    fromOrder.push(pairs[i]);\n  }\n\n  return fromOrder\n}\n\nfunction calculateCentroid (geometry) {\n  if (isLinearRing(geometry)) {\n    return calculateLinearRingCentroid(geometry)\n  }\n\n  if (isPolygon(geometry)) {\n    return calculatePolygonCentroid(geometry)\n  }\n\n  if (isMultiPolygon(geometry)) {\n    return calculateMultiPolygonCentroid(geometry)\n  }\n}\n\n// https://stackoverflow.com/a/33852627/7237112\nfunction calculateLinearRingCentroid (ring) {\n  const nPts = ring.length;\n  const off = ring[0];\n  let twicearea = 0;\n  let x = 0;\n  let y = 0;\n  let p1;\n  let p2;\n  let f;\n\n  for (let i = 0, j = nPts - 1; i < nPts; j = i++) {\n    p1 = ring[i];\n    p2 = ring[j];\n    f = (p1[0] - off[0]) * (p2[1] - off[1]) - (p2[0] - off[0]) * (p1[1] - off[1]);\n    twicearea += f;\n    x += (p1[0] + p2[0] - 2 * off[0]) * f;\n    y += (p1[1] + p2[1] - 2 * off[1]) * f;\n  }\n\n  f = twicearea * 3;\n\n  return [x / f + off[0], y / f + off[1]]\n}\n\nfunction calculatePolygonCentroid (polygon) {\n  // We will ignore holes and just take the outer ring\n  return calculateLinearRingCentroid(polygon.coordinates[0])\n}\n\nfunction calculateMultiPolygonCentroid (multiPolygon) {\n  // We will take the centroid of each polygon (ignoring holes)\n  // and take the weighted (by area) center of these.\n  let x = 0;\n  let y = 0;\n  let totalArea = 0;\n\n  for (let i = 0; i < multiPolygon.coordinates.length; i++) {\n    const polygon = multiPolygon.coordinates[i];\n    const polygonCentroid = calculateLinearRingCentroid(polygon[0]);\n    const area = polygonArea(polygon[0]);\n\n    x += polygonCentroid[0] * area;\n    y += polygonCentroid[1] * area;\n    totalArea += area;\n  }\n\n  return [x / totalArea, y / totalArea]\n}\n\nfunction polygonToPolygon (from, to) {\n  const fromOuterRing = from.coordinates[0];\n  const toOuterRing = to.coordinates[0];\n\n  const [fromOuterRingPrepared, toOuterRingPrepared] = prepareLinearRings(fromOuterRing, toOuterRing);\n\n  if (neitherHasHoles(from, to)) {\n    return createInterpolatorNoHoles(from, to, fromOuterRingPrepared, toOuterRingPrepared)\n  }\n\n  const holeInterpolators = createHoleInterpolators(from, to);\n\n  return createInterpolatorWithHoles(\n    from, to, fromOuterRingPrepared, toOuterRingPrepared, holeInterpolators\n  )\n}\n\nfunction prepareLinearRings (fromRing, toRing) {\n  const lengthDifference = fromRing.length - toRing.length;\n\n  if (lengthDifference > 0) {\n    toRing = insertPointsLinearRing(toRing, lengthDifference);\n  }\n\n  if (lengthDifference < 0) {\n    fromRing = insertPointsLinearRing(fromRing, -lengthDifference);\n  }\n\n  const rotatedFromRing = rotatePointsLinearRing(fromRing, toRing);\n\n  return [rotatedFromRing, toRing]\n}\n\nfunction createInterpolatorNoHoles (from, to, fromOuterRingPrepared, toOuterRingPrepared) {\n  const outerRingInterpolator = interpolate(fromOuterRingPrepared, toOuterRingPrepared);\n\n  return function interpolator (t) {\n    if (t === 0) return from\n    if (t === 1) return to\n\n    const interpolatedLinearRing = outerRingInterpolator(t);\n\n    return {\n      type: 'Polygon',\n      coordinates: [interpolatedLinearRing]\n    }\n  }\n}\n\nfunction neitherHasHoles (from, to) {\n  return from.coordinates.length === 1 && to.coordinates.length === 1\n}\n\nfunction getHoles (polygon, numberOfHoles) {\n  const holes = [];\n\n  for (let i = 1; i <= numberOfHoles; i++) {\n    holes.push(polygon.coordinates[i]);\n  }\n\n  return holes\n}\n\nfunction createHoleInterpolators (from, to) {\n  let holeInterpolators = [];\n\n  const numberOfMatchableHoles = Math.min(from.coordinates.length, to.coordinates.length) - 1;\n\n  if (numberOfMatchableHoles > 0) {\n    holeInterpolators = holeInterpolators.concat(\n      createMatchableHoleInterpolators(from, to, numberOfMatchableHoles)\n    );\n  }\n\n  const differenceBetweenNumberOfHoles = from.coordinates.length - to.coordinates.length;\n\n  if (differenceBetweenNumberOfHoles > 0) {\n    holeInterpolators = holeInterpolators.concat(\n      createHoleImploders(from, differenceBetweenNumberOfHoles)\n    );\n  }\n\n  if (differenceBetweenNumberOfHoles < 0) {\n    holeInterpolators = holeInterpolators.concat(\n      createHoleExploders(to, -differenceBetweenNumberOfHoles)\n    );\n  }\n\n  return holeInterpolators\n}\n\nfunction createMatchableHoleInterpolators (from, to, numberOfMatchableHoles) {\n  const holeInterpolators = [];\n\n  const fromHoles = getHoles(from, numberOfMatchableHoles);\n  const toHoles = getHoles(to, numberOfMatchableHoles);\n\n  const fromOrder = matchLinearRings(fromHoles, toHoles);\n  const fromHolesSorted = map(fromOrder, i => fromHoles[i]);\n\n  for (let i = 0; i < numberOfMatchableHoles; i++) {\n    const fromHole = fromHolesSorted[i];\n    const toHole = toHoles[i];\n\n    const [fromHolePrepared, toHolePrepared] = prepareLinearRings(fromHole, toHole);\n\n    const holeInterpolator = interpolate(fromHolePrepared, toHolePrepared);\n\n    holeInterpolators.push(holeInterpolator);\n  }\n\n  return holeInterpolators\n}\n\nfunction createHoleImploders (polygon, differenceBetweenNumberOfHoles) {\n  const interpolators = [];\n\n  const firstHoleThatNeedsImplodingIndex = polygon.coordinates.length - differenceBetweenNumberOfHoles;\n\n  for (let i = firstHoleThatNeedsImplodingIndex; i < polygon.coordinates.length; i++) {\n    const hole = polygon.coordinates[i];\n    const holeCentroid = calculateCentroid(hole);\n    const smallRectangleAroundCentroid = makeSmallRectangleAroundPoint(holeCentroid);\n\n    const [preparedPolygon, preparedImplodePoint] = prepareLinearRings(hole, smallRectangleAroundCentroid);\n\n    interpolators.push(interpolate(preparedPolygon, preparedImplodePoint));\n  }\n\n  return interpolators\n}\n\nfunction createHoleExploders (polygon, differenceBetweenNumberOfHoles) {\n  return map(createHoleImploders(polygon, differenceBetweenNumberOfHoles), holeInterpolator => {\n    return t => holeInterpolator(1 - t)\n  })\n}\n\nfunction makeSmallRectangleAroundPoint ([x, y]) {\n  const epsilon = 1e-6;\n\n  const x1 = x - epsilon;\n  const x2 = x + epsilon;\n  const y1 = y - epsilon;\n  const y2 = y + epsilon;\n\n  return [[x1, y1], [x1, y2], [x2, y2], [x2, y1], [x1, y1]]\n}\n\nfunction createInterpolatorWithHoles (\n  from, to, fromOuterRingPrepared, toOuterRingPrepared, holeInterpolators\n) {\n  const outerRingInterpolator = interpolate(fromOuterRingPrepared, toOuterRingPrepared);\n\n  return function interpolator (t) {\n    if (t === 0) return from\n    if (t === 1) return to\n\n    const interpolatedLinearRing = outerRingInterpolator(t);\n\n    return {\n      type: 'Polygon',\n      coordinates: [\n        interpolatedLinearRing,\n        ...map(holeInterpolators, holeInterpolator => holeInterpolator(t))\n      ]\n    }\n  }\n}\n\n/*\n  Taken from flubber:\n  https://github.com/veltman/flubber\n*/\n\nfunction createTopology (vertices, triangleIndices) {\n  const arcIndices = {};\n  const topology = createEmptyTopology();\n\n  for (let i = 0; i < triangleIndices.length; i += 3) {\n    const geometry = [];\n\n    const triangleIndexArcs = createTriangleIndexArcs(triangleIndices, i);\n\n    triangleIndexArcs.forEach(arc => {\n      const slug = createArcSlug(arc);\n\n      const coordinates = map(arc, pointIndex => getPoint(vertices, pointIndex));\n\n      if (slug in arcIndices) {\n        geometry.push(~arcIndices[slug]); // Not sure what this is doing\n      } else {\n        geometry.push((arcIndices[slug] = topology.arcs.length));\n        topology.arcs.push(coordinates);\n      }\n    });\n\n    const area = getTriangleArea(vertices, triangleIndexArcs);\n    const polygon = createTopoPolygon(area, geometry);\n\n    topology.objects.triangles.geometries.push(polygon);\n  }\n\n  // Sort smallest first\n  // TODO sorted insertion?\n  topology.objects.triangles.geometries.sort((a, b) => a.area - b.area);\n\n  return topology\n}\n\nfunction createEmptyTopology () {\n  return {\n    type: 'Topology',\n    objects: {\n      triangles: {\n        type: 'GeometryCollection',\n        geometries: []\n      }\n    },\n    arcs: []\n  }\n}\n\nfunction createTriangleIndexArcs (triangleIndices, i) {\n  const a = triangleIndices[i];\n  const b = triangleIndices[i + 1];\n  const c = triangleIndices[i + 2];\n\n  return [[a, b], [b, c], [c, a]]\n}\n\nfunction createArcSlug (arc) {\n  return arc[0] < arc[1] ? arc.join(',') : arc[1] + ',' + arc[0]\n}\n\nfunction getPoint (vertices, i) {\n  return [vertices[i * 2], vertices[(i * 2) + 1]]\n}\n\nfunction createTopoPolygon (area, geometry) {\n  return {\n    type: 'Polygon',\n    area,\n    arcs: [geometry]\n  }\n}\n\nfunction getTriangleArea (vertices, triangleIndexArcs) {\n  return Math.abs(\n    polygonArea(map(triangleIndexArcs, arc => getPoint(vertices, arc[0])))\n  )\n}\n\n/*\n  Taken from flubber:\n  https://github.com/veltman/flubber\n*/\n\nconst bisect = bisector(d => d.area).left;\n\nfunction findNeighbor (geoms) {\n  // we assume the first geom is the candidate for which\n  // we want to find a neighbor\n  const sourceArcs = geoms[0].arcs[0].map(arc => arc < 0 ? ~arc : arc);\n\n  let neighbor;\n\n  // start loop at index 1, first possible neighbor\n  for (let index = 1; index < geoms.length; index++) {\n    const targetArcs = geoms[index].arcs[0].map(arc => arc < 0 ? ~arc : arc);\n    if (sourceArcs.some(arc => targetArcs.includes(arc))) {\n      neighbor = index;\n      break\n    }\n  }\n  return neighbor\n}\n\nfunction collapseTopology (topology, numberOfPieces) {\n  const triangleGeometries = topology.objects.triangles.geometries;\n\n  while (triangleGeometries.length > numberOfPieces) {\n    mergeSmallestFeature();\n  }\n\n  if (numberOfPieces > triangleGeometries.length) {\n    throw new RangeError('Can\\'t collapse topology into ' + numberOfPieces + ' pieces.')\n  }\n\n  const geojson = feature(topology, topology.objects.triangles);\n  const geojsonTriangleGeometries = map(geojson.features, feature => feature.geometry);\n\n  return geojsonTriangleGeometries\n\n  function mergeSmallestFeature () {\n    const smallest = triangleGeometries[0];\n    const neighborIndex = findNeighbor(triangleGeometries);\n    const neighbor = triangleGeometries[neighborIndex];\n    const merged = mergeArcs(topology, [smallest, neighbor]);\n\n    // MultiPolygon -> Polygon\n    merged.area = smallest.area + neighbor.area;\n    merged.type = 'Polygon';\n    merged.arcs = merged.arcs[0];\n\n    // Delete smallest and its chosen neighbor\n    triangleGeometries.splice(neighborIndex, 1);\n    triangleGeometries.shift();\n\n    // Add new merged shape in sorted order\n    triangleGeometries.splice(bisect(triangleGeometries, merged.area), 0, merged);\n  }\n}\n\nfunction createGeometries (vertices, triangleIndices) {\n  const geometries = [];\n\n  for (let i = 0; i < triangleIndices.length; i += 3) {\n    const triangleIndexArcs = createTriangleIndexArcs(triangleIndices, i);\n\n    let outerRing = map(triangleIndexArcs, arc => getPoint(vertices, arc[0]));\n    outerRing.push(getPoint(vertices, triangleIndexArcs[0][0])); // close ring\n\n    // earcut doesn't always give counterclockwise rings back\n    if (linearRingIsClockwise(outerRing)) {\n      outerRing = outerRing.reverse();\n    }\n\n    geometries.push({\n      type: 'Polygon',\n      coordinates: [outerRing]\n    });\n  }\n\n  return geometries\n}\n\nfunction sliceUpTriangles (geometries, numberOfPieces) {\n  const areas = map(geometries, polygonArea);\n\n  const order = getOrderDescending(areas);\n\n  const areasSorted = sortIntoOrder(areas, order);\n  const geometriesSorted = sortIntoOrder(geometries, order);\n\n  while (geometriesSorted.length < numberOfPieces) {\n    areasSorted.shift();\n    const biggestTriangle = geometriesSorted.shift();\n\n    const cutTriangles = cutTriangleInTwo(biggestTriangle);\n\n    const areaCutTriangles = map(cutTriangles, polygonArea);\n\n    for (let i = 0; i < cutTriangles.length; i++) {\n      const areaCutTriangle = areaCutTriangles[i];\n      const cutTriangle = cutTriangles[i];\n\n      const insertionIndex = getInsertionIndexDescending(areasSorted, areaCutTriangle);\n\n      areasSorted.splice(insertionIndex, 0, areaCutTriangle);\n      geometriesSorted.splice(insertionIndex, 0, cutTriangle);\n    }\n  }\n\n  return geometriesSorted\n}\n\nfunction cutTriangleInTwo (triangle) {\n  const a = triangle.coordinates[0][0];\n  const b = triangle.coordinates[0][1];\n  const c = triangle.coordinates[0][2];\n\n  const pointBetweenAB = interpolate(a, b)(0.5);\n\n  const firstTriangle = createTriangleGeometry([a, pointBetweenAB, c, a]);\n  const secondTriangle = createTriangleGeometry([b, c, pointBetweenAB, b]);\n\n  return [firstTriangle, secondTriangle]\n}\n\nfunction createTriangleGeometry (points) {\n  return {\n    type: 'Polygon',\n    coordinates: [points]\n  }\n}\n\n/*\n  Inspired by flubber:\n  https://github.com/veltman/flubber\n*/\n\nconst dimensions = 2;\n\nfunction cutPolygon (polygon, numberOfPieces) {\n  if (numberOfPieces < 2) throw new Error('Cannot cut polygon in less than 2 pieces')\n\n  const flattenedPolygon = earcut.flatten(polygon.coordinates);\n  const triangleIndices = earcut(flattenedPolygon.vertices, flattenedPolygon.holes, dimensions);\n\n  const numberOfTriangles = getNumberOfTriangles(triangleIndices);\n\n  if (numberOfTriangles >= numberOfPieces) {\n    const topology = createTopology(flattenedPolygon.vertices, triangleIndices);\n    return collapseTopology(topology, numberOfPieces)\n  }\n\n  if (numberOfTriangles < numberOfPieces) {\n    const triangleGeometries = createGeometries(flattenedPolygon.vertices, triangleIndices);\n    return sliceUpTriangles(triangleGeometries, numberOfPieces)\n  }\n}\n\nfunction getNumberOfTriangles (triangleIndices) {\n  return triangleIndices.length / 3\n}\n\nfunction cutPolygons (polygons, numberOfDesiredAdditionalPolygons) {\n  if (numberOfDesiredAdditionalPolygons < 1) throw wrongNumberOfPolygonsError\n\n  const polygonAreas = map(polygons, polygonArea);\n  const numberOfCutsPerPolygon = assignCuts(polygonAreas, numberOfDesiredAdditionalPolygons);\n\n  let resultingPolygons = [];\n\n  for (let i = 0; i < polygons.length; i++) {\n    const polygon = polygons[i];\n    const numberOfCuts = numberOfCutsPerPolygon[i];\n\n    if (numberOfCuts === 0) {\n      resultingPolygons.push(polygon);\n    }\n\n    if (numberOfCuts > 0) {\n      const numberOfDesiredPolygons = numberOfCuts + 1;\n      resultingPolygons = resultingPolygons.concat(cutPolygon(polygon, numberOfDesiredPolygons));\n    }\n  }\n\n  return resultingPolygons\n}\n\nconst wrongNumberOfPolygonsError = new Error('Number of desired additional polygons must be larger than 0');\n\n// https://stackoverflow.com/a/38905829/7237112\nfunction assignCuts (polygonAreas, numberOfPieces) {\n  const numberOfCutsPerPolygon = [];\n  let totalArea = sum(polygonAreas);\n\n  for (let i = 0; i < polygonAreas.length; i++) {\n    const area = polygonAreas[i];\n    const numberOfCuts = Math.round(area / totalArea * numberOfPieces);\n\n    numberOfCutsPerPolygon.push(numberOfCuts);\n    totalArea -= area;\n    numberOfPieces -= numberOfCuts;\n  }\n\n  return numberOfCutsPerPolygon\n}\n\nfunction sum (array) {\n  let sum = 0;\n\n  for (let i = 0; i < array.length; i++) {\n    sum += array[i];\n  }\n\n  return sum\n}\n\nfunction combineIntoMultiPolygon (inputGeometries) {\n  const multiPolygon = createEmptyMultiPolygon();\n\n  for (const inputGeometry of inputGeometries) {\n    if (inputGeometry.type === 'Polygon') {\n      multiPolygon.coordinates.push(inputGeometry.coordinates);\n    }\n\n    if (inputGeometry.type === 'MultiPolygon') {\n      for (const polygon of inputGeometry.coordinates) {\n        multiPolygon.coordinates.push(polygon);\n      }\n    }\n  }\n\n  return multiPolygon\n}\n\nfunction splitMultiPolygon (multiPolygon) {\n  const polygons = [];\n\n  for (const polygonCoordinates of multiPolygon.coordinates) {\n    const polygon = createEmptyPolygon();\n    polygon.coordinates = polygonCoordinates;\n\n    polygons.push(polygon);\n  }\n\n  return polygons\n}\n\nfunction createEmptyMultiPolygon () {\n  return { type: 'MultiPolygon', coordinates: [] }\n}\n\nfunction createEmptyPolygon () {\n  return { type: 'Polygon', coordinates: undefined }\n}\n\nfunction multiPolygonToMultiPolygon (from, to) {\n  let fromPolygons = splitMultiPolygon(from);\n  let toPolygons = splitMultiPolygon(to);\n\n  const lengthDifference = fromPolygons.length - toPolygons.length;\n\n  if (lengthDifference > 0) {\n    toPolygons = cutPolygons(toPolygons, lengthDifference);\n  }\n\n  if (lengthDifference < 0) {\n    fromPolygons = cutPolygons(fromPolygons, -lengthDifference);\n  }\n\n  return createInterpolatorPolygons(from, to, fromPolygons, toPolygons)\n}\n\nfunction createInterpolatorPolygons (from, to, fromPolygons, toPolygons) {\n  const fromOuterRings = map(fromPolygons, polygon => polygon.coordinates[0]);\n  const toOuterRings = map(toPolygons, polygon => polygon.coordinates[0]);\n\n  const fromOrder = matchLinearRings(fromOuterRings, toOuterRings);\n  fromPolygons = map(fromOrder, i => fromPolygons[i]);\n\n  const polygonInterpolators = [];\n\n  for (let i = 0; i < fromPolygons.length; i++) {\n    const fromPolygon = fromPolygons[i];\n    const toPolygon = toPolygons[i];\n\n    polygonInterpolators.push(polygonToPolygon(fromPolygon, toPolygon));\n  }\n\n  return function interpolator (t) {\n    if (t === 0) return from\n    if (t === 1) return to\n\n    return combineIntoMultiPolygon(\n      map(polygonInterpolators, polygonInterpolator => polygonInterpolator(t))\n    )\n  }\n}\n\nfunction multiPolygonToPolygon (from, to) {\n  const fromPolygons = splitMultiPolygon(from);\n  let toPolygons = [to];\n\n  const numberOfFromPolygons = fromPolygons.length;\n  const numberOfAdditionalToPolygonsRequried = numberOfFromPolygons - 1;\n\n  if (numberOfAdditionalToPolygonsRequried > 0) {\n    toPolygons = cutPolygon(to, numberOfFromPolygons);\n  }\n\n  return createInterpolatorPolygons(from, to, fromPolygons, toPolygons)\n}\n\nfunction polygonToMultiPolygon (from, to) {\n  const reverseInterpolator = multiPolygonToPolygon(to, from);\n\n  return function interpolator (t) {\n    return reverseInterpolator(1 - t)\n  }\n}\n\nfunction lineStringtoLineString (from, to) {\n  const [preparedFromCoordinates, preparedToCoordinates] = prepareCoordinates(\n    from.coordinates, to.coordinates\n  );\n\n  return createInterpolator(from, to, preparedFromCoordinates, preparedToCoordinates)\n}\n\nfunction prepareCoordinates (fromCoordinates, toCoordinates) {\n  const lengthDifference = fromCoordinates.length - toCoordinates.length;\n\n  let preparedFromCoordinates = fromCoordinates;\n  let preparedToCoordinates = toCoordinates;\n\n  if (lengthDifference > 0) {\n    preparedToCoordinates = insertPointsLineString(toCoordinates, lengthDifference);\n  }\n\n  if (lengthDifference < 0) {\n    preparedFromCoordinates = insertPointsLineString(fromCoordinates, -lengthDifference);\n  }\n\n  preparedFromCoordinates = reverseIfBetterMatching(preparedFromCoordinates, preparedToCoordinates);\n\n  return [preparedFromCoordinates, preparedToCoordinates]\n}\n\nfunction createInterpolator (from, to, preparedFromCoordinates, preparedToCoordinates) {\n  const coordinateInterpolator = interpolate(preparedFromCoordinates, preparedToCoordinates);\n\n  return function interpolator (t) {\n    if (t === 0) return from\n    if (t === 1) return to\n\n    return {\n      type: 'LineString',\n      coordinates: coordinateInterpolator(t)\n    }\n  }\n}\n\nfunction reverseIfBetterMatching (from, to) {\n  const normalTotalSquareDistance = getTotalSquaredDistancePositions(from, to);\n  const fromReversed = cloneLinearRing(from).reverse();\n  const reversedTotalSquareDistance = getTotalSquaredDistancePositions(fromReversed, to);\n\n  if (normalTotalSquareDistance <= reversedTotalSquareDistance) {\n    return from\n  } else {\n    return fromReversed\n  }\n}\n\nfunction getTotalSquaredDistancePositions (from, to) {\n  let totalSquaredDistance = 0;\n\n  for (let i = 0; i < from.length; i++) {\n    totalSquaredDistance += pointDistance(from[i], to[i]);\n  }\n\n  return totalSquaredDistance\n}\n\nfunction movePointAlongLine (a, b, distance) {\n  const unitVector = getUnitVector(a, b);\n  return movePoint(a, unitVector, distance)\n}\n\nfunction getUnitVector (a, b) {\n  const magnitude = pointDistance(a, b);\n  const dx = b[0] - a[0];\n  const dy = b[1] - a[1];\n\n  return [dx / magnitude, dy / magnitude]\n}\n\nfunction movePoint (point, unitVector, distance) {\n  return [\n    point[0] + unitVector[0] * distance,\n    point[1] + unitVector[1] * distance\n  ]\n}\n\nfunction multiLineStringToLineString (from, to) {\n  const numberOfFromLineStrings = from.coordinates.length;\n  const preparedToCoordinates = cutLineString(to.coordinates, numberOfFromLineStrings);\n  const lineStringInterpolators = createLineStringInterpolators(from.coordinates, preparedToCoordinates);\n\n  return createMultiLineStringInterpolator(from, to, lineStringInterpolators)\n}\n\nfunction lineStringToMultiLineString (from, to) {\n  const reverseInterpolator = multiLineStringToLineString(to, from);\n\n  return function interpolator (t) {\n    return reverseInterpolator(1 - t)\n  }\n}\n\nfunction cutLineString (toCoordinates, numberOfLineStrings) {\n  const multiLineStringCoordinates = [];\n\n  const totalLengthTo = linearRingLength(toCoordinates);\n  const desiredSegmentSize = totalLengthTo / numberOfLineStrings;\n\n  const lastPointIndex = toCoordinates.length - 1;\n\n  let currentSegment = [];\n  let elapsedDistanceSinceLastCut = 0;\n\n  for (let i = 0; i < lastPointIndex; i++) {\n    const a = toCoordinates[i];\n    currentSegment.push(a);\n    const b = toCoordinates[i + 1];\n\n    const distanceAB = pointDistance(a, b);\n    const distanceIncludingCurrentSegment = elapsedDistanceSinceLastCut + distanceAB;\n\n    if (distanceIncludingCurrentSegment < desiredSegmentSize) {\n      elapsedDistanceSinceLastCut += distanceAB;\n    }\n\n    if (distanceIncludingCurrentSegment >= desiredSegmentSize) {\n      const numberOfCuts = Math.floor(distanceIncludingCurrentSegment / desiredSegmentSize);\n\n      const cutCoordinates = calculateCutCoordinates(\n        a, b, elapsedDistanceSinceLastCut, desiredSegmentSize, numberOfCuts\n      );\n\n      currentSegment = currentSegment.concat(cutCoordinates);\n      multiLineStringCoordinates.push(currentSegment);\n\n      const lastCut = cutCoordinates[cutCoordinates.length - 1];\n\n      if (pointsEqual(lastCut, b)) {\n        currentSegment = [];\n      } else {\n        currentSegment = [lastCut];\n      }\n\n      elapsedDistanceSinceLastCut = pointDistance(lastCut, b);\n    }\n  }\n\n  return multiLineStringCoordinates\n}\n\nfunction calculateCutCoordinates (a, b, offset, size, numberOfCuts) {\n  const cuts = [];\n\n  for (let i = 1; i <= numberOfCuts; i++) {\n    cuts.push(movePointAlongLine(a, b, ((size * i) - offset)));\n  }\n\n  return cuts\n}\n\nfunction pointsEqual (a, b) {\n  return a[0] === b[0] && a[1] === b[1]\n}\n\nfunction createLineStringInterpolators (fromCoordinates, toCoordinates) {\n  const interpolators = [];\n\n  for (let i = 0; i < fromCoordinates.length; i++) {\n    const fromLineString = fromCoordinates[i];\n    const toLineString = toCoordinates[i];\n\n    const [preparedFromLineString, preparedToLineString] = prepareCoordinates(fromLineString, toLineString);\n    const interpolator = interpolate(preparedFromLineString, preparedToLineString);\n    interpolators.push(interpolator);\n  }\n\n  return interpolators\n}\n\nfunction createMultiLineStringInterpolator (from, to, lineStringInterpolators) {\n  return function interpolator (t) {\n    if (t === 0) return from\n    if (t === 1) return to\n\n    return {\n      type: 'MultiLineString',\n      coordinates: map(\n        lineStringInterpolators,\n        lineStringInterpolator => lineStringInterpolator(t)\n      )\n    }\n  }\n}\n\nfunction matchLineStrings (input, target) {\n  const inputOrder = getInputOrder(input, target);\n  return inputOrder.map(i => input[i])\n}\n\nfunction getInputOrder (input, target) {\n  const inputLengths = map(input, linearRingLength);\n  const targetLengths = map(target, linearRingLength);\n\n  const inputLengthOrderDescending = getOrderDescending(inputLengths);\n  const targetLengthOrderDescending = getOrderDescending(targetLengths);\n\n  const pairs = {};\n\n  for (let i = 0; i < targetLengthOrderDescending.length; i++) {\n    const inputIndex = inputLengthOrderDescending[i];\n    const targetIndex = targetLengthOrderDescending[i];\n\n    pairs[inputIndex] = targetIndex;\n  }\n\n  const inputOrder = [];\n\n  for (let i = 0; i < target.length; i++) {\n    inputOrder.push(pairs[i]);\n  }\n\n  return inputOrder\n}\n\nfunction multiLineStringToMultiLineString (from, to) {\n  let fromLineStrings = from.coordinates;\n  let toLineStrings = to.coordinates;\n\n  const lengthDifference = fromLineStrings.length - toLineStrings.length;\n\n  if (lengthDifference > 0) {\n    toLineStrings = splitLineStrings(toLineStrings, lengthDifference);\n  }\n\n  if (lengthDifference < 0) {\n    fromLineStrings = splitLineStrings(fromLineStrings, -lengthDifference);\n  }\n\n  fromLineStrings = matchLineStrings(fromLineStrings, toLineStrings);\n\n  const lineStringInterpolators = createLineStringInterpolators(fromLineStrings, toLineStrings);\n\n  return createMultiLineStringInterpolator(from, to, lineStringInterpolators)\n}\n\nfunction splitLineStrings (lineStrings, numberOfDesiredLineStrings) {\n  const lineStringLengths = getLengths(lineStrings);\n  const numberOfCutsPerLineString = assignCuts(lineStringLengths, numberOfDesiredLineStrings);\n\n  let resultingLineStrings = [];\n\n  for (let i = 0; i < numberOfCutsPerLineString.length; i++) {\n    const lineString = lineStrings[i];\n    const numberOfCuts = numberOfCutsPerLineString[i];\n\n    if (numberOfCuts === 0) {\n      resultingLineStrings.push(lineString);\n    }\n\n    if (numberOfCuts > 0) {\n      const numberOfDesiredPieces = numberOfCuts + 1;\n\n      resultingLineStrings = resultingLineStrings.concat(\n        cutLineString(lineString, numberOfDesiredPieces)\n      );\n    }\n  }\n\n  return resultingLineStrings\n}\n\nfunction getLengths (lineStrings) {\n  const lengths = [];\n\n  for (let i = 0; i < lineStrings.length; i++) {\n    lengths.push(\n      linearRingLength(lineStrings[i])\n    );\n  }\n\n  return lengths\n}\n\nfunction transshape (from, to) {\n  ensureValidInput(from, to);\n\n  // Polygon transitions\n  if (from.type === 'Polygon' && to.type === 'Polygon') {\n    return polygonToPolygon(from, to)\n  }\n\n  if (from.type === 'MultiPolygon' && to.type === 'Polygon') {\n    return multiPolygonToPolygon(from, to)\n  }\n\n  if (from.type === 'Polygon' && to.type === 'MultiPolygon') {\n    return polygonToMultiPolygon(from, to)\n  }\n\n  if (from.type === 'MultiPolygon' && to.type === 'MultiPolygon') {\n    return multiPolygonToMultiPolygon(from, to)\n  }\n\n  // LineString transitions\n  if (from.type === 'LineString' && to.type === 'LineString') {\n    return lineStringtoLineString(from, to)\n  }\n\n  if (from.type === 'MultiLineString' && to.type === 'LineString') {\n    return multiLineStringToLineString(from, to)\n  }\n\n  if (from.type === 'LineString' && to.type === 'MultiLineString') {\n    return lineStringToMultiLineString(from, to)\n  }\n\n  if (from.type === 'MultiLineString' && to.type === 'MultiLineString') {\n    return multiLineStringToMultiLineString(from, to)\n  }\n}\n\nfunction ensureValidInput (from, to) {\n  if (bothPolygons(from, to) || bothLines(from, to)) {\n    return\n  }\n\n  throw new Error('Invalid input')\n}\n\nfunction bothPolygons (from, to) {\n  return isPolygonOrMultiPolygon(from) && isPolygonOrMultiPolygon(to)\n}\n\nfunction bothLines (from, to) {\n  return isLineStringOrMultiLineString(from) && isLineStringOrMultiLineString(to)\n}\n\nfunction implode (geometry) {\n  ensureValidInput$1(geometry);\n\n  const centroid = calculateCentroid(geometry);\n  const implosionPoint = createSmallPolygonAroundPoint(centroid);\n\n  return transshape(geometry, implosionPoint)\n}\n\nfunction explode (geometry) {\n  ensureValidInput$1(geometry);\n\n  const centroid = calculateCentroid(geometry);\n  const explosionPoint = createSmallPolygonAroundPoint(centroid);\n\n  return transshape(explosionPoint, geometry)\n}\n\nfunction ensureValidInput$1 (geometry) {\n  if (!isPolygonOrMultiPolygon(geometry)) {\n    throw new Error('Invalid input')\n  }\n}\n\nfunction createSmallPolygonAroundPoint (point) {\n  const linearRingAroundPoint = makeSmallRectangleAroundPoint(point);\n  return {\n    type: 'Polygon',\n    coordinates: [linearRingAroundPoint]\n  }\n}\n\nfunction transshapeLayer (fromLayer, toLayer) {\n  ensureValidInput$2(fromLayer);\n\n  const keyOverlap = getKeyOverlap(fromLayer, toLayer);\n  const interpolatorObject = constructInterpolatorObject(fromLayer, toLayer, keyOverlap);\n\n  return createLayerInterpolator(fromLayer, toLayer, interpolatorObject)\n}\n\nfunction ensureValidInput$2 (fromLayer, toLayer) {\n  return every(Object.values(fromLayer), isPolygonOrMultiPolygon) &&\n    every(Object.values(fromLayer), isPolygonOrMultiPolygon)\n}\n\nfunction getKeyOverlap (fromLayer, toLayer) {\n  const keyOverlap = {};\n\n  for (const key in fromLayer) {\n    keyOverlap[key] = 'from';\n  }\n\n  for (const key in toLayer) {\n    if (keyOverlap[key]) {\n      keyOverlap[key] = 'both';\n    } else {\n      keyOverlap[key] = 'to';\n    }\n  }\n\n  return keyOverlap\n}\n\nfunction constructInterpolatorObject (fromLayer, toLayer, keyOverlap) {\n  const interpolatorObject = {};\n\n  for (const key in keyOverlap) {\n    const overlap = keyOverlap[key];\n\n    if (overlap === 'both') {\n      interpolatorObject[key] = transshape(fromLayer[key], toLayer[key]);\n    }\n\n    if (overlap === 'from') {\n      interpolatorObject[key] = implode(fromLayer[key]);\n    }\n\n    if (overlap === 'to') {\n      interpolatorObject[key] = explode(toLayer[key]);\n    }\n  }\n\n  return interpolatorObject\n}\n\nfunction createLayerInterpolator (fromLayer, toLayer, interpolatorObject) {\n  return function interpolator (t) {\n    if (t === 0) return fromLayer\n    if (t === 1) return toLayer\n\n    const layerObject = {};\n\n    for (const key in interpolatorObject) {\n      layerObject[key] = interpolatorObject[key](t);\n    }\n\n    return layerObject\n  }\n}\n\nexport { cutPolygon, cutPolygons, explode, implode, insertPointsLinearRing, matchLinearRings, rotatePointsLinearRing, transshape, transshapeLayer };\n","import { interpolate } from 'd3-interpolate'\nimport { transshape } from '@snlab/transshape'\n\nexport function transitionGeometry (fromGeometry, toGeometry) {\n  if (pointTransition(fromGeometry, toGeometry)) {\n    return interpolate(fromGeometry, toGeometry)\n  }\n\n  if (polygonTransition(fromGeometry, toGeometry)) {\n    return transshape(fromGeometry, toGeometry)\n  }\n\n  if (lineStringTransition(fromGeometry, toGeometry)) {\n    return transshape(fromGeometry, toGeometry)\n  }\n\n  throw new Error('Invalid input')\n}\n\nexport function transitionGeometries (fromLayer, toLayer) {\n  const firstFromGeometry = getFirstGeometry(fromLayer)\n  const firstToGeometry = getFirstGeometry(toLayer)\n\n  if (pointTransition(firstFromGeometry, firstToGeometry)) {\n    return transitionLayer(fromLayer, toLayer, interpolate)\n  }\n\n  if (polygonTransition(firstFromGeometry, firstToGeometry)) {\n    return transitionLayer(fromLayer, toLayer, transshape)\n  }\n\n  if (lineStringTransition(firstFromGeometry, firstToGeometry)) {\n    return transitionLayer(fromLayer, toLayer, transshape)\n  }\n\n  throw new Error('Invalid input')\n}\n\nfunction pointTransition (fromGeometry, toGeometry) {\n  return fromGeometry.type === 'Point' && toGeometry.type === 'Point'\n}\n\nconst polygonTypes = ['Polygon', 'MultiPolygon']\n\nfunction polygonTransition (fromGeometry, toGeometry) {\n  return polygonTypes.includes(fromGeometry.type) &&\n    polygonTypes.includes(toGeometry.type)\n}\n\nconst lineStringTypes = ['LineString', 'MultiLineString']\n\nfunction lineStringTransition (fromGeometry, toGeometry) {\n  return lineStringTypes.includes(fromGeometry.type) &&\n    lineStringTypes.includes(toGeometry.type)\n}\n\nfunction getFirstGeometry (layer) {\n  return layer[Object.keys(layer)[0]]\n}\n\nfunction transitionLayer (fromLayer, toLayer, interpolationMethod) {\n  const interpolatorObject = {}\n\n  for (const key in toLayer) {\n    if (key in fromLayer) {\n      interpolatorObject[key] = interpolationMethod(fromLayer[key], toLayer[key])\n    } else {\n      interpolatorObject[key] = () => toLayer[key]\n    }\n  }\n\n  return function interpolator (t) {\n    if (t === 0) return fromLayer\n    if (t === 1) return toLayer\n\n    const layer = {}\n    for (const key in interpolatorObject) {\n      layer[key] = interpolatorObject[key](t)\n    }\n\n    return layer\n  }\n}\n","export default function (bbox) {\n  return {\n    minX: bbox.x[0],\n    maxX: bbox.x[1],\n    minY: bbox.y[0],\n    maxY: bbox.y[1]\n  }\n}\n","import { calculateBboxGeometry } from '../../../../../utils/geometryUtils'\nimport createItemFromBbox from '../../../utils/createItemFromBbox.js'\n\nexport function indexRectangle (markData) {\n  const rectangleAttributes = markData.attributes\n\n  const bbox = calculateBboxGeometry(rectangleAttributes.screenGeometry)\n  const item = createItemFromBbox(bbox)\n\n  item.attributes = rectangleAttributes\n  item.markType = 'Rectangle'\n  item.markId = markData.markId\n\n  return item\n}\n\nexport function indexRectangleLayer ({ layerAttributes, keyArray, layerId }) {\n  const items = []\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n\n    const rectangleAttributes = getRectangleAttributes(layerAttributes, key)\n    const bbox = calculateBboxGeometry(rectangleAttributes.screenGeometry)\n    const item = createItemFromBbox(bbox)\n\n    item.key = key\n    item.index = i\n    item.attributes = rectangleAttributes\n    item.markType = 'Rectangle'\n    item.layerId = layerId\n\n    items.push(item)\n  }\n\n  return items\n}\n\nfunction getRectangleAttributes (layerAttributes, key) {\n  return { screenGeometry: layerAttributes.screenGeometryObject[key] }\n}\n","import { calculateBboxGeometry } from '../../../../../utils/geometryUtils'\nimport createItemFromBbox from '../../../utils/createItemFromBbox.js'\n\nexport function indexPolygon (markData) {\n  const polygonAttributes = markData.attributes\n\n  const bbox = calculateBboxGeometry(polygonAttributes.screenGeometry)\n  const item = createItemFromBbox(bbox)\n\n  item.attributes = polygonAttributes\n  item.markType = 'Polygon'\n  item.markId = markData.markId\n\n  return item\n}\n\nexport function indexPolygonLayer ({ layerAttributes, keyArray, layerId }) {\n  const items = []\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n\n    const polygonAttributes = getPolygonAttributes(layerAttributes, key)\n    const bbox = calculateBboxGeometry(polygonAttributes.screenGeometry)\n    const item = createItemFromBbox(bbox)\n\n    item.key = key\n    item.index = i\n    item.attributes = polygonAttributes\n    item.markType = 'Polygon'\n    item.layerId = layerId\n\n    items.push(item)\n  }\n\n  return items\n}\n\nfunction getPolygonAttributes (layerAttributes, key) {\n  return { screenGeometry: layerAttributes.screenGeometryObject[key] }\n}\n","import { calculateBboxGeometry } from '../../../../../utils/geometryUtils'\nimport createItemFromBbox from '../../../utils/createItemFromBbox.js'\n\nexport function indexLine (markData) {\n  const lineAttributes = markData.attributes\n  const markId = markData.markId\n\n  const pixelGeometry = lineAttributes.pixelGeometry\n  const lineStringCoords = pixelGeometry.coordinates\n\n  if (pixelGeometry.type === 'LineString') {\n    return indexLineString(lineStringCoords, lineAttributes, markId)\n  }\n\n  if (pixelGeometry.type === 'MultiLineString') {\n    return indexMultiLineString(lineStringCoords, lineAttributes, markId)\n  }\n}\n\nfunction indexLineString (lineStringCoords, lineAttributes, markId, lineStringIndex) {\n  const indexableSegments = []\n\n  for (let i = 0; i < lineStringCoords.length - 1; i++) {\n    const segment = [lineStringCoords[i], lineStringCoords[i + 1]]\n\n    const item = createSegmentItem(segment, lineAttributes, i)\n    if (lineStringIndex) {\n      // Only for MultiLineStrings\n      item.lineStringIndex = lineStringIndex\n    }\n    item.markId = markId\n    indexableSegments.push(item)\n  }\n\n  return indexableSegments\n}\n\nfunction indexMultiLineString (lineStringCoords, lineAttributes, markId) {\n  let indexableSegments = []\n\n  for (let lineStringIndex = 0; lineStringIndex < lineStringCoords.length; lineStringIndex++) {\n    indexableSegments = indexableSegments.concat(indexLineString(\n      lineStringCoords[lineStringIndex], lineAttributes, markId, lineStringIndex\n    ))\n  }\n\n  return indexableSegments\n}\n\nfunction createSegmentItem (segment, attributes, i) {\n  const segmentGeometry = { type: 'LineString', coordinates: segment }\n  const bbox = calculateBboxGeometry(segmentGeometry)\n  let item = createItemFromBbox(bbox)\n  item = takeIntoAccountStrokeWidth(item, attributes.strokeWidth)\n\n  item.attributes = {}\n  item.attributes.strokeWidth = attributes.strokeWidth\n  item.attributes.segmentGeometry = segmentGeometry\n  item.markType = 'Line'\n  item.segmentIndex = i\n\n  return item\n}\n\nfunction takeIntoAccountStrokeWidth (item, strokeWidth) {\n  const halfStrokeWidth = strokeWidth / 2\n\n  const newBbox = {\n    minX: item.minX - halfStrokeWidth,\n    maxX: item.maxX + halfStrokeWidth,\n    minY: item.minY - halfStrokeWidth,\n    maxY: item.maxY + halfStrokeWidth\n  }\n\n  return Object.assign(item, newBbox)\n}\n\nexport function indexLineLayer ({ layerAttributes, keyArray, layerId }) {\n  let items = []\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n    const lineAttributes = createLineAttributes(layerAttributes, key)\n    const pixelGeometry = lineAttributes.pixelGeometry\n    const lineStringCoords = pixelGeometry.coordinates\n\n    if (pixelGeometry.type === 'LineString') {\n      let segments = indexLineString(\n        lineStringCoords, lineAttributes, key\n      )\n\n      segments = modifyForLayer(segments, layerId, key, i)\n      items = items.concat(segments)\n    }\n\n    if (pixelGeometry.type === 'MultiLineString') {\n      let segments = indexMultiLineString(\n        lineStringCoords, lineAttributes, key\n      )\n\n      segments = modifyForLayer(segments, layerId, key, i)\n      items = items.concat(segments)\n    }\n  }\n\n  return items\n}\n\nfunction createLineAttributes (attributes, key) {\n  return {\n    pixelGeometry: attributes.pixelGeometryObject[key],\n    strokeWidth: attributes.strokeWidthObject[key]\n  }\n}\n\nfunction modifyForLayer (segments, layerId, key, index) {\n  for (let i = 0; i < segments.length; i++) {\n    const segmentItem = segments[i]\n    delete segmentItem.markId\n\n    segmentItem.layerId = layerId\n    segmentItem.key = key\n    segmentItem.index = index\n  }\n\n  return segments\n}\n","import { calculateBboxGeometry } from '../../../../../utils/geometryUtils'\nimport createItemFromBbox from '../../../utils/createItemFromBbox.js'\n\nexport function indexArea (markData) {\n  const areaAttributes = markData.attributes\n\n  const bbox = calculateBboxGeometry(areaAttributes.screenGeometry)\n  const item = createItemFromBbox(bbox)\n\n  item.attributes = areaAttributes\n  item.markType = 'Area'\n  item.markId = markData.markId\n\n  return item\n}\n\nexport function indexAreaLayer ({ layerAttributes, keyArray, layerId }) {\n  const items = []\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n\n    const areaAttributes = getAreaAttributes(layerAttributes, key)\n    const bbox = calculateBboxGeometry(areaAttributes.screenGeometry)\n    const item = createItemFromBbox(bbox)\n\n    item.key = key\n    item.index = i\n    item.attributes = areaAttributes\n    item.markType = 'Area'\n    item.layerId = layerId\n\n    items.push(item)\n  }\n\n  return items\n}\n\nfunction getAreaAttributes (layerAttributes, key) {\n  return { screenGeometry: layerAttributes.screenGeometryObject[key] }\n}\n","import { calculateBboxGeometry } from '../../../../../utils/geometryUtils'\nimport createItemFromBbox from '../../../utils/createItemFromBbox.js'\n\nexport function indexSymbol (markData) {\n  const symbolAttributes = markData.attributes\n\n  const bbox = calculateBboxGeometry(symbolAttributes.screenGeometry)\n  const item = createItemFromBbox(bbox)\n\n  item.attributes = symbolAttributes\n  item.markType = 'Symbol'\n  item.markId = markData.markId\n\n  return item\n}\n\nexport function indexSymbolLayer ({ layerAttributes, keyArray, layerId }) {\n  const items = []\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n\n    const symbolAttributes = getSymbolAttributes(layerAttributes, key)\n    const bbox = calculateBboxGeometry(symbolAttributes.screenGeometry)\n    const item = createItemFromBbox(bbox)\n\n    item.key = key\n    item.index = i\n    item.attributes = symbolAttributes\n    item.markType = 'Symbol'\n    item.layerId = layerId\n\n    items.push(item)\n  }\n\n  return items\n}\n\nfunction getSymbolAttributes (layerAttributes, key) {\n  return { screenGeometry: layerAttributes.screenGeometryObject[key] }\n}\n","import { indexPoint, indexPointLayer } from './indexPoint.js'\nimport { indexRectangle, indexRectangleLayer } from './indexRectangle.js'\nimport { indexPolygon, indexPolygonLayer } from './indexPolygon.js'\nimport { indexLine, indexLineLayer } from './indexLine.js'\nimport { indexArea, indexAreaLayer } from './indexArea.js'\nimport { indexSymbol, indexSymbolLayer } from './indexSymbol.js'\n\nexport const markIndexing = {\n  Point: indexPoint,\n  Rectangle: indexRectangle,\n  Polygon: indexPolygon,\n  Line: indexLine,\n  Label: indexPoint,\n  Area: indexArea,\n  Symbol: indexSymbol\n}\n\nexport const layerIndexing = {\n  Point: indexPointLayer,\n  Rectangle: indexRectangleLayer,\n  Polygon: indexPolygonLayer,\n  Line: indexLineLayer,\n  Label: indexPointLayer,\n  Area: indexAreaLayer,\n  Symbol: indexSymbolLayer\n}\n","import BaseInteractionInterface from './BaseInteractionInterface.js'\nimport { markIndexing, layerIndexing } from './createIndexableData'\n\nexport default class MarkInteractionInterface extends BaseInteractionInterface {\n  constructor (interactionManager, InteractionHandlers) {\n    super(interactionManager, InteractionHandlers)\n\n    this._indexableMarks = {}\n    this._indexableLayers = {}\n  }\n\n  // Mark loading and removing\n  loadMark (markType, markData) {\n    const indexingFunction = markIndexing[markType]\n    const indexableMark = indexingFunction(markData)\n\n    const markId = markData.markId\n    this._indexableMarks[markId] = indexableMark\n  }\n\n  markIsLoaded (markId) {\n    return markId in this._indexableMarks\n  }\n\n  removeMark (markId) {\n    delete this._indexableMarks[markId]\n  }\n\n  // Layer loading and removing\n  loadLayer (layerType, layerData) {\n    const indexingFunction = layerIndexing[layerType]\n    const indexableLayer = indexingFunction(layerData)\n\n    const layerId = layerData.layerId\n    this._indexableLayers[layerId] = indexableLayer\n  }\n\n  layerIsLoaded (layerId) {\n    return layerId in this._indexableLayers\n  }\n\n  removeLayer (layerId) {\n    delete this._indexableLayers[layerId]\n  }\n\n  // Add/remove mark interactions\n  addMarkInteraction (interactionName, markId, callback) {\n    this._getHandler(interactionName).addMarkInteraction(markId, callback)\n  }\n\n  removeAllMarkInteractions (markId) {\n    for (const handlerName in this._handlers) {\n      const handler = this._handlers[handlerName]\n\n      if (handler.hasMark(markId)) {\n        handler.removeMarkInteraction(markId)\n      }\n    }\n  }\n\n  // Add/remove layer interactions\n  addLayerInteraction (interactionName, layerId, callback) {\n    this._getHandler(interactionName).addLayerInteraction(layerId, callback)\n  }\n\n  removeAllLayerInteractions (layerId) {\n    for (const handlerName in this._handlers) {\n      const handler = this._handlers[handlerName]\n\n      if (handler.hasLayer(layerId)) {\n        handler.removeLayerInteraction(layerId)\n      }\n    }\n  }\n}\n","import BaseInteractionInterface from './BaseInteractionInterface.js'\n\nexport default class SectionInteractionInterface extends BaseInteractionInterface {\n  addInteraction (interactionName, callback) {\n    this._getHandler(interactionName).addInteraction(callback)\n  }\n\n  removeAllInteractions () {\n    for (const handlerName in this._handlers) {\n      const handler = this._handlers[handlerName]\n\n      if (handler.hasInteraction()) {\n        handler.removeInteraction()\n      }\n    }\n  }\n}\n","export default class BaseInteractionHandler {\n  constructor (interactionManager, { eventName, interactionName }) {\n    this._interactionManager = interactionManager\n    this._eventName = eventName\n    this._interactionName = interactionName\n  }\n\n  interactionManager () {\n    return this._interactionManager\n  }\n\n  eventManager () {\n    return this._interactionManager._eventManager\n  }\n\n  section () {\n    return this._interactionManager._section\n  }\n\n  id () {\n    return this._interactionManager._id\n  }\n\n  _addEventListener () {\n    const handler = this._handleEvent.bind(this)\n\n    const eventManager = this.eventManager()\n    const listenerId = this.getId()\n\n    const events = isArray(this._eventName) ? this._eventName : [this._eventName]\n\n    for (const event of events) {\n      eventManager\n        .eventTracker(event)\n        .addListener(listenerId, handler)\n    }\n  }\n\n  _removeEventListener () {\n    const eventManager = this.eventManager()\n    const listenerId = this.getId()\n\n    const events = isArray(this._eventName) ? this._eventName : [this._eventName]\n\n    for (const event of events) {\n      eventManager\n        .eventTracker(event)\n        .removeListener(listenerId)\n    }\n  }\n}\n\nfunction isArray (value) {\n  return value.constructor === Array\n}\n","!function(t,i){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=i():\"function\"==typeof define&&define.amd?define(i):(t=t||self).RBush=i()}(this,function(){\"use strict\";function t(t,r,e,a,h){!function t(n,r,e,a,h){for(;a>e;){if(a-e>600){var o=a-e+1,s=r-e+1,l=Math.log(o),f=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*f*(o-f)/o)*(s-o/2<0?-1:1),m=Math.max(e,Math.floor(r-s*f/o+u)),c=Math.min(a,Math.floor(r+(o-s)*f/o+u));t(n,r,m,c,h)}var p=n[r],d=e,x=a;for(i(n,e,r),h(n[a],p)>0&&i(n,e,a);d<x;){for(i(n,d,x),d++,x--;h(n[d],p)<0;)d++;for(;h(n[x],p)>0;)x--}0===h(n[e],p)?i(n,e,x):i(n,++x,a),x<=r&&(e=x+1),r<=x&&(a=x-1)}}(t,r,e||0,a||t.length-1,h||n)}function i(t,i,n){var r=t[i];t[i]=t[n],t[n]=r}function n(t,i){return t<i?-1:t>i?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function e(t,i,n){if(!n)return i.indexOf(t);for(var r=0;r<i.length;r++)if(n(t,i[r]))return r;return-1}function a(t,i){h(t,0,t.children.length,i,t)}function h(t,i,n,r,e){e||(e=p(null)),e.minX=1/0,e.minY=1/0,e.maxX=-1/0,e.maxY=-1/0;for(var a=i;a<n;a++){var h=t.children[a];o(e,t.leaf?r(h):h)}return e}function o(t,i){return t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY),t}function s(t,i){return t.minX-i.minX}function l(t,i){return t.minY-i.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function m(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function c(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(i,n,r,e,a){for(var h=[n,r];h.length;)if(!((r=h.pop())-(n=h.pop())<=e)){var o=n+Math.ceil((r-n)/e/2)*e;t(i,o,n,r,a),h.push(n,o,o,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var i=this.data,n=[];if(!c(t,i))return n;for(var r=this.toBBox,e=[];i;){for(var a=0;a<i.children.length;a++){var h=i.children[a],o=i.leaf?r(h):h;c(t,o)&&(i.leaf?n.push(h):m(t,o)?this._all(h,n):e.push(h))}i=e.pop()}return n},r.prototype.collides=function(t){var i=this.data;if(!c(t,i))return!1;for(var n=[];i;){for(var r=0;r<i.children.length;r++){var e=i.children[r],a=i.leaf?this.toBBox(e):e;if(c(t,a)){if(i.leaf||m(t,a))return!0;n.push(e)}}i=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var i=0;i<t.length;i++)this.insert(t[i]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=p([]),this},r.prototype.remove=function(t,i){if(!t)return this;for(var n,r,a,h=this.data,o=this.toBBox(t),s=[],l=[];h||s.length;){if(h||(h=s.pop(),r=s[s.length-1],n=l.pop(),a=!0),h.leaf){var f=e(t,h.children,i);if(-1!==f)return h.children.splice(f,1),s.push(h),this._condense(s),this}a||h.leaf||!m(h,o)?r?(n++,h=r.children[n],a=!1):h=null:(s.push(h),l.push(n),n=0,r=h,h=h.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,i){return t.minX-i.minX},r.prototype.compareMinY=function(t,i){return t.minY-i.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,i){for(var n=[];t;)t.leaf?i.push.apply(i,t.children):n.push.apply(n,t.children),t=n.pop();return i},r.prototype._build=function(t,i,n,r){var e,h=n-i+1,o=this._maxEntries;if(h<=o)return a(e=p(t.slice(i,n+1)),this.toBBox),e;r||(r=Math.ceil(Math.log(h)/Math.log(o)),o=Math.ceil(h/Math.pow(o,r-1))),(e=p([])).leaf=!1,e.height=r;var s=Math.ceil(h/o),l=s*Math.ceil(Math.sqrt(o));d(t,i,n,l,this.compareMinX);for(var f=i;f<=n;f+=l){var u=Math.min(f+l-1,n);d(t,f,u,s,this.compareMinY);for(var m=f;m<=u;m+=s){var c=Math.min(m+s-1,u);e.children.push(this._build(t,m,c,r-1))}}return a(e,this.toBBox),e},r.prototype._chooseSubtree=function(t,i,n,r){for(;r.push(i),!i.leaf&&r.length-1!==n;){for(var e=1/0,a=1/0,h=void 0,o=0;o<i.children.length;o++){var s=i.children[o],l=f(s),u=(m=t,c=s,(Math.max(c.maxX,m.maxX)-Math.min(c.minX,m.minX))*(Math.max(c.maxY,m.maxY)-Math.min(c.minY,m.minY))-l);u<a?(a=u,e=l<e?l:e,h=s):u===a&&l<e&&(e=l,h=s)}i=h||i.children[0]}var m,c;return i},r.prototype._insert=function(t,i,n){var r=n?t:this.toBBox(t),e=[],a=this._chooseSubtree(r,this.data,i,e);for(a.children.push(t),o(a,r);i>=0&&e[i].children.length>this._maxEntries;)this._split(e,i),i--;this._adjustParentBBoxes(r,e,i)},r.prototype._split=function(t,i){var n=t[i],r=n.children.length,e=this._minEntries;this._chooseSplitAxis(n,e,r);var h=this._chooseSplitIndex(n,e,r),o=p(n.children.splice(h,n.children.length-h));o.height=n.height,o.leaf=n.leaf,a(n,this.toBBox),a(o,this.toBBox),i?t[i-1].children.push(o):this._splitRoot(n,o)},r.prototype._splitRoot=function(t,i){this.data=p([t,i]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,i,n){for(var r,e,a,o,s,l,u,m=1/0,c=1/0,p=i;p<=n-i;p++){var d=h(t,0,p,this.toBBox),x=h(t,p,n,this.toBBox),v=(e=d,a=x,o=void 0,s=void 0,l=void 0,u=void 0,o=Math.max(e.minX,a.minX),s=Math.max(e.minY,a.minY),l=Math.min(e.maxX,a.maxX),u=Math.min(e.maxY,a.maxY),Math.max(0,l-o)*Math.max(0,u-s)),M=f(d)+f(x);v<m?(m=v,r=p,c=M<c?M:c):v===m&&M<c&&(c=M,r=p)}return r||n-i},r.prototype._chooseSplitAxis=function(t,i,n){var r=t.leaf?this.compareMinX:s,e=t.leaf?this.compareMinY:l;this._allDistMargin(t,i,n,r)<this._allDistMargin(t,i,n,e)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,i,n,r){t.children.sort(r);for(var e=this.toBBox,a=h(t,0,i,e),s=h(t,n-i,n,e),l=u(a)+u(s),f=i;f<n-i;f++){var m=t.children[f];o(a,t.leaf?e(m):m),l+=u(a)}for(var c=n-i-1;c>=i;c--){var p=t.children[c];o(s,t.leaf?e(p):p),l+=u(s)}return l},r.prototype._adjustParentBBoxes=function(t,i,n){for(var r=n;r>=0;r--)o(i[r],t)},r.prototype._condense=function(t){for(var i=t.length-1,n=void 0;i>=0;i--)0===t[i].children.length?i>0?(n=t[i-1].children).splice(n.indexOf(t[i]),1):this.clear():a(t[i],this.toBBox)},r});\n","import { pointDistance } from '../../../../utils/geometryUtils'\n\nexport default function pointCollision (coordinates, pointAttributes) {\n  const distance = pointDistance(\n    [coordinates.x, coordinates.y],\n    pointAttributes.pixelGeometry.coordinates\n  )\n\n  return distance < pointAttributes.radius\n}\n","import pointCollision from './pointCollision.js'\nimport rectangleCollision from './rectangleCollision.js'\nimport polygonCollision from './polygonCollision.js'\nimport lineCollision from './lineCollision.js'\nimport symbolCollision from './symbolCollision.js'\nimport areaCollision from './areaCollision.js'\n\nexport default {\n  Point: pointCollision,\n  Rectangle: rectangleCollision,\n  Polygon: polygonCollision,\n  Line: lineCollision,\n  Label: pointCollision,\n  Symbol: symbolCollision,\n  Area: areaCollision\n}\n","import { pointInPolygon } from '../../../../utils/geometryUtils'\n\nexport default function rectangleCollision (coordinates, rectangleAttributes) {\n  const point = [coordinates.x, coordinates.y]\n  return pointInPolygon(point, rectangleAttributes.screenGeometry)\n}\n","import { pointInPolygon } from '../../../../utils/geometryUtils'\n\nexport default function polygonCollision (coordinates, polygonAttributes) {\n  const point = [coordinates.x, coordinates.y]\n  return pointInPolygon(point, polygonAttributes.screenGeometry)\n}\n","import { pointIntersectsLineSegment } from '../../../../utils/geometryUtils'\n\nexport default function lineCollision (coordinates, lineAttributes) {\n  const mouseCoordinates = [coordinates.x, coordinates.y]\n  return pointIntersectsLineSegment(\n    mouseCoordinates,\n    lineAttributes.segmentGeometry.coordinates,\n    lineAttributes.strokeWidth\n  )\n}\n","import { pointInPolygon } from '../../../../utils/geometryUtils'\n\nexport default function symbolCollision (coordinates, symbolAttributes) {\n  const point = [coordinates.x, coordinates.y]\n  return pointInPolygon(point, symbolAttributes.screenGeometry)\n}\n","import { pointInPolygon } from '../../../../utils/geometryUtils'\n\nexport default function areaCollision (coordinates, areaAttributes) {\n  const point = [coordinates.x, coordinates.y]\n  return pointInPolygon(point, areaAttributes.screenGeometry)\n}\n","import RBush from 'rbush'\nimport collisionTests from './collisionTests'\n\nexport default class SpatialIndex {\n  constructor (interactionHandler, getMark, getLayer) {\n    this._rbush = new RBush()\n    this._interactionHandler = interactionHandler\n\n    this._getMark = getMark.bind(interactionHandler)\n    this._getLayer = getLayer.bind(interactionHandler)\n  }\n\n  // Layer indexing and unindexing\n  indexLayer (layerId) {\n    const layer = this._getLayer(layerId)\n    this._rbush.load(layer)\n  }\n\n  unindexLayer (layerId) {\n    const layer = this._getLayer(layerId)\n\n    for (let i = 0; i < layer.length; i++) {\n      const item = layer[i]\n      this._rbush.remove(item)\n    }\n  }\n\n  // Mark loading and removing\n  indexMark (markId) {\n    const mark = this._getMark(markId)\n\n    if (multipleSegments(mark)) {\n      this._rbush.load(mark)\n    } else {\n      this._rbush.insert(mark)\n    }\n  }\n\n  unindexMark (markId) {\n    const mark = this._getMark(markId)\n\n    if (multipleSegments(mark)) {\n      for (let i = 0; i < mark.length; i++) {\n        const item = mark[i]\n        this._rbush.remove(item)\n      }\n    } else {\n      this._rbush.remove(mark)\n    }\n  }\n\n  // Query functions\n  queryMouseCoordinates (mouseCoordinates, radius) {\n    const searchArea = searchAreaFromCoordinates(mouseCoordinates, radius)\n    const indexQueryResults = this._rbush.search(searchArea)\n\n    return this._getHits(mouseCoordinates, indexQueryResults)\n  }\n\n  queryBoundingBox (boundingBox) {\n    return this._rbush.search(boundingBox)\n  }\n\n  // Internal\n  _getHits (coordinates, indexQueryResults) {\n    const hits = []\n\n    for (let i = 0; i < indexQueryResults.length; i++) {\n      const indexQueryResult = indexQueryResults[i]\n      const collisionTest = collisionTests[indexQueryResult.markType]\n\n      if (collisionTest(coordinates, indexQueryResult.attributes)) {\n        hits.push(indexQueryResult)\n      }\n    }\n\n    return hits\n  }\n}\n\nfunction searchAreaFromCoordinates (coordinates, radius = 3) {\n  return {\n    minX: coordinates.x - radius,\n    maxX: coordinates.x + radius,\n    minY: coordinates.y - radius,\n    maxY: coordinates.y + radius\n  }\n}\n\nfunction multipleSegments (indexableItem) {\n  return indexableItem.constructor === Array\n}\n","import BaseInteractionHandler from './BaseInteractionHandler.js'\nimport SpatialIndex from '../../SpatialIndex'\n\nexport default class MarkInteractionHandler extends BaseInteractionHandler {\n  constructor (interactionManager, options) {\n    super(interactionManager, options)\n\n    const getMark = function (markId) {\n      return this._interactionManager.marks()._indexableMarks[markId]\n    }\n\n    const getLayer = function (layerId) {\n      return this._interactionManager.marks()._indexableLayers[layerId]\n    }\n\n    this._spatialIndex = new SpatialIndex(this, getMark, getLayer)\n\n    this._numberOfInteractions = 0\n\n    this._markCallbacks = {}\n    this._layerCallbacks = {}\n  }\n\n  // Add/remove mark interactions\n  addMarkInteraction (markId, callback) {\n    this._addEventListenerIfNecessary()\n    this._numberOfInteractions++\n    this._markCallbacks[markId] = callback\n\n    this._spatialIndex.indexMark(markId)\n  }\n\n  hasMark (markId) {\n    return markId in this._markCallbacks\n  }\n\n  removeMarkInteraction (markId) {\n    this._removeEventListenerIfNecessary()\n    delete this._markCallbacks[markId]\n    this._numberOfInteractions--\n\n    this._spatialIndex.unindexMark(markId)\n  }\n\n  // Add/remove layer interactions\n  addLayerInteraction (layerId, callback) {\n    if (!(layerId in this._layerCallbacks)) {\n      this._addEventListenerIfNecessary()\n      this._numberOfInteractions++\n      this._layerCallbacks[layerId] = callback\n\n      this._spatialIndex.indexLayer(layerId)\n    }\n  }\n\n  hasLayer (layerId) {\n    return layerId in this._layerCallbacks\n  }\n\n  removeLayerInteraction (layerId) {\n    if (layerId in this._layerCallbacks) {\n      this._numberOfInteractions--\n      delete this._layerCallbacks[layerId]\n      this._removeEventListenerIfNecessary()\n\n      this._spatialIndex.unindexLayer(layerId)\n    }\n  }\n\n  _addEventListenerIfNecessary () {\n    if (this._numberOfInteractions === 0) {\n      this._addEventListener()\n    }\n  }\n\n  _removeEventListenerIfNecessary () {\n    if (this._numberOfInteractions === 0) {\n      this._removeEventListener()\n    }\n  }\n\n  getId () {\n    return `${this.id()}-mark-${this._interactionName}`\n  }\n}\n","export function createMarkEvent (eventType, eventOptions, hit, nativeEvent) {\n  eventOptions.markType = hit.markType\n  eventOptions.hitBbox = extractBbox(hit)\n  eventOptions.hitSource = 'mark'\n\n  return createEvent(eventType, eventOptions, nativeEvent)\n}\n\nexport function createLayerEvent (eventType, eventOptions, hit, nativeEvent) {\n  eventOptions.markType = hit.markType\n  eventOptions.hitBbox = extractBbox(hit)\n  eventOptions.key = hit.key\n  eventOptions.index = hit.index\n  eventOptions.hitSource = 'layer'\n\n  return createEvent(eventType, eventOptions, nativeEvent)\n}\n\nexport function createSectionEvent (eventType, eventOptions, nativeEvent) {\n  eventOptions.hitSource = 'section'\n\n  return createEvent(eventType, eventOptions, nativeEvent)\n}\n\nfunction extractBbox (hit) {\n  return { minX: hit.minX, maxX: hit.maxX, minY: hit.minY, maxY: hit.maxY }\n}\n\nfunction createEvent (eventType, eventOptions, nativeEvent) {\n  const event = eventOptions\n\n  event.type = eventType\n  event.nativeType = nativeEvent.type\n\n  for (const key of INTERESTING_NATIVE_KEYS) {\n    event[key] = nativeEvent[key]\n  }\n\n  return event\n}\n\nconst INTERESTING_NATIVE_KEYS = [\n  'altKey', 'ctrlKey', 'shiftKey',\n  'clientX', 'clientY',\n  'pageX', 'pageY',\n  'screenX', 'screenY',\n  'timeStamp'\n]\n\nexport function createSelectMarkEvent (eventType, hit) {\n  const event = {\n    type: eventType,\n    markType: hit.markType,\n    hitSource: 'mark'\n  }\n\n  return event\n}\n\nexport function createSelectLayerEvent (eventType, hit) {\n  const event = {\n    type: eventType,\n    markType: hit.markType,\n    key: hit.key,\n    index: hit.index,\n    hitSource: 'layer'\n  }\n\n  return event\n}\n","export function getLocalCoordinates (screenCoordinates, interactionManager) {\n  const section = interactionManager._section\n  const inverseTotalTransformation = section.inverseTotalTransformation\n\n  const { minX, maxX, minY, maxY } = section.paddedBbox\n\n  const clampedX = clamp(screenCoordinates.x, minX, maxX)\n  const clampedY = clamp(screenCoordinates.y, minY, maxY)\n\n  const [localX, localY] = inverseTotalTransformation([clampedX, clampedY])\n\n  return { x: localX, y: localY }\n}\n\nexport function clamp (value, min, max) {\n  return Math.max(min, Math.min(value, max))\n}\n","export function coordinatesAreInsideSection (hit, section) {\n  const bbox = section.bbox\n\n  return (\n    hit.x >= bbox.minX &&\n    hit.x <= bbox.maxX &&\n    hit.y >= bbox.minY &&\n    hit.y <= bbox.maxY\n  )\n}\n\nexport function hitIsMark (hit) {\n  return 'markId' in hit\n}\n\nexport function hitIsInLayer (hit) {\n  return 'layerId' in hit\n}\n\nexport function getHitId (hit) {\n  if (hitIsMark(hit)) return hit.markId\n  if (hitIsInLayer(hit)) return hit.layerId + '-' + hit.key\n}\n","import MarkInteractionHandler from '../../base/handlers/MarkInteractionHandler.js'\n\nimport { createMarkEvent, createLayerEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection, hitIsMark, hitIsInLayer } from '../../utils/hitUtils.js'\n\nexport default class ClickHandler extends MarkInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'click',\n      eventName: 'click'\n    })\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    if (!coordinatesAreInsideSection(screenCoordinates, this.section())) {\n      return\n    }\n\n    const spatialIndex = this._spatialIndex\n    const hits = spatialIndex.queryMouseCoordinates(screenCoordinates)\n    const localCoordinates = getLocalCoordinates(screenCoordinates, this.interactionManager())\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n\n      if (hitIsMark(hit)) {\n        const clickEvent = createMarkEvent('click', {\n          screenCoordinates,\n          localCoordinates\n        }, hit, nativeEvent)\n\n        this._markCallbacks[hit.markId](clickEvent)\n      }\n\n      if (hitIsInLayer(hit)) {\n        const clickEvent = createLayerEvent('click', {\n          screenCoordinates,\n          localCoordinates\n        }, hit, nativeEvent)\n\n        this._layerCallbacks[hit.layerId](clickEvent)\n      }\n    }\n  }\n}\n","import MarkInteractionHandler from '../../base/handlers/MarkInteractionHandler.js'\n\nimport { createMarkEvent, createLayerEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { hitIsMark, hitIsInLayer, getHitId } from '../../utils/hitUtils.js'\n\nexport default class MouseoverHandler extends MarkInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'mouseover',\n      eventName: 'mousemove'\n    })\n\n    this._previousMouseoverIds = {}\n    this._currentMouseoverIds = {}\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    const spatialIndex = this._spatialIndex\n    const hits = spatialIndex.queryMouseCoordinates(screenCoordinates)\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n      const hitId = getHitId(hit)\n\n      this._currentMouseoverIds[hitId] = true\n\n      if (!(hitId in this._previousMouseoverIds)) {\n        this._fireCallback(hit, screenCoordinates, nativeEvent)\n      }\n    }\n\n    this._previousMouseoverIds = this._currentMouseoverIds\n    this._currentMouseoverIds = {}\n  }\n\n  _fireCallback (hit, screenCoordinates, nativeEvent) {\n    const localCoordinates = getLocalCoordinates(screenCoordinates, this.interactionManager())\n\n    if (hitIsMark(hit)) {\n      const mouseoverEvent = createMarkEvent('mouseover', {\n        screenCoordinates,\n        localCoordinates\n      }, hit, nativeEvent)\n\n      this._markCallbacks[hit.markId](mouseoverEvent)\n    }\n\n    if (hitIsInLayer(hit)) {\n      const mouseoverEvent = createLayerEvent('mouseover', {\n        screenCoordinates,\n        localCoordinates\n      }, hit, nativeEvent)\n\n      this._layerCallbacks[hit.layerId](mouseoverEvent)\n    }\n  }\n}\n","import MarkInteractionHandler from '../../base/handlers/MarkInteractionHandler.js'\n\nimport { createMarkEvent, createLayerEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { hitIsMark, hitIsInLayer, getHitId } from '../../utils/hitUtils.js'\n\nexport default class MouseoutHandler extends MarkInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'mouseout',\n      eventName: 'mousemove'\n    })\n\n    this._previousMouseoverHits = {}\n    this._currentMouseoverHits = {}\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    const spatialIndex = this._spatialIndex\n    const hits = spatialIndex.queryMouseCoordinates(screenCoordinates)\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n      const hitId = getHitId(hit)\n\n      this._currentMouseoverHits[hitId] = hit\n    }\n\n    for (const hitId in this._previousMouseoverHits) {\n      if (!(hitId in this._currentMouseoverHits)) {\n        const hit = this._previousMouseoverHits[hitId]\n        this._fireCallback(hit, screenCoordinates, nativeEvent)\n      }\n    }\n\n    this._previousMouseoverHits = this._currentMouseoverHits\n    this._currentMouseoverHits = {}\n  }\n\n  _fireCallback (hit, screenCoordinates, nativeEvent) {\n    const localCoordinates = getLocalCoordinates(screenCoordinates, this.interactionManager())\n\n    if (hitIsMark(hit)) {\n      const mouseoutEvent = createMarkEvent('mouseout', {\n        screenCoordinates,\n        localCoordinates\n      }, hit, nativeEvent)\n\n      this._markCallbacks[hit.markId](mouseoutEvent)\n    }\n\n    if (hitIsInLayer(hit)) {\n      const mouseoutEvent = createLayerEvent('mouseout', {\n        screenCoordinates,\n        localCoordinates\n      }, hit, nativeEvent)\n\n      this._layerCallbacks[hit.layerId](mouseoutEvent)\n    }\n  }\n}\n","import MarkInteractionHandler from '../../base/handlers/MarkInteractionHandler.js'\n\nimport { createMarkEvent, createLayerEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection, hitIsMark, hitIsInLayer } from '../../utils/hitUtils.js'\n\nexport default class MousedownHandler extends MarkInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'mousedown',\n      eventName: 'mousedown'\n    })\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    if (!coordinatesAreInsideSection(screenCoordinates, this.section())) {\n      return\n    }\n\n    const spatialIndex = this._spatialIndex\n    const hits = spatialIndex.queryMouseCoordinates(screenCoordinates)\n    const localCoordinates = getLocalCoordinates(screenCoordinates, this.interactionManager())\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n\n      if (hitIsMark(hit)) {\n        const mousedownEvent = createMarkEvent('mousedown', {\n          screenCoordinates,\n          localCoordinates\n        }, hit, nativeEvent)\n\n        this._markCallbacks[hit.markId](mousedownEvent)\n      }\n\n      if (hitIsInLayer(hit)) {\n        const mousedownEvent = createLayerEvent('mousedown', {\n          screenCoordinates,\n          localCoordinates\n        }, hit, nativeEvent)\n\n        this._layerCallbacks[hit.layerId](mousedownEvent)\n      }\n    }\n  }\n}\n","import MarkInteractionHandler from '../../base/handlers/MarkInteractionHandler.js'\n\nimport { createMarkEvent, createLayerEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection, hitIsMark, hitIsInLayer } from '../../utils/hitUtils.js'\n\nexport default class MouseupHandler extends MarkInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'mouseup',\n      eventName: 'mouseup'\n    })\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    if (!coordinatesAreInsideSection(screenCoordinates, this.section())) {\n      return\n    }\n\n    const spatialIndex = this._spatialIndex\n    const hits = spatialIndex.queryMouseCoordinates(screenCoordinates)\n    const localCoordinates = getLocalCoordinates(screenCoordinates, this.interactionManager())\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n\n      if (hitIsMark(hit)) {\n        const mouseupEvent = createMarkEvent('mouseup', {\n          screenCoordinates,\n          localCoordinates\n        }, hit, nativeEvent)\n\n        this._markCallbacks[hit.markId](mouseupEvent)\n      }\n\n      if (hitIsInLayer(hit)) {\n        const mouseupEvent = createLayerEvent('mouseup', {\n          screenCoordinates,\n          localCoordinates\n        }, hit, nativeEvent)\n\n        this._layerCallbacks[hit.layerId](mouseupEvent)\n      }\n    }\n  }\n}\n","import MarkInteractionHandler from '../../base/handlers/MarkInteractionHandler.js'\n\nimport { createMarkEvent, createLayerEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection, hitIsMark, hitIsInLayer, getHitId } from '../../utils/hitUtils.js'\n\nexport default class MousedragHandler extends MarkInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'mousedrag',\n      eventName: ['mousedown', 'mousemove', 'mouseup']\n    })\n\n    this._currentHits = {}\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    if (nativeEvent.eventName === 'mousedown') {\n      this._handleMousedown(screenCoordinates, nativeEvent)\n    }\n\n    if (nativeEvent.eventName === 'mousemove') {\n      this._handleMousemove(screenCoordinates, nativeEvent)\n    }\n\n    if (nativeEvent.eventName === 'mouseup') {\n      this._handleMouseup(screenCoordinates, nativeEvent)\n    }\n  }\n\n  _handleMousedown (screenCoordinates, nativeEvent) {\n    if (!coordinatesAreInsideSection(screenCoordinates, this.section())) {\n      return\n    }\n\n    const spatialIndex = this._spatialIndex\n    const hits = spatialIndex.queryMouseCoordinates(screenCoordinates)\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n      const hitId = getHitId(hit)\n\n      this._currentHits[hitId] = hit\n\n      this._fireCallback(hit, screenCoordinates, nativeEvent, 'start')\n    }\n  }\n\n  _handleMousemove (screenCoordinates, nativeEvent) {\n    if (!coordinatesAreInsideSection(screenCoordinates, this.section())) {\n      return\n    }\n\n    for (const hitId in this._currentHits) {\n      const hit = this._currentHits[hitId]\n      this._fireCallback(hit, screenCoordinates, nativeEvent, 'drag')\n    }\n  }\n\n  _handleMouseup (screenCoordinates, nativeEvent) {\n    for (const hitId in this._currentHits) {\n      const hit = this._currentHits[hitId]\n      this._fireCallback(hit, screenCoordinates, nativeEvent, 'end')\n    }\n\n    this._currentHits = {}\n  }\n\n  _fireCallback (hit, screenCoordinates, nativeEvent, dragType) {\n    const localCoordinates = getLocalCoordinates(screenCoordinates, this.interactionManager())\n\n    if (hitIsMark(hit)) {\n      const mousedragEvent = createMarkEvent('mousedrag', {\n        screenCoordinates,\n        localCoordinates,\n        dragType\n      }, hit, nativeEvent)\n\n      this._markCallbacks[hit.markId](mousedragEvent)\n    }\n\n    if (hitIsInLayer(hit)) {\n      const mousedragEvent = createLayerEvent('mousedrag', {\n        screenCoordinates,\n        localCoordinates,\n        dragType\n      }, hit, nativeEvent)\n\n      this._layerCallbacks[hit.layerId](mousedragEvent)\n    }\n  }\n}\n","import BaseInteractionHandler from './BaseInteractionHandler.js'\n\nexport default class SectionInteractionHandler extends BaseInteractionHandler {\n  constructor (interactionManager, options) {\n    super(interactionManager, options)\n    this._callback = undefined\n  }\n\n  addInteraction (callback) {\n    this._addEventListener()\n    this._callback = callback\n  }\n\n  hasInteraction () {\n    return this._callback !== undefined\n  }\n\n  removeInteraction () {\n    if (this._callback) {\n      this._callback = undefined\n      this._removeEventListener()\n    }\n  }\n\n  getId () {\n    return `${this.id()}-section-${this._interactionName}`\n  }\n}\n","import SectionInteractionHandler from '../../base/handlers/SectionInteractionHandler.js'\n\nimport { createSectionEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection } from '../../utils/hitUtils.js'\nimport getScrollLineHeight from '../../utils/getScrollLineHeight.js'\n\nexport default class WheelHandler extends SectionInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'wheel',\n      eventName: 'wheel'\n    })\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    nativeEvent.preventDefault()\n    nativeEvent.stopPropagation()\n\n    const interactionManager = this.interactionManager()\n    const section = this.section()\n\n    if (coordinatesAreInsideSection(screenCoordinates, section)) {\n      const localCoordinates = getLocalCoordinates(screenCoordinates, interactionManager)\n      const delta = getDelta(nativeEvent)\n\n      const wheelEvent = createSectionEvent('wheel', {\n        screenCoordinates,\n        localCoordinates,\n        delta\n      }, nativeEvent)\n\n      this._callback(wheelEvent)\n    }\n  }\n}\n\nlet scrollLineHeight\n\nfunction getDelta (nativeEvent) {\n  let delta\n\n  // Legacy\n  // IE pixels\n  if ('wheelDelta' in nativeEvent && nativeEvent.wheelDelta !== 0) {\n    delta = -nativeEvent.wheelDelta\n  }\n\n  // Mozilla\n  if ('detail' in nativeEvent && nativeEvent.detail !== 0) {\n    delta = -nativeEvent.detail\n  }\n\n  // Most other cases\n  if ('deltaY' in nativeEvent && nativeEvent.deltaY !== 0) {\n    delta = -nativeEvent.deltaY\n  }\n\n  if (!scrollLineHeight) {\n    scrollLineHeight = getScrollLineHeight()\n  }\n\n  return delta * (nativeEvent.deltaMode ? scrollLineHeight : 1) / 500\n}\n","// Taken from:\n// https://stackoverflow.com/a/37474225/7237112\n\nexport default function getScrollLineHeight () {\n  var r\n  var iframe = document.createElement('iframe')\n  iframe.src = '#'\n  document.body.appendChild(iframe)\n  var iwin = iframe.contentWindow\n  var idoc = iwin.document\n  idoc.open()\n  idoc.write('<!DOCTYPE html><html><head></head><body><span>a</span></body></html>')\n  idoc.close()\n  var span = idoc.body.firstElementChild\n  r = span.offsetHeight\n  document.body.removeChild(iframe)\n\n  return r\n}\n","import SectionInteractionHandler from '../../base/handlers/SectionInteractionHandler.js'\n\nimport { createSectionEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection } from '../../utils/hitUtils.js'\n\nexport default class ClickHandler extends SectionInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'click',\n      eventName: 'click'\n    })\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    const interactionManager = this.interactionManager()\n    const section = this.section()\n\n    if (coordinatesAreInsideSection(screenCoordinates, section)) {\n      const localCoordinates = getLocalCoordinates(screenCoordinates, interactionManager)\n\n      const clickEvent = createSectionEvent('click', {\n        screenCoordinates,\n        localCoordinates\n      }, nativeEvent)\n\n      this._callback(clickEvent)\n    }\n  }\n}\n","import SectionInteractionHandler from '../../base/handlers/SectionInteractionHandler.js'\n\nimport { createSectionEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection } from '../../utils/hitUtils.js'\n\nexport default class MousedownHandler extends SectionInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'mousedown',\n      eventName: 'mousedown'\n    })\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    const interactionManager = this.interactionManager()\n    const section = this.section()\n\n    if (coordinatesAreInsideSection(screenCoordinates, section)) {\n      const localCoordinates = getLocalCoordinates(screenCoordinates, interactionManager)\n\n      const mousedownEvent = createSectionEvent('mousedown', {\n        screenCoordinates,\n        localCoordinates\n      }, nativeEvent)\n\n      this._callback(mousedownEvent)\n    }\n  }\n}\n","import SectionInteractionHandler from '../../base/handlers/SectionInteractionHandler.js'\n\nimport { createSectionEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection } from '../../utils/hitUtils.js'\n\nexport default class MouseupHandler extends SectionInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'mouseup',\n      eventName: 'mouseup'\n    })\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    const interactionManager = this.interactionManager()\n    const section = this.section()\n\n    if (coordinatesAreInsideSection(screenCoordinates, section)) {\n      const localCoordinates = getLocalCoordinates(screenCoordinates, interactionManager)\n\n      const mouseupEvent = createSectionEvent('mouseup', {\n        screenCoordinates,\n        localCoordinates\n      }, nativeEvent)\n\n      this._callback(mouseupEvent)\n    }\n  }\n}\n","import SectionInteractionHandler from '../../base/handlers/SectionInteractionHandler.js'\n\nimport { createSectionEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection } from '../../utils/hitUtils.js'\n\nexport default class MouseoverHandler extends SectionInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'mouseover',\n      eventName: 'mousemove'\n    })\n\n    this._mouseCurrentlyOverSection = false\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    const interactionManager = this.interactionManager()\n    const section = this.section()\n\n    if (coordinatesAreInsideSection(screenCoordinates, section)) {\n      if (!this._mouseCurrentlyOverSection) {\n        const localCoordinates = getLocalCoordinates(screenCoordinates, interactionManager)\n\n        const mousedownEvent = createSectionEvent('mouseover', {\n          screenCoordinates,\n          localCoordinates\n        }, nativeEvent)\n\n        this._callback(mousedownEvent)\n        this._mouseCurrentlyOverSection = true\n      }\n    } else {\n      if (this._mouseCurrentlyOverSection) {\n        this._mouseCurrentlyOverSection = false\n      }\n    }\n  }\n}\n","import SectionInteractionHandler from '../../base/handlers/SectionInteractionHandler.js'\n\nimport { createSectionEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection } from '../../utils/hitUtils.js'\n\nexport default class MouseoutHandler extends SectionInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'mouseout',\n      eventName: 'mousemove'\n    })\n\n    this._mouseCurrentlyOverSection = false\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    const interactionManager = this.interactionManager()\n    const section = this.section()\n\n    if (coordinatesAreInsideSection(screenCoordinates, section)) {\n      if (!this._mouseCurrentlyOverSection) {\n        this._mouseCurrentlyOverSection = true\n      }\n    } else {\n      if (this._mouseCurrentlyOverSection) {\n        const localCoordinates = getLocalCoordinates(screenCoordinates, interactionManager)\n\n        const mouseoutEvent = createSectionEvent('mouseout', {\n          screenCoordinates,\n          localCoordinates\n        }, nativeEvent)\n\n        this._callback(mouseoutEvent)\n        this._mouseCurrentlyOverSection = false\n      }\n    }\n  }\n}\n","import SectionInteractionHandler from '../../base/handlers/SectionInteractionHandler.js'\n\nimport { createSectionEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection } from '../../utils/hitUtils.js'\n\nexport default class MousemoveHandler extends SectionInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'mouseover',\n      eventName: 'mousemove'\n    })\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    const interactionManager = this.interactionManager()\n    const section = this.section()\n\n    if (coordinatesAreInsideSection(screenCoordinates, section)) {\n      const localCoordinates = getLocalCoordinates(screenCoordinates, interactionManager)\n\n      const mousemoveEvent = createSectionEvent('mousemove', {\n        screenCoordinates,\n        localCoordinates\n      }, nativeEvent)\n\n      this._callback(mousemoveEvent)\n    }\n  }\n}\n","import BaseInteractionManager from '../base/managers/BaseInteractionManager.js'\nimport MarkInteractionInterface from '../base/interfaces/MarkInteractionInterface.js'\nimport SectionInteractionInterface from '../base/interfaces/SectionInteractionInterface.js'\n\nimport * as MarkInteractionHandlers from './mark'\nimport * as SectionInteractionHandlers from './section'\n\nexport default class MouseInteractionManager extends BaseInteractionManager {\n  constructor () {\n    super()\n\n    this._markInteractionInterface = new MarkInteractionInterface(this, MarkInteractionHandlers)\n    this._sectionInteractionInterface = new SectionInteractionInterface(this, SectionInteractionHandlers)\n  }\n}\n","export default function numberOfTouches (screenCoordinates) {\n  if (screenCoordinates.constructor === Object) return 1\n\n  return screenCoordinates.length\n}\n","import MarkInteractionHandler from '../../base/handlers/MarkInteractionHandler.js'\n\nimport { createMarkEvent, createLayerEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { hitIsMark, hitIsInLayer } from '../../utils/hitUtils.js'\nimport numberOfTouches from '../../utils/numberOfTouches.js'\n\nexport default class TouchdownHandler extends MarkInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'touchdown',\n      eventName: 'touchstart'\n    })\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    if (numberOfTouches(screenCoordinates) !== 1) {\n      return\n    }\n\n    const spatialIndex = this._spatialIndex\n    const hits = spatialIndex.queryMouseCoordinates(screenCoordinates)\n    const localCoordinates = getLocalCoordinates(screenCoordinates, this.interactionManager())\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n\n      if (hitIsMark(hit)) {\n        const touchdownEvent = createMarkEvent('touchdown', {\n          screenCoordinates,\n          localCoordinates\n        }, hit, nativeEvent)\n\n        this._markCallbacks[hit.markId](touchdownEvent)\n      }\n\n      if (hitIsInLayer(hit)) {\n        const touchdownEvent = createLayerEvent('touchdown', {\n          screenCoordinates,\n          localCoordinates\n        }, hit, nativeEvent)\n\n        this._layerCallbacks[hit.layerId](touchdownEvent)\n      }\n    }\n  }\n}\n","import MarkInteractionHandler from '../../base/handlers/MarkInteractionHandler.js'\n\nimport { createMarkEvent, createLayerEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { hitIsMark, hitIsInLayer } from '../../utils/hitUtils.js'\nimport numberOfTouches from '../../utils/numberOfTouches.js'\n\nexport default class TouchupHandler extends MarkInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'touchup',\n      eventName: ['touchend', 'touchcancel']\n    })\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    if (numberOfTouches(screenCoordinates) !== 1) {\n      return\n    }\n\n    const spatialIndex = this._spatialIndex\n    const hits = spatialIndex.queryMouseCoordinates(screenCoordinates)\n    const localCoordinates = getLocalCoordinates(screenCoordinates, this.interactionManager())\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n\n      if (hitIsMark(hit)) {\n        const touchupEvent = createMarkEvent('touchup', {\n          screenCoordinates,\n          localCoordinates\n        }, hit, nativeEvent)\n\n        this._markCallbacks[hit.markId](touchupEvent)\n      }\n\n      if (hitIsInLayer(hit)) {\n        const touchupEvent = createLayerEvent('touchup', {\n          screenCoordinates,\n          localCoordinates\n        }, hit, nativeEvent)\n\n        this._layerCallbacks[hit.layerId](touchupEvent)\n      }\n    }\n  }\n}\n","import MarkInteractionHandler from '../../base/handlers/MarkInteractionHandler.js'\n\nimport { createMarkEvent, createLayerEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection, hitIsMark, hitIsInLayer, getHitId } from '../../utils/hitUtils.js'\nimport numberOfTouches from '../../utils/numberOfTouches.js'\n\nexport default class TouchoverHandler extends MarkInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'touchover',\n      eventName: ['touchstart', 'touchmove']\n    })\n\n    this._previousHits = {}\n    this._currentHits = {}\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    if (numberOfTouches(screenCoordinates) !== 1) {\n      return\n    }\n\n    if (nativeEvent.eventName === 'touchstart') {\n      this._handleTouchstart(screenCoordinates, nativeEvent)\n    }\n\n    if (nativeEvent.eventName === 'touchmove') {\n      this._handleTouchmove(screenCoordinates, nativeEvent)\n    }\n  }\n\n  _handleTouchstart (screenCoordinates, nativeEvent) {\n    if (!coordinatesAreInsideSection(screenCoordinates, this.section())) {\n      return\n    }\n\n    const spatialIndex = this._spatialIndex\n    const hits = spatialIndex.queryMouseCoordinates(screenCoordinates)\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n      const hitId = getHitId(hit)\n\n      this._previousHits[hitId] = true\n    }\n  }\n\n  _handleTouchmove (screenCoordinates, nativeEvent) {\n    if (!coordinatesAreInsideSection(screenCoordinates, this.section())) {\n      return\n    }\n\n    const spatialIndex = this._spatialIndex\n    const hits = spatialIndex.queryMouseCoordinates(screenCoordinates)\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n      const hitId = getHitId(hit)\n\n      this._currentHits[hitId] = true\n\n      if (!(hitId in this._previousHits)) {\n        this._fireCallback(hit, screenCoordinates, nativeEvent)\n      }\n    }\n\n    this._previousHits = this._currentHits\n    this._currentHits = {}\n  }\n\n  _fireCallback (hit, screenCoordinates, nativeEvent) {\n    const localCoordinates = getLocalCoordinates(screenCoordinates, this.interactionManager())\n\n    if (hitIsMark(hit)) {\n      const touchoverEvent = createMarkEvent('touchover', {\n        screenCoordinates,\n        localCoordinates\n      }, hit, nativeEvent)\n\n      this._markCallbacks[hit.markId](touchoverEvent)\n    }\n\n    if (hitIsInLayer(hit)) {\n      const touchoverEvent = createLayerEvent('touchover', {\n        screenCoordinates,\n        localCoordinates\n      }, hit, nativeEvent)\n\n      this._layerCallbacks[hit.layerId](touchoverEvent)\n    }\n  }\n}\n","import MarkInteractionHandler from '../../base/handlers/MarkInteractionHandler.js'\n\nimport { createMarkEvent, createLayerEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection, hitIsMark, hitIsInLayer, getHitId } from '../../utils/hitUtils.js'\nimport numberOfTouches from '../../utils/numberOfTouches.js'\n\nexport default class TouchoutHandler extends MarkInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'touchout',\n      eventName: ['touchstart', 'touchmove', 'touchend']\n    })\n\n    this._previousHits = {}\n    this._currentHits = {}\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    if (numberOfTouches(screenCoordinates) !== 1) {\n      return\n    }\n\n    if (nativeEvent.eventName === 'touchstart') {\n      this._handleTouchstart(screenCoordinates, nativeEvent)\n    }\n\n    if (nativeEvent.eventName === 'touchmove') {\n      this._handleTouchmove(screenCoordinates, nativeEvent)\n    }\n\n    if (nativeEvent.eventName === 'touchend') {\n      this._handleTouchend()\n    }\n  }\n\n  _handleTouchstart (screenCoordinates, nativeEvent) {\n    if (!coordinatesAreInsideSection(screenCoordinates, this.section())) {\n      return\n    }\n\n    const spatialIndex = this._spatialIndex\n    const hits = spatialIndex.queryMouseCoordinates(screenCoordinates)\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n      const hitId = getHitId(hit)\n\n      this._previousHits[hitId] = hit\n    }\n  }\n\n  _handleTouchmove (screenCoordinates, nativeEvent) {\n    if (!coordinatesAreInsideSection(screenCoordinates, this.section())) {\n      return\n    }\n\n    const spatialIndex = this._spatialIndex\n    const hits = spatialIndex.queryMouseCoordinates(screenCoordinates)\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n      const hitId = getHitId(hit)\n\n      this._currentHits[hitId] = hit\n    }\n\n    for (const hitId in this._previousHits) {\n      if (!(hitId in this._currentHits)) {\n        const hit = this._previousHits[hitId]\n        this._fireCallback(hit, screenCoordinates, nativeEvent)\n      }\n    }\n\n    this._previousHits = this._currentHits\n    this._currentHits = {}\n  }\n\n  _handleTouchend () {\n    this._previousHits = {}\n    this._currentHits = {}\n  }\n\n  _fireCallback (hit, screenCoordinates, nativeEvent) {\n    const localCoordinates = getLocalCoordinates(screenCoordinates, this.interactionManager())\n\n    if (hitIsMark(hit)) {\n      const touchoutEvent = createMarkEvent('touchout', {\n        screenCoordinates,\n        localCoordinates\n      }, hit, nativeEvent)\n\n      this._markCallbacks[hit.markId](touchoutEvent)\n    }\n\n    if (hitIsInLayer(hit)) {\n      const touchoutEvent = createLayerEvent('touchout', {\n        screenCoordinates,\n        localCoordinates\n      }, hit, nativeEvent)\n\n      this._layerCallbacks[hit.layerId](touchoutEvent)\n    }\n  }\n}\n","import MarkInteractionHandler from '../../base/handlers/MarkInteractionHandler.js'\n\nimport { createMarkEvent, createLayerEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection, hitIsMark, hitIsInLayer, getHitId } from '../../utils/hitUtils.js'\nimport numberOfTouches from '../../utils/numberOfTouches.js'\n\nexport default class TouchdragHandler extends MarkInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'touchdrag',\n      eventName: ['touchstart', 'touchmove', 'touchend']\n    })\n\n    this._currentHits = {}\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    if (numberOfTouches(screenCoordinates) !== 1) {\n      return\n    }\n\n    if (nativeEvent.eventName === 'touchstart') {\n      this._handleTouchstart(screenCoordinates, nativeEvent)\n    }\n\n    if (nativeEvent.eventName === 'touchmove') {\n      this._handleTouchmove(screenCoordinates, nativeEvent)\n    }\n\n    if (nativeEvent.eventName === 'touchend') {\n      this._handleTouchend(screenCoordinates, nativeEvent)\n    }\n  }\n\n  _handleTouchstart (screenCoordinates, nativeEvent) {\n    if (!coordinatesAreInsideSection(screenCoordinates, this.section())) {\n      return\n    }\n\n    const spatialIndex = this._spatialIndex\n    const hits = spatialIndex.queryMouseCoordinates(screenCoordinates)\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n      const hitId = getHitId(hit)\n\n      this._currentHits[hitId] = hit\n\n      this._fireCallback(hit, screenCoordinates, nativeEvent, 'start')\n    }\n  }\n\n  _handleTouchmove (screenCoordinates, nativeEvent) {\n    if (!coordinatesAreInsideSection(screenCoordinates, this.section())) {\n      return\n    }\n\n    for (const hitId in this._currentHits) {\n      const hit = this._currentHits[hitId]\n      this._fireCallback(hit, screenCoordinates, nativeEvent, 'drag')\n    }\n  }\n\n  _handleTouchend (screenCoordinates, nativeEvent) {\n    for (const hitId in this._currentHits) {\n      const hit = this._currentHits[hitId]\n      this._fireCallback(hit, screenCoordinates, nativeEvent, 'end')\n    }\n\n    this._currentHits = {}\n  }\n\n  _fireCallback (hit, screenCoordinates, nativeEvent, dragType) {\n    const localCoordinates = getLocalCoordinates(screenCoordinates, this.interactionManager())\n\n    if (hitIsMark(hit)) {\n      const touchdragEvent = createMarkEvent('touchdrag', {\n        screenCoordinates,\n        localCoordinates,\n        dragType\n      }, hit, nativeEvent)\n\n      this._markCallbacks[hit.markId](touchdragEvent)\n    }\n\n    if (hitIsInLayer(hit)) {\n      const touchdragEvent = createLayerEvent('touchdrag', {\n        screenCoordinates,\n        localCoordinates,\n        dragType\n      }, hit, nativeEvent)\n\n      this._layerCallbacks[hit.layerId](touchdragEvent)\n    }\n  }\n}\n","import SectionInteractionHandler from '../../base/handlers/SectionInteractionHandler.js'\n\nimport { createSectionEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection } from '../../utils/hitUtils.js'\nimport numberOfTouches from '../../utils/numberOfTouches.js'\n\nexport default class PinchHandler extends SectionInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'pinch',\n      eventName: ['touchstart', 'touchmove', 'touchend']\n    })\n\n    this._previousTouchDistance = undefined\n  }\n\n  _handleEvent (screenCoordinatesArray, nativeEvent) {\n    if (nativeEvent.type === 'touchstart') {\n      this._handleTouchstart(screenCoordinatesArray, nativeEvent)\n    }\n\n    if (nativeEvent.type === 'touchmove') {\n      this._handleTouchmove(screenCoordinatesArray, nativeEvent)\n    }\n\n    if (nativeEvent.type === 'touchend') {\n      this._handleTouchend(screenCoordinatesArray, nativeEvent)\n    }\n  }\n\n  _handleTouchstart (screenCoordinatesArray, nativeEvent) {\n    if (numberOfTouches(screenCoordinatesArray) !== 2) {\n      return\n    }\n\n    const section = this.section()\n\n    if (allCoordinatesAreInsideSection(screenCoordinatesArray, section)) {\n      this._previousTouchDistance = getDistance(screenCoordinatesArray)\n    }\n  }\n\n  _handleTouchmove (screenCoordinatesArray, nativeEvent) {\n    if (numberOfTouches(screenCoordinatesArray) !== 2) {\n      return\n    }\n\n    if (this._previousTouchDistance === undefined) return\n\n    const section = this.section()\n\n    if (allCoordinatesAreInsideSection(screenCoordinatesArray, section)) {\n      const sectionHeight = section.maxY - section.minY\n\n      const center = getCenter(screenCoordinatesArray)\n\n      const touchDistance = getDistance(screenCoordinatesArray)\n      const touchDelta = this._previousTouchDistance - touchDistance\n      const relativeTouchDelta = touchDelta / sectionHeight\n\n      this._previousTouchDistance = touchDistance\n      this._fireCallback(screenCoordinatesArray, nativeEvent, relativeTouchDelta, center)\n    }\n  }\n\n  _handleTouchend (screenCoordinatesArray, nativeEvent) {\n    this._previousTouchDistance = undefined\n  }\n\n  _fireCallback (screenCoordinatesArray, nativeEvent, delta, center) {\n    const screenCenter = center\n    const localCenter = getLocalCoordinates(screenCenter, this.interactionManager())\n    const screenCoordinates = screenCoordinatesArray\n    const localCoordinates = screenCoordinatesArray.map(screenCoordinates => {\n      return getLocalCoordinates(screenCoordinates, this.interactionManager())\n    })\n\n    const pinchEvent = createSectionEvent('pinch', {\n      screenCenter,\n      localCenter,\n      screenCoordinates,\n      localCoordinates,\n      delta\n    }, nativeEvent)\n\n    this._callback(pinchEvent)\n  }\n}\n\nfunction allCoordinatesAreInsideSection (screenCoordinatesArray, section) {\n  return screenCoordinatesArray.every(screenCoordinates => {\n    return coordinatesAreInsideSection(screenCoordinates, section)\n  })\n}\n\nfunction getDistance (screenCoordinatesArray) {\n  const [coords1, coords2] = screenCoordinatesArray\n  return Math.sqrt((coords2.x - coords1.x) ** 2 + (coords2.y - coords1.y) ** 2)\n}\n\nfunction getCenter (screenCoordinatesArray) {\n  const [coords1, coords2] = screenCoordinatesArray\n  return { x: (coords2.x + coords1.x) / 2, y: (coords2.y + coords1.y) / 2 }\n}\n","import SectionInteractionHandler from '../../base/handlers/SectionInteractionHandler.js'\n\nimport { createSectionEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection } from '../../utils/hitUtils.js'\nimport numberOfTouches from '../../utils/numberOfTouches.js'\n\nexport default class TouchdownHandler extends SectionInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'touchdown',\n      eventName: 'touchstart'\n    })\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    if (numberOfTouches(screenCoordinates) !== 1) {\n      return\n    }\n\n    const interactionManager = this.interactionManager()\n    const section = this.section()\n\n    if (coordinatesAreInsideSection(screenCoordinates, section)) {\n      const localCoordinates = getLocalCoordinates(screenCoordinates, interactionManager)\n\n      const touchdownEvent = createSectionEvent('touchdown', {\n        screenCoordinates,\n        localCoordinates\n      }, nativeEvent)\n\n      this._callback(touchdownEvent)\n    }\n  }\n}\n","import SectionInteractionHandler from '../../base/handlers/SectionInteractionHandler.js'\n\nimport { createSectionEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection } from '../../utils/hitUtils.js'\nimport numberOfTouches from '../../utils/numberOfTouches.js'\n\nexport default class TouchmoveHandler extends SectionInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'touchmove',\n      eventName: 'touchmove'\n    })\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    if (numberOfTouches(screenCoordinates) !== 1) {\n      return\n    }\n\n    const interactionManager = this.interactionManager()\n    const section = this.section()\n\n    if (coordinatesAreInsideSection(screenCoordinates, section)) {\n      const localCoordinates = getLocalCoordinates(screenCoordinates, interactionManager)\n\n      const touchmoveEvent = createSectionEvent('touchmove', {\n        screenCoordinates,\n        localCoordinates\n      }, nativeEvent)\n\n      this._callback(touchmoveEvent)\n    }\n  }\n}\n","import SectionInteractionHandler from '../../base/handlers/SectionInteractionHandler.js'\n\nimport { createSectionEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection } from '../../utils/hitUtils.js'\nimport numberOfTouches from '../../utils/numberOfTouches.js'\n\nexport default class TouchupHandler extends SectionInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'touchup',\n      eventName: ['touchend', 'touchcancel']\n    })\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    if (numberOfTouches(screenCoordinates) !== 1) {\n      return\n    }\n\n    const interactionManager = this.interactionManager()\n    const section = this.section()\n\n    if (coordinatesAreInsideSection(screenCoordinates, section)) {\n      const localCoordinates = getLocalCoordinates(screenCoordinates, interactionManager)\n\n      const touchupEvent = createSectionEvent('touchup', {\n        screenCoordinates,\n        localCoordinates\n      }, nativeEvent)\n\n      this._callback(touchupEvent)\n    }\n  }\n}\n","import SectionInteractionHandler from '../../base/handlers/SectionInteractionHandler.js'\n\nimport { createSectionEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection } from '../../utils/hitUtils.js'\nimport numberOfTouches from '../../utils/numberOfTouches.js'\n\nexport default class TouchoverHandler extends SectionInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'touchover',\n      eventName: ['touchstart', 'touchmove']\n    })\n\n    this._fingerCurrentlyOverSection = false\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    if (numberOfTouches(screenCoordinates) !== 1) {\n      return\n    }\n\n    if (nativeEvent.eventName === 'touchstart') {\n      this._handleTouchstart(screenCoordinates, nativeEvent)\n    }\n\n    if (nativeEvent.eventName === 'touchmove') {\n      this._handleTouchmove(screenCoordinates, nativeEvent)\n    }\n  }\n\n  _handleTouchstart (screenCoordinates, nativeEvent) {\n    const section = this.section()\n\n    if (coordinatesAreInsideSection(screenCoordinates, section)) {\n      this._fingerCurrentlyOverSection = true\n    }\n  }\n\n  _handleTouchmove (screenCoordinates, nativeEvent) {\n    const interactionManager = this.interactionManager()\n    const section = this.section()\n\n    if (coordinatesAreInsideSection(screenCoordinates, section)) {\n      if (!this._fingerCurrentlyOverSection) {\n        const localCoordinates = getLocalCoordinates(screenCoordinates, interactionManager)\n\n        const touchoverEvent = createSectionEvent('touchover', {\n          screenCoordinates,\n          localCoordinates\n        }, nativeEvent)\n\n        this._callback(touchoverEvent)\n        this._fingerCurrentlyOverSection = true\n      }\n    } else {\n      if (this._fingerCurrentlyOverSection) {\n        this._fingerCurrentlyOverSection = false\n      }\n    }\n  }\n}\n","import SectionInteractionHandler from '../../base/handlers/SectionInteractionHandler.js'\n\nimport { createSectionEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection } from '../../utils/hitUtils.js'\nimport numberOfTouches from '../../utils/numberOfTouches.js'\n\nexport default class TouchoutHandler extends SectionInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'touchout',\n      eventName: ['touchstart', 'touchmove', 'touchend']\n    })\n\n    this._fingerCurrentlyOverSection = false\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    if (numberOfTouches(screenCoordinates) !== 1) {\n      return\n    }\n\n    if (nativeEvent.eventName === 'touchstart') {\n      this._handleTouchstart(screenCoordinates, nativeEvent)\n    }\n\n    if (nativeEvent.eventName === 'touchmove') {\n      this._handleTouchmove(screenCoordinates, nativeEvent)\n    }\n\n    if (nativeEvent.eventName === 'touchend') {\n      this._handleTouchend()\n    }\n  }\n\n  _handleTouchstart (screenCoordinates, nativeEvent) {\n    const section = this.section()\n\n    if (coordinatesAreInsideSection(screenCoordinates, section)) {\n      this._fingerCurrentlyOverSection = true\n    }\n  }\n\n  _handleTouchmove (screenCoordinates, nativeEvent) {\n    const interactionManager = this.interactionManager()\n    const section = this.section()\n\n    if (coordinatesAreInsideSection(screenCoordinates, section)) {\n      if (!this._fingerCurrentlyOverSection) {\n        this._fingerCurrentlyOverSection = true\n      }\n    } else {\n      if (this._fingerCurrentlyOverSection) {\n        const localCoordinates = getLocalCoordinates(screenCoordinates, interactionManager)\n\n        const touchoutEvent = createSectionEvent('touchout', {\n          screenCoordinates,\n          localCoordinates\n        }, nativeEvent)\n\n        this._callback(touchoutEvent)\n        this._fingerCurrentlyOverSection = false\n      }\n    }\n  }\n\n  _handleTouchend () {\n    this._fingerCurrentlyOverSection = false\n  }\n}\n","import BaseInteractionManager from '../base/managers/BaseInteractionManager.js'\nimport MarkInteractionInterface from '../base/interfaces/MarkInteractionInterface.js'\nimport SectionInteractionInterface from '../base/interfaces/SectionInteractionInterface.js'\n\nimport * as MarkInteractionHandlers from './mark'\nimport * as SectionInteractionHandlers from './section'\n\nexport default class TouchInteractionManager extends BaseInteractionManager {\n  constructor () {\n    super()\n\n    this._markInteractionInterface = new MarkInteractionInterface(this, MarkInteractionHandlers)\n    this._sectionInteractionInterface = new SectionInteractionInterface(this, SectionInteractionHandlers)\n  }\n}\n","export default function (point) {\n  return {\n    x: [point[0], point[0]],\n    y: [point[1], point[1]]\n  }\n}\n","import bboxPoint from './utils/bboxPoint.js'\nimport createItemFromBbox from '../../utils/createItemFromBbox.js'\n\nexport function indexPoint (markData) {\n  const pointAttributes = markData.attributes\n\n  const bbox = bboxPoint(pointAttributes.pixelGeometry.coordinates)\n  const item = createItemFromBbox(bbox)\n\n  item.attributes = pointAttributes\n  item.markType = 'Point'\n  item.markId = markData.markId\n\n  return item\n}\n\nexport function indexPointLayer ({ layerAttributes, keyArray, layerId }) {\n  const items = []\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n\n    const pointAttributes = getPointAttributes(layerAttributes, key)\n    const bbox = bboxPoint(pointAttributes.pixelGeometry.coordinates)\n    const item = createItemFromBbox(bbox)\n\n    item.key = key\n    item.index = i\n    item.attributes = pointAttributes\n    item.markType = 'Point'\n    item.layerId = layerId\n\n    items.push(item)\n  }\n\n  return items\n}\n\nfunction getPointAttributes (layerAttributes, key) {\n  return {\n    pixelGeometry: layerAttributes.pixelGeometryObject[key],\n    radius: layerAttributes.radiusObject[key]\n  }\n}\n","import { calculateCentroid } from '../../../../utils/geometryUtils'\nimport bboxPoint from './utils/bboxPoint.js'\nimport createItemFromBbox from '../../utils/createItemFromBbox.js'\n\nexport function indexRectangle (markData) {\n  const rectangleAttributes = markData.attributes\n\n  const centroid = calculateCentroid(rectangleAttributes.screenGeometry)\n  const bbox = bboxPoint(centroid)\n  const item = createItemFromBbox(bbox)\n\n  item.attributes = rectangleAttributes\n  item.markType = 'Rectangle'\n  item.markId = markData.markId\n\n  return item\n}\n\nexport function indexRectangleLayer ({ layerAttributes, keyArray, layerId }) {\n  const items = []\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n\n    const rectangleAttributes = getRectangleAttributes(layerAttributes, key)\n\n    const centroid = calculateCentroid(rectangleAttributes.screenGeometry)\n    const bbox = bboxPoint(centroid)\n    const item = createItemFromBbox(bbox)\n\n    item.key = key\n    item.index = i\n    item.attributes = rectangleAttributes\n    item.markType = 'Rectangle'\n    item.layerId = layerId\n\n    items.push(item)\n  }\n\n  return items\n}\n\nfunction getRectangleAttributes (layerAttributes, key) {\n  return { screenGeometry: layerAttributes.screenGeometryObject[key] }\n}\n","import { calculateCentroid } from '../../../../utils/geometryUtils'\nimport bboxPoint from './utils/bboxPoint.js'\nimport createItemFromBbox from '../../utils/createItemFromBbox.js'\n\nexport function indexPolygon (markData) {\n  const polygonAttributes = markData.attributes\n\n  const centroid = calculateCentroid(polygonAttributes.screenGeometry)\n  const bbox = bboxPoint(centroid)\n  const item = createItemFromBbox(bbox)\n\n  item.attributes = polygonAttributes\n  item.markType = 'Polygon'\n  item.markId = markData.markId\n\n  return item\n}\n\nexport function indexPolygonLayer ({ layerAttributes, keyArray, layerId }) {\n  const items = []\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n\n    const polygonAttributes = getPolygonAttributes(layerAttributes, key)\n\n    const centroid = calculateCentroid(polygonAttributes.screenGeometry)\n    const bbox = bboxPoint(centroid)\n    const item = createItemFromBbox(bbox)\n\n    item.key = key\n    item.index = i\n    item.attributes = polygonAttributes\n    item.markType = 'Polygon'\n    item.layerId = layerId\n\n    items.push(item)\n  }\n\n  return items\n}\n\nfunction getPolygonAttributes (layerAttributes, key) {\n  return { screenGeometry: layerAttributes.screenGeometryObject[key] }\n}\n","import { calculateCentroid } from '../../../../utils/geometryUtils'\nimport bboxPoint from './utils/bboxPoint.js'\nimport createItemFromBbox from '../../utils/createItemFromBbox.js'\n\nexport function indexLine (markData) {\n  const lineAttributes = markData.attributes\n\n  const centroid = calculateCentroid(lineAttributes.pixelGeometry)\n  const bbox = bboxPoint(centroid)\n  const item = createItemFromBbox(bbox)\n\n  item.attributes = lineAttributes\n  item.markType = 'Line'\n  item.markId = markData.markId\n\n  return item\n}\n\nexport function indexLineLayer ({ layerAttributes, keyArray, layerId }) {\n  const items = []\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n\n    const lineAttributes = getLineAttributes(layerAttributes, key)\n\n    const centroid = calculateCentroid(lineAttributes.screenGeometry)\n    const bbox = bboxPoint(centroid)\n    const item = createItemFromBbox(bbox)\n\n    item.key = key\n    item.index = i\n    item.attributes = lineAttributes\n    item.markType = 'Line'\n    item.layerId = layerId\n\n    items.push(item)\n  }\n\n  return items\n}\n\nfunction getLineAttributes (layerAttributes, key) {\n  return { screenGeometry: layerAttributes.pixelGeometryObject[key] }\n}\n","import { calculateCentroid } from '../../../../utils/geometryUtils'\nimport bboxPoint from './utils/bboxPoint.js'\nimport createItemFromBbox from '../../utils/createItemFromBbox.js'\n\nexport function indexArea (markData) {\n  const areaAttributes = markData.attributes\n\n  const centroid = calculateCentroid(areaAttributes.screenGeometry)\n  const bbox = bboxPoint(centroid)\n  const item = createItemFromBbox(bbox)\n\n  item.attributes = areaAttributes\n  item.markType = 'Area'\n  item.markId = markData.markId\n\n  return item\n}\n\nexport function indexAreaLayer ({ layerAttributes, keyArray, layerId }) {\n  const items = []\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n\n    const areaAttributes = getAreaAttributes(layerAttributes, key)\n\n    const centroid = calculateCentroid(areaAttributes.screenGeometry)\n    const bbox = bboxPoint(centroid)\n    const item = createItemFromBbox(bbox)\n\n    item.key = key\n    item.index = i\n    item.attributes = areaAttributes\n    item.markType = 'Area'\n    item.layerId = layerId\n\n    items.push(item)\n  }\n\n  return items\n}\n\nfunction getAreaAttributes (layerAttributes, key) {\n  return { screenGeometry: layerAttributes.screenGeometryObject[key] }\n}\n","import { indexPoint, indexPointLayer } from './indexPoint.js'\nimport { indexRectangle, indexRectangleLayer } from './indexRectangle.js'\nimport { indexPolygon, indexPolygonLayer } from './indexPolygon.js'\nimport { indexLine, indexLineLayer } from './indexLine.js'\nimport { indexArea, indexAreaLayer } from './indexArea.js'\n\nexport const markIndexing = {\n  Point: indexPoint,\n  Rectangle: indexRectangle,\n  Polygon: indexPolygon,\n  Line: indexLine,\n  Label: indexPoint,\n  Area: indexArea\n}\n\nexport const layerIndexing = {\n  Point: indexPointLayer,\n  Rectangle: indexRectangleLayer,\n  Polygon: indexPolygonLayer,\n  Line: indexLineLayer,\n  Label: indexPointLayer,\n  Area: indexAreaLayer\n}\n","import SpatialIndex from '../SpatialIndex'\nimport { markIndexing, layerIndexing } from './createIndexableData'\nimport { hitIsMark, hitIsInLayer, getHitId } from '../utils/hitUtils.js'\nimport { createSelectMarkEvent, createSelectLayerEvent } from '../utils/createEvent.js'\nimport { calculateBboxGeometry, pointInPolygon } from '../../../utils/geometryUtils'\n\nexport default class SelectManager {\n  constructor () {\n    this._selectableMarks = {}\n    this._selectableLayers = {}\n\n    this._markCallbacks = {}\n    this._layerCallbacks = {}\n\n    this._previousSelection = {}\n    this._currentSelection = {}\n\n    const getMark = function (markId) {\n      return this._selectableMarks[markId]\n    }\n\n    const getLayer = function (layerId) {\n      return this._selectableLayers[layerId]\n    }\n\n    this._spatialIndex = new SpatialIndex(this, getMark, getLayer)\n\n    this._selectPolygon = { start: undefined, points: [] }\n  }\n\n  // Loading/indexing\n  loadMark (markType, markData, callbacks) {\n    const indexingFunction = markIndexing[markType]\n    const indexableMark = indexingFunction(markData)\n\n    const markId = markData.markId\n\n    this._selectableMarks[markId] = indexableMark\n    this._markCallbacks[markId] = callbacks\n\n    this._spatialIndex.indexMark(markId)\n  }\n\n  markIsLoaded (markId) {\n    return markId in this._selectableMarks\n  }\n\n  removeMark (markId) {\n    this._spatialIndex.unindexMark(markId)\n\n    delete this._selectableMarks[markId]\n    delete this._markCallbacks[markId]\n  }\n\n  loadLayer (layerType, layerData, callbacks) {\n    const indexingFunction = layerIndexing[layerType]\n    const indexableLayer = indexingFunction(layerData)\n\n    const layerId = layerData.layerId\n\n    this._selectableLayers[layerId] = indexableLayer\n    this._layerCallbacks[layerId] = callbacks\n\n    this._spatialIndex.indexLayer(layerId)\n  }\n\n  layerIsLoaded (layerId) {\n    return layerId in this._selectableLayers\n  }\n\n  removeLayer (layerId) {\n    this._spatialIndex.unindexLayer(layerId)\n\n    delete this._selectableLayers[layerId]\n    delete this._layerCallbacks[layerId]\n  }\n\n  // Rectangle\n  selectRectangle (rectangle) {\n    const hits = this._spatialIndex.queryBoundingBox(rectangleToRBushBbox(rectangle))\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n      const hitId = getHitId(hit)\n\n      this._currentSelection[hitId] = hit\n\n      this._fireSelectCallback(hit)\n    }\n  }\n\n  updateSelectRectangle (rectangle) {\n    this._previousSelection = this._currentSelection\n    this._currentSelection = {}\n\n    const hits = this._spatialIndex.queryBoundingBox(rectangleToRBushBbox(rectangle))\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n      const hitId = getHitId(hit)\n\n      this._currentSelection[hitId] = hit\n\n      if (!(hitId in this._previousSelection)) {\n        this._fireSelectCallback(hit)\n      }\n    }\n\n    for (const hitId in this._previousSelection) {\n      if (!(hitId in this._currentSelection)) {\n        const hit = this._previousSelection[hitId]\n\n        this._fireDeselectCallback(hit)\n      }\n    }\n  }\n\n  resetSelectRectangle () {\n    for (const hitId in this._currentSelection) {\n      const hit = this._currentSelection[hitId]\n\n      this._fireDeselectCallback(hit)\n    }\n\n    this._previousSelection = {}\n    this._currentSelection = {}\n  }\n\n  // Polygon\n  startSelectPolygon (startCoordinates) {\n    this._selectPolygon.start = parseCoordinates(startCoordinates)\n  }\n\n  addPointToSelectPolygon (coordinates) {\n    this._selectPolygon.points.push(parseCoordinates(coordinates))\n\n    if (this._selectPolygon.points.length > 1) {\n      const lastThreePointsPolygon = this._getLastThreePointsPolygon()\n      const bbox = calculateBboxGeometry(lastThreePointsPolygon)\n\n      const hits = this._spatialIndex.queryBoundingBox(bboxToRBushBbox(bbox))\n\n      for (let i = 0; i < hits.length; i++) {\n        const hit = hits[i]\n        const hitCentroid = [hit.minX, hit.minY]\n\n        if (pointInPolygon(hitCentroid, lastThreePointsPolygon)) {\n          const hitId = getHitId(hit)\n\n          if (hitId in this._currentSelection) {\n            this._fireDeselectCallback(hit)\n            delete this._currentSelection[hitId]\n          } else {\n            this._fireSelectCallback(hit)\n            this._currentSelection[hitId] = hit\n          }\n        }\n      }\n    }\n  }\n\n  moveSelectPolygon (_delta) {\n    this._previousSelection = this._currentSelection\n    this._currentSelection = {}\n\n    const delta = parseCoordinates(_delta)\n\n    const start = this._selectPolygon.start\n    const points = this._selectPolygon.points\n\n    this._selectPolygon.start = [start[0] + delta[0], start[1] + delta[1]]\n    this._selectPolygon.points = points.map(point => [point[0] + delta[0], point[1] + delta[1]])\n\n    const polygon = this.getSelectPolygon()\n    const bbox = calculateBboxGeometry(polygon)\n\n    const hits = this._spatialIndex.queryBoundingBox(bboxToRBushBbox(bbox))\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n      const hitCentroid = [hit.minX, hit.minY]\n\n      if (pointInPolygon(hitCentroid, polygon)) {\n        const hitId = getHitId(hit)\n\n        this._currentSelection[hitId] = hit\n\n        if (!(hitId in this._previousSelection)) {\n          this._fireSelectCallback(hit)\n        }\n      }\n    }\n\n    for (const hitId in this._previousSelection) {\n      if (!(hitId in this._currentSelection)) {\n        const hit = this._previousSelection[hitId]\n\n        this._fireDeselectCallback(hit)\n      }\n    }\n  }\n\n  getSelectPolygon () {\n    if (this._selectPolygon.start) {\n      return {\n        type: 'Polygon',\n        coordinates: [[\n          this._selectPolygon.start,\n          ...this._selectPolygon.points,\n          this._selectPolygon.start\n        ]]\n      }\n    }\n  }\n\n  resetSelectPolygon () {\n    for (const hitId in this._currentSelection) {\n      const hit = this._currentSelection[hitId]\n\n      this._fireDeselectCallback(hit)\n    }\n\n    this._selectPolygon = { start: undefined, points: [] }\n    this._currentSelection = {}\n  }\n\n  _fireSelectCallback (hit) {\n    if (hitIsMark(hit)) {\n      const selectEvent = createSelectMarkEvent('select', hit)\n      const callback = this._markCallbacks[hit.markId].onSelect\n\n      if (callback) callback(selectEvent)\n    }\n\n    if (hitIsInLayer(hit)) {\n      const selectEvent = createSelectLayerEvent('select', hit)\n      const callback = this._layerCallbacks[hit.layerId].onSelect\n\n      if (callback) callback(selectEvent)\n    }\n  }\n\n  _fireDeselectCallback (hit) {\n    if (hitIsMark(hit)) {\n      const deselectEvent = createSelectMarkEvent('deselect', hit)\n      const callback = this._markCallbacks[hit.markId].onDeselect\n\n      if (callback) callback(deselectEvent)\n    }\n\n    if (hitIsInLayer(hit)) {\n      const deselectEvent = createSelectLayerEvent('deselect', hit)\n      const callback = this._layerCallbacks[hit.layerId].onDeselect\n\n      if (callback) callback(deselectEvent)\n    }\n  }\n\n  _getLastThreePointsPolygon () {\n    const points = this._selectPolygon.points\n    const lastPointIndex = points.length - 1\n    const start = this._selectPolygon.start\n\n    return {\n      type: 'Polygon',\n      coordinates: [\n        [start, points[lastPointIndex - 1], points[lastPointIndex], start]\n      ]\n    }\n  }\n}\n\nfunction rectangleToRBushBbox (rectangle) {\n  return {\n    minX: Math.min(rectangle.x1, rectangle.x2),\n    maxX: Math.max(rectangle.x1, rectangle.x2),\n    minY: Math.min(rectangle.y1, rectangle.y2),\n    maxY: Math.max(rectangle.y1, rectangle.y2)\n  }\n}\n\nfunction parseCoordinates (coordinates) {\n  if (is2dArray(coordinates)) return coordinates\n  if (isXYObject(coordinates)) return [coordinates.x, coordinates.y]\n\n  throw new Error(`Invalid input: ${coordinates}`)\n}\n\nfunction is2dArray (coordinates) {\n  return coordinates.constructor === Array &&\n    coordinates.length === 2 &&\n    coordinates.every(c => c && c.constructor === Number)\n}\n\nfunction isXYObject (coordinates) {\n  return 'x' in coordinates && 'y' in coordinates &&\n    coordinates.x.constructor === Number &&\n    coordinates.y.constructor === Number\n}\n\nfunction bboxToRBushBbox (bbox) {\n  return {\n    minX: Math.min(...bbox.x),\n    maxX: Math.max(...bbox.x),\n    minY: Math.min(...bbox.y),\n    maxY: Math.max(...bbox.y)\n  }\n}\n","import * as detectIt from '../../utils/detect.js'\nimport MouseInteractionManager from './mouse/MouseInteractionManager.js'\nimport TouchInteractionManager from './touch/TouchInteractionManager.js'\nimport SelectManager from './select/SelectManager.js'\n\nexport default class InteractionManager {\n  constructor () {\n    if (detectIt.primaryInput === 'mouse') {\n      this._mouseInteractionManager = new MouseInteractionManager()\n    }\n\n    if (detectIt.primaryInput === 'touch') {\n      this._touchInteractionManager = new TouchInteractionManager()\n    }\n\n    this._selectManager = new SelectManager()\n  }\n\n  // Initialization\n  setId (id) {\n    this._forEachManager(manager => { manager.setId(id) })\n  }\n\n  linkEventManager (eventManager) {\n    if (this._mouseInteractionManager) {\n      this._mouseInteractionManager.linkEventManager(eventManager.mouse())\n    }\n\n    if (this._touchInteractionManager) {\n      this._touchInteractionManager.linkEventManager(eventManager.touch())\n    }\n  }\n\n  // Section context loading\n  loadSection (sectionContext) {\n    this._forEachManager(manager => { manager.loadSection(sectionContext) })\n  }\n\n  mouse () {\n    return this._mouseInteractionManager\n  }\n\n  touch () {\n    return this._touchInteractionManager\n  }\n\n  select () {\n    return this._selectManager\n  }\n\n  _forEachManager (callback) {\n    if (this._mouseInteractionManager) callback(this._mouseInteractionManager)\n    if (this._touchInteractionManager) callback(this._touchInteractionManager)\n  }\n}\n","<script context=\"module\">\n  let idCounter = 0\n  function getId () {\n    return 'gr' + idCounter++\n  }\n</script>\n\n<script>\n  import * as detectIt from '../../../utils/detect.js'\n  import { onMount } from 'svelte'\n  import * as GraphicContext from './GraphicContext'\n  import * as SectionContext from '../Section/SectionContext'\n  import * as EventManagerContext from './EventManagerContext'\n  import * as InteractionManagerContext from '../Section/InteractionManagerContext'\n\n  import EventManager from '../../../interactivity/events/EventManager.js'\n  import InteractionManager from '../../../interactivity/interactions/InteractionManager.js'\n\n  import { getClipPropsPadding, getClipPropsNoPadding } from '../Section/getClipProps.js'\n\n  const graphicId = getId()\n\n  // Positioning\n  export let width = 500\n  export let height = 500\n  export let viewBox = undefined\n  export let preserveAspectRatio = 'xMidYMid meet'\n\n  // Local coordinates\n  export let scaleX = undefined\n  export let scaleY = undefined\n  export let flipX = false\n  export let flipY = false\n  export let padding = 0\n  export let zoomIdentity = undefined\n\n  // Mouse interactions\n  export let onClick = undefined\n  export let onWheel = undefined\n  export let onMousedown = undefined\n  export let onMouseup = undefined\n  export let onMouseover = undefined\n  export let onMouseout = undefined\n  export let onMousemove = undefined\n\n  // Touch interactions\n  export let onPinch = undefined\n  export let onTouchdown = undefined\n  export let onTouchmove = undefined\n  export let onTouchup = undefined\n  export let onTouchover = undefined\n  export let onTouchout = undefined\n\n  // Aesthetics\n  export let backgroundColor = undefined\n  export let paddingColor = undefined\n\n  // Other\n  export let transformation = undefined\n  export let blockReindexing = false\n  export let clip = true\n  export let renderer = undefined\n\n  // Contexts\n  const graphicContext = GraphicContext.init()\n  const sectionContext = SectionContext.init()\n  const eventManagerContext = EventManagerContext.init()\n  const interactionManagerContext = InteractionManagerContext.init()\n\n  $: {\n    GraphicContext.update(graphicContext, { renderer })\n  }\n\n  let rootNode\n\n  // set up event and interaction manager\n  const eventManager = new EventManager()\n  EventManagerContext.update(eventManagerContext, eventManager)\n  \n  const interactionManager = new InteractionManager()\n  interactionManager.setId(graphicId)\n  interactionManager.linkEventManager(eventManager)\n  InteractionManagerContext.update(interactionManagerContext, interactionManager)\n\n  // Keep SectionContext and InteractionManagerContext up to date\n  let numberWidth = width\n  let numberHeight = height\n  $: coordinates = { x1: 0, y1: 0, x2: numberWidth, y2: numberHeight }\n\n  $: {\n    const sectionData = {\n      sectionId: graphicId,\n      coordinates,\n      scaleX,\n      scaleY,\n      padding,\n      flipX,\n      flipY,\n      blockReindexing,\n      transformation,\n      zoomIdentity\n    }\n\n    SectionContext.update(sectionContext, sectionData)\n    $interactionManagerContext.loadSection($sectionContext)\n  }\n\n  $: clipPropsPadding = getClipPropsPadding(coordinates, padding)\n  $: clipPropsNoPadding = getClipPropsNoPadding(coordinates)\n\n  const originalViewBox = viewBox\n  let originalViewBoxArray\n  \n  if (originalViewBox !== undefined) {\n    originalViewBoxArray = originalViewBox.split(' ')\n  }\n  $: {\n    if (width.constructor === Number && height.constructor === Number) {\n      numberWidth = width\n      numberHeight = height\n    } else if (originalViewBox !== undefined) {\n      numberWidth = Number(originalViewBoxArray[2])\n      numberHeight = Number(originalViewBoxArray[3])\n    } else if (originalViewBox === undefined) {\n      numberWidth = 100\n      numberHeight = 100\n    }\n  }\n  $: {\n    if (originalViewBox === undefined) {\n      viewBox = `0 0 ${numberWidth} ${numberHeight}`\n    }\n  }\n\n  onMount(() => {\n    // Only on mount can we bind the svg root node and attach actual event listeners.\n    // Sometimes rootNode is undefined for some weird reason. In this case,\n    // we will use document.getElementById instead\n    let _rootNode = rootNode\n      ? rootNode\n      : document.getElementById(graphicId)\n\n    eventManager.addRootNode(_rootNode)\n    eventManager.attachEventListeners()\n  })\n\n  // Interactions\n  // Change callbacks if necessary\n  $: {\n    removeSectionInteractionsIfNecessary(\n      onWheel,\n      onClick,\n      onMousedown,\n      onMouseup,\n      onMouseover,\n      onMouseout,\n      onTouchdown,\n      onTouchmove,\n      onTouchup,\n      onTouchover,\n      onTouchout,\n      onPinch\n    )\n  }\n\n  function removeSectionInteractionsIfNecessary () {\n    if (detectIt.primaryInput === 'mouse') {\n      const sectionInterface = $interactionManagerContext.mouse().section()\n      sectionInterface.removeAllInteractions()\n\n      if (onWheel) sectionInterface.addInteraction('wheel', onWheel)\n      if (onClick) sectionInterface.addInteraction('click', onClick)\n      if (onMousedown) sectionInterface.addInteraction('mousedown', onMousedown)\n      if (onMouseup) sectionInterface.addInteraction('mouseup', onMouseup)\n      if (onMouseover) sectionInterface.addInteraction('mouseover', onMouseover)\n      if (onMouseout) sectionInterface.addInteraction('mouseout', onMouseout)\n      if (onMousemove) sectionInterface.addInteraction('mousemove', onMousemove)\n    }\n\n    if (detectIt.primaryInput === 'touch') {\n      const sectionInterface = $interactionManagerContext.touch().section()\n      sectionInterface.removeAllInteractions()\n\n      if (onTouchdown) sectionInterface.addInteraction('touchdown', onTouchdown)\n      if (onTouchmove) sectionInterface.addInteraction('touchmove', onTouchmove)\n      if (onTouchup) sectionInterface.addInteraction('touchup', onTouchup)\n      if (onTouchover) sectionInterface.addInteraction('touchover', onTouchover)\n      if (onTouchout) sectionInterface.addInteraction('touchout', onTouchout)\n      if (onPinch) sectionInterface.addInteraction('pinch', onPinch)\n    }\n  }\n\n  export function selectRectangle (rectangle) {\n    $interactionManagerContext.select().selectRectangle(rectangle)\n  }\n\n  export function updateSelectRectangle (rectangle) {\n    $interactionManagerContext.select().updateSelectRectangle(rectangle)\n  }\n\n  export function resetSelectRectangle () {\n    $interactionManagerContext.select().resetSelectRectangle()\n  }\n\n  export function startSelectPolygon (startCoordinates) {\n    $interactionManagerContext.select().startSelectPolygon(startCoordinates)\n  }\n\n  export function addPointToSelectPolygon (pointCoordinates) {\n    $interactionManagerContext\n      .select()\n      .addPointToSelectPolygon(pointCoordinates)\n  }\n\n  export function moveSelectPolygon (delta) {\n    $interactionManagerContext.select().moveSelectPolygon(delta)\n  }\n\n  export function getSelectPolygon () {\n    return $interactionManagerContext.select().getSelectPolygon()\n  }\n\n  export function resetSelectPolygon () {\n    $interactionManagerContext.select().resetSelectPolygon()\n  }\n</script>\n\n<svg\n  id={graphicId}\n  {width}\n  {height}\n  {viewBox}\n  {preserveAspectRatio}\n  bind:this={rootNode}\n>\n  {#if clip}\n\n    <clipPath id={`clip-${graphicId}`}>\n      <rect {...clipPropsPadding} />\n    </clipPath>\n\n  {/if}\n\n  <defs>\n    <mask id={`${graphicId}-mask-padding-bg`}>\n      <rect {...clipPropsNoPadding} fill=\"white\" />\n      <rect {...clipPropsPadding} fill=\"black\" />\n    </mask>\n  </defs>\n\n  {#if backgroundColor}\n    <rect \n      class=\"content-background\"\n      {...clipPropsPadding}\n      fill={backgroundColor}\n    />\n  {/if}\n\n  {#if paddingColor}\n    <rect \n      class=\"padding-background\"\n      mask={`url(#${graphicId}-mask-padding-bg)`}\n      {...clipPropsNoPadding}\n      fill={paddingColor} \n    />\n  {/if}\n\n  <slot />\n</svg>","import { parsePadding } from '../utils/padding.js'\n\nexport function getClipPropsNoPadding ({ x1, x2, y1, y2 }) {\n  return {\n    x: Math.min(x1, x2),\n    y: Math.min(y1, y2),\n    width: Math.abs(x1 - x2),\n    height: Math.abs(y1 - y2)\n  }\n}\n\nexport function getClipPropsPadding ({ x1, x2, y1, y2 }, padding) {\n  const { left, right, top, bottom } = parsePadding(padding)\n\n  return {\n    x: Math.min(x1, x2) + left,\n    y: Math.min(y1, y2) + top,\n    width: Math.abs(x1 - x2) - (left + right),\n    height: Math.abs(y1 - y2) - (top + bottom)\n  }\n}\n","export default function (keyProp, length) {\n  if (keyProp) {\n    if (keyProp.constructor !== Array) throw new Error('\\'key\\' must be Array')\n    if (keyProp.length !== length) throw new Error('\\'key\\' must be of same length as positioning props')\n    if (keyProp.some(key => key.constructor !== String)) {\n      throw new Error('Keys can only be Strings')\n    }\n\n    return keyProp\n  } else {\n    return new Array(length).fill(0).map((_, i) => i.toString())\n  }\n}\n","import { transformGeometry, polarGeometry } from '../../../utils/geometryUtils'\nimport { isDefined } from '../../../utils/equals.js'\nimport getKeyArray from './getKeyArray.js'\n\nexport function createPixelGeometryFromGeometry (\n  geometry,\n  sectionContext,\n  renderSettings,\n  geometryNeedsScaling\n) {\n  ensureValidGeometry(geometry)\n\n  const interpolationNecessary = (\n    sectionContext.transformation === 'polar' &&\n    renderSettings.interpolate === true\n  )\n\n  if (interpolationNecessary) {\n    const scaleTransformation = sectionContext.getScaleTransformation(geometryNeedsScaling)\n    const postScaleTransformation = sectionContext.postScaleTransformation\n\n    return polarGeometry(\n      geometry,\n      sectionContext,\n      { scaleTransformation, postScaleTransformation },\n      renderSettings\n    )\n  }\n\n  if (!interpolationNecessary) {\n    const totalTransformation = sectionContext.getTotalTransformation(geometryNeedsScaling)\n\n    return transformGeometry(geometry, totalTransformation, renderSettings)\n  }\n}\n\nexport function ensureValidGeometry (geometry) {\n  if (\n    isDefined(geometry) &&\n    geometry.constructor === Object &&\n    'type' in geometry &&\n    'coordinates' in geometry\n  ) {\n    return\n  }\n\n  throw new Error('Invalid geometry')\n}\n\nexport function createPixelGeometryObjectFromGeometry (\n  geometry,\n  keyProp,\n  sectionContext,\n  renderSettings,\n  geometryNeedsScaling\n) {\n  const keyArray = getKeyArray(keyProp, geometry.length)\n  const pixelGeometryObject = {}\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n\n    pixelGeometryObject[key] = createPixelGeometryFromGeometry(\n      geometry[i],\n      sectionContext,\n      renderSettings,\n      geometryNeedsScaling\n    )\n  }\n\n  return pixelGeometryObject\n}\n","import { createPixelGeometryFromGeometry } from '../utils/createPixelGeometryFromGeometry.js'\nimport { isDefined, isUndefined, isInvalid } from '../../../utils/equals.js'\n\nexport default function createPixelGeometry (\n  geometryProps,\n  sectionContext,\n  renderSettings\n) {\n  const scaledCoordinates = scaleCoordinates(geometryProps, sectionContext)\n  const scaledGeometry = createScaledGeometry(scaledCoordinates)\n\n  return createPixelGeometryFromGeometry(\n    scaledGeometry,\n    sectionContext,\n    renderSettings,\n    false\n  )\n}\n\nexport function scaleCoordinates (geometryProps, sectionContext) {\n  ensureValidCombination(geometryProps)\n  validateTypes(geometryProps)\n\n  const { x1, x2, y1, y2 } = geometryProps\n\n  const scaledCoordinates = {}\n\n  if (wereSpecified(x1, x2)) {\n    scaledCoordinates.x1 = scaleCoordinate(x1, 'x1', sectionContext)\n    scaledCoordinates.x2 = scaleCoordinate(x2, 'x2', sectionContext)\n  } else {\n    scaledCoordinates.x1 = sectionContext.rangeX[0]\n    scaledCoordinates.x2 = sectionContext.rangeX[1]\n  }\n\n  if (wereSpecified(y1, y2)) {\n    scaledCoordinates.y1 = scaleCoordinate(y1, 'y1', sectionContext)\n    scaledCoordinates.y2 = scaleCoordinate(y2, 'y2', sectionContext)\n  } else {\n    scaledCoordinates.y1 = sectionContext.rangeY[0]\n    scaledCoordinates.y2 = sectionContext.rangeY[1]\n  }\n\n  return scaledCoordinates\n}\n\nconst s = JSON.stringify\n\nexport function ensureValidCombination (c) {\n  if (onlyOne(c.x1, c.x2)) {\n    throw new Error(`Rectangle: invalid combination of 'x1' and 'x2': ${s(c.x1)}, ${s(c.x2)}. Either provide both or none.`)\n  }\n\n  if (onlyOne(c.y1, c.y2)) {\n    throw new Error(`Rectangle: invalid combination of 'y1' and 'y2': ${s(c.y1)}, ${s(c.y2)}. Either provide both or none.`)\n  }\n}\n\nfunction onlyOne (a, b) {\n  return isUndefined(a) ? isDefined(b) : isUndefined(b)\n}\n\nconst invalidCoordinateValueError = (value, name) => new Error(`Rectangle: invalid coordinate value for '${name}': ${s(value)}`)\n\nfunction validateTypes (geometryProps) {\n  for (const coordinateName in geometryProps) {\n    const coordinate = geometryProps[coordinateName]\n\n    if (isDefined(coordinate)) {\n      if (isInvalid(coordinate)) throw invalidCoordinateValueError(coordinate, coordinateName)\n\n      if (![Number, String, Date, Function].includes(coordinate.constructor)) {\n        throw invalidCoordinateValueError(coordinate, coordinateName)\n      }\n    }\n  }\n}\n\nfunction wereSpecified (a, b) {\n  return isDefined(a) && isDefined(b)\n}\n\nfunction scaleCoordinate (coordinate, coordinateName, sectionContext) {\n  if (coordinate.constructor === Function) {\n    return coordinate(sectionContext)\n  } else {\n    const scale = ['x1', 'x2'].includes(coordinateName) ? sectionContext.scaleX : sectionContext.scaleY\n    const scaledCoordinate = scale(coordinate)\n    throwErrorIfInvalidScaledCoordinate(coordinate, scaledCoordinate, coordinateName)\n\n    return scaledCoordinate\n  }\n}\n\nfunction throwErrorIfInvalidScaledCoordinate (input, output, coordinateName) {\n  const parentScale = ['x1', 'x2'].includes(coordinateName) ? 'scaleX' : 'scaleY'\n  if (isInvalid(output)) throw new Error(`Scale '${parentScale}' received '${s(input)}' and returned '${s(output)}`)\n}\n\nexport function createScaledGeometry (c) {\n  return {\n    type: 'Polygon',\n    coordinates: [\n      [\n        [c.x1, c.y1],\n        [c.x2, c.y1],\n        [c.x2, c.y2],\n        [c.x1, c.y2],\n        [c.x1, c.y1]\n      ]\n    ]\n  }\n}\n","/**\n * Point props default and required or not are defined here.\n */\n\nexport default {\n  x: {\n    required: false\n  },\n  y: {\n    required: false\n  },\n  geometry: {\n    required: false\n  },\n  radius: {\n    required: false,\n    default: 3\n  },\n  fill: {\n    required: false,\n    default: 'black'\n  },\n  stroke: {\n    required: false,\n    default: 'none'\n  },\n  strokeWidth: {\n    required: false,\n    default: 0\n  },\n  fillOpacity: {\n    required: false\n  },\n  strokeOpacity: {\n    required: false\n  },\n  opacity: {\n    required: false,\n    default: 1\n  }\n}\n","export default {\n  x1: {\n    required: false\n  },\n  x2: {\n    required: false\n  },\n  y1: {\n    required: false\n  },\n  y2: {\n    required: false\n  },\n  fill: {\n    required: false,\n    default: 'black'\n  },\n  stroke: {\n    required: false,\n    default: 'none'\n  },\n  strokeWidth: {\n    required: false,\n    default: 0\n  },\n  fillOpacity: {\n    required: false\n  },\n  strokeOpacity: {\n    required: false\n  },\n  opacity: {\n    required: false,\n    default: 1\n  }\n}\n","export default {\n  x: {\n    required: false\n  },\n  y: {\n    required: false\n  },\n  geometry: {\n    required: false\n  },\n  fill: {\n    required: false,\n    default: 'black'\n  },\n  stroke: {\n    required: false,\n    default: 'none'\n  },\n  strokeWidth: {\n    required: false,\n    default: 0\n  },\n  fillOpacity: {\n    required: false\n  },\n  strokeOpacity: {\n    required: false\n  },\n  opacity: {\n    required: false,\n    default: 1\n  }\n}\n","export default {\n  x: {\n    required: false\n  },\n  y: {\n    required: false\n  },\n  geometry: {\n    required: false\n  },\n  strokeWidth: {\n    required: false,\n    default: 3\n  },\n  stroke: {\n    required: false,\n    default: 'black'\n  },\n  opacity: {\n    required: false,\n    default: 1\n  }\n}\n","export default {\n  x: {\n    required: false\n  },\n  y: {\n    required: false\n  },\n  geometry: {\n    required: false\n  },\n  fill: {\n    required: false,\n    default: 'black'\n  },\n  stroke: {\n    required: false,\n    default: 'none'\n  },\n  strokeWidth: {\n    required: false,\n    default: 0\n  },\n  fillOpacity: {\n    required: false\n  },\n  strokeOpacity: {\n    required: false\n  },\n  opacity: {\n    required: false,\n    default: 1\n  },\n  text: {\n    required: false\n  },\n  fontFamily: {\n    required: false,\n    default: 'Helvetica'\n  },\n  fontSize: {\n    required: false,\n    default: 16\n  },\n  fontWeight: {\n    required: false,\n    default: 'normal'\n  },\n  rotation: {\n    required: false,\n    default: 0\n  },\n  anchorPoint: {\n    required: false,\n    default: 'center'\n  }\n}\n","export default {\n  x: {\n    required: false\n  },\n  y: {\n    required: false\n  },\n  geometry: {\n    required: false\n  },\n  shape: {\n    required: false\n  },\n  size: {\n    required: false\n  },\n  fill: {\n    required: false,\n    default: 'black'\n  },\n  stroke: {\n    required: false,\n    default: 'none'\n  },\n  strokeWidth: {\n    required: false,\n    default: 0\n  },\n  fillOpacity: {\n    required: false\n  },\n  strokeOpacity: {\n    required: false\n  },\n  opacity: {\n    required: false,\n    default: 1\n  }\n}\n","export default {\n  x1: {\n    required: false\n  },\n  x2: {\n    required: false\n  },\n  y1: {\n    required: false\n  },\n  y2: {\n    required: false\n  },\n  independentAxis: {\n    required: false\n  },\n  fill: {\n    required: false,\n    default: 'black'\n  },\n  stroke: {\n    required: false,\n    default: 'none'\n  },\n  strokeWidth: {\n    required: false,\n    default: 0\n  },\n  strokeOpacity: {\n    required: false\n  },\n  fillOpacity: {\n    required: false\n  },\n  opacity: {\n    required: false,\n    default: 1\n  }\n}\n","import pointAesthetics from '../Point/aesthetics.js'\nimport rectangleAesthetics from '../Rectangle/aesthetics.js'\nimport polygonAesthetics from '../Polygon/aesthetics.js'\nimport lineAesthetics from '../Line/aesthetics.js'\nimport labelAesthetics from '../Label/aesthetics.js'\nimport symbolAesthetics from '../Symbol/aesthetics.js'\nimport areaAesthetics from '../Area/aesthetics.js'\n\nimport { isDefined, isUndefined } from '../../../utils/equals.js'\n\nexport default function (type, aesthetics) {\n  if (type === 'Point') {\n    return validateAesthetics(aesthetics, pointAesthetics)\n  }\n\n  if (type === 'Rectangle') {\n    return validateAesthetics(aesthetics, rectangleAesthetics)\n  }\n\n  if (type === 'Polygon') {\n    return validateAesthetics(aesthetics, polygonAesthetics)\n  }\n\n  if (type === 'Line') {\n    return validateAesthetics(aesthetics, lineAesthetics)\n  }\n\n  if (type === 'Label') {\n    return validateAesthetics(aesthetics, labelAesthetics)\n  }\n\n  if (type === 'Symbol') {\n    return validateAesthetics(aesthetics, symbolAesthetics)\n  }\n\n  if (type === 'Area') {\n    return validateAesthetics(aesthetics, areaAesthetics)\n  }\n}\n\nfunction validateAesthetics (passedAesthetics, allowedAesthetics) {\n  const aesthetics = {}\n\n  for (const aestheticName in passedAesthetics) {\n    const aestheticValue = passedAesthetics[aestheticName]\n    const aestheticRequirements = allowedAesthetics[aestheticName]\n\n    if (isDefined(aestheticValue)) {\n      if (!(aestheticName in allowedAesthetics)) throw aestheticNotAllowedError(aestheticName)\n      aesthetics[aestheticName] = aestheticValue\n    }\n\n    if (isUndefined(aestheticValue)) {\n      if (aestheticName in allowedAesthetics) {\n        if (aestheticRequirements.required) throw aestheticRequiredError(aestheticName)\n        if (isDefined(aestheticRequirements.default)) {\n          aesthetics[aestheticName] = aestheticRequirements.default\n        } else {\n          aesthetics[aestheticName] = aestheticValue\n        }\n      }\n    }\n  }\n\n  return aesthetics\n}\n\nconst aestheticNotAllowedError = name => {\n  return new Error(`Aesthetic '${name}' not allowed`)\n}\n\nconst aestheticRequiredError = name => {\n  return new Error(`Required aesthetic '${name}' is missing`)\n}\n","import { isDefined, isUndefined } from '../../../utils/equals.js'\n\nexport function ensureValidGeometryProps ({ x, y, geometry }, markType) {\n  if (isDefined(x) && isDefined(y) && isUndefined(geometry)) return\n\n  if (isUndefined(x) && isUndefined(y) && isDefined(geometry)) return\n\n  throw new Error(`${markType}: Invalid combination of 'x', 'y', and 'geometry' props`)\n}\n\nexport function getInputType ({ x, y, geometry }) {\n  if (isUndefined(geometry)) return 'xy'\n  if (isDefined(geometry)) return 'geometry'\n}\n\nexport function validateXYProps (x, y) {\n  if (![Array, Function].includes(x.constructor)) {\n    throw new Error('\\'x\\' prop must be Array or Function')\n  }\n\n  if (![Array, Function].includes(y.constructor)) {\n    throw new Error('\\'y\\' prop must be Array or Function')\n  }\n}\n\nexport function validateGeometryProp (geometry) {\n  if (![Object, Function].includes(geometry.constructor)) {\n    throw new Error('\\'geometry\\' prop must be Object or Function')\n  }\n}\n\nexport function validateXYPropsLayer (x, y) {\n  if (![Array, Function].includes(x.constructor)) {\n    throw new Error('\\'x\\' prop must be Array or Function')\n  }\n\n  if (![Array, Function].includes(y.constructor)) {\n    throw new Error('\\'y\\' prop must be Array or Function')\n  }\n}\n\nexport function validateGeometryPropLayer (geometry) {\n  if (![Array, Function].includes(geometry.constructor)) {\n    throw new Error('\\'geometry\\' prop must be Array or Function')\n  }\n}\n","export default function propNeedsScaling (prop) {\n  return prop.constructor !== Function\n}\n","import {\n  ensureValidGeometryProps,\n  getInputType\n} from '../utils/geometryPropTools.js'\nimport propNeedsScaling from '../utils/propNeedsScaling.js'\nimport { transformGeometry } from '../../../utils/geometryUtils/index.js'\n\nexport default function createPixelGeometry (\n  geometryProps,\n  sectionContext,\n  renderSettings\n) {\n  ensureValidGeometryProps(geometryProps)\n  const inputType = getInputType(geometryProps)\n\n  if (inputType === 'xy') {\n    const xNeedsScaling = propNeedsScaling(geometryProps.x)\n    const yNeedsScaling = propNeedsScaling(geometryProps.y)\n\n    const x = xNeedsScaling\n      ? geometryProps.x\n      : geometryProps.x(sectionContext)\n\n    const y = yNeedsScaling\n      ? geometryProps.y\n      : geometryProps.y(sectionContext)\n\n    const totalTransformation = sectionContext.getTotalTransformation({ xNeedsScaling, yNeedsScaling })\n\n    return transformGeometry({ type: 'Point', x, y }, totalTransformation, renderSettings)\n  }\n\n  if (inputType === 'geometry') {\n    const needsScaling = propNeedsScaling(geometryProps.geometry)\n\n    const geometry = needsScaling\n      ? geometryProps.geometry\n      : geometryProps.geometry(sectionContext)\n\n    const totalTransformation = sectionContext.getTotalTransformation(needsScaling)\n\n    return transformGeometry(geometry, totalTransformation, renderSettings)\n  }\n}\n","import { transformGeometry, polarGeometry } from '../../../utils/geometryUtils'\nimport getKeyArray from './getKeyArray.js'\n\nexport function createPixelGeometryFromXYArrays (\n  { x, y },\n  sectionContext,\n  renderSettings,\n  geometryType,\n  needsScaling\n) {\n  validateXYArrays(x, y)\n\n  if (geometryType === 'Polygon') {\n    closeIfNecessary(x, y)\n  }\n\n  const rendervousInput = createRendervousInput(x, y, geometryType)\n\n  const interpolationNecessary = (\n    sectionContext.transformation === 'polar' &&\n    renderSettings.interpolate === true\n  )\n\n  if (interpolationNecessary) {\n    const scaleTransformation = sectionContext.getScaleTransformation(needsScaling)\n    const postScaleTransformation = sectionContext.postScaleTransformation\n\n    return polarGeometry(\n      rendervousInput,\n      sectionContext,\n      { scaleTransformation, postScaleTransformation },\n      renderSettings\n    )\n  }\n\n  if (!interpolationNecessary) {\n    const totalTransformation = sectionContext.getTotalTransformation(needsScaling)\n\n    return transformGeometry(rendervousInput, totalTransformation, renderSettings)\n  }\n}\n\nexport function validateXYArrays (x, y) {\n  if (x.constructor !== Array) {\n    throw new Error('\\'x\\' prop must be Array or function that returns array')\n  }\n\n  if (y.constructor !== Array) {\n    throw new Error('\\'y\\' prop must be Array or function that returns array')\n  }\n\n  if (x.length !== y.length) {\n    throw new Error('Arrays passed to \\'x\\' and \\'y\\' must have the same length')\n  }\n}\n\nfunction closeIfNecessary (x, y) {\n  const xNotClosed = x[0] !== x[x.length - 1]\n  const yNotClosed = y[0] !== y[y.length - 1]\n\n  if (xNotClosed || yNotClosed) {\n    x.push(x[0])\n    y.push(y[0])\n  }\n}\n\nfunction createRendervousInput (x, y, geometryType) {\n  return {\n    type: geometryType,\n    x,\n    y\n  }\n}\n\nexport function createPixelGeometryObjectFromXYArrays (\n  { x, y },\n  keyProp,\n  sectionContext,\n  renderSettings,\n  geometryType,\n  needsScaling\n) {\n  validateXYArrays(x, y)\n\n  const keyArray = getKeyArray(keyProp, x.length)\n  const pixelGeometryObject = {}\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n\n    pixelGeometryObject[key] = createPixelGeometryFromXYArrays(\n      { x: x[i], y: y[i] },\n      sectionContext,\n      renderSettings,\n      geometryType,\n      needsScaling\n    )\n  }\n\n  return pixelGeometryObject\n}\n","export default {\n  cross: [\n    [-0.5, -1], [0.5, -1], [0.5, -0.5], [1, -0.5], [1, 0.5], [0.5, 0.5], [0.5, 1], [-0.5, 1], [-0.5, 0.5], [-1, 0.5], [-1, -0.5], [-0.5, -0.5], [-0.5, -1], [-0.5, -1]\n  ],\n  'cross-sharp': [\n    [0, -1], [0.2, -0.2], [1, 0], [0.2, 0.2], [0, 1], [-0.2, 0.2], [-1, 0], [-0.2, -0.2], [0, -1]\n  ],\n  diamond: [\n    [0, -1], [1, 0], [0, 1], [-1, 0], [0, -1], [0, -1]\n  ],\n  'triangle-up': [\n    [0, -1], [1, 1], [-1, 1], [0, -1], [0, -1]\n  ],\n  'triangle-down': [\n    [1, -1], [0, 1], [-1, -1], [1, -1], [1, -1]\n  ],\n  'triangle-right': [\n    [-1, -1], [1, 0], [-1, 1], [-1, -1], [-1, -1]\n  ],\n  'triangle-left': [\n    [1, -1], [-1, 0], [1, 1], [1, -1], [1, -1]\n  ],\n  star4: [\n    [0, 0.71], [1, 1], [0.71, 0], [1, -1], [0, -0.71], [-1, -1], [-0.71, 0], [-1, 1], [0, 0.71], [0, 0.71]\n  ],\n  star5: [\n    [0, 0.5], [0.6, 0.8], [0.5, 0.1], [1, -0.3], [0.3, -0.4], [0, -1], [-0.3, -0.4], [-1, -0.3], [-0.5, 0.1], [-0.6, 0.8], [0, 0.5], [0, 0.5]\n  ],\n  star: [\n    [0, 0.5], [0.6, 0.8], [0.5, 0.1], [1, -0.3], [0.3, -0.4], [0, -1], [-0.3, -0.4], [-1, -0.3], [-0.5, 0.1], [-0.6, 0.8], [0, 0.5], [0, 0.5]\n  ],\n  star6: [\n    [0, 0.58], [0.5, 1], [0.43, 0.29], [1, 0], [0.43, -0.29], [0.5, -1], [0, -0.58], [-0.5, -1], [-0.43, -0.29], [-1, 0], [-0.43, 0.29], [-0.5, 1], [0, 0.58]\n  ],\n  star8: [\n    [0, 0.54], [0.41, 1], [0.38, 0.38], [1, 0.41], [0.54, 0], [1, -0.41], [0.38, -0.38], [0.41, -1], [0, -0.54], [-0.41, -1], [-0.38, -0.38], [-1, -0.41], [-0.54, 0], [-1, 0.41], [-0.38, 0.38], [-0.41, 1], [0, 0.54]\n  ],\n  pentagon: [\n    [-1, -0.24], [0, -1], [1, -0.24], [0.62, 1], [-0.62, 1], [-1, -0.24], [-1, -0.24]\n  ],\n  hexagon: [\n    [-1, 0], [-0.57, -1], [0.57, -1], [1, 0], [0.57, 1], [-0.57, 1], [-1, 0], [-1, 0]\n  ],\n  heptagon: [\n    [-1, 0.29], [-0.8, -0.6], [0, -1], [0.8, -0.6], [1, 0.29], [0.45, 1], [-0.45, 1], [-1, 0.29], [-1, 0.29]\n  ],\n  septagon: [\n    [-1, 0.29], [-0.8, -0.6], [0, -1], [0.8, -0.6], [1, 0.29], [0.45, 1], [-0.45, 1], [-1, 0.29], [-1, 0.29]\n  ],\n  octagon: [\n    [-1, -0.41], [-0.41, -1], [0.41, -1], [1, -0.41], [1, 0.41], [0.41, 1], [-0.41, 1], [-1, 0.41], [-1, -0.41], [-1, -0.41]\n  ],\n  nonagon: [\n    [0.35, -1], [0.88, -0.55], [1, 0.15], [0.65, 0.76], [0, 1], [-0.65, 0.76], [-1, 0.15], [-0.88, -0.55], [-0.35, -1], [0.35, -1], [0.35, -1]\n  ],\n  decagon: [\n    [-1, 0], [-0.81, -0.62], [-0.31, -1], [0.31, -1], [0.81, -0.62], [1, 0], [0.81, 0.62], [0.31, 1], [-0.31, 1], [-0.81, 0.62], [-1, 0], [-1, 0]\n  ]\n}\n","// https://stackoverflow.com/a/155678/7237112\nexport function representPointAsPolygon (point, { radius }) {\n  const x = point.coordinates[0]\n  const y = point.coordinates[1]\n\n  const circumference = Math.PI * 2 * radius\n  const steps = Math.max(Math.ceil(circumference), 9)\n\n  const polygon = {\n    type: 'Polygon',\n    coordinates: [[]]\n  }\n\n  for (let i = 0; i < steps; i++) {\n    polygon.coordinates[0].push(\n      [\n        x + radius * Math.cos(Math.PI * i / steps * 2 - Math.PI / 2),\n        y + radius * Math.sin(Math.PI * i / steps * 2 - Math.PI / 2)\n      ]\n    )\n  }\n\n  // close polygon\n  polygon.coordinates[0].push(polygon.coordinates[0][0])\n\n  return polygon\n}\n\nexport function representPointsAsPolygons (points, { radiusObject }) {\n  const polygons = {}\n\n  for (const key in points) {\n    polygons[key] = representPointAsPolygon(points[key], { radius: radiusObject[key] })\n  }\n\n  return polygons\n}\n","import createPixelGeometryPoint from '../Point/createPixelGeometry.js'\nimport { createScaledGeometry as createSquareGeometry } from '../Rectangle/createPixelGeometry.js'\nimport geometryAlias from './geometryAlias.js'\nimport { transformGeometry } from '../../../utils/geometryUtils'\nimport { representPointAsPolygon } from '../Point/representPointAsPolygon.js'\n\nexport default function createPixelGeometry (\n  geometryProps,\n  sectionContext,\n  renderSettings\n) {\n  const pointGeometry = createPixelGeometryPoint(\n    geometryProps,\n    sectionContext,\n    renderSettings\n  )\n\n  const symbolGeometry = createSymbolGeometry(pointGeometry, geometryProps)\n\n  return symbolGeometry\n}\n\nexport function createSymbolGeometry (pointGeometry, geometryProps) {\n  const [cx, cy] = pointGeometry.coordinates\n\n  const shape = geometryProps.shape || 'circle'\n  const size = geometryProps.size || 8\n\n  if (shape === 'circle') {\n    return createPoint(cx, cy, size)\n  }\n\n  if (shape === 'square') {\n    return createSquare(cx, cy, size)\n  }\n\n  if (shape in geometryAlias) {\n    const coordinates = [geometryAlias[shape]]\n    const geometry = {\n      type: 'Polygon',\n      coordinates\n    }\n\n    return createSymbolFromGeometry(cx, cy, geometry, size)\n  }\n\n  return createSymbolFromGeometry(cx, cy, shape, size)\n}\n\nfunction createPoint (cx, cy, size) {\n  const radius = size / 2\n  const pointGeometry = {\n    type: 'Point',\n    coordinates: [cx, cy]\n  }\n  return representPointAsPolygon(pointGeometry, { radius })\n}\n\nfunction createSquare (cx, cy, size) {\n  const halfSize = size / 2\n\n  const x1 = cx - halfSize\n  const x2 = cx + halfSize\n  const y1 = cy - halfSize\n  const y2 = cy + halfSize\n\n  return createSquareGeometry({ x1, x2, y1, y2 })\n}\n\nfunction createSymbolFromGeometry (cx, cy, geometry, size) {\n  const halfSize = size / 2\n  const transformation = p => [p[0] * halfSize + cx, p[1] * halfSize + cy]\n\n  return transformGeometry(geometry, transformation)\n}\n","import { createPixelGeometryFromGeometry } from '../utils/createPixelGeometryFromGeometry.js'\n\nexport default function createPixelGeometry (\n  geometryProps,\n  sectionContext,\n  renderSettings\n) {\n  // filter for allowed props; leave any undefined props in place\n  const allowedProps =\n    (({\n      x1 = undefined,\n      y1 = undefined,\n      x2 = undefined,\n      y2 = undefined,\n      independentAxis = undefined\n    }) => ({ x1, y1, x2, y2, independentAxis }))(geometryProps)\n\n  const scaledGeometry = createScaledGeometry(scaleCoordinates(augmentProps(validateProps(normalize(\n    allowedProps,\n    sectionContext\n  ))), sectionContext))\n\n  return createPixelGeometryFromGeometry(\n    scaledGeometry,\n    sectionContext,\n    renderSettings,\n    false\n  )\n}\n\nfunction normalize ({ independentAxis, ...coordinateProps }, sectionContext) {\n  const normalized = Object.entries(coordinateProps).reduce((acc, [k, v]) => {\n    const extracted = typeof v === 'function' ? v(sectionContext) : v\n\n    acc[k] = {\n      type: extracted === undefined ? 'none' : Array.isArray(extracted) ? 'array' : 'singleton',\n      ...(Array.isArray(extracted) && { arrayLength: extracted.length }),\n      value: extracted,\n      scaled: typeof v === 'function'\n    }\n    return acc\n  }, {})\n  normalized.independentAxis = independentAxis && independentAxis.toLowerCase()\n  return normalized\n}\n\nexport function validateProps (normalized) {\n  const { independentAxis, ...coordinateProps } = normalized\n\n  const definedTypes = ['singleton', 'array']\n  const definedProps = Object.entries(coordinateProps)\n    .filter(([k, v]) => definedTypes.includes(v.type))\n    .reduce((acc, [k, v]) => {\n      acc[k] = coordinateProps[k]\n      return acc\n    }, {})\n\n  const definedKeys = Object.keys(definedProps)\n\n  // reject if props do not include x1 and y1\n  const containsx1y1 = ['x1', 'y1'].every(k => definedKeys.includes(k))\n  if (!containsx1y1) { throw new Error('At least x1 and y1 must be provided') }\n\n  // reject if at least x1 or y1 is not an array\n  if (definedProps.x1.type === 'singleton' && definedProps.y1.type === 'singleton') {\n    throw new Error('At least x1 or y1 must be passed an array')\n  }\n\n  // reject if independentAxis does not align with x/y types\n  if (!independentAxis || independentAxis === 'x') {\n    // check that x is the independent variable\n    // reject if x1 is not given an array of at least length 2 - x must not be constant\n    // x1 should also be distinct (for all types) and monotonically increasing for Number/Date types, but no checks will be performed for these\n    if (definedProps.x1.type === 'singleton' || (definedProps.x1.type === 'array' && definedProps.x1.arrayLength < 2)) {\n      throw new Error('x1 must be passed an array of at least length 2 when independentAxis is \"x\" or undefined')\n    }\n    // reject if x1, y1 and x2 are provided but independentAxis is not y\n    if (definedKeys.includes('x2')) {\n      throw new Error('independentAxis must be \"y\" when x1, y1 and x2 are specified')\n    }\n  } else if (independentAxis === 'y') {\n    // check that y is the independent variable\n    // reject if y1 is not given an array of at least length 2 - y must not be constant\n    // y1 should also be distinct (for all types) and monotonically increasing for Number/Date types, but no checks will be performed for these\n    if (definedProps.y1.type === 'singleton' || (definedProps.y1.type === 'array' && definedProps.y1.arrayLength < 2)) {\n      throw new Error('y1 must be passed an array of at least length 2 when independentAxis is \"y\"')\n    }\n    // reject if x1, y1 and y2 are provided but independentAxis is not x\n    if (definedKeys.includes('y2')) {\n      throw new Error('independentAxis must be \"x\" when x1, y1 and y2 are specified')\n    }\n  } else {\n    // reject if defined independentAxis is passed a value other than X or Y\n    throw new Error('independentAxis must be passed \"x\" or \"y\" or left blank')\n  }\n\n  // reject if arrays given are not of equal length\n  const arrayLengths = Object.values(definedProps)\n    .filter(v => v.type === 'array')\n    .map(v => v.value.length)\n\n  const arrayLengthsEqual = arrayLengths.every((val, idx, arr) => val === arr[0])\n  if (!arrayLengthsEqual) { throw new Error('Arrays given must be of equal length') }\n\n  return normalized\n}\n\nexport function augmentProps ({ independentAxis, x1, y1, x2, y2 }) {\n  const indAx = !independentAxis || independentAxis === 'x' ? 'x' : 'y'\n\n  const [indKey, indVal] = indAx === 'x' ? ['x1', x1] : ['y1', y1]\n  const [depKey1, depVal1] = indAx === 'x' ? ['y1', y1] : ['x1', x1]\n  const [depKey2, depVal2] = indAx === 'x' ? ['y2', y2] : ['x2', x2]\n  const length = indVal.arrayLength\n\n  const depVal1Map = {\n    singleton: {\n      value: Array(length).fill(depVal1.value),\n      type: 'array',\n      arrayLength: length\n    },\n    array: depVal1\n  }\n  const depVal2Map = {\n    singleton: {\n      value: Array(length).fill(depVal2.value),\n      type: 'array',\n      arrayLength: length\n    },\n    none: {\n      value: Array(length).fill(0),\n      type: 'array',\n      arrayLength: length\n    },\n    array: depVal2\n  }\n\n  return {\n    independentAxis: indAx,\n    [indKey]: indVal,\n    [depKey1]: depVal1Map[depVal1.type],\n    [depKey2]: depVal2Map[depVal2.type]\n  }\n}\n\nconst scaleMap = { x1: 'scaleX', y1: 'scaleY', x2: 'scaleX', y2: 'scaleY' }\n\nexport function scaleCoordinates ({ independentAxis, ...coordinateProps }, sectionContext) {\n  const scaledProps = Object.entries(coordinateProps).reduce((acc, [k, v]) => {\n    if (v.scaled) {\n      acc[k] = v.value\n    } else {\n      const scale = sectionContext[scaleMap[k]]\n      acc[k] = v.value.map(d => scale(d))\n    }\n    return acc\n  }, {})\n  return { independentAxis, ...scaledProps }\n}\n\nexport function createScaledGeometry ({ x1, y1, x2, y2, independentAxis }) {\n  // polygon outer ring is defined counterclockwise\n\n  let bottomPoints, topPoints\n\n  if (independentAxis === 'x') {\n    bottomPoints = y2.map((y2, i) => [x1[i], y2])\n    topPoints = y1.map((y1, i) => [x1[i], y1]).reverse()\n  } else { // y independent\n    bottomPoints = x2.map((x2, i) => [x2, y1[i]])\n    topPoints = x1.map((x1, i) => [x1, y1[i]]).reverse()\n  }\n\n  const origin = [bottomPoints[0]]\n  const allPoints = [bottomPoints.concat(topPoints, origin)]\n\n  const scaledGeometryArray = { type: 'Polygon', coordinates: allPoints }\n  return scaledGeometryArray\n}\n","import {\n  ensureValidGeometryProps,\n  getInputType,\n  validateXYProps,\n  validateGeometryPropLayer\n} from '../utils/geometryPropTools.js'\n\nimport { validateXYArrays } from '../utils/createPixelGeometryFromXYArrays.js'\nimport propNeedsScaling from '../utils/propNeedsScaling.js'\nimport getKeyArray from '../utils/getKeyArray.js'\n\nexport default function createPixelGeometryObject (\n  geometryProps,\n  keyProp,\n  sectionContext,\n  renderSettings\n) {\n  ensureValidGeometryProps(geometryProps)\n\n  const inputType = getInputType(geometryProps)\n\n  if (inputType === 'xy') {\n    return createPixelGeometryObjectFromCoordinates(\n      geometryProps,\n      keyProp,\n      sectionContext,\n      renderSettings\n    )\n  }\n\n  if (inputType === 'geometry') {\n    return createPixelGeometryObjectFromGeometry(\n      geometryProps,\n      keyProp,\n      sectionContext,\n      renderSettings\n    )\n  }\n}\n\nfunction createPixelGeometryObjectFromCoordinates (\n  { x, y },\n  keyProp,\n  sectionContext,\n  renderSettings\n) {\n  validateXYProps(x, y)\n\n  const xNeedsScaling = propNeedsScaling(x)\n  const yNeedsScaling = propNeedsScaling(y)\n\n  const xScaled = xNeedsScaling\n    ? x\n    : x(sectionContext)\n\n  const yScaled = yNeedsScaling\n    ? y\n    : y(sectionContext)\n\n  const { xArray, yArray } = applyRecyclingIfNecessary(xScaled, yScaled)\n  validateXYArrays(xArray, yArray)\n\n  const keyArray = getKeyArray(keyProp, xArray.length)\n\n  const totalTransformation = sectionContext.getTotalTransformation({ xNeedsScaling, yNeedsScaling })\n\n  return transformXYArraysIntoGeometryObject(xArray, yArray, keyArray, totalTransformation)\n}\n\nfunction applyRecyclingIfNecessary (xScaled, yScaled) {\n  if (xScaled.constructor !== Array && yScaled.constructor !== Array) {\n    throw new Error('Invalid input: cannot recycle all geometry props')\n  }\n\n  return {\n    xArray: xScaled.constructor === Array ? xScaled : recycle(xScaled, yScaled.length),\n    yArray: yScaled.constructor === Array ? yScaled : recycle(yScaled, xScaled.length)\n  }\n}\n\nfunction recycle (value, length) {\n  return new Array(length).fill(value)\n}\n\nfunction transformXYArraysIntoGeometryObject (xArray, yArray, keyArray, transformation) {\n  const geometryObject = {}\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n\n    geometryObject[key] = {\n      type: 'Point',\n      coordinates: transformation([\n        xArray[i],\n        yArray[i]\n      ])\n    }\n  }\n\n  return geometryObject\n}\n\nfunction createPixelGeometryObjectFromGeometry (\n  geometryProps,\n  keyProp,\n  sectionContext,\n  renderSettings\n) {\n  validateGeometryPropLayer(geometryProps.geometry)\n\n  const geometryNeedsScaling = propNeedsScaling(geometryProps.geometry)\n\n  const geometry = geometryNeedsScaling\n    ? geometryProps.geometry\n    : geometryProps.geometry(sectionContext)\n\n  const keyArray = getKeyArray(keyProp, geometry.length)\n\n  const totalTransformation = sectionContext.getTotalTransformation(geometryNeedsScaling)\n\n  return transformGeometryArrayIntoGeometryObject(\n    geometry,\n    keyArray,\n    totalTransformation\n  )\n}\n\nfunction transformGeometryArrayIntoGeometryObject (geometryArray, keyArray, transformation) {\n  const geometryObject = {}\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n\n    geometryObject[key] = {\n      type: 'Point',\n      coordinates: transformation(geometryArray[i].coordinates)\n    }\n  }\n\n  return geometryObject\n}\n","export default function (value, length) {\n  return new Array(length).fill(value)\n}\n","import { createPixelGeometryObjectFromGeometry } from '../utils/createPixelGeometryFromGeometry.js'\nimport { createScaledGeometry, ensureValidCombination } from './createPixelGeometry.js'\nimport generateArrayOfLength from '../utils/generateArrayOfLength.js'\nimport { isDefined, isUndefined } from '../../../utils/equals.js'\n\nexport default function createPixelGeometryObject (\n  geometryProps,\n  keyProp,\n  sectionContext,\n  renderSettings\n) {\n  const { scaledCoordinates, length } = scaleCoordinates(geometryProps, sectionContext)\n  const scaledGeometryArray = createScaledGeometryArray(scaledCoordinates, length)\n\n  return createPixelGeometryObjectFromGeometry(\n    scaledGeometryArray,\n    keyProp,\n    sectionContext,\n    renderSettings,\n    false\n  )\n}\n\nfunction scaleCoordinates (coordinateProps, sectionContext) {\n  ensureValidCombination(coordinateProps)\n\n  const coordinatesThatNeedScaling = whichCoordinatesNeedScaling(coordinateProps)\n\n  const nonMissingCoordinates = getMissingCoordinatesFromContext(coordinateProps, sectionContext)\n  const coordinateValues = getCoordinateValues(nonMissingCoordinates, sectionContext)\n\n  const length = getNRectangles(coordinateValues)\n\n  const coordinatesThatArePrimitive = whichCoordinatesArePrimitive(coordinateValues)\n\n  const scaledCoordinates = _scaleCoordinates(\n    coordinateValues,\n    sectionContext,\n    coordinatesThatNeedScaling,\n    coordinatesThatArePrimitive,\n    length\n  )\n\n  return { scaledCoordinates, length }\n}\n\nconst coordinateNames = ['x1', 'x2', 'y1', 'y2']\n\nfunction whichCoordinatesNeedScaling (coordinates) {\n  const coordinatesThatNeedScaling = {}\n\n  for (const coordinateName of coordinateNames) {\n    const coordinateValue = coordinates[coordinateName]\n    coordinatesThatNeedScaling[coordinateName] = isDefined(coordinateValue) && coordinateValue.constructor !== Function\n  }\n\n  return coordinatesThatNeedScaling\n}\n\nfunction getMissingCoordinatesFromContext (coordinates, sectionContext) {\n  const nonMissingCoordinates = {}\n\n  for (const coordinateName of coordinateNames) {\n    const coordinateValue = coordinates[coordinateName]\n    nonMissingCoordinates[coordinateName] = isUndefined(coordinateValue)\n      ? getMissingCoordinateFromContext(coordinateName, sectionContext)\n      : coordinateValue\n  }\n\n  return nonMissingCoordinates\n}\n\nconst coordMap = { x1: 'minX', x2: 'maxX', y1: 'minY', y2: 'maxY' }\n\nfunction getMissingCoordinateFromContext (coordinateName, sectionContext) {\n  return sectionContext.paddedBbox[coordMap[coordinateName]]\n}\n\nfunction getCoordinateValues (nonMissingCoordinates, sectionContext) {\n  const coordinateValues = {}\n\n  for (const coordinateName in nonMissingCoordinates) {\n    const coordinateValue = nonMissingCoordinates[coordinateName]\n    if (coordinateValue.constructor === Function) {\n      coordinateValues[coordinateName] = coordinateValue(sectionContext)\n    } else {\n      coordinateValues[coordinateName] = coordinateValue\n    }\n  }\n\n  return coordinateValues\n}\n\nconst invalidCoordinateError = new Error('RectangleLayer: invalid coordinate specification')\n\nfunction getNRectangles (coordinateValues) {\n  let atLeastOneArray = false\n  let length\n\n  for (const coordinateName in coordinateValues) {\n    const coordinateValue = coordinateValues[coordinateName]\n\n    if (coordinateValue.constructor === Array) {\n      atLeastOneArray = true\n      length = length || coordinateValue.length\n\n      if (length !== coordinateValue.length) throw invalidCoordinateError\n    }\n  }\n\n  if (!atLeastOneArray) throw invalidCoordinateError\n\n  return length\n}\n\nfunction whichCoordinatesArePrimitive (coordinateValues) {\n  const coordinatesThatArePrimitive = {}\n\n  for (const coordinateName in coordinateValues) {\n    const coordinateValue = coordinateValues[coordinateName]\n\n    coordinatesThatArePrimitive[coordinateName] = coordinateValue.constructor !== Array\n  }\n\n  return coordinatesThatArePrimitive\n}\n\nfunction _scaleCoordinates (\n  coordinateValues, scales, coordinatesThatNeedScaling, coordinatesThatArePrimitive, length\n) {\n  const scaledCoordinates = {}\n\n  for (const coordinateName in coordinateValues) {\n    const coordinateValue = coordinateValues[coordinateName]\n    let array\n    const scale = coordinateName.startsWith('x') ? scales.scaleX : scales.scaleY\n\n    if (coordinatesThatArePrimitive[coordinateName]) array = generateArrayOfLength(coordinateValue, length)\n    if (!coordinatesThatArePrimitive[coordinateName]) array = coordinateValue\n\n    scaledCoordinates[coordinateName] = coordinatesThatNeedScaling[coordinateName]\n      ? array.map(scale)\n      : array\n  }\n\n  return scaledCoordinates\n}\n\nfunction createScaledGeometryArray (scaledCoordinates, length) {\n  const scaledGeometryArray = []\n\n  for (let i = 0; i < length; i++) {\n    scaledGeometryArray.push(\n      createScaledGeometry({\n        x1: scaledCoordinates.x1[i],\n        x2: scaledCoordinates.x2[i],\n        y1: scaledCoordinates.y1[i],\n        y2: scaledCoordinates.y2[i]\n      })\n    )\n  }\n\n  return scaledGeometryArray\n}\n","import createPixelGeometryObjectPoint from '../Point/createPixelGeometryObject.js'\nimport { createSymbolGeometry } from './createPixelGeometry.js'\n\nexport default function createPixelGeometryObject (\n  geometryProps,\n  keyProp,\n  sectionContext,\n  renderSettings\n) {\n  const pointGeometryObject = createPixelGeometryObjectPoint(\n    geometryProps,\n    keyProp,\n    sectionContext,\n    renderSettings\n  )\n\n  const symbolGeometryObject = createSymbolGeometryObject(pointGeometryObject, geometryProps)\n\n  return symbolGeometryObject\n}\n\nfunction createSymbolGeometryObject (pointGeometryObject, geometryProps) {\n  const keys = Object.keys(pointGeometryObject)\n\n  const shapeGetter = createPropGetter(geometryProps.shape, keys)\n  const sizeGetter = createPropGetter(geometryProps.size, keys)\n\n  const symbolGeometryObject = {}\n\n  for (const key in pointGeometryObject) {\n    const shape = shapeGetter(key)\n    const size = sizeGetter(key)\n\n    symbolGeometryObject[key] = createSymbolGeometry(pointGeometryObject[key], { shape, size })\n  }\n\n  return symbolGeometryObject\n}\n\nfunction createPropGetter (prop, keys) {\n  if (prop === undefined) return () => {}\n\n  if (prop.constructor === Function) {\n    return prop\n  }\n\n  const propObject = createPropObject(prop, keys)\n  return key => propObject[key]\n}\n\nfunction createPropObject (prop, keys) {\n  const length = keys.length\n  const propObject = {}\n\n  if (prop.constructor === Array) {\n    validatePropArrayLength(prop, length)\n\n    for (let i = 0; i < length; i++) {\n      const key = keys[i]\n      propObject[key] = prop[i]\n    }\n  } else {\n    for (let i = 0; i < length; i++) {\n      const key = keys[i]\n      propObject[key] = prop\n    }\n  }\n\n  return propObject\n}\n\nfunction validatePropArrayLength (prop, length) {\n  if (prop.length !== length) {\n    throw new Error('If provided as Arrays, all positioning props must be the same length')\n  }\n}\n","import createPixelGeometryPoint from '../Point/createPixelGeometry.js'\nimport createPixelGeometryRectangle from '../Rectangle/createPixelGeometry.js'\nimport createPixelGeometryPolygon from '../Polygon/createPixelGeometry.js'\nimport createPixelGeometryLine from '../Line/createPixelGeometry.js'\nimport createPixelGeometrySymbol from '../Symbol/createPixelGeometry.js'\nimport createPixelGeometryArea from '../Area/createPixelGeometry.js'\n\nimport createPixelGeometryObjectPoint from '../Point/createPixelGeometryObject.js'\nimport createPixelGeometryObjectRectangle from '../Rectangle/createPixelGeometryObject.js'\nimport createPixelGeometryObjectPolygon from '../Polygon/createPixelGeometryObject.js'\nimport createPixelGeometryObjectLine from '../Line/createPixelGeometryObject.js'\nimport createPixelGeometryObjectSymbol from '../Symbol/createPixelGeometryObject.js'\nimport createPixelGeometryObjectArea from '../Area/createPixelGeometryObject.js'\n\nexport const markPixelGeometryFuncs = new Proxy({\n  Point: createPixelGeometryPoint,\n  Rectangle: createPixelGeometryRectangle,\n  Polygon: createPixelGeometryPolygon,\n  Line: createPixelGeometryLine,\n  Label: createPixelGeometryPoint,\n  Symbol: createPixelGeometrySymbol,\n  Area: createPixelGeometryArea\n}, {\n  get: (obj, prop) => {\n    if (prop in obj) {\n      return obj[prop]\n    } else {\n      throw new Error(`Invalid Mark type: '${prop}'`)\n    }\n  }\n})\n\nexport const layerPixelGeometryFuncs = new Proxy({\n  Point: createPixelGeometryObjectPoint,\n  Rectangle: createPixelGeometryObjectRectangle,\n  Polygon: createPixelGeometryObjectPolygon,\n  Line: createPixelGeometryObjectLine,\n  Label: createPixelGeometryObjectPoint,\n  Symbol: createPixelGeometryObjectSymbol,\n  Area: createPixelGeometryObjectArea\n}, {\n  get: (obj, prop) => {\n    if (prop in obj) {\n      return obj[prop]\n    } else {\n      throw new Error(`Invalid Layer type: '${prop}'`)\n    }\n  }\n})\n","import {\n  ensureValidGeometryProps,\n  getInputType\n} from '../utils/geometryPropTools.js'\n\nimport propNeedsScaling from '../utils/propNeedsScaling.js'\nimport { createPixelGeometryFromXYArrays } from '../utils/createPixelGeometryFromXYArrays.js'\nimport { createPixelGeometryFromGeometry } from '../utils/createPixelGeometryFromGeometry.js'\n\nexport default function createPixelGeometry (\n  geometryProps,\n  sectionContext,\n  renderSettings\n) {\n  ensureValidGeometryProps(geometryProps)\n  const inputType = getInputType(geometryProps)\n\n  if (inputType === 'xy') {\n    const xNeedsScaling = propNeedsScaling(geometryProps.x)\n    const yNeedsScaling = propNeedsScaling(geometryProps.y)\n\n    const x = xNeedsScaling\n      ? geometryProps.x\n      : geometryProps.x(sectionContext)\n\n    const y = yNeedsScaling\n      ? geometryProps.y\n      : geometryProps.y(sectionContext)\n\n    return createPixelGeometryFromXYArrays(\n      { x, y },\n      sectionContext,\n      renderSettings,\n      'Polygon',\n      { xNeedsScaling, yNeedsScaling }\n    )\n  }\n\n  if (inputType === 'geometry') {\n    const needsScaling = propNeedsScaling(geometryProps.geometry)\n\n    const geometry = needsScaling\n      ? geometryProps.geometry\n      : geometryProps.geometry(sectionContext)\n\n    return createPixelGeometryFromGeometry(\n      geometry,\n      sectionContext,\n      renderSettings,\n      needsScaling\n    )\n  }\n}\n","import {\n  ensureValidGeometryProps,\n  getInputType\n} from '../utils/geometryPropTools.js'\n\nimport propNeedsScaling from '../utils/propNeedsScaling.js'\nimport { createPixelGeometryFromXYArrays } from '../utils/createPixelGeometryFromXYArrays.js'\nimport { createPixelGeometryFromGeometry } from '../utils/createPixelGeometryFromGeometry.js'\n\nexport default function createPixelGeometry (\n  geometryProps,\n  sectionContext,\n  renderSettings\n) {\n  ensureValidGeometryProps(geometryProps)\n  const inputType = getInputType(geometryProps)\n\n  if (inputType === 'xy') {\n    const xNeedsScaling = propNeedsScaling(geometryProps.x)\n    const yNeedsScaling = propNeedsScaling(geometryProps.y)\n\n    const x = xNeedsScaling\n      ? geometryProps.x\n      : geometryProps.x(sectionContext)\n\n    const y = yNeedsScaling\n      ? geometryProps.y\n      : geometryProps.y(sectionContext)\n\n    return createPixelGeometryFromXYArrays(\n      { x, y },\n      sectionContext,\n      renderSettings,\n      'LineString',\n      { xNeedsScaling, yNeedsScaling }\n    )\n  }\n\n  if (inputType === 'geometry') {\n    const needsScaling = propNeedsScaling(geometryProps.geometry)\n\n    const geometry = needsScaling\n      ? geometryProps.geometry\n      : geometryProps.geometry(sectionContext)\n\n    return createPixelGeometryFromGeometry(\n      geometry,\n      sectionContext,\n      renderSettings,\n      needsScaling\n    )\n  }\n}\n","import {\n  ensureValidGeometryProps,\n  getInputType\n} from '../utils/geometryPropTools.js'\n\nimport propNeedsScaling from '../utils/propNeedsScaling.js'\nimport { createPixelGeometryObjectFromXYArrays } from '../utils/createPixelGeometryFromXYArrays.js'\nimport { createPixelGeometryObjectFromGeometry } from '../utils/createPixelGeometryFromGeometry.js'\n\nexport default function createPixelGeometry (\n  geometryProps,\n  keyProp,\n  sectionContext,\n  renderSettings\n) {\n  ensureValidGeometryProps(geometryProps)\n  const inputType = getInputType(geometryProps)\n\n  if (inputType === 'xy') {\n    const xNeedsScaling = propNeedsScaling(geometryProps.x)\n    const yNeedsScaling = propNeedsScaling(geometryProps.y)\n\n    const x = xNeedsScaling\n      ? geometryProps.x\n      : geometryProps.x(sectionContext)\n\n    const y = yNeedsScaling\n      ? geometryProps.y\n      : geometryProps.y(sectionContext)\n\n    return createPixelGeometryObjectFromXYArrays(\n      { x, y },\n      keyProp,\n      sectionContext,\n      renderSettings,\n      'Polygon',\n      { xNeedsScaling, yNeedsScaling }\n    )\n  }\n\n  if (inputType === 'geometry') {\n    const needsScaling = propNeedsScaling(geometryProps.geometry)\n\n    const geometry = needsScaling\n      ? geometryProps.geometry\n      : geometryProps.geometry(sectionContext)\n\n    return createPixelGeometryObjectFromGeometry(\n      geometry,\n      keyProp,\n      sectionContext,\n      renderSettings,\n      needsScaling\n    )\n  }\n}\n","import {\n  ensureValidGeometryProps,\n  getInputType\n} from '../utils/geometryPropTools.js'\n\nimport propNeedsScaling from '../utils/propNeedsScaling.js'\nimport { createPixelGeometryObjectFromXYArrays } from '../utils/createPixelGeometryFromXYArrays.js'\nimport { createPixelGeometryObjectFromGeometry } from '../utils/createPixelGeometryFromGeometry.js'\n\nexport default function createPixelGeometry (\n  geometryProps,\n  keyProp,\n  sectionContext,\n  renderSettings\n) {\n  ensureValidGeometryProps(geometryProps)\n  const inputType = getInputType(geometryProps)\n\n  if (inputType === 'xy') {\n    const xNeedsScaling = propNeedsScaling(geometryProps.x)\n    const yNeedsScaling = propNeedsScaling(geometryProps.y)\n\n    const x = xNeedsScaling\n      ? geometryProps.x\n      : geometryProps.x(sectionContext)\n\n    const y = yNeedsScaling\n      ? geometryProps.y\n      : geometryProps.y(sectionContext)\n\n    return createPixelGeometryObjectFromXYArrays(\n      { x, y },\n      keyProp,\n      sectionContext,\n      renderSettings,\n      'LineString',\n      { xNeedsScaling, yNeedsScaling }\n    )\n  }\n\n  if (inputType === 'geometry') {\n    const needsScaling = propNeedsScaling(geometryProps.geometry)\n\n    const geometry = needsScaling\n      ? geometryProps.geometry\n      : geometryProps.geometry(sectionContext)\n\n    return createPixelGeometryObjectFromGeometry(\n      geometry,\n      keyProp,\n      sectionContext,\n      renderSettings,\n      needsScaling\n    )\n  }\n}\n","import { createPixelGeometryObjectFromGeometry } from '../utils/createPixelGeometryFromGeometry.js'\nimport { validateProps, augmentProps, scaleCoordinates, createScaledGeometry } from './createPixelGeometry.js'\n\nexport default function createPixelGeometryObject (\n  geometryProps,\n  keyProp,\n  sectionContext,\n  renderSettings\n) {\n  // filter for allowed props; leave any undefined props in place\n  const allowedProps =\n    (({\n      x1 = undefined,\n      y1 = undefined,\n      x2 = undefined,\n      y2 = undefined,\n      independentAxis = undefined\n    }) => ({ x1, y1, x2, y2, independentAxis }))(geometryProps)\n\n  const { numAreas, independentAxis, ...augmentedAreas } =\n    augmentAreas(\n      validateAreas(\n        normalizeAreas(\n          allowedProps,\n          sectionContext)))\n\n  // pivot data for use with area mark methods\n  const areasAsArray = [...Array(numAreas).keys()].map(areaIndex =>\n    Object.entries(augmentedAreas).reduce((acc, [k, v]) => {\n      const isNestedArray = v.type === 'array of arrays'\n\n      acc[k] = {\n        type: isNestedArray ? 'array' : 'none',\n        value: isNestedArray ? v.value[areaIndex] : v.value,\n        ...(isNestedArray && { arrayLength: v.value[areaIndex].length }),\n        scaled: v.scaled\n      }\n\n      acc.independentAxis = independentAxis\n      return acc\n    }, {})\n  )\n\n  const scaledGeometryArray = areasAsArray.map(area => {\n    return createScaledGeometry(\n      scaleCoordinates(\n        augmentProps(\n          validateProps(\n            area)),\n        sectionContext))\n  })\n\n  return createPixelGeometryObjectFromGeometry(\n    scaledGeometryArray,\n    keyProp,\n    sectionContext,\n    renderSettings,\n    false\n  )\n}\n\nfunction normalizeAreas ({ independentAxis, ...coordinateProps }, sectionContext) {\n  const normalized = Object.entries(coordinateProps).reduce((acc, [k, v]) => {\n    const extracted = typeof v === 'function' ? v(sectionContext) : v\n\n    const isUndefined = (x) => typeof x === 'undefined'\n    const isSingleton = (x) => !isUndefined(x) && !Array.isArray(x)\n    const isNestedArray = (xs) => !isUndefined(xs) && !isSingleton(xs) && xs.every(x => Array.isArray(x))\n\n    acc[k] = {\n      type: isUndefined(extracted)\n        ? 'none'\n        : isSingleton(extracted)\n          ? 'singleton'\n          : isNestedArray(extracted)\n            ? 'array of arrays'\n            : 'array',\n      ...(isNestedArray(extracted) && { numAreas: extracted.length }),\n      value: extracted,\n      scaled: typeof v === 'function'\n    }\n    return acc\n  }, {})\n\n  normalized.independentAxis = independentAxis && independentAxis.toLowerCase()\n  return normalized\n}\n\nfunction validateAreas (normalizedAreas) {\n  const { independentAxis, ...coordinateProps } = normalizedAreas\n  const { x1, x2, y1, y2 } = coordinateProps\n\n  // reject singletons\n  Object.values(coordinateProps).forEach(v => {\n    if (v.type === 'singleton') {\n      throw new Error('Props passed to the AreaLayer must be either an array or an array of arrays')\n    }\n  })\n\n  const indAx = !independentAxis || independentAxis === 'x' ? 'x' : 'y'\n  const [depKey1, depVal1] = indAx === 'x' ? ['y1', y1] : ['x1', x1]\n  const [depKey2, depVal2] = indAx === 'x' ? ['y2', y2] : ['x2', x2]\n\n  // only x1 can be broadcasted when x is the independent variable\n  // only y1 can be broadcasted when y is the independent variable\n  if (depVal1.type === 'array' || depVal2.type === 'array') {\n    throw new Error(`${depKey1} and ${depKey2} must be passed an array of arrays when independentAxis is \"${indAx}\"`)\n  }\n\n  // reject if number of areas per prop are not equal\n  const numAreasAll = Object.values(coordinateProps)\n    .filter(v => v.type === 'array of arrays')\n    .map(v => v.numAreas)\n\n  const numAreasEqual = numAreasAll.every((val, idx, arr) => val === arr[0])\n  if (!numAreasEqual) {\n    throw new Error('Number of areas declared per prop must be equal')\n  }\n\n  const numAreas = numAreasAll[0]\n  return { numAreas, independentAxis, ...normalizedAreas }\n}\n\nfunction augmentAreas ({ numAreas, independentAxis, x1, y1, x2, y2 }) {\n  const indAx = !independentAxis || independentAxis === 'x' ? 'x' : 'y'\n  const [indKey1, indVal1] = indAx === 'x' ? ['x1', x1] : ['y1', y1]\n  const [indKey2, indVal2] = indAx === 'x' ? ['x2', x2] : ['y2', y2]\n  const [depKey1, depVal1] = indAx === 'x' ? ['y1', y1] : ['x1', x1]\n  const [depKey2, depVal2] = indAx === 'x' ? ['y2', y2] : ['x2', x2]\n\n  const indValMap = {\n    array: {\n      value: Array(numAreas).fill(indVal1.value),\n      type: 'array of arrays',\n      numAreas: numAreas,\n      scaled: indVal1.scaled\n    },\n    'array of arrays': indVal1\n  }\n\n  return {\n    numAreas: numAreas,\n    independentAxis: indAx,\n    [indKey1]: indValMap[indVal1.type],\n    [indKey2]: indVal2,\n    [depKey1]: depVal1,\n    [depKey2]: depVal2\n  }\n}\n","import { pointDistance } from '../../../utils/geometryUtils'\n\nexport function representLineAsPolygon (lineString, { strokeWidth }) {\n  const lineCoordinates = lineString.coordinates\n\n  if (lineString.type === 'LineString') {\n    const outerRing = createOuterRing(lineCoordinates, strokeWidth)\n\n    return {\n      type: 'Polygon',\n      coordinates: [outerRing]\n    }\n  }\n\n  if (lineString.type === 'MultiLineString') {\n    const polygons = []\n\n    for (let i = 0; i < lineCoordinates.length; i++) {\n      polygons.push(\n        [createOuterRing(lineCoordinates[i], strokeWidth)]\n      )\n    }\n\n    return {\n      type: 'MultiPolygon',\n      coordinates: polygons\n    }\n  }\n}\n\nfunction createOuterRing (lineCoordinates, strokeWidth) {\n  const length = lineCoordinates.length\n  const lastIndex = length - 1\n  const distance = strokeWidth / 2\n\n  const coordinatesBottom = new Array(length)\n  const coordinatesTop = new Array(length)\n\n  for (let i = 0; i < length; i++) {\n    if (i === 0) {\n      const [bottomPoint, topPoint] = getCornerPointsStart(lineCoordinates, distance)\n      coordinatesBottom[0] = bottomPoint\n      coordinatesTop[lastIndex] = topPoint\n    }\n\n    if (i === lastIndex) {\n      const [bottomPoint, topPoint] = getCornerPointsEnd(lineCoordinates, distance)\n      coordinatesBottom[lastIndex] = bottomPoint\n      coordinatesTop[0] = topPoint\n    }\n\n    if (i > 0 && i < lastIndex) {\n      const [bottomPoint, topPoint] = getCornerPointsIndex(lineCoordinates, i, distance)\n      coordinatesBottom[i] = bottomPoint\n      coordinatesTop[lastIndex - i] = topPoint\n    }\n  }\n\n  const outerRing = coordinatesBottom.concat(coordinatesTop)\n\n  // Close ring if necessary\n  if (ringIsNotClosed(outerRing)) {\n    outerRing.push(outerRing[0])\n  }\n\n  return outerRing\n}\n\nexport function representLinesAsPolygons (lines, { strokeWidthObject }) {\n  const polygons = {}\n\n  for (const key in lines) {\n    polygons[key] = representLineAsPolygon(lines[key], { strokeWidth: strokeWidthObject[key] })\n  }\n\n  return polygons\n}\n\nfunction getCornerPointsStart (lineCoordinates, distance) {\n  const segment = getNextSegment(0, lineCoordinates)\n  const cornerPoint = segment[0]\n\n  return getParallelPoints(segment, cornerPoint, distance)\n}\n\nfunction getCornerPointsEnd (lineCoordinates, distance) {\n  const segment = getPreviousSegment(lineCoordinates.length - 1, lineCoordinates)\n  const cornerPoint = segment[1]\n\n  return getParallelPoints(segment, cornerPoint, distance)\n}\n\nfunction getCornerPointsIndex (lineCoordinates, index, distance) {\n  const previousSegment = getPreviousSegment(index, lineCoordinates)\n  const nextSegment = getNextSegment(index, lineCoordinates)\n\n  const previousUnitVector = getUnitVector(previousSegment)\n  const nextUnitVector = getUnitVector(nextSegment)\n\n  if (previousUnitVector[0] === nextUnitVector[0] && previousUnitVector[1] === nextUnitVector[1]) {\n    // unit vectors are the same, we can just use the existing line point\n\n    const currentCornerPerpendicularPoints = getParallelPoints(\n      previousSegment, previousSegment[1], distance\n    )\n\n    return currentCornerPerpendicularPoints\n  } else {\n    const previousCornerPerpendicularPoints = getParallelPoints(\n      previousSegment, previousSegment[0], distance\n    )\n    const nextCornerPerpendicularPoints = getParallelPoints(\n      nextSegment, nextSegment[1], distance\n    )\n\n    const bottomPoint = findIntersection(\n      previousCornerPerpendicularPoints[0],\n      previousUnitVector,\n      nextCornerPerpendicularPoints[0],\n      nextUnitVector\n    )\n    const topPoint = findIntersection(\n      previousCornerPerpendicularPoints[1],\n      previousUnitVector,\n      nextCornerPerpendicularPoints[1],\n      nextUnitVector\n    )\n\n    return [bottomPoint, topPoint]\n  }\n}\n\nconst getPreviousSegment = (i, coordinates) => [coordinates[i - 1], coordinates[i]]\nconst getNextSegment = (i, coordinates) => [coordinates[i], coordinates[i + 1]]\n\nfunction getUnitVector (segment) {\n  const [a, b] = segment\n\n  const magnitude = pointDistance(a, b)\n  const dx = b[0] - a[0]\n  const dy = b[1] - a[1]\n\n  return [dx / magnitude, dy / magnitude]\n}\n\nconst getNormalVector = vector => [-vector[1], vector[0]]\n\nfunction movePoint (point, unitVector, distance) {\n  return [\n    point[0] + unitVector[0] * distance,\n    point[1] + unitVector[1] * distance\n  ]\n}\n\nexport function getParallelPoints (segment, point, distance) {\n  const unitVector = getUnitVector(segment)\n  const normalVector = getNormalVector(unitVector)\n\n  const bottomPoint = movePoint(point, normalVector, distance)\n  const topPoint = movePoint(point, normalVector, -distance)\n\n  return [bottomPoint, topPoint]\n}\n\nfunction findIntersection (point1, vector1, point2, vector2) {\n  const lambda1 = findLambda(point1, vector1, point2, vector2)\n  return [\n    point1[0] + (vector1[0] * lambda1),\n    point1[1] + (vector1[1] * lambda1)\n  ]\n}\n\nexport function findLambda (p1, v1, p2, v2) {\n  const deltaX = p1[0] - p2[0]\n  const deltaY = p1[1] - p2[1]\n  const v1x = v1[0]\n  const v2x = v2[0]\n  const v1y = v1[1]\n  const v2y = v2[1]\n\n  const lambda1 = ((v2x * deltaY) - (deltaX * v2y)) /\n    ((v1x * v2y) - (v2x * v1y))\n  return lambda1\n}\n\nfunction ringIsNotClosed (ring) {\n  const first = ring[0]\n  const last = ring[ring.length - 1]\n\n  const closed = first[0] === last[0] && first[1] === last[1]\n\n  return !closed\n}\n","import { representPointAsPolygon, representPointsAsPolygons } from '../Point/representPointAsPolygon.js'\nimport { representLineAsPolygon, representLinesAsPolygons } from '../Line/representLineAsPolygon.js'\n\nexport const markRepresentAsPolygonFuncs = {\n  Point: representPointAsPolygon,\n  Line: representLineAsPolygon\n}\n\nexport const layerRepresentAsPolygonFuncs = {\n  Point: representPointsAsPolygons,\n  Line: representLinesAsPolygons\n}\n","export { identity as linear } from '../internal/index.mjs';\n\n/*\nAdapted from https://github.com/mattdesl\nDistributed under MIT License https://github.com/mattdesl/eases/blob/master/LICENSE.md\n*/\nfunction backInOut(t) {\n    const s = 1.70158 * 1.525;\n    if ((t *= 2) < 1)\n        return 0.5 * (t * t * ((s + 1) * t - s));\n    return 0.5 * ((t -= 2) * t * ((s + 1) * t + s) + 2);\n}\nfunction backIn(t) {\n    const s = 1.70158;\n    return t * t * ((s + 1) * t - s);\n}\nfunction backOut(t) {\n    const s = 1.70158;\n    return --t * t * ((s + 1) * t + s) + 1;\n}\nfunction bounceOut(t) {\n    const a = 4.0 / 11.0;\n    const b = 8.0 / 11.0;\n    const c = 9.0 / 10.0;\n    const ca = 4356.0 / 361.0;\n    const cb = 35442.0 / 1805.0;\n    const cc = 16061.0 / 1805.0;\n    const t2 = t * t;\n    return t < a\n        ? 7.5625 * t2\n        : t < b\n            ? 9.075 * t2 - 9.9 * t + 3.4\n            : t < c\n                ? ca * t2 - cb * t + cc\n                : 10.8 * t * t - 20.52 * t + 10.72;\n}\nfunction bounceInOut(t) {\n    return t < 0.5\n        ? 0.5 * (1.0 - bounceOut(1.0 - t * 2.0))\n        : 0.5 * bounceOut(t * 2.0 - 1.0) + 0.5;\n}\nfunction bounceIn(t) {\n    return 1.0 - bounceOut(1.0 - t);\n}\nfunction circInOut(t) {\n    if ((t *= 2) < 1)\n        return -0.5 * (Math.sqrt(1 - t * t) - 1);\n    return 0.5 * (Math.sqrt(1 - (t -= 2) * t) + 1);\n}\nfunction circIn(t) {\n    return 1.0 - Math.sqrt(1.0 - t * t);\n}\nfunction circOut(t) {\n    return Math.sqrt(1 - --t * t);\n}\nfunction cubicInOut(t) {\n    return t < 0.5 ? 4.0 * t * t * t : 0.5 * Math.pow(2.0 * t - 2.0, 3.0) + 1.0;\n}\nfunction cubicIn(t) {\n    return t * t * t;\n}\nfunction cubicOut(t) {\n    const f = t - 1.0;\n    return f * f * f + 1.0;\n}\nfunction elasticInOut(t) {\n    return t < 0.5\n        ? 0.5 *\n            Math.sin(((+13.0 * Math.PI) / 2) * 2.0 * t) *\n            Math.pow(2.0, 10.0 * (2.0 * t - 1.0))\n        : 0.5 *\n            Math.sin(((-13.0 * Math.PI) / 2) * (2.0 * t - 1.0 + 1.0)) *\n            Math.pow(2.0, -10.0 * (2.0 * t - 1.0)) +\n            1.0;\n}\nfunction elasticIn(t) {\n    return Math.sin((13.0 * t * Math.PI) / 2) * Math.pow(2.0, 10.0 * (t - 1.0));\n}\nfunction elasticOut(t) {\n    return (Math.sin((-13.0 * (t + 1.0) * Math.PI) / 2) * Math.pow(2.0, -10.0 * t) + 1.0);\n}\nfunction expoInOut(t) {\n    return t === 0.0 || t === 1.0\n        ? t\n        : t < 0.5\n            ? +0.5 * Math.pow(2.0, 20.0 * t - 10.0)\n            : -0.5 * Math.pow(2.0, 10.0 - t * 20.0) + 1.0;\n}\nfunction expoIn(t) {\n    return t === 0.0 ? t : Math.pow(2.0, 10.0 * (t - 1.0));\n}\nfunction expoOut(t) {\n    return t === 1.0 ? t : 1.0 - Math.pow(2.0, -10.0 * t);\n}\nfunction quadInOut(t) {\n    t /= 0.5;\n    if (t < 1)\n        return 0.5 * t * t;\n    t--;\n    return -0.5 * (t * (t - 2) - 1);\n}\nfunction quadIn(t) {\n    return t * t;\n}\nfunction quadOut(t) {\n    return -t * (t - 2.0);\n}\nfunction quartInOut(t) {\n    return t < 0.5\n        ? +8.0 * Math.pow(t, 4.0)\n        : -8.0 * Math.pow(t - 1.0, 4.0) + 1.0;\n}\nfunction quartIn(t) {\n    return Math.pow(t, 4.0);\n}\nfunction quartOut(t) {\n    return Math.pow(t - 1.0, 3.0) * (1.0 - t) + 1.0;\n}\nfunction quintInOut(t) {\n    if ((t *= 2) < 1)\n        return 0.5 * t * t * t * t * t;\n    return 0.5 * ((t -= 2) * t * t * t * t + 2);\n}\nfunction quintIn(t) {\n    return t * t * t * t * t;\n}\nfunction quintOut(t) {\n    return --t * t * t * t * t + 1;\n}\nfunction sineInOut(t) {\n    return -0.5 * (Math.cos(Math.PI * t) - 1);\n}\nfunction sineIn(t) {\n    const v = Math.cos(t * Math.PI * 0.5);\n    if (Math.abs(v) < 1e-14)\n        return 1;\n    else\n        return 1 - v;\n}\nfunction sineOut(t) {\n    return Math.sin((t * Math.PI) / 2);\n}\n\nexport { backIn, backInOut, backOut, bounceIn, bounceInOut, bounceOut, circIn, circInOut, circOut, cubicIn, cubicInOut, cubicOut, elasticIn, elasticInOut, elasticOut, expoIn, expoInOut, expoOut, quadIn, quadInOut, quadOut, quartIn, quartInOut, quartOut, quintIn, quintInOut, quintOut, sineIn, sineInOut, sineOut };\n","import { writable } from '../store/index.mjs';\nimport { now, loop, assign } from '../internal/index.mjs';\nimport { linear } from '../easing/index.mjs';\n\nfunction is_date(obj) {\n    return Object.prototype.toString.call(obj) === '[object Date]';\n}\n\nfunction tick_spring(ctx, last_value, current_value, target_value) {\n    if (typeof current_value === 'number' || is_date(current_value)) {\n        // @ts-ignore\n        const delta = target_value - current_value;\n        // @ts-ignore\n        const velocity = (current_value - last_value) / (ctx.dt || 1 / 60); // guard div by 0\n        const spring = ctx.opts.stiffness * delta;\n        const damper = ctx.opts.damping * velocity;\n        const acceleration = (spring - damper) * ctx.inv_mass;\n        const d = (velocity + acceleration) * ctx.dt;\n        if (Math.abs(d) < ctx.opts.precision && Math.abs(delta) < ctx.opts.precision) {\n            return target_value; // settled\n        }\n        else {\n            ctx.settled = false; // signal loop to keep ticking\n            // @ts-ignore\n            return is_date(current_value) ?\n                new Date(current_value.getTime() + d) : current_value + d;\n        }\n    }\n    else if (Array.isArray(current_value)) {\n        // @ts-ignore\n        return current_value.map((_, i) => tick_spring(ctx, last_value[i], current_value[i], target_value[i]));\n    }\n    else if (typeof current_value === 'object') {\n        const next_value = {};\n        for (const k in current_value) {\n            // @ts-ignore\n            next_value[k] = tick_spring(ctx, last_value[k], current_value[k], target_value[k]);\n        }\n        // @ts-ignore\n        return next_value;\n    }\n    else {\n        throw new Error(`Cannot spring ${typeof current_value} values`);\n    }\n}\nfunction spring(value, opts = {}) {\n    const store = writable(value);\n    const { stiffness = 0.15, damping = 0.8, precision = 0.01 } = opts;\n    let last_time;\n    let task;\n    let current_token;\n    let last_value = value;\n    let target_value = value;\n    let inv_mass = 1;\n    let inv_mass_recovery_rate = 0;\n    let cancel_task = false;\n    function set(new_value, opts = {}) {\n        target_value = new_value;\n        const token = current_token = {};\n        if (value == null || opts.hard || (spring.stiffness >= 1 && spring.damping >= 1)) {\n            cancel_task = true; // cancel any running animation\n            last_time = now();\n            last_value = new_value;\n            store.set(value = target_value);\n            return Promise.resolve();\n        }\n        else if (opts.soft) {\n            const rate = opts.soft === true ? .5 : +opts.soft;\n            inv_mass_recovery_rate = 1 / (rate * 60);\n            inv_mass = 0; // infinite mass, unaffected by spring forces\n        }\n        if (!task) {\n            last_time = now();\n            cancel_task = false;\n            task = loop(now => {\n                if (cancel_task) {\n                    cancel_task = false;\n                    task = null;\n                    return false;\n                }\n                inv_mass = Math.min(inv_mass + inv_mass_recovery_rate, 1);\n                const ctx = {\n                    inv_mass,\n                    opts: spring,\n                    settled: true,\n                    dt: (now - last_time) * 60 / 1000\n                };\n                const next_value = tick_spring(ctx, last_value, value, target_value);\n                last_time = now;\n                last_value = value;\n                store.set(value = next_value);\n                if (ctx.settled) {\n                    task = null;\n                }\n                return !ctx.settled;\n            });\n        }\n        return new Promise(fulfil => {\n            task.promise.then(() => {\n                if (token === current_token)\n                    fulfil();\n            });\n        });\n    }\n    const spring = {\n        set,\n        update: (fn, opts) => set(fn(target_value, value), opts),\n        subscribe: store.subscribe,\n        stiffness,\n        damping,\n        precision\n    };\n    return spring;\n}\n\nfunction get_interpolator(a, b) {\n    if (a === b || a !== a)\n        return () => a;\n    const type = typeof a;\n    if (type !== typeof b || Array.isArray(a) !== Array.isArray(b)) {\n        throw new Error('Cannot interpolate values of different type');\n    }\n    if (Array.isArray(a)) {\n        const arr = b.map((bi, i) => {\n            return get_interpolator(a[i], bi);\n        });\n        return t => arr.map(fn => fn(t));\n    }\n    if (type === 'object') {\n        if (!a || !b)\n            throw new Error('Object cannot be null');\n        if (is_date(a) && is_date(b)) {\n            a = a.getTime();\n            b = b.getTime();\n            const delta = b - a;\n            return t => new Date(a + t * delta);\n        }\n        const keys = Object.keys(b);\n        const interpolators = {};\n        keys.forEach(key => {\n            interpolators[key] = get_interpolator(a[key], b[key]);\n        });\n        return t => {\n            const result = {};\n            keys.forEach(key => {\n                result[key] = interpolators[key](t);\n            });\n            return result;\n        };\n    }\n    if (type === 'number') {\n        const delta = b - a;\n        return t => a + t * delta;\n    }\n    throw new Error(`Cannot interpolate ${type} values`);\n}\nfunction tweened(value, defaults = {}) {\n    const store = writable(value);\n    let task;\n    let target_value = value;\n    function set(new_value, opts) {\n        if (value == null) {\n            store.set(value = new_value);\n            return Promise.resolve();\n        }\n        target_value = new_value;\n        let previous_task = task;\n        let started = false;\n        let { delay = 0, duration = 400, easing = linear, interpolate = get_interpolator } = assign(assign({}, defaults), opts);\n        if (duration === 0) {\n            if (previous_task) {\n                previous_task.abort();\n                previous_task = null;\n            }\n            store.set(value = target_value);\n            return Promise.resolve();\n        }\n        const start = now() + delay;\n        let fn;\n        task = loop(now => {\n            if (now < start)\n                return true;\n            if (!started) {\n                fn = interpolate(value, new_value);\n                if (typeof duration === 'function')\n                    duration = duration(value, new_value);\n                started = true;\n            }\n            if (previous_task) {\n                previous_task.abort();\n                previous_task = null;\n            }\n            const elapsed = now - start;\n            if (elapsed > duration) {\n                store.set(value = new_value);\n                return false;\n            }\n            // @ts-ignore\n            store.set(value = fn(easing(elapsed / duration)));\n            return true;\n        });\n        return task.promise;\n    }\n    return {\n        set,\n        update: (fn, opts) => set(fn(target_value, value), opts),\n        subscribe: store.subscribe\n    };\n}\n\nexport { spring, tweened };\n","import { writable } from 'svelte/store'\nimport { tweened } from 'svelte/motion'\nimport { cubicOut } from 'svelte/easing'\nimport { interpolate } from 'd3-interpolate'\nimport { transitionGeometry } from '../../../../utils/geometryUtils/index.js'\nimport { isUndefined } from '../../../../utils/equals.js'\n\n/**\n * Returns either a Svelte store, or a Svelte 'tweened' store,\n * depending on whether the user specified transition options.\n * The way the tweened store is set up depends on the type of aesthetic,\n * and which options the user has chosen.\n *\n * @param {String} aestheticName The name of the aesthetic a store is created for.\n * @param {*} aestheticValue The initial value of the store.\n * @param {Number|Object} transitionOptions A number indicating the transtion duration, or an Object\n * with aesthetic names as keys, and Numbers OR Objects as values.\n * @returns {writable|tweened}\n */\nexport function createTransitionable (aestheticName, aestheticValue, transitionOptions) {\n  if (isUndefined(transitionOptions) || isUndefined(aestheticValue)) {\n    return writable(aestheticValue)\n  }\n\n  if (transitionOptions.constructor === Number) {\n    const options = createOptionsFromDuration(aestheticName, transitionOptions)\n    return tweened(aestheticValue, options)\n  }\n\n  if (transitionOptions.constructor === Object) {\n    if (!(aestheticName in transitionOptions)) return writable(aestheticValue)\n\n    const aestheticTransition = transitionOptions[aestheticName]\n\n    if (aestheticTransition && aestheticTransition.constructor === Number) {\n      const options = createOptionsFromDuration(aestheticName, aestheticTransition)\n      return tweened(aestheticValue, options)\n    }\n\n    if (aestheticTransition && aestheticTransition.constructor === Object) {\n      const options = createOptionsFromOptions(aestheticName, aestheticTransition)\n      return tweened(aestheticValue, options)\n    }\n  }\n\n  throw new Error(`Invalid transition for ${aestheticName}`)\n}\n\nfunction createOptionsFromDuration (aestheticName, duration) {\n  if (aestheticName === 'geometry') {\n    return { duration, easing: cubicOut, interpolate: transitionGeometry }\n  } else {\n    return { duration, easing: cubicOut, interpolate }\n  }\n}\n\nexport function transitionsEqual (a, b) {\n  if (a === undefined || b === undefined) return a === b\n\n  if (a.constructor !== Object) return a === b\n\n  return transitionObjectsEqual(a, b)\n}\n\nfunction transitionObjectsEqual (a, b) {\n  if (b.constructor !== Object) return false\n\n  if (numberOfKeys(a) !== numberOfKeys(b)) return false\n\n  for (const aesthetic in a) {\n    const aestheticA = a[aesthetic]\n    const aestheticB = b[aesthetic]\n    if (aestheticA.constructor !== Object) return aestheticA === aestheticB\n    if (!aestheticTransitionObjectsEqual(aestheticA, aestheticB)) return false\n  }\n\n  return true\n}\n\nfunction aestheticTransitionObjectsEqual (a, b) {\n  if (b.constructor !== Object) return false\n\n  if (numberOfKeys(a) !== numberOfKeys(b)) return false\n\n  for (const key in a) {\n    if (a[key] !== b[key]) return false\n  }\n\n  return true\n}\n\nfunction numberOfKeys (obj) {\n  return Object.keys(obj).length\n}\n\nfunction createOptionsFromOptions (aestheticName, transitionOptions) {\n  if (aestheticName === 'geometry') {\n    const defaultOptions = {\n      delay: 0,\n      duration: 400,\n      easing: cubicOut,\n      interpolate: transitionGeometry\n    }\n\n    return Object.assign(defaultOptions, transitionOptions)\n  } else {\n    const defaultOptions = {\n      delay: 0,\n      duration: 400,\n      easing: cubicOut,\n      interpolate\n    }\n\n    return Object.assign(defaultOptions, transitionOptions)\n  }\n}\n","import { writable } from 'svelte/store'\nimport { tweened } from 'svelte/motion'\nimport { cubicOut } from 'svelte/easing'\nimport { interpolate } from 'd3-interpolate'\nimport { transitionGeometries } from '../../../../utils/geometryUtils/index.js'\nimport { isUndefined } from '../../../../utils/equals.js'\n\n/**\n * Like createTransitionable, returns either a Svelte store, or a Svelte 'tweened' store,\n * depending on whether the user specified transition options.\n * But instead of for a single Mark, the store is created for an entire layer.\n *\n * @param {String} aestheticName The name of the aesthetic a store is created for.\n * @param {*} aestheticValue The initial value of the store.\n * @param {Number|Object} transitionOptions A number indicating the transtion duration, or an Object\n * with aesthetic names as keys, and Numbers OR Objects as values.\n * @returns {writable|tweened}\n */\nexport function createTransitionableLayer (aestheticName, aestheticValue, transitionOptions) {\n  if (isUndefined(transitionOptions) || isUndefined(aestheticValue)) {\n    return writable(aestheticValue)\n  }\n\n  if (transitionOptions.constructor === Number) {\n    const options = createOptionsFromDuration(aestheticName, transitionOptions)\n    return tweened(aestheticValue, options)\n  }\n\n  if (transitionOptions.constructor === Object) {\n    if (!(aestheticName in transitionOptions)) return writable(aestheticValue)\n\n    const aestheticTransition = transitionOptions[aestheticName]\n\n    if (aestheticTransition && aestheticTransition.constructor === Number) {\n      const options = createOptionsFromDuration(aestheticName, aestheticTransition)\n      return tweened(aestheticValue, options)\n    }\n\n    if (aestheticTransition && aestheticTransition.constructor === Object) {\n      const options = createOptionsFromOptions(aestheticName, aestheticTransition)\n      return tweened(aestheticValue, options)\n    }\n  }\n\n  throw new Error(`Invalid transition for ${aestheticName}`)\n}\n\nfunction createOptionsFromDuration (aestheticName, duration) {\n  if (aestheticName === 'geometry') {\n    return { duration, easing: cubicOut, interpolate: transitionGeometries }\n  } else {\n    return { duration, easing: cubicOut, interpolate: interpolateLayer }\n  }\n}\n\nfunction createOptionsFromOptions (aestheticName, transitionOptions) {\n  if (aestheticName === 'geometry') {\n    return Object.assign({ interpolate: transitionGeometries }, transitionOptions)\n  } else {\n    return Object.assign({ interpolate: interpolateLayer }, transitionOptions)\n  }\n}\n\nfunction interpolateLayer (a, b) {\n  const aWithoutObsoleteKeys = {}\n\n  for (const key in a) {\n    if (key in b) {\n      aWithoutObsoleteKeys[key] = a[key]\n    }\n  }\n\n  return interpolate(aWithoutObsoleteKeys, b)\n}\n","export default function (...args) {\n  for (const arg of args) {\n    if (arg !== undefined) return true\n  }\n\n  return false\n}\n","export default function parseRenderSettings (renderSettings) {\n  const defaultRenderSettings = {\n    simplify: false,\n    simplificationThreshold: 1,\n    interpolate: true,\n    interpolationThreshold: 5,\n    decimals: 2\n  }\n\n  const parsedRenderSettings = Object.assign(defaultRenderSettings, renderSettings)\n\n  return parsedRenderSettings\n}\n","import { geoPath } from 'd3-geo'\n\nconst geoPathGenerator = geoPath()\n\nexport default function (geometry) {\n  return geoPathGenerator(geometry)\n}\n","export default function textAnchorPoint (anchorPoint) {\n// For setting the anchor point on a SVG text element\n  switch (anchorPoint) {\n    case 'center':\n      return { textAnchor: 'middle', dominantBaseline: 'middle' }\n    case 'lb':\n      return { textAnchor: 'start', dominantBaseline: 'alphabetic' }\n    case 'lt':\n      return { textAnchor: 'start', dominantBaseline: 'hanging' }\n    case 'rt':\n      return { textAnchor: 'end', dominantBaseline: 'hanging' }\n    case 'rb':\n      return { textAnchor: 'end', dominantBaseline: 'alphabetic' }\n    case 'l':\n      return { textAnchor: 'start', dominantBaseline: 'middle' }\n    case 'r':\n      return { textAnchor: 'end', dominantBaseline: 'middle' }\n    case 'b':\n      return { textAnchor: 'middle', dominantBaseline: 'alphabetic' }\n    case 't':\n      return { textAnchor: 'middle', dominantBaseline: 'hanging' }\n    default: {\n      return { textAnchor: 'middle', dominantBaseline: 'middle' }\n    }\n  }\n}\n","<script context=\"module\">\n  let idCounter = 0\n  function getId () {\n    return 'mark' + idCounter++\n  }\n</script>\n\n<script>\n  import { beforeUpdate, afterUpdate, onMount, onDestroy } from 'svelte'\n\n  import * as detectIt from '../../../utils/detect.js'\n  import * as GraphicContext from '../../Core/Graphic/GraphicContext'\n  import * as SectionContext from '../../Core/Section/SectionContext'\n  import * as InteractionManagerContext from '../../Core/Section/InteractionManagerContext'\n  \n  import validateAesthetics from './validateAesthetics.js'\n  import { markPixelGeometryFuncs } from './pixelGeometryFuncs.js'\n  import { markRepresentAsPolygonFuncs } from './representAsPolygonFuncs.js'\n  import { createDataNecessaryForIndexingMark } from './createDataNecessaryForIndexing.js'\n  import { createTransitionable, transitionsEqual } from '../utils/transitions'\n  import any from '../utils/any.js'\n  import parseRenderSettings from '../utils/parseRenderSettings.js'\n\n  import generatePath from '../utils/generatePath.js'\n\n  import textAnchorPoint from '../utils/textAnchorPoint.js'\n\n  const markId = getId()\n\n  let initPhase = true\n  const initDone = () => !initPhase\n\n  export let type\n  \n  // Aesthetics: positioning\n  export let x = undefined\n  export let y = undefined\n  export let x1 = undefined\n  export let x2 = undefined\n  export let y1 = undefined\n  export let y2 = undefined\n  export let geometry = undefined\n  export let shape = undefined\n  export let size = undefined\n  export let independentAxis = undefined\n\n  // Aesthetics: other\n  export let radius = undefined\n  export let fill = undefined\n  export let stroke = undefined\n  export let strokeWidth = undefined\n  export let strokeOpacity = undefined\n  export let fillOpacity = undefined\n  export let opacity = undefined\n\n  // Aesthetics: text-specific\n  export let text = undefined\n  export let fontFamily = undefined\n  export let fontSize = undefined\n  export let fontWeight = undefined\n  export let rotation = undefined\n  export let anchorPoint = undefined\n\n  // Transitions\n  export let transition = undefined\n\n  // Mouse interactions\n  export let onClick = undefined\n  export let onMousedown = undefined\n  export let onMouseup = undefined\n  export let onMouseover = undefined\n  export let onMouseout = undefined\n  export let onMousedrag = undefined\n\n  // Touch interactions\n  export let onTouchdown = undefined\n  export let onTouchup = undefined\n  export let onTouchover = undefined\n  export let onTouchout = undefined\n  export let onTouchdrag = undefined\n\n  // Select interactions\n  export let onSelect = undefined\n  export let onDeselect = undefined\n\n  // Other\n  export let renderSettings = undefined\n  export let blockReindexing = false\n  export let _asPolygon = true\n  export let clip = true\n\n  // Validate aesthetics every time input changes\n  let aesthetics = validateAesthetics(\n    type,\n    {\n      x,\n      y,\n      x1,\n      x2,\n      y1,\n      y2,\n      geometry,\n      shape,\n      size,\n      independentAxis,\n      radius,\n      fill,\n      stroke,\n      strokeWidth,\n      strokeOpacity,\n      fillOpacity,\n      opacity,\n      text,\n      fontFamily,\n      fontSize,\n      fontWeight,\n      rotation,\n      anchorPoint\n    }\n  )\n  $: {\n    if (initDone()) {\n      aesthetics = validateAesthetics(\n        type,\n        {\n          x,\n          y,\n          x1,\n          x2,\n          y1,\n          y2,\n          geometry,\n          shape,\n          size,\n          independentAxis,\n          radius,\n          fill,\n          stroke,\n          strokeWidth,\n          strokeOpacity,\n          fillOpacity,\n          opacity,\n          text,\n          fontFamily,\n          fontSize,\n          fontWeight,\n          rotation,\n          anchorPoint\n        }\n      )\n    }\n  }\n\n  // Create 'positioning' aesthetics object\n  let positioningAesthetics = { x, y, x1, x2, y1, y2, geometry, shape, size, independentAxis }\n  $: {\n    if (initDone()) {\n      positioningAesthetics = { x, y, x1, x2, y1, y2, geometry, shape, size, independentAxis }\n    }\n  }\n\n  // Select appriopriate geometry conversion functions\n  let createPixelGeometry = markPixelGeometryFuncs[type]\n  let representAsPolygon = markRepresentAsPolygonFuncs[type]\n\n  $: {\n    if (initDone()) {\n      createPixelGeometry = markPixelGeometryFuncs[type]\n      representAsPolygon = markRepresentAsPolygonFuncs[type]\n    }\n  }\n\n  // Check if mark must be represented as polygon\n  let asPolygon = _asPolygon === true && markRepresentAsPolygonFuncs[type] !== undefined\n  $: {\n    if (initDone()) {\n      asPolygon = _asPolygon === true && markRepresentAsPolygonFuncs[type] !== undefined\n    }\n  }\n\n  // Contexts\n  const graphicContext = GraphicContext.subscribe()\n  const sectionContext = SectionContext.subscribe()\n  const interactionManagerContext = InteractionManagerContext.subscribe()\n\n  // Initiate geometries\n  let pixelGeometry\n  let screenGeometry\n\n  updatePixelGeometry()\n  updateScreenGeometry()\n\n  // Initiate transitionables\n  let tr_screenGeometry = createTransitionable('geometry', screenGeometry, transition)\n  let tr_radius = createTransitionable('radius', aesthetics.radius, transition)\n  let tr_fill = createTransitionable('fill', aesthetics.fill, transition)\n  let tr_stroke = createTransitionable('stroke', aesthetics.stroke, transition)\n  let tr_strokeWidth = createTransitionable('strokeWidth', aesthetics.strokeWidth, transition)\n  let tr_fillOpacity = createTransitionable('fillOpacity', aesthetics.fillOpacity, transition)\n  let tr_strokeOpacity = createTransitionable('strokeOpacity', aesthetics.strokeOpacity, transition)\n  let tr_opacity = createTransitionable('opacity', aesthetics.opacity, transition)\n  \n  // text transtitionables\n  let tr_fontSize = createTransitionable('fontSize', aesthetics.fontSize, transition)\n  let tr_fontWeight = createTransitionable('fontWeight', aesthetics.fontWeight, transition)\n  let tr_rotation = createTransitionable('rotation', aesthetics.rotation, transition)\n\n  // Handle changes to geometry\n  $: {\n    if (initDone()) {\n      scheduleUpdatePixelGeometry(\n        positioningAesthetics,\n        $sectionContext,\n        parseRenderSettings(renderSettings)\n      )\n    }\n  }\n\n  // Handle radius and strokeWidth changes if Point or Line is not represented as Polygon\n  $: {\n    if (initDone()) {\n      if (!asPolygon) {\n        tr_radius.set(aesthetics.radius)\n        tr_strokeWidth.set(aesthetics.strokeWidth)\n      }\n\n      if (asPolygon) {\n        scheduleUpdateScreenGeometry()\n      }\n    }\n  }\n\n  // Handle other changes\n  $: { if (initDone()) tr_fill.set(aesthetics.fill) }\n  $: { if (initDone()) tr_stroke.set(aesthetics.stroke) }\n  $: { if (initDone()) tr_strokeWidth.set(aesthetics.strokeWidth) }\n  $: { if (initDone()) tr_fillOpacity.set(aesthetics.fillOpacity) }\n  $: { if (initDone()) tr_strokeOpacity.set(aesthetics.strokeOpacity) }\n  $: { if (initDone()) tr_opacity.set(aesthetics.opacity) }\n  \n  // text aes changes\n  $: { if (initDone()) tr_fontSize.set(aesthetics.fontSize) }\n  $: { if (initDone()) tr_fontWeight.set(aesthetics.fontWeight) }\n  $: { if (initDone()) tr_rotation.set(aesthetics.rotation) }\n\n  // non-transitionable aesthetics that need additional calculation\n  let rotateTransform = `rotate(${$tr_rotation}, ${$tr_screenGeometry.coordinates[0]}, ${$tr_screenGeometry.coordinates[1]})`\n  let parsedTextAnchorPoint = textAnchorPoint(aesthetics.anchorPoint)\n\n  let previousTransition\n\n  let pixelGeometryRecalculationNecessary = false\n  let screenGeometryRecalculationNecessary = false\n\n  $: {\n    if (initDone()) {\n      if (pixelGeometryRecalculationNecessary) updatePixelGeometry()\n\n      if (screenGeometryRecalculationNecessary) {\n        updateScreenGeometry()\n        tr_screenGeometry.set(screenGeometry)\n  \n        updateInteractionManagerIfNecessary()\n      }\n\n      pixelGeometryRecalculationNecessary = false\n      screenGeometryRecalculationNecessary = false\n    }\n  }\n\n  $: { if (initDone()) rotateTransform = `rotate(${$tr_rotation}, ${$tr_screenGeometry.coordinates[0]}, ${$tr_screenGeometry.coordinates[1]})` };\n  $: { if (initDone()) parsedTextAnchorPoint = textAnchorPoint(aesthetics.anchorPoint) }\n\n  // Update transitionables when transition settings change\n  beforeUpdate(() => {\n    if (!transitionsEqual(previousTransition, transition)) {\n      previousTransition = transition\n      tr_screenGeometry = createTransitionable('geometry', $tr_screenGeometry, transition)\n      tr_radius = createTransitionable('radius', $tr_radius, transition)\n      tr_fill = createTransitionable('fill', $tr_fill, transition)\n      tr_stroke = createTransitionable('stroke', $tr_stroke, transition)\n      tr_strokeWidth = createTransitionable('strokeWidth', $tr_strokeWidth, transition)\n      tr_fillOpacity = createTransitionable('fillOpacity', $tr_fillOpacity, transition)\n      tr_strokeOpacity = createTransitionable('strokeOpacity', $tr_strokeOpacity, transition)\n      tr_opacity = createTransitionable('opacity', $tr_opacity, transition)\n\n      tr_fontSize = createTransitionable('fontSize', $tr_fontSize, transition)\n      tr_fontWeight = createTransitionable('fontWeight', $tr_fontWeight, transition)\n      tr_rotation = createTransitionable('rotation', $tr_rotation, transition)\n    }\n  })\n\n  afterUpdate(() => {\n    initPhase = false\n  })\n\n  // Interactivity\n  $: isInteractiveMouse = detectIt.primaryInput === 'mouse' && any(onClick, onMousedown, onMouseup, onMouseover, onMouseout, onMousedrag)\n  $: isInteractiveTouch = detectIt.primaryInput === 'touch' && any(onTouchdown, onTouchup, onTouchover, onTouchout, onTouchdrag)\n\n  $: isSelectable = onSelect !== undefined || onDeselect !== undefined\n\n  onMount(() => {\n    updateInteractionManagerIfNecessary()\n  })\n\n  onDestroy(() => {\n    removeMarkFromSpatialIndexIfNecessary()\n  })\n\n  // Helpers\n  function scheduleUpdatePixelGeometry () {\n    pixelGeometryRecalculationNecessary = true\n    screenGeometryRecalculationNecessary = true\n  }\n\n  function updatePixelGeometry () {\n    pixelGeometry = createPixelGeometry(\n      positioningAesthetics,\n      $sectionContext,\n      parseRenderSettings(renderSettings)\n    )\n  }\n\n  function scheduleUpdateScreenGeometry () {\n    screenGeometryRecalculationNecessary = true\n  }\n\n  function updateScreenGeometry () {\n    if (asPolygon) {\n      screenGeometry = representAsPolygon(pixelGeometry, aesthetics)\n    } else {\n      screenGeometry = pixelGeometry\n    }\n  }\n\n  function updateInteractionManagerIfNecessary () {\n    if (initPhase || !(blockReindexing || $sectionContext.blockReindexing)) {\n      removeMarkFromSpatialIndexIfNecessary()\n\n      if (isInteractiveMouse) {\n        const markInterface = $interactionManagerContext.mouse().marks()\n\n        markInterface.loadMark(type, createDataNecessaryForIndexing())\n\n        if (onClick) markInterface.addMarkInteraction('click', markId, onClick)\n        if (onMousedown) markInterface.addMarkInteraction('mousedown', markId, onMousedown)\n        if (onMouseup) markInterface.addMarkInteraction('mouseup', markId, onMouseup)\n        if (onMouseout) markInterface.addMarkInteraction('mouseout', markId, onMouseout)\n        if (onMouseover) markInterface.addMarkInteraction('mouseover', markId, onMouseover)\n        if (onMousedrag) markInterface.addMarkInteraction('mousedrag', markId, onMousedrag)\n      }\n\n      if (isInteractiveTouch) {\n        const markInterface = $interactionManagerContext.touch().marks()\n\n        markInterface.loadMark(type, createDataNecessaryForIndexing())\n\n        if (onTouchdown) markInterface.addMarkInteraction('touchdown', markId, onTouchdown)\n        if (onTouchup) markInterface.addMarkInteraction('touchup', markId, onTouchup)\n        if (onTouchover) markInterface.addMarkInteraction('touchover', markId, onTouchover)\n        if (onTouchout) markInterface.addMarkInteraction('touchout', markId, onTouchout)\n        if (onTouchdrag) markInterface.addMarkInteraction('touchdrag', markId, onTouchdrag)\n      }\n    }\n\n    removeMarkFromSelectIfNecessary()\n  \n    if (isSelectable) {\n      const selectManager = $interactionManagerContext.select()\n\n      selectManager.loadMark(\n        type, createDataNecessaryForIndexing(), { onSelect, onDeselect }\n      )\n    }\n  }\n\n  function removeMarkFromSpatialIndexIfNecessary () {\n    if (detectIt.primaryInput === 'mouse') {\n      const markMouseInterface = $interactionManagerContext.mouse().marks()\n\n      if (markMouseInterface.markIsLoaded(markId)) {\n        markMouseInterface.removeAllMarkInteractions(markId)\n        markMouseInterface.removeMark(markId)\n      }\n    }\n\n    if (detectIt.primaryInput === 'touch') {\n      const markTouchInterface = $interactionManagerContext.touch().marks()\n\n      if (markTouchInterface.markIsLoaded(markId)) {\n        markTouchInterface.removeAllMarkInteractions(markId)\n        markTouchInterface.removeMark(markId)\n      }\n    }\n  }\n\n  function removeMarkFromSelectIfNecessary () {\n    const selectManager = $interactionManagerContext.select()\n\n    if (selectManager.markIsLoaded(markId)) {\n      selectManager.removeMark(markId)\n    }\n  }\n\n  function createDataNecessaryForIndexing () {\n    return createDataNecessaryForIndexingMark(\n      type, markId, { screenGeometry, pixelGeometry }, aesthetics\n    )\n  }\n\n  $: renderPolygon = !['Point', 'Line', 'Label'].includes(type) || asPolygon\n  $: renderCircle = type === 'Point' && !asPolygon\n  $: renderLine = type === 'Line' && !asPolygon\n  $: renderLabel = type === 'Label'\n</script>\n\n{#if $graphicContext.output() === 'svg'}\n\n  {#if renderPolygon}\n\n    <path\n      clip-path={clip ? `url(#clip-${$sectionContext.sectionId})` : 'none'}\n      class={type.toLowerCase()}\n      d={generatePath($tr_screenGeometry)}\n      fill={$tr_fill}\n      stroke={$tr_stroke}\n      stroke-width={$tr_strokeWidth}\n      fill-opacity={$tr_fillOpacity}\n      stroke-opacity={$tr_strokeOpacity}\n      opacity={$tr_opacity}\n    />\n\n  {/if}\n\n  {#if renderCircle}\n\n    <circle\n      clip-path={clip ? `url(#clip-${$sectionContext.sectionId})` : 'none'}\n      class=\"point\"\n      cx={$tr_screenGeometry.coordinates[0]}\n      cy={$tr_screenGeometry.coordinates[1]}\n      r={$tr_radius}\n      fill={$tr_fill}\n      stroke={$tr_stroke}\n      stroke-width={$tr_strokeWidth}\n      fill-opacity={$tr_fillOpacity}\n      stroke-opacity={$tr_strokeOpacity}\n      opacity={$tr_opacity}\n    />\n\n  {/if}\n\n  {#if renderLine}\n\n    <path\n      clip-path={clip ? `url(#clip-${$sectionContext.sectionId})` : 'none'}\n      class=\"line\"\n      d={generatePath($tr_screenGeometry)}\n      fill=\"none\"\n      stroke-width={$tr_strokeWidth}\n      stroke={$tr_stroke}\n      opacity={$tr_opacity}\n    />\n  \n  {/if}\n\n  {#if renderLabel}\n\n    <g \n      clip-path={clip ? `url(#clip-${$sectionContext.sectionId})` : 'none'}\n      class=\"label-group\" \n    >\n\n      <text\n        class=\"label\"\n        x={$tr_screenGeometry.coordinates[0]}\n        y={$tr_screenGeometry.coordinates[1]}\n        fill={$tr_fill}\n        stroke={$tr_stroke}\n        stroke-width={$tr_strokeWidth}\n        fill-opacity={$tr_fillOpacity}\n        stroke-opacity={$tr_strokeOpacity}\n        opacity={$tr_opacity}\n        transform={rotateTransform}\n        font-family={fontFamily}\n        font-size={$tr_fontSize + 'px'}\n        font-weight={$tr_fontWeight}\n        text-anchor={parsedTextAnchorPoint.textAnchor}\n        dominant-baseline={parsedTextAnchorPoint.dominantBaseline}\n      >\n        {aesthetics.text}\n      </text>\n\n    </g>\n\n  {/if}\n\n{/if}\n","export function createDataNecessaryForIndexingMark (type, markId, geometryTypes, aesthetics) {\n  const markData = { markId }\n  let attributes\n\n  if (type === 'Point') {\n    attributes = {\n      pixelGeometry: geometryTypes.pixelGeometry,\n      radius: aesthetics.radius\n    }\n  }\n\n  if (type === 'Label') {\n    attributes = {\n      pixelGeometry: geometryTypes.pixelGeometry,\n      radius: aesthetics.fontSize\n    }\n  }\n\n  if (type === 'Rectangle') {\n    attributes = { screenGeometry: geometryTypes.screenGeometry }\n  }\n\n  if (type === 'Polygon') {\n    attributes = { screenGeometry: geometryTypes.screenGeometry }\n  }\n\n  if (type === 'Line') {\n    attributes = {\n      pixelGeometry: geometryTypes.pixelGeometry,\n      strokeWidth: aesthetics.strokeWidth\n    }\n  }\n\n  if (type === 'Symbol') {\n    attributes = { screenGeometry: geometryTypes.screenGeometry }\n  }\n\n  if (type === 'Area') {\n    attributes = { screenGeometry: geometryTypes.screenGeometry }\n  }\n\n  markData.attributes = attributes\n\n  return markData\n}\n\nexport function createDataNecessaryForIndexingLayer (\n  type, layerId, keyArray, geometryObjects, aestheticsObjects\n) {\n  const layerData = { layerId, keyArray }\n  let layerAttributes\n\n  if (type === 'Point') {\n    layerAttributes = {\n      pixelGeometryObject: geometryObjects.pixelGeometryObject,\n      radiusObject: aestheticsObjects.radiusObject\n    }\n  }\n\n  if (type === 'Label') {\n    layerAttributes = {\n      pixelGeometryObject: geometryObjects.pixelGeometryObject,\n      radiusObject: aestheticsObjects.fontSizeObject\n    }\n  }\n\n  if (type === 'Rectangle') {\n    layerAttributes = { screenGeometryObject: geometryObjects.screenGeometryObject }\n  }\n\n  if (type === 'Polygon') {\n    layerAttributes = { screenGeometryObject: geometryObjects.screenGeometryObject }\n  }\n\n  if (type === 'Line') {\n    layerAttributes = {\n      pixelGeometryObject: geometryObjects.pixelGeometryObject,\n      strokeWidthObject: aestheticsObjects.strokeWidthObject\n    }\n  }\n\n  if (type === 'Symbol') {\n    layerAttributes = { screenGeometryObject: geometryObjects.screenGeometryObject }\n  }\n\n  if (type === 'Area') {\n    layerAttributes = { screenGeometryObject: geometryObjects.screenGeometryObject }\n  }\n\n  layerData.layerAttributes = layerAttributes\n\n  return layerData\n}\n","<script>\n  import Mark from '../Mark/Mark.svelte'\n\n  // Aesthetics: positioning\n  export let x = undefined\n  export let y = undefined\n  export let geometry = undefined\n\n  // Aesthetics: other\n  export let radius = undefined\n  export let fill = undefined\n  export let stroke = undefined\n  export let strokeWidth = undefined\n  export let strokeOpacity = undefined\n  export let fillOpacity = undefined\n  export let opacity = undefined\n\n  // Transitions\n  export let transition = undefined\n\n  // Mouse interactions\n  export let onClick = undefined\n  export let onMousedown = undefined\n  export let onMouseup = undefined\n  export let onMouseover = undefined\n  export let onMouseout = undefined\n  export let onMousedrag = undefined\n\n  // Touch interactions\n  export let onTouchdown = undefined\n  export let onTouchup = undefined\n  export let onTouchover = undefined\n  export let onTouchout = undefined\n  export let onTouchdrag = undefined\n\n  // Select interactions\n  export let onSelect = undefined\n  export let onDeselect = undefined\n\n  // Other\n  export let renderSettings = undefined\n  export let blockReindexing = false\n  export let clip = true\n</script>\n\n<Mark\n  type=\"Point\"\n  {x} {y} {geometry} {radius} \n  {fill} {stroke} {strokeWidth}\n  {strokeOpacity} {fillOpacity} {opacity}\n  {transition} \n  {onClick} {onMousedown} {onMouseup} {onMouseover} {onMouseout} {onMousedrag}\n  {onTouchdown} {onTouchup} {onTouchover} {onTouchout} {onTouchdrag}\n  {onSelect} {onDeselect}\n  {renderSettings} {blockReindexing} {clip}\n  _asPolygon={false}\n/>","<script>\n  import Mark from '../Mark/Mark.svelte'\n\n  // Aesthetics: positioning\n  export let x = undefined\n  export let y = undefined\n  export let geometry = undefined\n\n  // Aesthetics: other\n  export let strokeWidth = undefined\n  export let stroke = undefined\n  export let opacity = undefined\n\n  // Transitions\n  export let transition = undefined\n\n  // Mouse interactions\n  export let onClick = undefined\n  export let onMousedown = undefined\n  export let onMouseup = undefined\n  export let onMouseover = undefined\n  export let onMouseout = undefined\n  export let onMousedrag = undefined\n\n  // Touch interactions\n  export let onTouchdown = undefined\n  export let onTouchup = undefined\n  export let onTouchover = undefined\n  export let onTouchout = undefined\n  export let onTouchdrag = undefined\n\n  // Select interactions\n  export let onSelect = undefined\n  export let onDeselect = undefined\n\n  // Other\n  export let renderSettings = undefined\n  export let blockReindexing = false\n  export let clip = true\n</script>\n\n<Mark \n  type=\"Line\"\n  {x} {y} {geometry}\n  {strokeWidth} {stroke} {opacity}\n  {transition} \n  {onClick} {onMousedown} {onMouseup} {onMouseover} {onMouseout} {onMousedrag}\n  {onTouchdown} {onTouchup} {onTouchover} {onTouchout} {onTouchdrag}\n  {onSelect} {onDeselect}\n  {renderSettings} {blockReindexing} {clip}\n  _asPolygon={false}\n/>","<script>\n  import Mark from '../Mark/Mark.svelte'\n\n  // Aesthetics: positioning\n  export let x = undefined\n  export let y = undefined\n  export let geometry = undefined\n\n  // Aesthetics: other\n  export let fill = undefined\n  export let stroke = undefined\n  export let strokeWidth = undefined\n  export let strokeOpacity = undefined\n  export let fillOpacity = undefined\n  export let opacity = undefined\n  export let text = undefined\n  export let fontFamily = undefined\n  export let fontSize = undefined\n  export let fontWeight = undefined\n  export let rotation = undefined\n  export let anchorPoint = undefined\n\n  // Transitions\n  export let transition = undefined\n\n  // Mouse interactions\n  export let onClick = undefined\n  export let onMousedown = undefined\n  export let onMouseup = undefined\n  export let onMouseover = undefined\n  export let onMouseout = undefined\n  export let onMousedrag = undefined\n\n  // Touch interactions\n  export let onTouchdown = undefined\n  export let onTouchup = undefined\n  export let onTouchover = undefined\n  export let onTouchout = undefined\n  export let onTouchdrag = undefined\n\n  // Select interactions\n  export let onSelect = undefined\n  export let onDeselect = undefined\n\n  // Other\n  export let renderSettings = undefined\n  export let blockReindexing = false\n  export let clip = true\n</script>\n\n<Mark\n  type=\"Label\"\n  {x} {y} {geometry} \n  {fill} {stroke} {strokeWidth}\n  {strokeOpacity} {fillOpacity} {opacity}\n  {text}\n  {fontFamily} {fontSize} {fontWeight} {rotation} {anchorPoint}\n  {transition} \n  {onClick} {onMousedown} {onMouseup} {onMouseover} {onMouseout} {onMousedrag}\n  {onTouchdown} {onTouchup} {onTouchover} {onTouchout} {onTouchdrag}\n  {onSelect} {onDeselect}\n  {renderSettings} {blockReindexing} {clip}\n  _asPolygon={false}\n/>","import { isDefined } from '../../../utils/equals.js'\n/**\n * This function is only used when dealing with layers.\n * For layers, most 'aesthetic' props can be specified in two ways:\n *  - An Array of values is passed to the prop\n *  - A single value is passed to the prop\n * In both cases, we need to convert whatever was passed to an Object.\n * The keys will be whatever the user used as 'key' Array, and the values\n * are whatever the user used passed to the prop in question.\n * If the user passed an Array, the values of the Object correspond to the values in the Array.\n * If the user passed a single value, every value in the Object will be that value.\n * The object structure is necessary to do transitions later.\n *\n * @param {*} propValue Whatever was passed to the prop\n * @param {*} keyArray The array of indices to be used as keys\n * @returns {Object.<Number, *>} The 'prop Object'\n */\nexport function generatePropObject (propValue, keyArray) {\n  const propObj = {}\n\n  if (isDefined(propValue)) {\n    if (propValue.constructor === Array) {\n      for (let i = 0; i < keyArray.length; i++) {\n        const key = keyArray[i]\n        propObj[key] = propValue[i]\n      }\n    } else if (propValue.constructor === Function) {\n      for (let index = 0; index < keyArray.length; index++) {\n        const key = keyArray[index]\n        propObj[key] = propValue({ key, index })\n      }\n    } else {\n      for (let i = 0; i < keyArray.length; i++) {\n        const key = keyArray[i]\n        propObj[key] = propValue\n      }\n    }\n  }\n\n  return propObj\n}\n","<script context=\"module\">\n  let idCounter = 0\n  function getId () {\n    return 'layer' + idCounter++\n  }\n</script>\n\n<script>\n  import { beforeUpdate, afterUpdate, onMount, onDestroy, tick } from 'svelte'\n\n  import * as detectIt from '../../../utils/detect.js'\n  import * as GraphicContext from '../../Core/Graphic/GraphicContext'\n  import * as SectionContext from '../../Core/Section/SectionContext'\n  import * as InteractionManagerContext from '../../Core/Section/InteractionManagerContext'\n  \n  import validateAesthetics from './validateAesthetics.js'\n  import { layerPixelGeometryFuncs } from './pixelGeometryFuncs.js'\n  import { layerRepresentAsPolygonFuncs } from './representAsPolygonFuncs.js'\n  import { createTransitionableLayer, transitionsEqual } from '../utils/transitions'\n  import { generatePropObject } from '../utils/generatePropObject.js'\n  import { createDataNecessaryForIndexingLayer } from './createDataNecessaryForIndexing.js'\n  import generatePath from '../utils/generatePath.js'\n  import textAnchorPoint from '../utils/textAnchorPoint.js'\n  import any from '../utils/any.js'\n  import parseRenderSettings from '../utils/parseRenderSettings.js' \n\n  const layerId = getId()\n\n  let initPhase = true\n  const initDone = () => !initPhase\n\n  export let type\n\n  // Aesthetics: positioning\n  export let x = undefined\n  export let y = undefined\n  export let x1 = undefined\n  export let x2 = undefined\n  export let y1 = undefined\n  export let y2 = undefined\n  export let geometry = undefined\n  export let shape = undefined\n  export let size = undefined\n  export let independentAxis = undefined\n\n  // Aesthetics: other\n  export let radius = undefined\n  export let fill = undefined\n  export let stroke = undefined\n  export let strokeWidth = undefined\n  export let strokeOpacity = undefined\n  export let fillOpacity = undefined\n  export let opacity = undefined\n\n  // Aesthetics: text-specific\n  export let text = undefined\n  export let fontFamily = undefined\n  export let fontSize = undefined\n  export let fontWeight = undefined\n  export let rotation = undefined\n  export let anchorPoint = undefined\n\n  // Transitions\n  export let transition = undefined\n\n  // Mouse interactions\n  export let onClick = undefined\n  export let onMousedown = undefined\n  export let onMouseup = undefined\n  export let onMouseover = undefined\n  export let onMouseout = undefined\n  export let onMousedrag = undefined\n\n  // Touch interactions\n  export let onTouchdown = undefined\n  export let onTouchup = undefined\n  export let onTouchover = undefined\n  export let onTouchout = undefined\n  export let onTouchdrag = undefined\n\n  // Select interactions\n  export let onSelect = undefined\n  export let onDeselect = undefined\n\n  // Other\n  export let key = undefined\n  export let renderSettings = undefined\n  export let blockReindexing = false\n  export let _asPolygon = true\n  export let clip\n\n  // Validate aesthetics every time input changes\n  let aesthetics = validateAesthetics(\n    type,\n    {\n      x,\n      y,\n      x1,\n      x2,\n      y1,\n      y2,\n      geometry,\n      shape,\n      size,\n      independentAxis,\n      radius,\n      fill,\n      stroke,\n      strokeWidth,\n      strokeOpacity,\n      fillOpacity,\n      opacity,\n      text,\n      fontFamily,\n      fontSize,\n      fontWeight,\n      rotation,\n      anchorPoint\n    }\n  )\n  $: {\n    if (initDone()) {\n      aesthetics = validateAesthetics(\n        type,\n        {\n          x,\n          y,\n          x1,\n          x2,\n          y1,\n          y2,\n          geometry,\n          shape,\n          size,\n          independentAxis,\n          radius,\n          fill,\n          stroke,\n          strokeWidth,\n          strokeOpacity,\n          fillOpacity,\n          opacity,\n          text,\n          fontFamily,\n          fontSize,\n          fontWeight,\n          rotation,\n          anchorPoint\n        }\n      )\n    }\n  }\n\n  // Create 'positioning' aesthetics object\n  let positioningAesthetics = { x, y, x1, x2, y1, y2, geometry, shape, size, independentAxis }\n  $: {\n    if (initDone()) {\n      positioningAesthetics = { x, y, x1, x2, y1, y2, geometry, shape, size, independentAxis }\n    }\n  }\n\n  // Select appriopriate geometry conversion functions\n  let createPixelGeometryObject = layerPixelGeometryFuncs[type]\n  let representAsPolygonObject = layerRepresentAsPolygonFuncs[type]\n\n  $: {\n    if (initDone()) {\n      createPixelGeometryObject = layerPixelGeometryFuncs[type]\n      representAsPolygonObject = layerRepresentAsPolygonFuncs[type]\n    }\n  }\n\n  let asPolygon = _asPolygon === true && layerRepresentAsPolygonFuncs[type] !== undefined\n\n  $: {\n    if (initDone()) {\n      asPolygon = _asPolygon === true && layerRepresentAsPolygonFuncs[type] !== undefined\n    }\n  }\n\n  // Contexts\n  const graphicContext = GraphicContext.subscribe()\n  const sectionContext = SectionContext.subscribe()\n  const interactionManagerContext = InteractionManagerContext.subscribe()\n\n  // Initiate geometry objects and key array\n  let pixelGeometryObject\n  let screenGeometryObject\n\n  updatePixelGeometryObject()\n  \n  let keyArray = Object.keys(pixelGeometryObject)\n\n  // Generate other prop objects\n  let radiusObject = generatePropObject(aesthetics.radius, keyArray)\n  const fillObject = generatePropObject(aesthetics.fill, keyArray)\n  const strokeObject = generatePropObject(aesthetics.stroke, keyArray)\n  let strokeWidthObject = generatePropObject(aesthetics.strokeWidth, keyArray)\n  const strokeOpacityObject = generatePropObject(aesthetics.strokeOpacity, keyArray)\n  const fillOpacityObject = generatePropObject(aesthetics.fillOpacity, keyArray)\n  const opacityObject = generatePropObject(aesthetics.opacity, keyArray)\n  let textObject = generatePropObject(aesthetics.text, keyArray)\n  let fontFamilyObject = generatePropObject(aesthetics.fontFamily, keyArray)\n  const fontSizeObject = generatePropObject(aesthetics.fontSize, keyArray)\n  const fontWeightObject = generatePropObject(aesthetics.fontWeight, keyArray)\n  const rotationObject = generatePropObject(aesthetics.rotation, keyArray)\n  let anchorPointObject = generatePropObject(aesthetics.anchorPoint, keyArray)\n\n  // This uses the radiusObject/strokeWidthObject in some cases, so must be done after the prop objects\n  updateScreenGeometryObject()\n\n  // Initiate transitionables\n  let tr_screenGeometryObject = createTransitionableLayer('geometry', screenGeometryObject, transition)\n  let tr_radiusObject = createTransitionableLayer('radius', radiusObject, transition)\n  let tr_fillObject = createTransitionableLayer('fill', fillObject, transition)\n  let tr_strokeObject = createTransitionableLayer('stroke', strokeObject, transition)\n  let tr_strokeWidthObject = createTransitionableLayer('strokeWidth', strokeWidthObject, transition)\n  let tr_strokeOpacityObject = createTransitionableLayer('strokeOpacity', strokeOpacityObject, transition)\n  let tr_fillOpacityObject = createTransitionableLayer('fillOpacity', fillOpacityObject, transition)\n  let tr_opacityObject = createTransitionableLayer('opacity', opacityObject, transition)\n\n  // text transtitionables\n  let tr_fontSizeObject = createTransitionableLayer('fontSize', fontSizeObject, transition)\n  let tr_fontWeightObject = createTransitionableLayer('fontWeight', fontWeightObject, transition)\n  let tr_rotationObject = createTransitionableLayer('rotation', rotationObject, transition)\n\n  // Handle changes to geometry\n  $: {\n    if (initDone()) {\n      scheduleUpdatePixelGeometryObject(\n        positioningAesthetics,\n        key,\n        $sectionContext,\n        parseRenderSettings(renderSettings)\n      )\n    }\n  }\n\n  // Handle radius and strokeWidth changes if Points or Lines are not represented as Polygons\n  $: {\n    if (initDone()) {\n      if (!asPolygon) {\n        tr_radiusObject.set(generatePropObject(aesthetics.radius, keyArray))\n        tr_strokeWidthObject.set(generatePropObject(aesthetics.strokeWidth, keyArray))\n      }\n    }\n  }\n\n  // Handle other changes\n  $: { if (initDone()) tr_fillObject.set(generatePropObject(aesthetics.fill, keyArray)) }\n  $: { if (initDone()) tr_strokeObject.set(generatePropObject(aesthetics.stroke, keyArray)) }\n  $: { if (initDone()) tr_strokeOpacityObject.set(generatePropObject(aesthetics.strokeOpacity, keyArray)) }\n  $: { if (initDone()) tr_fillOpacityObject.set(generatePropObject(aesthetics.fillOpacity, keyArray)) }\n  $: { if (initDone()) tr_opacityObject.set(generatePropObject(aesthetics.opacity, keyArray)) }\n\n  // text aes changes\n  $: { if (initDone()) tr_fontSizeObject.set(generatePropObject(aesthetics.fontSize, keyArray)) }\n  $: { if (initDone()) tr_fontWeightObject.set(generatePropObject(aesthetics.fontWeight, keyArray)) }\n  $: { if (initDone()) tr_rotationObject.set(generatePropObject(aesthetics.rotation, keyArray)) }\n\n  // non-transitionable aesthetics\n  $: { if (initDone()) textObject = generatePropObject(aesthetics.text, keyArray) }\n  $: { if (initDone()) fontFamilyObject = generatePropObject(aesthetics.fontFamily, keyArray) }\n  $: { if (initDone()) anchorPointObject = generatePropObject(aesthetics.anchorPoint, keyArray) }\n  let previousTransition\n\n  let pixelGeometryObjectRecalculationNecessary = false\n  let screenGeometryObjectRecalculationNecessary = false\n\n  $: {\n    tick().then(() => {\n      if (pixelGeometryObjectRecalculationNecessary) {\n        updatePixelGeometryObject()\n        keyArray = Object.keys(pixelGeometryObject)\n\n        updateRadiusAndStrokeWidth()\n      }\n\n      if (screenGeometryObjectRecalculationNecessary) {\n        updateScreenGeometryObject()\n        updateScreenGeometryObjectTransitionable()\n\n        updateInteractionManagerIfNecessary()\n      }\n\n      pixelGeometryObjectRecalculationNecessary = false\n      screenGeometryObjectRecalculationNecessary = false\n    })\n  }\n\n  beforeUpdate(() => {\n    // Update transitionables\n    if (!transitionsEqual(previousTransition, transition) && initDone()) {\n      tr_screenGeometryObject = createTransitionableLayer('geometry', $tr_screenGeometryObject, transition)\n      tr_radiusObject = createTransitionableLayer('radius', $tr_radiusObject, transition)\n      tr_fillObject = createTransitionableLayer('fill', $tr_fillObject, transition)\n      tr_strokeObject = createTransitionableLayer('stroke', $tr_strokeObject, transition)\n      tr_strokeWidthObject = createTransitionableLayer('strokeWidth', $tr_strokeWidthObject, transition)\n      tr_strokeOpacityObject = createTransitionableLayer('strokeOpacity', $tr_strokeOpacityObject, transition)\n      tr_fillOpacityObject = createTransitionableLayer('fillOpacity', $tr_fillOpacityObject, transition)\n      tr_opacityObject = createTransitionableLayer('opacity', $tr_opacityObject, transition)\n\n      tr_fontSizeObject = createTransitionableLayer('fontSize', $tr_fontSizeObject, transition)\n      tr_fontWeightObject = createTransitionableLayer('fontWeight', $tr_fontWeightObject, transition)\n      tr_rotationObject = createTransitionableLayer('rotation', $tr_rotationObject, transition)\n    }\n\n    previousTransition = transition\n  })\n\n  afterUpdate(() => {\n    initPhase = false\n  })\n\n  // Interactivity\n  $: isInteractiveMouse = detectIt.primaryInput === 'mouse' && any(onClick, onMousedown, onMouseup, onMouseover, onMouseout, onMousedrag)\n  $: isInteractiveTouch = detectIt.primaryInput === 'touch' && any(onTouchdown, onTouchup, onTouchover, onTouchout, onTouchdrag)\n\n  $: isSelectable = onSelect !== undefined || onDeselect !== undefined\n\n  onMount(() => {\n    updateInteractionManagerIfNecessary()\n  })\n\n  onDestroy(() => {\n    removeLayerFromSpatialIndexIfNecessary()\n  })\n\n  // Helpers\n  function scheduleUpdatePixelGeometryObject () {\n    pixelGeometryObjectRecalculationNecessary = true\n    screenGeometryObjectRecalculationNecessary = true\n  }\n\n  function updatePixelGeometryObject () {\n    pixelGeometryObject = createPixelGeometryObject(\n      positioningAesthetics,\n      key,\n      $sectionContext,\n      parseRenderSettings(renderSettings)\n    )\n  }\n\n  function scheduleUpdateScreenGeometryObject () {\n    screenGeometryObjectRecalculationNecessary = true\n  }\n\n  function updateScreenGeometryObject () {\n    if (asPolygon) {\n      screenGeometryObject = representAsPolygonObject(pixelGeometryObject, { radiusObject, strokeWidthObject })\n    } else {\n      screenGeometryObject = pixelGeometryObject\n    }\n  }\n\n  function updateScreenGeometryObjectTransitionable () {\n    tr_screenGeometryObject.set(screenGeometryObject)\n  }\n\n  function updateRadiusAndStrokeWidth () {\n    radiusObject = generatePropObject(aesthetics.radius, keyArray)\n    strokeWidthObject = generatePropObject(aesthetics.strokeWidth, keyArray)\n  }\n\n  function updateInteractionManagerIfNecessary () {\n    if (initPhase || !(blockReindexing || $sectionContext.blockReindexing)) {\n      removeLayerFromSpatialIndexIfNecessary()\n\n      if (isInteractiveMouse) {\n        const markInterface = $interactionManagerContext.mouse().marks()\n  \n        markInterface.loadLayer(type, createDataNecessaryForIndexing())\n\n        if (onClick) markInterface.addLayerInteraction('click', layerId, onClick)\n        if (onMousedown) markInterface.addLayerInteraction('mousedown', layerId, onMousedown)\n        if (onMouseup) markInterface.addLayerInteraction('mouseup', layerId, onMouseup)\n        if (onMouseout) markInterface.addLayerInteraction('mouseout', layerId, onMouseout)\n        if (onMouseover) markInterface.addLayerInteraction('mouseover', layerId, onMouseover)\n        if (onMousedrag) markInterface.addLayerInteraction('mousedrag', layerId, onMousedrag)\n      }\n\n      if (isInteractiveTouch) {\n        const markInterface = $interactionManagerContext.touch().marks()\n\n        markInterface.loadLayer(type, createDataNecessaryForIndexing())\n\n        if (onTouchdown) markInterface.addLayerInteraction('touchdown', layerId, onTouchdown)\n        if (onTouchup) markInterface.addLayerInteraction('touchup', layerId, onTouchup)\n        if (onTouchover) markInterface.addLayerInteraction('touchover', layerId, onTouchover)\n        if (onTouchout) markInterface.addLayerInteraction('touchout', layerId, onTouchout)\n        if (onTouchdrag) markInterface.addLayerInteraction('touchdrag', layerId, onTouchdrag)\n      }\n    }\n\n    removeLayerFromSelectIfNecessary()\n  \n    if (isSelectable) {\n      const selectManager = $interactionManagerContext.select()\n\n      selectManager.loadLayer(\n        type, createDataNecessaryForIndexing(), { onSelect, onDeselect }\n      )\n    }\n  }\n\n  function removeLayerFromSpatialIndexIfNecessary () {\n    if (detectIt.primaryInput === 'mouse') {\n      const markMouseInterface = $interactionManagerContext.mouse().marks()\n\n      if (markMouseInterface.layerIsLoaded(layerId)) {\n        markMouseInterface.removeAllLayerInteractions(layerId)\n        markMouseInterface.removeLayer(layerId)\n      }\n    }\n\n    if (detectIt.primaryInput === 'touch') {\n      const markTouchInterface = $interactionManagerContext.touch().marks()\n\n      if (markTouchInterface.layerIsLoaded(layerId)) {\n        markTouchInterface.removeAllLayerInteractions(layerId)\n        markTouchInterface.removeLayer(layerId)\n      }\n    }\n  }\n\n  function removeLayerFromSelectIfNecessary () {\n    const selectManager = $interactionManagerContext.select()\n\n    if (selectManager.layerIsLoaded(layerId)) {\n      selectManager.removeLayer(layerId)\n    }\n  }\n\n  function createDataNecessaryForIndexing () {\n    return createDataNecessaryForIndexingLayer(\n      type, layerId, keyArray, { pixelGeometryObject, screenGeometryObject }, { radiusObject, strokeWidthObject }\n    )\n  }\n\n  $: renderPolygon = !['Point', 'Line', 'Label'].includes(type) || asPolygon\n  $: renderCircle = type === 'Point' && !asPolygon\n  $: renderLine = type === 'Line' && !asPolygon\n  $: renderLabel = type === 'Label'\n</script>\n\n{#if $graphicContext.output() === 'svg'}\n\n  {#if renderPolygon}\n\n    <g \n      clip-path={clip ? `url(#clip-${$sectionContext.sectionId})` : 'none'}\n      class={`${type.toLowerCase()}-layer`}\n    >\n\n      {#each Object.keys($tr_screenGeometryObject) as $key ($key)}\n\n        <path\n          class={type.toLowerCase()}\n          d={generatePath($tr_screenGeometryObject[$key])}\n          fill={$tr_fillObject[$key]}\n          stroke={$tr_strokeObject[$key]}\n          stroke-width={$tr_strokeWidthObject[$key]}\n          fill-opacity={$tr_fillOpacityObject[$key]}\n          stroke-opacity={$tr_strokeOpacityObject[$key]}\n          opacity={$tr_opacityObject[$key]}\n        />\n\n      {/each}\n\n    </g>\n\n  {/if}\n\n  {#if renderCircle}\n\n    <g\n      clip-path={clip ? `url(#clip-${$sectionContext.sectionId})` : 'none'}\n      class=\"point-layer\"\n    >\n\n      {#each Object.keys($tr_screenGeometryObject) as $key ($key)}\n\n        <circle\n          class=\"point\"\n          cx={$tr_screenGeometryObject[$key].coordinates[0]}\n          cy={$tr_screenGeometryObject[$key].coordinates[1]}\n          r={$tr_radiusObject[$key]}\n          fill={$tr_fillObject[$key]}\n          stroke={$tr_strokeObject[$key]}\n          stroke-width={$tr_strokeWidthObject[$key]}\n          fill-opacity={$tr_fillOpacityObject[$key]}\n          stroke-opacity={$tr_strokeOpacityObject[$key]}\n          opacity={$tr_opacityObject[$key]}\n        />\n\n      {/each}\n\n    </g>\n\n  {/if}\n\n  {#if renderLine}\n\n    <g \n      clip-path={clip ? `url(#clip-${$sectionContext.sectionId})` : 'none'}\n      class=\"line-layer\"\n    >\n\n      {#each Object.keys($tr_screenGeometryObject) as $key ($key)}\n\n        <path\n          class=\"line\"\n          d={generatePath($tr_screenGeometryObject[$key])}\n          fill=\"none\"\n          stroke-width={$tr_strokeWidthObject[$key]}\n          stroke={$tr_strokeObject[$key]}\n          style={`opacity: ${$tr_opacityObject[$key]}`}\n        />\n\n      {/each}\n\n    </g>\n\n  {/if}\n\n{/if}\n\n{#if renderLabel}\n\n  <g\n    clip-path={clip ? `url(#clip-${$sectionContext.sectionId})` : 'none'} \n    class=\"label-layer\"\n  >\n\n    {#each Object.keys($tr_screenGeometryObject) as $key ($key)}\n\n      <text \n        class=\"label\"\n        x={$tr_screenGeometryObject[$key].coordinates[0]}\n        y={$tr_screenGeometryObject[$key].coordinates[1]}\n        fill={$tr_fillObject[$key]}\n        stroke={$tr_strokeObject[$key]}\n        stroke-width={$tr_strokeWidthObject[$key]}\n        fill-opacity={$tr_fillOpacityObject[$key]}\n        stroke-opacity={$tr_strokeOpacityObject[$key]}\n        opacity={$tr_opacityObject[$key]}\n        transform={`\n          rotate(${$tr_rotationObject[$key]}, \n          ${$tr_screenGeometryObject[$key].coordinates[0]}, \n          ${$tr_screenGeometryObject[$key].coordinates[1]})\n        `}\n        font-family={fontFamilyObject[$key]}\n        font-size={$tr_fontSizeObject[$key] + 'px'}\n        font-weight={$tr_fontWeightObject[$key]}\n        text-anchor={textAnchorPoint(anchorPointObject[$key]).textAnchor}\n        dominant-baseline={textAnchorPoint(anchorPointObject[$key]).dominantBaseline}\n      >\n        {textObject[$key]}\n      </text>\n      \n    {/each}\n\n  </g>\n\n{/if}\n","<script>\n  import Layer from '../Mark/Layer.svelte'\n\n  // Aesthetics: positioning\n  export let x = undefined\n  export let y = undefined\n  export let geometry = undefined\n\n  // Aesthetics: other\n  export let strokeWidth = undefined\n  export let stroke = undefined\n  export let opacity = undefined\n\n  // Transitions\n  export let transition = undefined\n\n  // Mouse interactions\n  export let onClick = undefined\n  export let onMousedown = undefined\n  export let onMouseup = undefined\n  export let onMouseover = undefined\n  export let onMouseout = undefined\n  export let onMousedrag = undefined\n\n  // Touch interactions\n  export let onTouchdown = undefined\n  export let onTouchup = undefined\n  export let onTouchover = undefined\n  export let onTouchout = undefined\n  export let onTouchdrag = undefined\n\n  // Select interactions\n  export let onSelect = undefined\n  export let onDeselect = undefined\n\n  // Other\n  export let key = undefined\n  export let renderSettings = undefined\n  export let blockReindexing = false\n  export let clip = true\n</script>\n\n<Layer \n  type=\"Line\"\n  {x} {y} {geometry}\n  {strokeWidth} {stroke} {opacity}\n  {transition} \n  {onClick} {onMousedown} {onMouseup} {onMouseover} {onMouseout} {onMousedrag}\n  {onTouchdown} {onTouchup} {onTouchover} {onTouchout} {onTouchdrag}\n  {onSelect} {onDeselect}\n  {key} {renderSettings} {blockReindexing} {clip}\n  _asPolygon={false}\n/>","<script>\n  import Layer from '../Mark/Layer.svelte'\n\n  // Aesthetics: positioning\n  export let x = undefined\n  export let y = undefined\n  export let geometry = undefined\n\n  // Aesthetics: other\n  export let fill = undefined\n  export let stroke = undefined\n  export let strokeWidth = undefined\n  export let strokeOpacity = undefined\n  export let fillOpacity = undefined\n  export let opacity = undefined\n  export let text = undefined\n  export let fontFamily = undefined\n  export let fontSize = undefined\n  export let fontWeight = undefined\n  export let rotation = undefined\n  export let anchorPoint = undefined\n\n  // Transitions\n  export let transition = undefined\n\n  // Mouse interactions\n  export let onClick = undefined\n  export let onMousedown = undefined\n  export let onMouseup = undefined\n  export let onMouseover = undefined\n  export let onMouseout = undefined\n  export let onMousedrag = undefined\n\n  // Touch interactions\n  export let onTouchdown = undefined\n  export let onTouchup = undefined\n  export let onTouchover = undefined\n  export let onTouchout = undefined\n  export let onTouchdrag = undefined\n\n  // Select interactions\n  export let onSelect = undefined\n  export let onDeselect = undefined\n\n  // Other\n  export let key = undefined\n  export let renderSettings = undefined\n  export let blockReindexing = false\n  export let clip = true\n</script>\n\n<Layer \n  type=\"Label\"\n  {x} {y} {geometry}\n  {fill} {stroke} {strokeWidth}\n  {strokeOpacity} {fillOpacity} {opacity}\n  {text}\n  {fontFamily} {fontSize} {fontWeight} {rotation} {anchorPoint}\n  {transition} \n  {onClick} {onMousedown} {onMouseup} {onMouseover} {onMouseout} {onMousedrag}\n  {onTouchdown} {onTouchup} {onTouchover} {onTouchout} {onTouchdrag}\n  {onSelect} {onDeselect}\n  {key} {renderSettings} {blockReindexing} {clip}\n  _asPolygon={false}\n/>","export function parseHJust (hjust, xOffset, bbox) {\n  const { minX: x1, maxX: x2 } = bbox\n\n  if (hjust === 'left') {\n    return x1 - xOffset\n  }\n\n  if (hjust === 'right') {\n    return x2 + xOffset\n  }\n\n  if (['center', 'centre'].includes(hjust)) {\n    return (x2 - x1) / 2 + x1 + xOffset\n  }\n\n  if (hjust.constructor === Number) {\n    return (x2 - x1) * hjust + x1\n  }\n}\n\nexport function parseVJust (vjust, yOffset, bbox) {\n  const { minY: y1, maxY: y2 } = bbox\n\n  if (vjust === 'top') {\n    return y1 - yOffset\n  }\n\n  if (vjust === 'bottom') {\n    return y2 + yOffset\n  }\n\n  if (['center', 'centre'].includes(vjust)) {\n    return (y2 - y1) / 2 + y1 + yOffset\n  }\n\n  if (vjust.constructor === Number) {\n    return (y2 - y1) * vjust + y1\n  }\n}\n","import generateArrayOfLength from '../../Marks/utils/generateArrayOfLength.js'\n\nexport function getTickPositions (tickValuesArray, scale, tickCount, tickExtra, zoomIdentity) {\n  let ticks\n\n  if (Array.isArray(tickValuesArray) && tickValuesArray.length > 0) {\n    ticks = tickValuesArray\n  } else if (isContinuous(scale)) {\n    ticks = getContinuousTicks(scale, tickCount, zoomIdentity)\n  } else if ('domain' in scale) {\n    ticks = scale.domain()\n  } else {\n    throw new Error(`Couldn't construct axis. Please provide 'tickValues' or a scale with\n      either a 'ticks' or a 'domain' method.`)\n  }\n\n  if (tickExtra && 'domain' in scale && ticks[0] !== scale.domain()[0]) {\n    ticks.unshift(scale.domain()[0])\n  }\n\n  return ticks\n}\n\nfunction isContinuous (scale) {\n  return 'ticks' in scale\n}\n\nfunction getContinuousTicks (scale, tickCount, zoomIdentity) {\n  if (zoomIdentity) {\n    const rescaledDomain = rescale(scale, zoomIdentity)\n    return scale.copy().domain(rescaledDomain).ticks(tickCount)\n  }\n\n  return scale.ticks(tickCount)\n}\n\n// https://github.com/d3/d3-zoom#transform_rescaleX\nfunction rescale (scale, { k, t }) {\n  const rescaledRange = scale.range().map(r => (r - t) / k)\n  const rescaledDomain = rescaledRange.map(scale.invert)\n  return rescaledDomain\n}\n\nexport function getTickCoordinatesXAxis (\n  ticks,\n  yAbsolute,\n  scaleX,\n  finalScaleY,\n  tickSize,\n  flip\n) {\n  const offset = flip ? -tickSize : tickSize\n  const bandOffset = scaleX.bandwidth ? scaleX.bandwidth() / 2 : 0\n\n  const yEndAbsolute = yAbsolute + offset\n\n  const yCoordsTick = [\n    finalScaleY.invert(yAbsolute),\n    finalScaleY.invert(yEndAbsolute)\n  ]\n\n  const x = ticks.map(t => scaleX(t) + bandOffset).map(t => [t, t])\n  const y = generateArrayOfLength(yCoordsTick, ticks.length)\n\n  return {\n    x: () => x,\n    y: () => y\n  }\n}\n\nexport function getTickCoordinatesYAxis (\n  ticks,\n  xAbsolute,\n  scaleY,\n  finalScaleX,\n  tickSize,\n  flip\n) {\n  const offset = flip ? tickSize : -tickSize\n  const bandOffset = scaleY.bandwidth ? scaleY.bandwidth() / 2 : 0\n\n  const xEndAbsolute = xAbsolute + offset\n\n  const xCoordsTick = [\n    finalScaleX.invert(xAbsolute),\n    finalScaleX.invert(xEndAbsolute)\n  ]\n\n  const x = generateArrayOfLength(xCoordsTick, ticks.length)\n  const y = ticks.map(t => scaleY(t) + bandOffset).map(t => [t, t])\n\n  return {\n    x: () => x,\n    y: () => y\n  }\n}\n\nexport function getFormat (labelFormat, scale, numberOfTicks) {\n  if (labelFormat) return labelFormat\n  if ('tickFormat' in scale) return scale.tickFormat(numberOfTicks)\n\n  return x => x\n}\n","export function getTickLabelCoordinatesXAxis (\n  tickCoordinates,\n  { finalScaleY },\n  labelOffset,\n  flip\n) {\n  const x = tickCoordinates.x().map(x => x[0])\n\n  const y = tickCoordinates.y().map(y => {\n    const yEnd = y[1]\n    const yEndAbsolute = finalScaleY(yEnd)\n\n    const yLabelAbsolute = flip\n      ? yEndAbsolute - labelOffset\n      : yEndAbsolute + labelOffset\n\n    return finalScaleY.invert(yLabelAbsolute)\n  })\n\n  return {\n    x: () => x,\n    y: () => y\n  }\n}\n\nexport function getTickLabelCoordinatesYAxis (\n  tickCoordinates,\n  { finalScaleX },\n  labelOffset,\n  flip\n) {\n  const x = tickCoordinates.x().map(x => {\n    const xEnd = x[1]\n    const xEndAbsolute = finalScaleX(xEnd)\n\n    const xLabelAbsolute = flip\n      ? xEndAbsolute + labelOffset\n      : xEndAbsolute - labelOffset\n\n    return finalScaleX.invert(xLabelAbsolute)\n  })\n\n  const y = tickCoordinates.y().map(y => y[0])\n\n  return {\n    x: () => x,\n    y: () => y\n  }\n}\n\n// from https://stackoverflow.com/a/21015393\nexport function getTextWidth (text, fontSize, fontFamily) {\n  let canvas\n  if (typeof document === 'undefined') {\n    // if we don't have document/canvas available\n    // assume ratio width to height is 0.8\n    const length = text.length\n    return length * 0.8 * fontSize\n  } else {\n    // re-use canvas object for better performance\n    canvas = getTextWidth.canvas || (getTextWidth.canvas = document.createElement('canvas'))\n    const context = canvas.getContext('2d')\n    context.font = fontSize + ' ' + fontFamily\n    const metrics = context.measureText(text)\n    return metrics.width\n  }\n}\n","import { parseHJust, parseVJust } from './just.js'\n\nexport function getTitleCoordinatesXAxis (\n  hjust,\n  xOffset,\n  vjust,\n  yOffset,\n  sectionContext,\n  flip,\n  axisHeight,\n  fontSize,\n  yAbsoluteAxis\n) {\n  const heightOffset = getHeightOffset(yOffset, flip, axisHeight, fontSize)\n\n  const xAbsolute = parseHJust(hjust, xOffset, sectionContext.paddedBbox)\n  const yAbsolute = vjust === 'axis'\n    ? yAbsoluteAxis + heightOffset\n    : parseVJust(vjust, yOffset, sectionContext.paddedBbox) + heightOffset\n\n  const { finalScaleX, finalScaleY } = sectionContext\n\n  const x = finalScaleX.invert(xAbsolute)\n  const y = finalScaleY.invert(yAbsolute)\n\n  return {\n    x: () => x,\n    y: () => y\n  }\n}\n\nfunction getHeightOffset (offset, flip, axisHeight, fontSize) {\n  if (offset === 'axis') {\n    return flip\n      ? -(axisHeight + 1) - fontSize\n      : axisHeight + 1\n  }\n\n  if (offset.constructor !== Number) {\n    throw new Error('yOffset must be a Number')\n  }\n\n  return offset\n}\n\nexport function getTitleCoordinatesYAxis (\n  hjust,\n  xOffset,\n  vjust,\n  yOffset,\n  sectionContext,\n  flip,\n  axisWidth,\n  fontSize,\n  xAbsoluteAxis\n) {\n  const widthOffset = getWidthOffset(xOffset, flip, axisWidth, fontSize)\n  const xAbsolute = hjust === 'axis'\n    ? xAbsoluteAxis + widthOffset\n    : parseHJust(hjust, xOffset, sectionContext.paddedBbox)\n  const yAbsolute = parseHJust(vjust, yOffset, sectionContext.paddedBbox)\n\n  const { finalScaleX, finalScaleY } = sectionContext\n\n  const x = finalScaleX.invert(xAbsolute)\n  const y = finalScaleY.invert(yAbsolute)\n\n  return {\n    x: () => x,\n    y: () => y\n  }\n}\n\nfunction getWidthOffset (offset, flip, axisWidth, fontSize) {\n  if (offset === 'axis') {\n    return flip\n      ? axisWidth + 5\n      : -axisWidth - 5\n  }\n\n  if (offset.constructor !== Number) {\n    throw new Error('xOffset must be a Number')\n  }\n\n  return offset\n}\n","<script>\n  import { Line, LineLayer, Label, LabelLayer } from '../../../index.js'\n  import * as SectionContext from '../../Core/Section/SectionContext'\n\n  import { parseVJust } from './just.js'\n  import { getBaseLineCoordinatesXAxis } from './baseLine.js'\n  import { getTickPositions, getTickCoordinatesXAxis, getFormat } from './ticks.js'\n  import { getTickLabelCoordinatesXAxis } from './tickLabels.js'\n  import { getTitleCoordinatesXAxis } from './title.js'\n\n  // global properties\n  export let flip = false\n  export let scale = undefined\n\n  // axis baseline\n  export let baseLine = true\n  export let baseLineColor = 'black'\n  export let baseLineOpacity = 1\n  export let baseLineWidth = 1\n\n  // axis positioning\n  export let vjust = 'bottom'\n  export let yOffset = 0\n\n  // tick marks\n  export let ticks = true\n  export let tickCount = 10\n  export let tickExtra = false\n  export let tickValues = undefined\n  export let tickSize = 5\n  export let tickWidth = 0.5\n  export let tickColor = 'black'\n  export let tickOpacity = 1\n\n  // tick labels\n  export let labelFormat = undefined\n  export let labelOffset = 2\n  export let labelRotate = 0\n  export let labelFont = 'Helvetica'\n  export let labelFontSize = 10\n  export let labelFontWeight = 'normal'\n  export let labelOpacity = 1\n  export let labelColor = 'black'\n\n  // axis title\n  export let titleHjust = 'center'\n  export let titleXOffset = 0\n  export let titleVjust = 'axis'\n  export let titleYOffset = 'axis'\n  export let title = ''\n  export let titleColor = 'black'\n  export let titleFont = 'Helvetica'\n  export let titleFontSize = '12'\n  export let titleFontWeight = 'normal'\n  export let titleOpacity = 1\n  export let titleRotation = 0\n  export let titleAnchorPoint = 't'\n\n  // other\n  export let transition = undefined\n  export let clip = false\n\n  // Contexts\n  const sectionContext = SectionContext.subscribe()\n\n  // Make sure not polar\n  $: {\n    if ($sectionContext.transformation === 'polar') {\n      throw new Error('Axes do\\'nt work with polar coordinates (for now)')\n    }\n  }\n\n  // Scale\n  $: scaleX = scale\n    ? scale.copy().range($sectionContext.rangeX)\n    : $sectionContext.scaleX\n  \n  // Absolute position (in pixels)\n  $: yAbsolute = parseVJust(vjust, yOffset, $sectionContext.paddedBbox)\n\n  // Baseline\n  $: baseLineCoordinates = getBaseLineCoordinatesXAxis(yAbsolute, $sectionContext)\n  \n  // Ticks\n  $: tickPositions = getTickPositions(\n    tickValues,\n    scaleX,\n    tickCount,\n    tickExtra,\n    $sectionContext.zoomIdentity \n      ? { t: $sectionContext.zoomIdentity.x, k: $sectionContext.zoomIdentity.kx }\n      : undefined\n  )\n  $: tickCoordinates = getTickCoordinatesXAxis(\n    tickPositions,\n    yAbsolute,\n    scaleX,\n    $sectionContext.finalScaleY,\n    tickSize,\n    flip\n  )\n\n  // Tick labels\n  $: format = getFormat(labelFormat, $sectionContext.scaleX, ticks.length)\n  $: tickLabelText = tickPositions.map(format)\n  $: tickLabelCoordinates = getTickLabelCoordinatesXAxis(tickCoordinates, $sectionContext, labelOffset, flip)\n  $: labelAnchorPoint = flip ? 'b' : 't'\n\n  // Title\n  $: axisHeight = baseLineWidth + tickSize + labelOffset + labelFontSize\n  $: titleCoordinates = getTitleCoordinatesXAxis(\n    titleHjust,\n    titleXOffset,\n    titleVjust,\n    titleYOffset,\n    $sectionContext,\n    flip,\n    axisHeight,\n    titleFontSize,\n    yAbsolute\n  )\n</script>\n\n<g class=\"x-axis\">\n    \n  {#if baseLine}\n    <Line \n      {...baseLineCoordinates}\n      strokeWidth={baseLineWidth}\n      opacity={baseLineOpacity}\n      stroke={baseLineColor}\n      {clip}\n    />\n  {/if}\n\n  {#if ticks}\n    <LineLayer \n      {...tickCoordinates}\n      strokeWidth={tickWidth}\n      opacity={tickOpacity}\n      stroke={tickColor}\n      {transition}\n      {clip}\n    />\n    \n    <LabelLayer\n      {...tickLabelCoordinates}\n      text={tickLabelText} \n      anchorPoint={labelAnchorPoint}\n      rotation={labelRotate}\n      fontFamily={labelFont}\n      fontSize={labelFontSize}\n      fontWeight={labelFontWeight}\n      opacity={labelOpacity}\n      fill={labelColor}\n      {transition}\n      {clip}\n    />\n  {/if}\n\n  {#if title.length > 0}\n    <Label \n      {...titleCoordinates}\n      text={title}\n      anchorPoint={titleAnchorPoint}\n      rotation={titleRotation}\n      fontFamily={titleFont}\n      fontSize={titleFontSize}\n      fontWeight={titleFontWeight}\n      opacity={titleOpacity}\n      fill={titleColor}\n      {clip}\n    />\n  {/if}\n\n</g>","export function getBaseLineCoordinatesXAxis (yAbsolute, sectionContext) {\n  const { paddedBbox, finalScaleX, finalScaleY } = sectionContext\n  const { minX: x1, maxX: x2 } = paddedBbox\n\n  const x = [x1, x2].map(finalScaleX.invert)\n  const y = [yAbsolute, yAbsolute].map(finalScaleY.invert)\n\n  return {\n    x: () => x,\n    y: () => y\n  }\n}\n\nexport function getBaseLineCoordinatesYAxis (xAbsolute, sectionContext) {\n  const { paddedBbox, finalScaleX, finalScaleY } = sectionContext\n  const { minY: y1, maxY: y2 } = paddedBbox\n\n  const x = [xAbsolute, xAbsolute].map(finalScaleX.invert)\n  const y = [y1, y2].map(finalScaleY.invert)\n\n  return {\n    x: () => x,\n    y: () => y\n  }\n}\n","<script>\n  import { Line, LineLayer, Label, LabelLayer } from '../../../index.js'\n  import * as SectionContext from '../../Core/Section/SectionContext'\n\n  import { parseHJust } from './just.js'\n  import { getBaseLineCoordinatesYAxis } from './baseLine.js'\n  import { getTickPositions, getTickCoordinatesYAxis, getFormat } from './ticks.js'\n  import { getTickLabelCoordinatesYAxis, getTextWidth } from './tickLabels.js'\n  import { getTitleCoordinatesYAxis } from './title.js'\n\n  // global properties\n  export let flip = false\n  export let scale = undefined\n\n  // axis baseline\n  export let baseLine = true\n  export let baseLineColor = 'black'\n  export let baseLineOpacity = 1\n  export let baseLineWidth = 1\n\n  // axis positioning\n  export let hjust = 'left'\n  export let xOffset = 0\n\n  // tick marks\n  export let ticks = true\n  export let tickCount = 10\n  export let tickExtra = false\n  export let tickValues = undefined\n  export let tickSize = 5\n  export let tickWidth = 0.5\n  export let tickColor = 'black'\n  export let tickOpacity = 1\n\n  // tick labels\n  export let labelFormat = undefined\n  export let labelOffset = 2\n  export let labelRotate = 0\n  export let labelFont = 'Helvetica'\n  export let labelFontSize = 10\n  export let labelFontWeight = 'normal'\n  export let labelOpacity = 1\n  export let labelColor = 'black'\n\n  // axis title\n  export let titleHjust = 'axis'\n  export let titleXOffset = 'axis'\n  export let titleVjust = 'center'\n  export let titleYOffset = 0\n  export let title = ''\n  export let titleColor = 'black'\n  export let titleFont = 'Helvetica'\n  export let titleFontSize = '12'\n  export let titleFontWeight = 'normal'\n  export let titleOpacity = 1\n  export let titleRotation = -90\n  export let titleAnchorPoint = 'center'\n\n  // other\n  export let transition = undefined\n  export let clip = false\n\n  // Contexts\n  const sectionContext = SectionContext.subscribe()\n  \n  // Make sure not polar\n  $: {\n    if ($sectionContext.transformation === 'polar') {\n      throw new Error('Axes do\\'nt work with polar coordinates (for now)')\n    }\n  }\n\n  // Scale\n  $: scaleY = scale\n    ? scale.copy().range($sectionContext.rangeY)\n    : $sectionContext.scaleY\n\n  // Absolute position (in pixels)\n  $: xAbsolute = parseHJust(hjust, xOffset, $sectionContext.paddedBbox)\n\n  // Baseline\n  $: baseLineCoordinates = getBaseLineCoordinatesYAxis(xAbsolute, $sectionContext)\n  \n  // Ticks\n  $: tickPositions = getTickPositions(\n    tickValues,\n    scaleY,\n    tickCount,\n    tickExtra,\n    $sectionContext.zoomIdentity\n      ? { t: $sectionContext.zoomIdentity.y, k: $sectionContext.zoomIdentity.ky }\n      : undefined\n  )\n  $: tickCoordinates = getTickCoordinatesYAxis(\n    tickPositions,\n    xAbsolute,\n    scaleY,\n    $sectionContext.finalScaleX,\n    tickSize,\n    flip\n  )\n\n  // Tick labels\n  $: format = getFormat(labelFormat, $sectionContext.scaleY, ticks.length)\n  $: tickLabelText = tickPositions.map(format)\n  $: tickLabelCoordinates = getTickLabelCoordinatesYAxis(tickCoordinates, $sectionContext, labelOffset, flip)\n  $: labelAnchorPoint = flip ? 'l' : 'r'\n  $: tickLabelWidth = getTextWidth(tickLabelText[tickLabelText.length - 1], labelFontSize, labelFont)\n\n  // Title\n  $: axisWidth = baseLineWidth + tickSize + labelOffset + tickLabelWidth\n  $: titleCoordinates = getTitleCoordinatesYAxis(\n    titleHjust,\n    titleXOffset,\n    titleVjust,\n    titleYOffset,\n    $sectionContext,\n    flip,\n    axisWidth,\n    titleFontSize,\n    xAbsolute\n  )\n</script>\n\n<g class=\"y-axis\">\n    \n  {#if baseLine}\n    <Line \n      {...baseLineCoordinates}\n      strokeWidth={baseLineWidth}\n      opacity={baseLineOpacity}\n      stroke={baseLineColor}\n      {clip}\n    />\n  {/if}\n\n  {#if ticks}\n    <LineLayer \n      {...tickCoordinates}\n      strokeWidth={tickWidth}\n      opacity={tickOpacity}\n      stroke={tickColor}\n      {transition}\n      {clip}\n    />\n    \n    <LabelLayer\n      {...tickLabelCoordinates}\n      text={tickLabelText} \n      anchorPoint={labelAnchorPoint}\n      rotation={labelRotate}\n      fontFamily={labelFont}\n      fontSize={labelFontSize}\n      fontWeight={labelFontWeight}\n      opacity={labelOpacity}\n      fill={labelColor}\n      {transition}\n      {clip}\n    />\n  {/if}\n\n  {#if title.length > 0}\n    <Label \n      {...titleCoordinates}\n      text={title}\n      anchorPoint={titleAnchorPoint}\n      rotation={titleRotation}\n      fontFamily={titleFont}\n      fontSize={titleFontSize}\n      fontWeight={titleFontWeight}\n      opacity={titleOpacity}\n      fill={titleColor}\n      {clip}\n    />\n  {/if}\n\n</g>","<script>\n  import { LineLayer } from '../../../index.js'\n  import * as SectionContext from '../../Core/Section/SectionContext'\n\n  import { getTickPositions } from '../Axes/ticks.js'\n  import { getCoordinatesXRaster } from './getCoordinates.js'\n  \n  export let scale = undefined\n  export let count = 10\n  export let extra = false\n  export let values = undefined\n  export let width = 0.25\n  export let color = 'black'\n  export let opacity = 1\n  export let transition = undefined\n\n  // Contexts\n  const sectionContext = SectionContext.subscribe()\n\n  // Make sure not polar\n  $: {\n    if ($sectionContext.transformation === 'polar') {\n      throw new Error('Rasters do\\'nt work with polar coordinates (for now)')\n    }\n  }\n\n  // Scale\n  $: scaleX = scale\n    ? scale.copy().range($sectionContext.rangeX)\n    : $sectionContext.scaleX\n\n  // Ticks\n  $: positions = getTickPositions(\n    values,\n    scaleX,\n    count,\n    extra,\n    $sectionContext.zoomIdentity \n      ? { t: $sectionContext.zoomIdentity.x, k: $sectionContext.zoomIdentity.kx }\n      : undefined\n  )\n\n  $: coordinates = getCoordinatesXRaster(\n    positions,\n    scaleX,\n    $sectionContext\n  )\n</script>\n\n<g class=\"x-grid-lines\">\n    \n  <LineLayer \n    {...coordinates}\n    strokeWidth={width}\n    opacity={opacity}\n    stroke={color}\n    {transition}\n  />\n\n</g>\n","import generateArrayOfLength from '../../Marks/utils/generateArrayOfLength.js'\n\nexport function getCoordinatesXRaster (positions, scaleX, sectionContext) {\n  const bandOffset = scaleX.bandwidth ? scaleX.bandwidth() / 2 : 0\n\n  const x = positions.map(p => scaleX(p) + bandOffset).map(p => [p, p])\n  const y = generateArrayOfLength(sectionContext.rangeY, positions.length)\n\n  return {\n    x: () => x,\n    y: () => y\n  }\n}\n\nexport function getCoordinatesYRaster (positions, scaleY, sectionContext) {\n  const bandOffset = scaleY.bandwidth ? scaleY.bandwidth() / 2 : 0\n\n  const x = generateArrayOfLength(sectionContext.rangeX, positions.length)\n  const y = positions.map(p => scaleY(p) + bandOffset).map(p => [p, p])\n\n  return {\n    x: () => x,\n    y: () => y\n  }\n}\n","<script>\n  import { LineLayer } from '../../../index.js'\n  import * as SectionContext from '../../Core/Section/SectionContext'\n\n  import { getTickPositions } from '../Axes/ticks.js'\n  import { getCoordinatesYRaster } from './getCoordinates.js'\n  \n  export let scale = undefined\n  export let count = 10\n  export let extra = false\n  export let values = undefined\n  export let width = 0.25\n  export let color = 'black'\n  export let opacity = 1\n  export let transition = undefined\n\n  // Contexts\n  const sectionContext = SectionContext.subscribe()\n\n  // Make sure not polar\n  $: {\n    if ($sectionContext.transformation === 'polar') {\n      throw new Error('Rasters do\\'nt work with polar coordinates (for now)')\n    }\n  }\n\n  // Scale\n  $: scaleY = scale\n    ? scale.copy().range($sectionContext.rangeY)\n    : $sectionContext.scaleY\n\n  // Ticks\n  $: positions = getTickPositions(\n    values,\n    scaleY,\n    count,\n    extra,\n    $sectionContext.zoomIdentity \n      ? { t: $sectionContext.zoomIdentity.y, k: $sectionContext.zoomIdentity.ky }\n      : undefined\n  )\n\n  $: coordinates = getCoordinatesYRaster(\n    positions,\n    scaleY,\n    $sectionContext\n  )\n</script>\n\n<g class=\"y-grid-lines\">\n    \n  <LineLayer \n    {...coordinates}\n    strokeWidth={width}\n    opacity={opacity}\n    stroke={color}\n    {transition}\n  />\n\n</g>\n","<script>\n    import Terminal from './Terminal.svelte'\n    import {\n        Graphic,\n        XAxis,\n        YAxis,\n        XGridLines,\n        YGridLines,\n        Point,\n    } from '@snlab/florence'\n    import { Print } from './store'\n\n    let canvasSize = Math.min(window.innerWidth, window.innerHeight) - 20\n    let GRID_COLOR = '#80DDF2'\n\n    let LABELS_AMOUNT = 3\n    let N_FOR_LABEL = 80\n    let MAX = 100\n    let COLORS = [\n        '#fe00fe',\n        '#fe007f',\n        '#fe0000',\n        '#febf00',\n        '#fefe00',\n        '#00fe00',\n        '#00fefe',\n        '#0080ff',\n        '#3f00fe',\n    ]\n\n    // Note that error must be < max/2\n    let ERROR = 30\n\n    // distance of centers from origin\n    let RADIUS = MAX / 2 - 20\n\n    // Functions\n    const graphSize = function () {\n        canvasSize = Math.min(window.innerWidth, window.innerHeight) - 20\n        console.log(canvasSize)\n    }\n\n    const euclideanDistance = function (a, b) {\n        let x = a.x - b.x\n        let y = a.y - b.y\n\n        return Math.sqrt(x * x + y * y)\n    }\n    const generateData = function (nForLabel, centers) {\n        let data = []\n        centers.forEach(({ x, y }) => {\n            for (let j = 0; j < nForLabel; j++) {\n                const angle = Math.PI * 2 * Math.random()\n                const point = {\n                    x: x + ERROR * Math.cos(angle) * Math.random(),\n                    y: y + ERROR * Math.sin(angle) * Math.random(),\n                    label: -1,\n                }\n                data.push(point)\n            }\n        })\n        return data\n    }\n    const Mean = (includes) => {\n        const len = includes.length\n\n        if (len == 0)\n            return {\n                x: MAX / 2,\n                y: MAX / 2,\n            }\n\n        let x_sum = 0\n        let y_sum = 0\n\n        includes.forEach((p) => {\n            x_sum += p.x\n            y_sum += p.y\n        })\n\n        return {\n            x: x_sum / len,\n            y: y_sum / len,\n        }\n    }\n\n    // Initalizing Labels and Centers\n    let centers = []\n    let labels = []\n    for (let i = 0; i < LABELS_AMOUNT; i++) {\n        labels.push({\n            x: Math.random() * MAX,\n            y: Math.random() * MAX,\n            color: COLORS[i],\n        })\n\n        centers.push({\n            x: MAX / 2 + Math.cos((Math.PI / LABELS_AMOUNT) * 2 * i) * RADIUS,\n            y: MAX / 2 + Math.sin((Math.PI / LABELS_AMOUNT) * 2 * i) * RADIUS,\n        })\n    }\n\n    // Gen data\n    let data = []\n    data = generateData(N_FOR_LABEL, centers)\n\n    // Event Handler\n    // Recalculate means for observations assigned to each cluster.\n    function Update() {\n        labels.forEach((label, index) => {\n            Object.assign(label, Mean(data.filter((p) => p.label == index)))\n        })\n        labels = labels\n    }\n\n    // Assign each observation to the cluster with the nearest mean\n    function Assignment() {\n        let change = false\n        let contain = []\n\n        for (let i = 0; i < LABELS_AMOUNT; i++) {\n            contain.push(0)\n        }\n\n        data.forEach((p) => {\n            let minDis = euclideanDistance(p, labels[0])\n            let min = 0\n\n            labels.forEach((label, index) => {\n                const dis = euclideanDistance(p, label)\n                if (dis < minDis) {\n                    min = index\n                    minDis = dis\n                }\n            })\n            if (!change) change = p.label != min\n            contain[min] += 1\n            p.label = min\n\n            Print(`Assigned (${p.x}, ${p.y}) to ${min}`)\n        })\n        for (let i = 0; i < LABELS_AMOUNT; i++) {\n            Print(`Label ${i} now contain ${contain[i]} points`)\n        }\n\n        labels = labels\n        return change\n    }\n\n    // Assign each observation to the cluster with the nearest mean\n    function Fit() {\n        let interval = 1\n\n        let change = Assignment()\n        Update()\n\n        let fit = setInterval(() => {\n            change = Assignment()\n            Update()\n            interval++\n\n            if (!change) {\n                Print(`Fitted after ${interval} interation(s)`)\n                clearInterval(fit)\n            }\n        }, 2000)\n    }\n\n    function setLabel(e) {\n        const num = e.detail.num\n        if (LABELS_AMOUNT > num) {\n            data.map((p) => {\n                p.label = -1\n            })\n            labels = labels.slice(0, num)\n        } else {\n            for (let i = LABELS_AMOUNT; i < num; i++) {\n                labels.push({\n                    x: Math.random() * MAX,\n                    y: Math.random() * MAX,\n                    color: COLORS[i],\n                })\n            }\n            labels = labels\n        }\n        LABELS_AMOUNT = num\n    }\n\n    function setData(e) {\n        const num = e.detail.num\n        N_FOR_LABEL = num\n        Reset()\n    }\n\n    function setError(e) {\n        const num = e.detail.num\n        ERROR = num\n        data = generateData(N_FOR_LABEL, centers)\n    }\n\n    function Reset() {\n        centers = []\n        for (let i = 0; i < LABELS_AMOUNT; i++) {\n            Object.assign(labels[i], {\n                x: Math.random() * MAX,\n                y: Math.random() * MAX,\n            })\n\n            centers.push({\n                x:\n                    MAX / 2 +\n                    Math.cos((Math.PI / LABELS_AMOUNT) * 2 * i) * RADIUS,\n                y:\n                    MAX / 2 +\n                    Math.sin((Math.PI / LABELS_AMOUNT) * 2 * i) * RADIUS,\n            })\n        }\n        centers = centers\n        labels = labels\n\n        data = []\n        data = generateData(N_FOR_LABEL, centers)\n    }\n</script>\n\n<svelte:window on:resize={graphSize} />\n<main>\n    <div class=\"graph\">\n        <Graphic\n            width={canvasSize}\n            height={canvasSize}\n            scaleX={[-6, MAX + 6]}\n            scaleY={[-6, MAX + 6]}\n            flipY\n            padding={20}\n        >\n            {#each data as point}\n                <Point\n                    x={point.x}\n                    y={point.y}\n                    radius={2}\n                    fill={point.label == -1\n                        ? '#8B8B8B'\n                        : labels[point.label].color}\n                    opacity={0.9}\n                    transition={2000}\n                />\n            {/each}\n            {#each labels as label}\n                <Point\n                    x={label.x}\n                    y={label.y}\n                    radius={6}\n                    fill={label.color}\n                    transition={2000}\n                />\n                <Point\n                    x={label.x}\n                    y={label.y}\n                    radius={10}\n                    strokeWidth={1}\n                    stroke={label.color}\n                    strokeOpacity={0.5}\n                    fill={label.color}\n                    transition={2000}\n                />\n            {/each}\n            <XAxis\n                baseLineColor={GRID_COLOR}\n                tickColor={GRID_COLOR}\n                labelColor={GRID_COLOR}\n                labelOpacity={0}\n            />\n            <YAxis\n                baseLineColor={GRID_COLOR}\n                tickColor={GRID_COLOR}\n                labelColor={GRID_COLOR}\n                labelOpacity={0}\n            />\n            <XGridLines color={GRID_COLOR} opacity={0.3} />\n            <YGridLines color={GRID_COLOR} opacity={0.3} />\n        </Graphic>\n    </div>\n\n    <div class=\"controller\">\n        <Terminal\n            on:assign={Assignment}\n            on:update={Update}\n            on:fit={Fit}\n            on:setLabel={setLabel}\n            on:setData={setData}\n            on:setError={setError}\n            on:reset={Reset}\n        />\n    </div>\n</main>\n\n<style>\n    main {\n        width: 100vw;\n        height: 100vh;\n\n        text-align: center;\n        padding: 1em;\n        margin: 0;\n        padding: 0;\n\n        display: grid;\n        grid-template-columns: 1fr auto;\n    }\n\n    /* Portrait */\n    @media only screen and (min-device-width: 375px) and (max-device-width: 812px) and (-webkit-min-device-pixel-ratio: 3) and (orientation: portrait) {\n        main {\n            grid-template-columns: auto;\n            grid-template-rows: auto 1fr;\n        }\n    }\n</style>\n","import App from './App.svelte';\n\nconst app = new App({\n\ttarget: document.body,\n\tprops: {\n\t\tname: 'world'\n\t}\n});\n\nexport default app;"],"names":["noop","identity","x","assign","tar","src","k","run","fn","blank_object","Object","create","run_all","fns","forEach","is_function","thing","safe_not_equal","a","b","subscribe","store","callbacks","unsub","unsubscribe","component_subscribe","component","callback","$$","on_destroy","push","get_slot_context","definition","ctx","$$scope","slice","update_slot","slot","slot_definition","dirty","get_slot_changes_fn","get_slot_context_fn","slot_changes","lets","undefined","merged","len","Math","max","length","i","get_slot_changes","slot_context","p","is_client","window","now","performance","Date","raf","cb","requestAnimationFrame","tasks","Set","run_tasks","task","c","delete","f","size","append","target","node","appendChild","insert","anchor","insertBefore","detach","parentNode","removeChild","destroy_each","iterations","detaching","d","element","name","document","createElement","svg_element","createElementNS","text","data","createTextNode","space","empty","listen","event","handler","options","addEventListener","removeEventListener","attr","attribute","value","removeAttribute","getAttribute","setAttribute","set_svg_attributes","attributes","key","set_data","wholeText","set_input_value","input","current_component","set_current_component","get_current_component","Error","beforeUpdate","before_update","onMount","on_mount","afterUpdate","after_update","onDestroy","createEventDispatcher","type","detail","e","createEvent","initCustomEvent","custom_event","call","setContext","context","set","getContext","get","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","Promise","resolve","update_scheduled","schedule_update","then","flush","add_render_callback","flushing","seen_callbacks","update","pop","has","add","clear","fragment","outroing","outros","group_outros","r","check_outros","transition_in","block","local","transition_out","o","globals","globalThis","global","destroy_block","lookup","update_keyed_each","old_blocks","get_key","dynamic","list","destroy","create_each_block","next","get_context","n","old_indexes","new_blocks","new_lookup","Map","deltas","child_ctx","abs","will_move","did_move","m","first","new_block","old_block","new_key","old_key","get_spread_update","levels","updates","to_null_out","accounted_for","get_spread_object","spread_props","create_component","mount_component","customElement","new_on_destroy","map","filter","destroy_component","init","instance","create_fragment","not_equal","props","parent_component","bound","on_disconnect","skip_bound","ready","ret","rest","fill","make_dirty","hydrate","nodes","Array","from","childNodes","children","l","intro","SvelteComponent","[object Object]","this","$destroy","index","indexOf","splice","$$props","obj","$$set","keys","subscriber_queue","writable","start","stop","subscribers","new_value","run_queue","s","invalidate","subscriber","logs","Print","message","BreakLine","dispatch","logs_list","autoscroll","history","command","offsetHeight","scrollTop","scrollHeight","scrollTo","COMMAND_LIB","help","fit","reset","git","open","github","be","behance","web","email","navigator","clipboard","writeText","mail","Excute","Prompt","commands","split","isNaN","num","parseInt","charCode","w","screen","matchMedia","matches","passive","onTouchStartInWindow","supportsTouchEvents","hasTouch","maxTouchPoints","userAgent","isIPad","test","min","width","height","hasCoarsePrimaryPointer","hasAnyHoverOrAnyFinePointer","deviceType","primaryInput","GraphicContext","renderer","_rendererOptions","output","constructor","includes","JSON","stringify","validateRendererOptions","parsePadding","_padding","padding","Number","left","right","top","bottom","invalidPaddingError","applyPadding","range","offsetMin","offsetMax","console","warn","ensurePaddingSmallerThanRange","applyFlip","flip","applyZoom","translate","validateZoomFactor","NaN","delta","compare","lo","hi","mid","ascending","ascendingComparator","center","bisectRight","bisector","Adder","_partials","Float64Array","_n","j","y","e10","sqrt","e5","e2","tickIncrement","count","step","power","floor","log","LN10","error","pow","initRange","domain","arguments","factory","prototype","extend","parent","Color","darker","brighter","reI","reN","reP","reHex","reRgbInteger","RegExp","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","color_formatHex","rgb","formatHex","color_formatRgb","formatRgb","color","format","trim","toLowerCase","exec","rgbn","Rgb","rgba","hsla","hasOwnProperty","g","rgbConvert","opacity","rgb_formatHex","hex","rgb_formatRgb","round","toString","h","Hsl","hslConvert","hsl2rgb","m1","m2","copy","channels","displayable","formatHsl","gamma","nogamma","t","exponential","constant","linear","rgbGamma","end","colorRgb","genericArray","nb","na","setTime","reA","reB","source","am","bm","bs","bi","lastIndex","q","number","one","zero","join","string","date","ArrayBuffer","isView","DataView","isArray","valueOf","object","numberArray","unit","normalize","bimap","interpolate","d0","d1","r0","r1","polymap","reverse","bisect","clamp","unknown","transformer","transform","untransform","piecewise","interpolateValue","rescale","scale","invert","interpolateNumber","_","rangeRound","interpolateRound","u","continuous","formatDecimalParts","toExponential","coefficient","prefixExponent","re","formatSpecifier","specifier","match","FormatSpecifier","align","sign","symbol","comma","precision","exponent","%","toFixed","toLocaleString","replace","toPrecision","formatRounded","X","toUpperCase","locale","formatPrefix","prefixes","grouping","thousands","group","substring","currencyPrefix","currency","currencySuffix","decimal","numerals","formatNumerals","String","percent","minus","nan","newFormat","formatTypes","prefix","suffix","formatType","maybeSuffix","valuePrefix","valueSuffix","valueNegative","out","i1","i0","formatTrim","charCodeAt","Infinity","tickFormat","step0","step1","tickStep","precisionPrefix","precisionRound","precisionFixed","linearish","ticks","isFinite","nice","prestep","maxIter","ceil","apply","createScale","scaleLinear","newScale","lower","upper","flipped","isPointScale","isBandScale","createInvertMethod","createPolarTransformation","rangeX","rangeY","finalRangeX","finalRangeY","toTheta","PI","toRadius","fitX","fitY","coords","theta","radius","sin","cos","polarToCartesian","smallCoords","quadrant","getQuadrant","atan","cartesianToPolar","parseNeedsScaling","needsScaling","xNeedsScaling","yNeedsScaling","Boolean","createSectionContext","sectionData","zoomIdentity","kx","ky","ranges","coordinates","x1","x2","y1","y2","getRanges","finalRanges","sectionContext","flipX","flipY","getFinalRanges","scaleX","scaleY","scales","finalScales","bbox","getBbox","paddedBbox","getPaddedBbox","constructSectionContext","createScales","finalScaleX","finalScaleY","createFinalScales","transformation","getTotalTransformation","inverseTotalTransformation","getScaleTransformation","postScaleTransformation","scaleTransformation","point","inverseScaleTransformation","attachTransformations","minX","maxX","minY","maxY","formatLocale","EventTracker","eventManager","eventName","nativeEventName","useWindow","preventDefault","_eventManager","_eventName","_nativeEventName","_useWindow","_preventDefault","_numberOfActiveListeners","_callbacks","listenerId","_eventManagerHasBeenMounted","_attachNativeListenerIfNecessary","_removeNativeListenerIfNecessary","_mounted","_handleEvent","bind","_domNode","nativeEvent","screenCoordinates","_getScreenCoordinates","BaseEventManager","EXPOSED_EVENTS","managerType","_svgPoint","_trackers","_BROWSER_TYPE","_managerType","domNode","createSVGPoint","pointerEnabled","msPointerEnabled","setNativeEventName","_getNativeMouseEventName","_getNativeTouchEventName","attachAllListeners","str","charAt","MouseEventManager","super","exposedEventName","BROWSER_TYPE","sliceOffMouse","lastPart","capitalize","clientX","clientY","matrixTransform","getScreenCTM","inverse","WINDOW_EVENTS","PREVENT_DEFAULT","TouchEventManager","sliceOffTouch","touches","getTouches","_getScreenCoordinatesSingle","_getScreenCoordinatesMulti","touch","touchesInScreenCoordinates","EventManager","detectIt.primaryInput","_mouseEventManager","_touchEventManager","_forEachManager","manager","addRootNode","attachEventListeners","BaseInteractionManager","_id","_section","_markInteractionInterface","_sectionInteractionInterface","id","BaseInteractionInterface","interactionManager","InteractionHandlers","_interactionManager","_handlers","handlerName","interactionName","interactionNameToHandlerName","indexPoint","markData","pointAttributes","item","calculateBboxPoint","markType","markId","indexPointLayer","layerAttributes","keyArray","layerId","items","getPointAttributes","pixelGeometry","pixelGeometryObject","radiusObject","tau","streamGeometry","geometry","stream","streamGeometryType","streamObjectType","Feature","FeatureCollection","features","Sphere","sphere","Point","MultiPoint","LineString","streamLine","MultiLineString","Polygon","streamPolygon","MultiPolygon","GeometryCollection","geometries","closed","coordinate","lineStart","lineEnd","polygonStart","polygonEnd","x00","y00","x0","y0","areaSum","areaRingSum","areaStream","areaRingStart","areaRingEnd","result","area","areaPointFirst","areaPoint","boundsStream","bounds","X0","Y0","Z0","X1","Y1","Z1","X2","Y2","Z2","centroidStream","centroidPoint","centroidLineStart","centroidLineEnd","centroidRingStart","centroidRingEnd","centroid","centroidPointFirstLine","centroidPointLine","dx","dy","z","centroidPointFirstRing","centroidPointRing","PathContext","_context","_radius","pointRadius","_line","_point","closePath","moveTo","lineTo","arc","lengthRing","lengthSum","lengthStream","lengthPointFirst","lengthPoint","PathString","_string","circle","projection","projectionStream","contextStream","path","pathArea","measure","pathMeasure","pathBounds","pathCentroid","isInvalid","isDefined","isUndefined","calculateBboxGeometry","_circle","geoPath","isLinearRing","ring","isPolygon","isMultiPolygon","polygonArea","polygon","getRingArea","getPolygonArea","multiPolygon","totalArea","getMultiPolygonArea","total","getSignedRingArea","pointDistance","point1","point2","linearRingLength","linearRing","totalLength","calculateCentroid","calculateLinearRingCentroid","polygonCentroid","calculateMultiPolygonCentroid","isLineString","isMultiLineString","multiLineString","lineString","lineStringCentroid","calculateMultiLineStringCentroid","nPts","off","p1","p2","twicearea","pointIntersectsLineSegment","lineSegment","lineWidth","closestPoint","C","D","dot","lengthSquared","xx","yy","param","closestPointOnLineSegment","distanceClosestPointOnLineSegment","SPLITTER","ahi","alo","bhi","blo","ne","nf","bv","scalarScalar","eptr","fptr","ei","ea","fi","fa","_x","_bv","q0","q1","br","ar","ts","twoProduct","pq","twoSum","cofactor","generateSum","expr","determinant","orientation","pos","neg","matrix","args","posExpr","negExpr","funcName","code","Function","proc","robustSum","robustScale","robustSubtract","orientation3Exact","orientation4Exact","CACHED","det","tol","adx","bdx","cdx","ady","bdy","cdy","adz","bdz","cdz","bdxcdy","cdxbdy","cdxady","adxcdy","adxbdy","bdxady","slowOrient","procArgs","module","concat","exports","generateOrientationProc","vs","inside","lim","yi","yj","orient","yk","px","pointInPolygonCoordinates","pointInPolygon","pointInMultiPolygon","pointInRing","robustPointInPolygon","invalidInputError","getInput","ensureSameLength","roundPoint","decimals","zeroes","transformLinearRing","settings","simplify","transformedLinearRing","transformLinearRingUnsimplified","simplificationThreshold","lastPoint","transformLinearRingSimplified","transformSetOfLinearRings","linearRings","transformedLinearRings","transformXYArrays","transformXYArraysUnsimplified","transformXYArraysSimplified","transformFunctions","transformPoint","transformMultiPoint","multiPoint","transformLineString","transformMultiLineString","transformPolygon","transformMultiPolygon","polygons","transformedPolygons","transformGeometry","_transformation","functionName","getNumberOfInterpolatedPoints","to","toPolar","interpolationThreshold","fromScaledDown","toScaledDown","totalScaleFactor","totalScaleFactorX","totalScaleFactorY","getTotalScaleFactor","straightInYDimension","numberOfPointsNeeded","interval","aSq","bSq","asinh","getPolarLength","pointsSorted","getFunctionalForm","interpolatePoints","interpolator","interpolateLinearRing","transformations","interpolatedLinearRing","fromScaled","toScaled","interpolateLinearRingUnsimplified","interpolateSetOfLinearRings","interpolatedLinearRings","interpolateXYArrays","interpolateXYArraysUnsimplified","interpolateFunctions","interpolateLineString","interpolateMultiLineString","interpolatePolygon","interpolateMultiPolygon","polarGeometry","_transformations","_postScaleTransformation","define","earcut","holeIndices","dim","invSize","hasHoles","outerLen","outerNode","linkedList","triangles","prev","queue","steiner","getLeftmost","sort","compareX","eliminateHole","filterPoints","eliminateHoles","earcutLinked","clockwise","last","signedArea","insertNode","equals","removeNode","again","ear","pass","zOrder","prevZ","nextZ","tail","numMerges","pSize","qSize","inSize","sortLinked","indexCurve","isEarHashed","isEar","cureLocalIntersections","splitEarcut","pointInTriangle","minTX","minTY","maxTX","maxTY","minZ","maxZ","intersects","locallyInside","isValidDiagonal","splitPolygon","hole","hx","hy","qx","mx","my","tanMin","sectorContainsSector","findHoleBridge","leftmost","ax","ay","bx","by","cx","cy","py","intersectsPolygon","middleInside","q2","o1","o2","o3","o4","onSegment","a2","Node","b2","an","bp","sum","feature","topology","properties","arcs","points","array","line","stitchedArcs","fragmentByStart","fragmentByEnd","fragments","emptyIndex","p0","dp","ends","fg","unshift","gf","mergeArcs","objects","polygonsByArc","groups","extract","planarRingArea","neighbors","stitch","ki","getOrderDescending","indexArray","sortIntoOrder","order","getInsertionIndexDescending","arraySortedDescending","removeClosingPoint","closeRing","firstPoint","insertPointsLinearRing","inputLinearRing","numberOfAdditionalPoints","cloneLinearRing","insertPoints","insertPointsLineString","inputLineString","edgeLengths","edges","edge","getEdge","getEdgeLengths","orderedEdgeIds","longestEdgeId","edgeLength","newEdges","splitEdge","newEdgesLength","shift","insertOrderedId","clonedLinearRing","pointInBetween","orderedIds","valueIndex","newValue","idsWereInserted","currentArrayValue","isPolygonOrMultiPolygon","isLineStringOrMultiLineString","matchLinearRings","fromRings","toRings","fromAreas","toAreas","fromAreasOrderDescending","toAreasOrderDescending","pairs","fromIndex","fromOrder","bestOrder","polygonToPolygon","fromOuterRing","toOuterRing","fromOuterRingPrepared","toOuterRingPrepared","prepareLinearRings","neitherHasHoles","outerRingInterpolator","createInterpolatorNoHoles","holeInterpolators","holeInterpolator","createInterpolatorWithHoles","numberOfMatchableHoles","fromHoles","getHoles","toHoles","fromHolesSorted","fromHole","toHole","fromHolePrepared","toHolePrepared","createMatchableHoleInterpolators","differenceBetweenNumberOfHoles","createHoleImploders","createHoleExploders","createHoleInterpolators","fromRing","toRing","lengthDifference","toLinearRing","fromLinearRing","fromLength","bestOffset","sumOfSquares","spliced","offset","distance","rotatePointsLinearRing","numberOfHoles","holes","interpolators","smallRectangleAroundCentroid","makeSmallRectangleAroundPoint","preparedPolygon","preparedImplodePoint","epsilon","createTriangleIndexArcs","triangleIndices","createArcSlug","getPoint","vertices","createTopoPolygon","getTriangleArea","triangleIndexArcs","deviation","trianglesArea","flatten","dimensions","holeIndex","collapseTopology","numberOfPieces","triangleGeometries","mergeSmallestFeature","RangeError","smallest","neighborIndex","geoms","sourceArcs","neighbor","targetArcs","some","findNeighbor","cutTriangleInTwo","triangle","pointBetweenAB","createTriangleGeometry","cutPolygon","flattenedPolygon","numberOfTriangles","getNumberOfTriangles","arcIndices","slug","pointIndex","createTopology","areas","areasSorted","geometriesSorted","cutTriangles","areaCutTriangles","areaCutTriangle","cutTriangle","insertionIndex","sliceUpTriangles","outerRing","createGeometries","cutPolygons","numberOfDesiredAdditionalPolygons","wrongNumberOfPolygonsError","numberOfCutsPerPolygon","assignCuts","resultingPolygons","numberOfCuts","numberOfDesiredPolygons","polygonAreas","splitMultiPolygon","polygonCoordinates","createInterpolatorPolygons","fromPolygons","toPolygons","polygonInterpolators","fromPolygon","toPolygon","inputGeometries","inputGeometry","combineIntoMultiPolygon","polygonInterpolator","multiPolygonToPolygon","numberOfFromPolygons","lineStringtoLineString","preparedFromCoordinates","preparedToCoordinates","prepareCoordinates","coordinateInterpolator","createInterpolator","fromCoordinates","toCoordinates","normalTotalSquareDistance","getTotalSquaredDistancePositions","fromReversed","reversedTotalSquareDistance","reverseIfBetterMatching","totalSquaredDistance","movePointAlongLine","unitVector","movePoint","magnitude","getUnitVector","multiLineStringToLineString","numberOfFromLineStrings","cutLineString","createMultiLineStringInterpolator","createLineStringInterpolators","numberOfLineStrings","multiLineStringCoordinates","desiredSegmentSize","lastPointIndex","currentSegment","elapsedDistanceSinceLastCut","distanceAB","distanceIncludingCurrentSegment","cutCoordinates","calculateCutCoordinates","lastCut","pointsEqual","cuts","fromLineString","toLineString","preparedFromLineString","preparedToLineString","lineStringInterpolators","lineStringInterpolator","matchLineStrings","inputLengths","targetLengths","inputLengthOrderDescending","targetLengthOrderDescending","inputIndex","targetIndex","inputOrder","getInputOrder","splitLineStrings","lineStrings","numberOfDesiredLineStrings","numberOfCutsPerLineString","lengths","getLengths","resultingLineStrings","numberOfDesiredPieces","transshape","bothPolygons","bothLines","ensureValidInput","reverseInterpolator","polygonToMultiPolygon","multiPolygonToMultiPolygon","lineStringToMultiLineString","fromLineStrings","toLineStrings","multiLineStringToMultiLineString","transitionGeometry","fromGeometry","toGeometry","pointTransition","polygonTransition","lineStringTransition","transitionGeometries","fromLayer","toLayer","firstFromGeometry","getFirstGeometry","firstToGeometry","transitionLayer","polygonTypes","lineStringTypes","layer","interpolationMethod","interpolatorObject","getRectangleAttributes","screenGeometry","screenGeometryObject","getPolygonAttributes","indexLineString","lineStringCoords","lineAttributes","lineStringIndex","indexableSegments","createSegmentItem","indexMultiLineString","segment","segmentGeometry","createItemFromBbox","strokeWidth","halfStrokeWidth","newBbox","takeIntoAccountStrokeWidth","segmentIndex","createLineAttributes","strokeWidthObject","modifyForLayer","segments","segmentItem","getAreaAttributes","getSymbolAttributes","markIndexing","Rectangle","rectangleAttributes","polygonAttributes","Line","Label","Area","areaAttributes","Symbol","symbolAttributes","layerIndexing","MarkInteractionInterface","_indexableMarks","_indexableLayers","indexableMark","indexingFunction","layerType","layerData","indexableLayer","_getHandler","addMarkInteraction","hasMark","removeMarkInteraction","addLayerInteraction","hasLayer","removeLayerInteraction","SectionInteractionInterface","addInteraction","hasInteraction","removeInteraction","BaseInteractionHandler","_interactionName","getId","events","eventTracker","addListener","removeListener","exp","_maxEntries","_minEntries","leaf","all","_all","search","toBBox","collides","load","_build","_splitRoot","_insert","remove","_condense","compareMinX","compareMinY","toJSON","fromJSON","_chooseSubtree","_split","_adjustParentBBoxes","_chooseSplitAxis","_chooseSplitIndex","v","M","_allDistMargin","pointCollision","SpatialIndex","interactionHandler","getMark","getLayer","_rbush","RBush","_interactionHandler","_getMark","_getLayer","mark","multipleSegments","mouseCoordinates","searchArea","searchAreaFromCoordinates","indexQueryResults","_getHits","boundingBox","hits","indexQueryResult","collisionTest","collisionTests","indexableItem","MarkInteractionHandler","_spatialIndex","marks","_numberOfInteractions","_markCallbacks","_layerCallbacks","_addEventListenerIfNecessary","indexMark","_removeEventListenerIfNecessary","unindexMark","indexLayer","unindexLayer","_addEventListener","_removeEventListener","createMarkEvent","eventType","eventOptions","hit","hitBbox","extractBbox","hitSource","createLayerEvent","createSectionEvent","nativeType","INTERESTING_NATIVE_KEYS","createSelectMarkEvent","createSelectLayerEvent","getLocalCoordinates","section","clampedX","clampedY","localX","localY","coordinatesAreInsideSection","hitIsMark","hitIsInLayer","getHitId","queryMouseCoordinates","localCoordinates","clickEvent","_previousMouseoverIds","_currentMouseoverIds","hitId","_fireCallback","mouseoverEvent","_previousMouseoverHits","_currentMouseoverHits","mouseoutEvent","mousedownEvent","mouseupEvent","_currentHits","_handleMousedown","_handleMousemove","_handleMouseup","dragType","mousedragEvent","SectionInteractionHandler","_callback","scrollLineHeight","stopPropagation","wheelEvent","wheelDelta","deltaY","iframe","body","idoc","contentWindow","write","close","firstElementChild","getScrollLineHeight","deltaMode","getDelta","_mouseCurrentlyOverSection","mousemoveEvent","MouseInteractionManager","MarkInteractionHandlers","SectionInteractionHandlers","numberOfTouches","touchdownEvent","touchupEvent","_previousHits","_handleTouchstart","_handleTouchmove","touchoverEvent","_handleTouchend","touchoutEvent","touchdragEvent","allCoordinatesAreInsideSection","screenCoordinatesArray","every","getDistance","coords1","coords2","touchmoveEvent","_fingerCurrentlyOverSection","_previousTouchDistance","sectionHeight","getCenter","touchDistance","relativeTouchDelta","pinchEvent","screenCenter","localCenter","TouchInteractionManager","bboxPoint","getLineAttributes","SelectManager","_selectableMarks","_selectableLayers","_previousSelection","_currentSelection","_selectPolygon","rectangle","queryBoundingBox","rectangleToRBushBbox","_fireSelectCallback","_fireDeselectCallback","startCoordinates","parseCoordinates","lastThreePointsPolygon","_getLastThreePointsPolygon","bboxToRBushBbox","_delta","getSelectPolygon","selectEvent","onSelect","deselectEvent","onDeselect","is2dArray","isXYObject","InteractionManager","_mouseInteractionManager","_touchInteractionManager","_selectManager","setId","linkEventManager","mouse","loadSection","slot_ctx","idCounter","graphicId","viewBox","preserveAspectRatio","onClick","onWheel","onMousedown","onMouseup","onMouseover","onMouseout","onMousemove","onPinch","onTouchdown","onTouchmove","onTouchup","onTouchover","onTouchout","backgroundColor","paddingColor","blockReindexing","clip","graphicContext","GraphicContext.init","SectionContext.init","eventManagerContext","EventManagerContext.init","interactionManagerContext","InteractionManagerContext.init","rootNode","EventManagerContext.update","InteractionManagerContext.update","numberWidth","numberHeight","originalViewBox","originalViewBoxArray","_rootNode","getElementById","GraphicContext.update","SectionContext.update","sectionId","$interactionManagerContext","$sectionContext","clipPropsPadding","getClipPropsPadding","clipPropsNoPadding","getClipPropsNoPadding","sectionInterface","removeAllInteractions","removeSectionInteractionsIfNecessary","select","selectRectangle","updateSelectRectangle","resetSelectRectangle","startSelectPolygon","pointCoordinates","addPointToSelectPolygon","moveSelectPolygon","resetSelectPolygon","keyProp","createPixelGeometryFromGeometry","renderSettings","geometryNeedsScaling","ensureValidGeometry","interpolationNecessary","createPixelGeometryObjectFromGeometry","getKeyArray","ensureValidCombination","onlyOne","invalidCoordinateValueError","wereSpecified","scaleCoordinate","coordinateName","scaledCoordinate","parentScale","throwErrorIfInvalidScaledCoordinate","createScaledGeometry","required","default","stroke","fillOpacity","strokeOpacity","fontFamily","fontSize","fontWeight","rotation","anchorPoint","shape","independentAxis","aesthetics","validateAesthetics","pointAesthetics","rectangleAesthetics","polygonAesthetics","lineAesthetics","labelAesthetics","symbolAesthetics","areaAesthetics","passedAesthetics","allowedAesthetics","aestheticName","aestheticValue","aestheticRequirements","aestheticNotAllowedError","aestheticRequiredError","ensureValidGeometryProps","getInputType","propNeedsScaling","prop","createPixelGeometry","geometryProps","inputType","createPixelGeometryFromXYArrays","geometryType","validateXYArrays","xNotClosed","yNotClosed","closeIfNecessary","rendervousInput","createRendervousInput","createPixelGeometryObjectFromXYArrays","cross","cross-sharp","diamond","triangle-up","triangle-down","triangle-right","triangle-left","star4","star5","star","star6","star8","pentagon","hexagon","heptagon","septagon","octagon","nonagon","decagon","representPointAsPolygon","circumference","steps","createSymbolGeometry","pointGeometry","createPoint","halfSize","createSquareGeometry","createSquare","geometryAlias","createSymbolFromGeometry","validateProps","normalized","coordinateProps","definedTypes","definedProps","entries","reduce","acc","definedKeys","arrayLength","values","val","idx","arr","augmentProps","indAx","indKey","indVal","depKey1","depVal1","depKey2","depVal2","depVal1Map","singleton","depVal2Map","none","scaleMap","scaleCoordinates","scaled","bottomPoints","topPoints","origin","createPixelGeometryObject","validateXYProps","xScaled","yScaled","xArray","yArray","recycle","applyRecyclingIfNecessary","totalTransformation","geometryObject","transformXYArraysIntoGeometryObject","createPixelGeometryObjectFromCoordinates","validateGeometryPropLayer","geometryArray","transformGeometryArrayIntoGeometryObject","coordinateNames","coordMap","getMissingCoordinateFromContext","invalidCoordinateError","_scaleCoordinates","coordinateValues","coordinatesThatNeedScaling","coordinatesThatArePrimitive","scaledCoordinates","coordinateValue","startsWith","generateArrayOfLength","createPropGetter","propObject","validatePropArrayLength","createPropObject","markPixelGeometryFuncs","Proxy","createPixelGeometryPoint","validateTypes","extracted","layerPixelGeometryFuncs","createPixelGeometryObjectPoint","whichCoordinatesNeedScaling","nonMissingCoordinates","getCoordinateValues","getMissingCoordinatesFromContext","atLeastOneArray","getNRectangles","whichCoordinatesArePrimitive","scaledGeometryArray","createScaledGeometryArray","pointGeometryObject","shapeGetter","sizeGetter","symbolGeometryObject","createSymbolGeometryObject","allowedProps","numAreas","augmentedAreas","indKey1","indVal1","indKey2","indVal2","indValMap","array of arrays","augmentAreas","normalizedAreas","numAreasAll","validateAreas","isSingleton","isNestedArray","xs","normalizeAreas","areaIndex","representLineAsPolygon","lineCoordinates","createOuterRing","coordinatesBottom","coordinatesTop","bottomPoint","topPoint","getCornerPointsStart","getCornerPointsEnd","getCornerPointsIndex","ringIsNotClosed","getNextSegment","getParallelPoints","getPreviousSegment","previousSegment","nextSegment","previousUnitVector","nextUnitVector","previousCornerPerpendicularPoints","nextCornerPerpendicularPoints","findIntersection","normalVector","vector","vector1","vector2","lambda1","v1","v2","deltaX","v1x","v2x","v1y","v2y","findLambda","markRepresentAsPolygonFuncs","layerRepresentAsPolygonFuncs","lines","cubicOut","is_date","get_interpolator","getTime","tweened","defaults","target_value","opts","previous_task","started","delay","duration","easing","abort","promise","fulfill","loop","elapsed","createTransitionable","transitionOptions","createOptionsFromDuration","aestheticTransition","defaultOptions","createOptionsFromOptions","transitionsEqual","numberOfKeys","aesthetic","aestheticA","aestheticB","aestheticTransitionObjectsEqual","transitionObjectsEqual","createTransitionableLayer","interpolateLayer","aWithoutObsoleteKeys","arg","parseRenderSettings","geoPathGenerator","textAnchorPoint","textAnchor","dominantBaseline","generatePath","initPhase","initDone","transition","onMousedrag","onTouchdrag","_asPolygon","positioningAesthetics","representAsPolygon","asPolygon","GraphicContext.subscribe","SectionContext.subscribe","InteractionManagerContext.subscribe","updatePixelGeometry","updateScreenGeometry","tr_screenGeometry","tr_radius","tr_fill","tr_stroke","tr_strokeWidth","tr_fillOpacity","tr_strokeOpacity","tr_opacity","tr_fontSize","tr_fontWeight","tr_rotation","previousTransition","rotateTransform","$tr_rotation","$tr_screenGeometry","parsedTextAnchorPoint","pixelGeometryRecalculationNecessary","screenGeometryRecalculationNecessary","updateInteractionManagerIfNecessary","removeMarkFromSpatialIndexIfNecessary","isInteractiveMouse","markInterface","loadMark","createDataNecessaryForIndexing","isInteractiveTouch","selectManager","markIsLoaded","removeMark","removeMarkFromSelectIfNecessary","isSelectable","markMouseInterface","removeAllMarkInteractions","markTouchInterface","geometryTypes","createDataNecessaryForIndexingMark","$tr_radius","$tr_fill","$tr_stroke","$tr_strokeWidth","$tr_fillOpacity","$tr_strokeOpacity","$tr_opacity","$tr_fontSize","$tr_fontWeight","any","renderPolygon","renderCircle","renderLine","renderLabel","generatePropObject","propValue","propObj","representAsPolygonObject","updatePixelGeometryObject","fillObject","strokeObject","strokeOpacityObject","fillOpacityObject","opacityObject","textObject","fontFamilyObject","fontSizeObject","fontWeightObject","rotationObject","anchorPointObject","updateScreenGeometryObject","tr_screenGeometryObject","tr_radiusObject","tr_fillObject","tr_strokeObject","tr_strokeWidthObject","tr_strokeOpacityObject","tr_fillOpacityObject","tr_opacityObject","tr_fontSizeObject","tr_fontWeightObject","tr_rotationObject","pixelGeometryObjectRecalculationNecessary","screenGeometryObjectRecalculationNecessary","removeLayerFromSpatialIndexIfNecessary","loadLayer","layerIsLoaded","removeLayer","removeLayerFromSelectIfNecessary","removeAllLayerInteractions","geometryObjects","aestheticsObjects","createDataNecessaryForIndexingLayer","$tr_screenGeometryObject","$tr_radiusObject","$tr_fillObject","$tr_strokeObject","$tr_strokeWidthObject","$tr_strokeOpacityObject","$tr_fillOpacityObject","$tr_opacityObject","$tr_fontSizeObject","$tr_fontWeightObject","$tr_rotationObject","parseHJust","hjust","xOffset","parseVJust","vjust","yOffset","getTickPositions","tickValuesArray","tickCount","tickExtra","isContinuous","rescaledDomain","rescaledRange","getContinuousTicks","getFormat","labelFormat","numberOfTicks","getTextWidth","canvas","font","measureText","getTitleCoordinatesXAxis","axisHeight","yAbsoluteAxis","heightOffset","getHeightOffset","xAbsolute","yAbsolute","getTitleCoordinatesYAxis","axisWidth","xAbsoluteAxis","widthOffset","getWidthOffset","baseLine","baseLineColor","baseLineOpacity","baseLineWidth","tickValues","tickSize","tickWidth","tickColor","tickOpacity","labelOffset","labelRotate","labelFont","labelFontSize","labelFontWeight","labelOpacity","labelColor","titleHjust","titleXOffset","titleVjust","titleYOffset","title","titleColor","titleFont","titleFontSize","titleFontWeight","titleOpacity","titleRotation","titleAnchorPoint","baseLineCoordinates","getBaseLineCoordinatesXAxis","tickPositions","tickCoordinates","bandOffset","bandwidth","yEndAbsolute","yCoordsTick","getTickCoordinatesXAxis","tickLabelText","tickLabelCoordinates","yEnd","yLabelAbsolute","getTickLabelCoordinatesXAxis","labelAnchorPoint","titleCoordinates","getBaseLineCoordinatesYAxis","xEndAbsolute","getTickCoordinatesYAxis","xEnd","xLabelAbsolute","getTickLabelCoordinatesYAxis","tickLabelWidth","extra","positions","getCoordinatesXRaster","getCoordinatesYRaster","label","GRID_COLOR","MAX","canvasSize","innerWidth","innerHeight","LABELS_AMOUNT","N_FOR_LABEL","COLORS","ERROR","RADIUS","euclideanDistance","generateData","nForLabel","centers","angle","random","labels","Update","x_sum","y_sum","Mean","Assignment","change","contain","minDis","dis","Reset","setInterval","clearInterval"],"mappings":"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"}