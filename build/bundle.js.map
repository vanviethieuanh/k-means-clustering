{"version":3,"file":"bundle.js","sources":["../../node_modules/svelte/internal/index.mjs","../../node_modules/@snlab/florence/src/utils/detect.js","../../node_modules/svelte/store/index.mjs","../../node_modules/@snlab/florence/src/components/Core/Graphic/GraphicContext/index.js","../../node_modules/@snlab/florence/src/components/Core/utils/padding.js","../../node_modules/@snlab/florence/src/components/Core/Section/SectionContext/getRanges.js","../../node_modules/d3-array/src/ascending.js","../../node_modules/d3-array/src/bisector.js","../../node_modules/d3-array/src/bisect.js","../../node_modules/d3-array/src/number.js","../../node_modules/d3-array/src/fsum.js","../../node_modules/d3-array/src/ticks.js","../../node_modules/d3-scale/src/init.js","../../node_modules/d3-color/src/define.js","../../node_modules/d3-color/src/color.js","../../node_modules/d3-interpolate/src/constant.js","../../node_modules/d3-interpolate/src/color.js","../../node_modules/d3-interpolate/src/rgb.js","../../node_modules/d3-interpolate/src/numberArray.js","../../node_modules/d3-interpolate/src/array.js","../../node_modules/d3-interpolate/src/date.js","../../node_modules/d3-interpolate/src/number.js","../../node_modules/d3-interpolate/src/object.js","../../node_modules/d3-interpolate/src/string.js","../../node_modules/d3-interpolate/src/value.js","../../node_modules/d3-interpolate/src/round.js","../../node_modules/d3-scale/src/number.js","../../node_modules/d3-scale/src/continuous.js","../../node_modules/d3-scale/src/constant.js","../../node_modules/d3-format/src/formatDecimal.js","../../node_modules/d3-format/src/exponent.js","../../node_modules/d3-format/src/formatSpecifier.js","../../node_modules/d3-format/src/formatPrefixAuto.js","../../node_modules/d3-format/src/formatRounded.js","../../node_modules/d3-format/src/formatTypes.js","../../node_modules/d3-format/src/identity.js","../../node_modules/d3-format/src/locale.js","../../node_modules/d3-format/src/defaultLocale.js","../../node_modules/d3-format/src/formatGroup.js","../../node_modules/d3-format/src/formatNumerals.js","../../node_modules/d3-format/src/formatTrim.js","../../node_modules/d3-scale/src/tickFormat.js","../../node_modules/d3-format/src/precisionPrefix.js","../../node_modules/d3-format/src/precisionRound.js","../../node_modules/d3-format/src/precisionFixed.js","../../node_modules/d3-scale/src/linear.js","../../node_modules/@snlab/florence/src/components/Core/Section/SectionContext/createScales.js","../../node_modules/@snlab/florence/src/components/Core/Section/SectionContext/polar.js","../../node_modules/@snlab/florence/src/components/Core/Section/SectionContext/attachTransformations.js","../../node_modules/@snlab/florence/src/components/Core/Section/SectionContext/createSectionContext.js","../../node_modules/@snlab/florence/src/components/Core/Section/SectionContext/index.js","../../node_modules/@snlab/florence/src/components/Core/Graphic/EventManagerContext/index.js","../../node_modules/@snlab/florence/src/components/Core/Section/InteractionManagerContext/index.js","../../node_modules/@snlab/florence/src/interactivity/events/EventTracker.js","../../node_modules/@snlab/florence/src/interactivity/events/BaseEventManager.js","../../node_modules/@snlab/florence/src/utils/capitalize.js","../../node_modules/@snlab/florence/src/interactivity/events/MouseEventManager.js","../../node_modules/@snlab/florence/src/interactivity/events/TouchEventManager.js","../../node_modules/@snlab/florence/src/interactivity/events/EventManager.js","../../node_modules/@snlab/florence/src/interactivity/interactions/base/managers/BaseInteractionManager.js","../../node_modules/@snlab/florence/src/interactivity/interactions/base/interfaces/BaseInteractionInterface.js","../../node_modules/@snlab/florence/src/interactivity/interactions/base/interfaces/createIndexableData/indexPoint.js","../../node_modules/d3-geo/src/math.js","../../node_modules/d3-geo/src/noop.js","../../node_modules/d3-geo/src/stream.js","../../node_modules/d3-geo/src/path/area.js","../../node_modules/d3-geo/src/identity.js","../../node_modules/d3-geo/src/path/bounds.js","../../node_modules/d3-geo/src/path/centroid.js","../../node_modules/d3-geo/src/path/context.js","../../node_modules/d3-geo/src/path/measure.js","../../node_modules/d3-geo/src/path/string.js","../../node_modules/d3-geo/src/path/index.js","../../node_modules/@snlab/florence/src/utils/equals.js","../../node_modules/@snlab/florence/src/utils/geometryUtils/calculateBbox.js","../../node_modules/@snlab/florence/src/utils/geometryUtils/geometryDetectors.js","../../node_modules/@snlab/florence/src/utils/geometryUtils/polygonArea.js","../../node_modules/@snlab/florence/src/utils/geometryUtils/distance.js","../../node_modules/@snlab/florence/src/utils/geometryUtils/calculateCentroid.js","../../node_modules/@snlab/florence/src/utils/geometryUtils/closestPointOnLine.js","../../node_modules/two-product/two-product.js","../../node_modules/robust-sum/robust-sum.js","../../node_modules/two-sum/two-sum.js","../../node_modules/robust-scale/robust-scale.js","../../node_modules/robust-subtract/robust-diff.js","../../node_modules/robust-orientation/orientation.js","../../node_modules/robust-point-in-polygon/robust-pnp.js","../../node_modules/@snlab/florence/src/utils/geometryUtils/pointInPolygon.js","../../node_modules/@snlab/rendervous/dist/rendervous.esm.js","../../node_modules/@snlab/transshape/node_modules/d3-color/src/define.js","../../node_modules/@snlab/transshape/node_modules/d3-color/src/color.js","../../node_modules/@snlab/transshape/node_modules/d3-interpolate/src/constant.js","../../node_modules/@snlab/transshape/node_modules/d3-interpolate/src/color.js","../../node_modules/@snlab/transshape/node_modules/d3-interpolate/src/rgb.js","../../node_modules/@snlab/transshape/node_modules/d3-interpolate/src/numberArray.js","../../node_modules/@snlab/transshape/node_modules/d3-interpolate/src/array.js","../../node_modules/@snlab/transshape/node_modules/d3-interpolate/src/date.js","../../node_modules/@snlab/transshape/node_modules/d3-interpolate/src/number.js","../../node_modules/@snlab/transshape/node_modules/d3-interpolate/src/object.js","../../node_modules/@snlab/transshape/node_modules/d3-interpolate/src/string.js","../../node_modules/@snlab/transshape/node_modules/d3-interpolate/src/value.js","../../node_modules/earcut/src/earcut.js","../../node_modules/topojson-client/src/identity.js","../../node_modules/topojson-client/src/feature.js","../../node_modules/topojson-client/src/transform.js","../../node_modules/topojson-client/src/reverse.js","../../node_modules/topojson-client/src/stitch.js","../../node_modules/topojson-client/src/merge.js","../../node_modules/@snlab/transshape/dist/transshape.esm.js","../../node_modules/@snlab/florence/src/utils/geometryUtils/transition.js","../../node_modules/@snlab/florence/src/interactivity/interactions/utils/createItemFromBbox.js","../../node_modules/@snlab/florence/src/interactivity/interactions/base/interfaces/createIndexableData/indexRectangle.js","../../node_modules/@snlab/florence/src/interactivity/interactions/base/interfaces/createIndexableData/indexPolygon.js","../../node_modules/@snlab/florence/src/interactivity/interactions/base/interfaces/createIndexableData/indexLine.js","../../node_modules/@snlab/florence/src/interactivity/interactions/base/interfaces/createIndexableData/indexArea.js","../../node_modules/@snlab/florence/src/interactivity/interactions/base/interfaces/createIndexableData/indexSymbol.js","../../node_modules/@snlab/florence/src/interactivity/interactions/base/interfaces/createIndexableData/index.js","../../node_modules/@snlab/florence/src/interactivity/interactions/base/interfaces/MarkInteractionInterface.js","../../node_modules/@snlab/florence/src/interactivity/interactions/base/interfaces/SectionInteractionInterface.js","../../node_modules/@snlab/florence/src/interactivity/interactions/base/handlers/BaseInteractionHandler.js","../../node_modules/rbush/rbush.min.js","../../node_modules/@snlab/florence/src/interactivity/interactions/SpatialIndex/collisionTests/pointCollision.js","../../node_modules/@snlab/florence/src/interactivity/interactions/SpatialIndex/collisionTests/index.js","../../node_modules/@snlab/florence/src/interactivity/interactions/SpatialIndex/collisionTests/rectangleCollision.js","../../node_modules/@snlab/florence/src/interactivity/interactions/SpatialIndex/collisionTests/polygonCollision.js","../../node_modules/@snlab/florence/src/interactivity/interactions/SpatialIndex/collisionTests/lineCollision.js","../../node_modules/@snlab/florence/src/interactivity/interactions/SpatialIndex/collisionTests/symbolCollision.js","../../node_modules/@snlab/florence/src/interactivity/interactions/SpatialIndex/collisionTests/areaCollision.js","../../node_modules/@snlab/florence/src/interactivity/interactions/SpatialIndex/index.js","../../node_modules/@snlab/florence/src/interactivity/interactions/base/handlers/MarkInteractionHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/utils/createEvent.js","../../node_modules/@snlab/florence/src/interactivity/interactions/utils/getLocalCoordinates.js","../../node_modules/@snlab/florence/src/interactivity/interactions/utils/hitUtils.js","../../node_modules/@snlab/florence/src/interactivity/interactions/mouse/mark/ClickHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/mouse/mark/MouseoverHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/mouse/mark/MouseoutHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/mouse/mark/MousedownHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/mouse/mark/MouseupHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/mouse/mark/MousedragHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/base/handlers/SectionInteractionHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/mouse/section/WheelHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/utils/getScrollLineHeight.js","../../node_modules/@snlab/florence/src/interactivity/interactions/mouse/section/ClickHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/mouse/section/MousedownHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/mouse/section/MouseupHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/mouse/section/MouseoverHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/mouse/section/MouseoutHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/mouse/section/MousemoveHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/mouse/MouseInteractionManager.js","../../node_modules/@snlab/florence/src/interactivity/interactions/utils/numberOfTouches.js","../../node_modules/@snlab/florence/src/interactivity/interactions/touch/mark/TouchdownHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/touch/mark/TouchupHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/touch/mark/TouchoverHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/touch/mark/TouchoutHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/touch/mark/TouchdragHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/touch/section/PinchHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/touch/section/TouchdownHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/touch/section/TouchmoveHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/touch/section/TouchupHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/touch/section/TouchoverHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/touch/section/TouchoutHandler.js","../../node_modules/@snlab/florence/src/interactivity/interactions/touch/TouchInteractionManager.js","../../node_modules/@snlab/florence/src/interactivity/interactions/select/createIndexableData/utils/bboxPoint.js","../../node_modules/@snlab/florence/src/interactivity/interactions/select/createIndexableData/indexPoint.js","../../node_modules/@snlab/florence/src/interactivity/interactions/select/createIndexableData/indexRectangle.js","../../node_modules/@snlab/florence/src/interactivity/interactions/select/createIndexableData/indexPolygon.js","../../node_modules/@snlab/florence/src/interactivity/interactions/select/createIndexableData/indexLine.js","../../node_modules/@snlab/florence/src/interactivity/interactions/select/createIndexableData/indexArea.js","../../node_modules/@snlab/florence/src/interactivity/interactions/select/createIndexableData/index.js","../../node_modules/@snlab/florence/src/interactivity/interactions/select/SelectManager.js","../../node_modules/@snlab/florence/src/interactivity/interactions/InteractionManager.js","../../node_modules/@snlab/florence/src/components/Core/Graphic/Graphic.svelte","../../node_modules/@snlab/florence/src/components/Core/Section/getClipProps.js","../../node_modules/@snlab/florence/src/components/Marks/utils/getKeyArray.js","../../node_modules/@snlab/florence/src/components/Marks/utils/createPixelGeometryFromGeometry.js","../../node_modules/@snlab/florence/src/components/Marks/Rectangle/createPixelGeometry.js","../../node_modules/@snlab/florence/src/components/Marks/Point/aesthetics.js","../../node_modules/@snlab/florence/src/components/Marks/Rectangle/aesthetics.js","../../node_modules/@snlab/florence/src/components/Marks/Polygon/aesthetics.js","../../node_modules/@snlab/florence/src/components/Marks/Line/aesthetics.js","../../node_modules/@snlab/florence/src/components/Marks/Label/aesthetics.js","../../node_modules/@snlab/florence/src/components/Marks/Symbol/aesthetics.js","../../node_modules/@snlab/florence/src/components/Marks/Area/aesthetics.js","../../node_modules/@snlab/florence/src/components/Marks/Mark/validateAesthetics.js","../../node_modules/@snlab/florence/src/components/Marks/utils/geometryPropTools.js","../../node_modules/@snlab/florence/src/components/Marks/utils/propNeedsScaling.js","../../node_modules/@snlab/florence/src/components/Marks/Point/createPixelGeometry.js","../../node_modules/@snlab/florence/src/components/Marks/utils/createPixelGeometryFromXYArrays.js","../../node_modules/@snlab/florence/src/components/Marks/Symbol/geometryAlias.js","../../node_modules/@snlab/florence/src/components/Marks/Point/representPointAsPolygon.js","../../node_modules/@snlab/florence/src/components/Marks/Symbol/createPixelGeometry.js","../../node_modules/@snlab/florence/src/components/Marks/Area/createPixelGeometry.js","../../node_modules/@snlab/florence/src/components/Marks/Point/createPixelGeometryObject.js","../../node_modules/@snlab/florence/src/components/Marks/utils/generateArrayOfLength.js","../../node_modules/@snlab/florence/src/components/Marks/Rectangle/createPixelGeometryObject.js","../../node_modules/@snlab/florence/src/components/Marks/Symbol/createPixelGeometryObject.js","../../node_modules/@snlab/florence/src/components/Marks/Mark/pixelGeometryFuncs.js","../../node_modules/@snlab/florence/src/components/Marks/Polygon/createPixelGeometry.js","../../node_modules/@snlab/florence/src/components/Marks/Line/createPixelGeometry.js","../../node_modules/@snlab/florence/src/components/Marks/Polygon/createPixelGeometryObject.js","../../node_modules/@snlab/florence/src/components/Marks/Line/createPixelGeometryObject.js","../../node_modules/@snlab/florence/src/components/Marks/Area/createPixelGeometryObject.js","../../node_modules/@snlab/florence/src/components/Marks/Line/representLineAsPolygon.js","../../node_modules/@snlab/florence/src/components/Marks/Mark/representAsPolygonFuncs.js","../../node_modules/svelte/easing/index.mjs","../../node_modules/svelte/motion/index.mjs","../../node_modules/@snlab/florence/src/components/Marks/utils/transitions/createTransitionable.js","../../node_modules/@snlab/florence/src/components/Marks/utils/transitions/createTransitionableLayer.js","../../node_modules/@snlab/florence/src/components/Marks/utils/any.js","../../node_modules/@snlab/florence/src/components/Marks/utils/parseRenderSettings.js","../../node_modules/@snlab/florence/src/components/Marks/utils/generatePath.js","../../node_modules/@snlab/florence/src/components/Marks/utils/textAnchorPoint.js","../../node_modules/@snlab/florence/src/components/Marks/Mark/Mark.svelte","../../node_modules/@snlab/florence/src/components/Marks/Mark/createDataNecessaryForIndexing.js","../../node_modules/@snlab/florence/src/components/Marks/Point/Point.svelte","../../node_modules/@snlab/florence/src/components/Marks/Line/Line.svelte","../../node_modules/@snlab/florence/src/components/Marks/Label/Label.svelte","../../node_modules/@snlab/florence/src/components/Marks/utils/generatePropObject.js","../../node_modules/@snlab/florence/src/components/Marks/Mark/Layer.svelte","../../node_modules/@snlab/florence/src/components/Marks/Line/LineLayer.svelte","../../node_modules/@snlab/florence/src/components/Marks/Label/LabelLayer.svelte","../../node_modules/@snlab/florence/src/components/Guides/Axes/just.js","../../node_modules/@snlab/florence/src/components/Guides/Axes/ticks.js","../../node_modules/@snlab/florence/src/components/Guides/Axes/tickLabels.js","../../node_modules/@snlab/florence/src/components/Guides/Axes/title.js","../../node_modules/@snlab/florence/src/components/Guides/Axes/XAxis.svelte","../../node_modules/@snlab/florence/src/components/Guides/Axes/baseLine.js","../../node_modules/@snlab/florence/src/components/Guides/Axes/YAxis.svelte","../../node_modules/@snlab/florence/src/components/Guides/GridLines/XGridLines.svelte","../../node_modules/@snlab/florence/src/components/Guides/GridLines/getCoordinates.js","../../node_modules/@snlab/florence/src/components/Guides/GridLines/YGridLines.svelte","../../src/App.svelte","../../src/main.js"],"sourcesContent":["function noop() { }\nconst identity = x => x;\nfunction assign(tar, src) {\n    // @ts-ignore\n    for (const k in src)\n        tar[k] = src[k];\n    return tar;\n}\nfunction is_promise(value) {\n    return value && typeof value === 'object' && typeof value.then === 'function';\n}\nfunction add_location(element, file, line, column, char) {\n    element.__svelte_meta = {\n        loc: { file, line, column, char }\n    };\n}\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nfunction not_equal(a, b) {\n    return a != a ? b == b : a !== b;\n}\nfunction is_empty(obj) {\n    return Object.keys(obj).length === 0;\n}\nfunction validate_store(store, name) {\n    if (store != null && typeof store.subscribe !== 'function') {\n        throw new Error(`'${name}' is not a store with a 'subscribe' method`);\n    }\n}\nfunction subscribe(store, ...callbacks) {\n    if (store == null) {\n        return noop;\n    }\n    const unsub = store.subscribe(...callbacks);\n    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\nfunction get_store_value(store) {\n    let value;\n    subscribe(store, _ => value = _)();\n    return value;\n}\nfunction component_subscribe(component, store, callback) {\n    component.$$.on_destroy.push(subscribe(store, callback));\n}\nfunction create_slot(definition, ctx, $$scope, fn) {\n    if (definition) {\n        const slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n        return definition[0](slot_ctx);\n    }\n}\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n    return definition[1] && fn\n        ? assign($$scope.ctx.slice(), definition[1](fn(ctx)))\n        : $$scope.ctx;\n}\nfunction get_slot_changes(definition, $$scope, dirty, fn) {\n    if (definition[2] && fn) {\n        const lets = definition[2](fn(dirty));\n        if ($$scope.dirty === undefined) {\n            return lets;\n        }\n        if (typeof lets === 'object') {\n            const merged = [];\n            const len = Math.max($$scope.dirty.length, lets.length);\n            for (let i = 0; i < len; i += 1) {\n                merged[i] = $$scope.dirty[i] | lets[i];\n            }\n            return merged;\n        }\n        return $$scope.dirty | lets;\n    }\n    return $$scope.dirty;\n}\nfunction update_slot(slot, slot_definition, ctx, $$scope, dirty, get_slot_changes_fn, get_slot_context_fn) {\n    const slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n    if (slot_changes) {\n        const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n        slot.p(slot_context, slot_changes);\n    }\n}\nfunction update_slot_spread(slot, slot_definition, ctx, $$scope, dirty, get_slot_changes_fn, get_slot_spread_changes_fn, get_slot_context_fn) {\n    const slot_changes = get_slot_spread_changes_fn(dirty) | get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n    if (slot_changes) {\n        const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n        slot.p(slot_context, slot_changes);\n    }\n}\nfunction exclude_internal_props(props) {\n    const result = {};\n    for (const k in props)\n        if (k[0] !== '$')\n            result[k] = props[k];\n    return result;\n}\nfunction compute_rest_props(props, keys) {\n    const rest = {};\n    keys = new Set(keys);\n    for (const k in props)\n        if (!keys.has(k) && k[0] !== '$')\n            rest[k] = props[k];\n    return rest;\n}\nfunction compute_slots(slots) {\n    const result = {};\n    for (const key in slots) {\n        result[key] = true;\n    }\n    return result;\n}\nfunction once(fn) {\n    let ran = false;\n    return function (...args) {\n        if (ran)\n            return;\n        ran = true;\n        fn.call(this, ...args);\n    };\n}\nfunction null_to_empty(value) {\n    return value == null ? '' : value;\n}\nfunction set_store_value(store, ret, value = ret) {\n    store.set(value);\n    return ret;\n}\nconst has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\nfunction action_destroyer(action_result) {\n    return action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\nconst is_client = typeof window !== 'undefined';\nlet now = is_client\n    ? () => window.performance.now()\n    : () => Date.now();\nlet raf = is_client ? cb => requestAnimationFrame(cb) : noop;\n// used internally for testing\nfunction set_now(fn) {\n    now = fn;\n}\nfunction set_raf(fn) {\n    raf = fn;\n}\n\nconst tasks = new Set();\nfunction run_tasks(now) {\n    tasks.forEach(task => {\n        if (!task.c(now)) {\n            tasks.delete(task);\n            task.f();\n        }\n    });\n    if (tasks.size !== 0)\n        raf(run_tasks);\n}\n/**\n * For testing purposes only!\n */\nfunction clear_loops() {\n    tasks.clear();\n}\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n */\nfunction loop(callback) {\n    let task;\n    if (tasks.size === 0)\n        raf(run_tasks);\n    return {\n        promise: new Promise(fulfill => {\n            tasks.add(task = { c: callback, f: fulfill });\n        }),\n        abort() {\n            tasks.delete(task);\n        }\n    };\n}\n\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction detach(node) {\n    node.parentNode.removeChild(node);\n}\nfunction destroy_each(iterations, detaching) {\n    for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i])\n            iterations[i].d(detaching);\n    }\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction element_is(name, is) {\n    return document.createElement(name, { is });\n}\nfunction object_without_properties(obj, exclude) {\n    const target = {};\n    for (const k in obj) {\n        if (has_prop(obj, k)\n            // @ts-ignore\n            && exclude.indexOf(k) === -1) {\n            // @ts-ignore\n            target[k] = obj[k];\n        }\n    }\n    return target;\n}\nfunction svg_element(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction space() {\n    return text(' ');\n}\nfunction empty() {\n    return text('');\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction prevent_default(fn) {\n    return function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_propagation(fn) {\n    return function (event) {\n        event.stopPropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction self(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.target === this)\n            fn.call(this, event);\n    };\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else if (node.getAttribute(attribute) !== value)\n        node.setAttribute(attribute, value);\n}\nfunction set_attributes(node, attributes) {\n    // @ts-ignore\n    const descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n    for (const key in attributes) {\n        if (attributes[key] == null) {\n            node.removeAttribute(key);\n        }\n        else if (key === 'style') {\n            node.style.cssText = attributes[key];\n        }\n        else if (key === '__value') {\n            node.value = node[key] = attributes[key];\n        }\n        else if (descriptors[key] && descriptors[key].set) {\n            node[key] = attributes[key];\n        }\n        else {\n            attr(node, key, attributes[key]);\n        }\n    }\n}\nfunction set_svg_attributes(node, attributes) {\n    for (const key in attributes) {\n        attr(node, key, attributes[key]);\n    }\n}\nfunction set_custom_element_data(node, prop, value) {\n    if (prop in node) {\n        node[prop] = value;\n    }\n    else {\n        attr(node, prop, value);\n    }\n}\nfunction xlink_attr(node, attribute, value) {\n    node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\nfunction get_binding_group_value(group, __value, checked) {\n    const value = new Set();\n    for (let i = 0; i < group.length; i += 1) {\n        if (group[i].checked)\n            value.add(group[i].__value);\n    }\n    if (!checked) {\n        value.delete(__value);\n    }\n    return Array.from(value);\n}\nfunction to_number(value) {\n    return value === '' ? null : +value;\n}\nfunction time_ranges_to_array(ranges) {\n    const array = [];\n    for (let i = 0; i < ranges.length; i += 1) {\n        array.push({ start: ranges.start(i), end: ranges.end(i) });\n    }\n    return array;\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction claim_element(nodes, name, attributes, svg) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeName === name) {\n            let j = 0;\n            const remove = [];\n            while (j < node.attributes.length) {\n                const attribute = node.attributes[j++];\n                if (!attributes[attribute.name]) {\n                    remove.push(attribute.name);\n                }\n            }\n            for (let k = 0; k < remove.length; k++) {\n                node.removeAttribute(remove[k]);\n            }\n            return nodes.splice(i, 1)[0];\n        }\n    }\n    return svg ? svg_element(name) : element(name);\n}\nfunction claim_text(nodes, data) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeType === 3) {\n            node.data = '' + data;\n            return nodes.splice(i, 1)[0];\n        }\n    }\n    return text(data);\n}\nfunction claim_space(nodes) {\n    return claim_text(nodes, ' ');\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.wholeText !== data)\n        text.data = data;\n}\nfunction set_input_value(input, value) {\n    input.value = value == null ? '' : value;\n}\nfunction set_input_type(input, type) {\n    try {\n        input.type = type;\n    }\n    catch (e) {\n        // do nothing\n    }\n}\nfunction set_style(node, key, value, important) {\n    node.style.setProperty(key, value, important ? 'important' : '');\n}\nfunction select_option(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        if (option.__value === value) {\n            option.selected = true;\n            return;\n        }\n    }\n}\nfunction select_options(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        option.selected = ~value.indexOf(option.__value);\n    }\n}\nfunction select_value(select) {\n    const selected_option = select.querySelector(':checked') || select.options[0];\n    return selected_option && selected_option.__value;\n}\nfunction select_multiple_value(select) {\n    return [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\nlet crossorigin;\nfunction is_crossorigin() {\n    if (crossorigin === undefined) {\n        crossorigin = false;\n        try {\n            if (typeof window !== 'undefined' && window.parent) {\n                void window.parent.document;\n            }\n        }\n        catch (error) {\n            crossorigin = true;\n        }\n    }\n    return crossorigin;\n}\nfunction add_resize_listener(node, fn) {\n    const computed_style = getComputedStyle(node);\n    if (computed_style.position === 'static') {\n        node.style.position = 'relative';\n    }\n    const iframe = element('iframe');\n    iframe.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n        'overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;');\n    iframe.setAttribute('aria-hidden', 'true');\n    iframe.tabIndex = -1;\n    const crossorigin = is_crossorigin();\n    let unsubscribe;\n    if (crossorigin) {\n        iframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n        unsubscribe = listen(window, 'message', (event) => {\n            if (event.source === iframe.contentWindow)\n                fn();\n        });\n    }\n    else {\n        iframe.src = 'about:blank';\n        iframe.onload = () => {\n            unsubscribe = listen(iframe.contentWindow, 'resize', fn);\n        };\n    }\n    append(node, iframe);\n    return () => {\n        if (crossorigin) {\n            unsubscribe();\n        }\n        else if (unsubscribe && iframe.contentWindow) {\n            unsubscribe();\n        }\n        detach(iframe);\n    };\n}\nfunction toggle_class(element, name, toggle) {\n    element.classList[toggle ? 'add' : 'remove'](name);\n}\nfunction custom_event(type, detail) {\n    const e = document.createEvent('CustomEvent');\n    e.initCustomEvent(type, false, false, detail);\n    return e;\n}\nfunction query_selector_all(selector, parent = document.body) {\n    return Array.from(parent.querySelectorAll(selector));\n}\nclass HtmlTag {\n    constructor(anchor = null) {\n        this.a = anchor;\n        this.e = this.n = null;\n    }\n    m(html, target, anchor = null) {\n        if (!this.e) {\n            this.e = element(target.nodeName);\n            this.t = target;\n            this.h(html);\n        }\n        this.i(anchor);\n    }\n    h(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.childNodes);\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert(this.t, this.n[i], anchor);\n        }\n    }\n    p(html) {\n        this.d();\n        this.h(html);\n        this.i(this.a);\n    }\n    d() {\n        this.n.forEach(detach);\n    }\n}\nfunction attribute_to_object(attributes) {\n    const result = {};\n    for (const attribute of attributes) {\n        result[attribute.name] = attribute.value;\n    }\n    return result;\n}\nfunction get_custom_elements_slots(element) {\n    const result = {};\n    element.childNodes.forEach((node) => {\n        result[node.slot || 'default'] = true;\n    });\n    return result;\n}\n\nconst active_docs = new Set();\nlet active = 0;\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i--)\n        hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n    const step = 16.666 / duration;\n    let keyframes = '{\\n';\n    for (let p = 0; p <= 1; p += step) {\n        const t = a + (b - a) * ease(p);\n        keyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n    }\n    const rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n    const name = `__svelte_${hash(rule)}_${uid}`;\n    const doc = node.ownerDocument;\n    active_docs.add(doc);\n    const stylesheet = doc.__svelte_stylesheet || (doc.__svelte_stylesheet = doc.head.appendChild(element('style')).sheet);\n    const current_rules = doc.__svelte_rules || (doc.__svelte_rules = {});\n    if (!current_rules[name]) {\n        current_rules[name] = true;\n        stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n    }\n    const animation = node.style.animation || '';\n    node.style.animation = `${animation ? `${animation}, ` : ''}${name} ${duration}ms linear ${delay}ms 1 both`;\n    active += 1;\n    return name;\n}\nfunction delete_rule(node, name) {\n    const previous = (node.style.animation || '').split(', ');\n    const next = previous.filter(name\n        ? anim => anim.indexOf(name) < 0 // remove specific animation\n        : anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n    );\n    const deleted = previous.length - next.length;\n    if (deleted) {\n        node.style.animation = next.join(', ');\n        active -= deleted;\n        if (!active)\n            clear_rules();\n    }\n}\nfunction clear_rules() {\n    raf(() => {\n        if (active)\n            return;\n        active_docs.forEach(doc => {\n            const stylesheet = doc.__svelte_stylesheet;\n            let i = stylesheet.cssRules.length;\n            while (i--)\n                stylesheet.deleteRule(i);\n            doc.__svelte_rules = {};\n        });\n        active_docs.clear();\n    });\n}\n\nfunction create_animation(node, from, fn, params) {\n    if (!from)\n        return noop;\n    const to = node.getBoundingClientRect();\n    if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom)\n        return noop;\n    const { delay = 0, duration = 300, easing = identity, \n    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n    start: start_time = now() + delay, \n    // @ts-ignore todo:\n    end = start_time + duration, tick = noop, css } = fn(node, { from, to }, params);\n    let running = true;\n    let started = false;\n    let name;\n    function start() {\n        if (css) {\n            name = create_rule(node, 0, 1, duration, delay, easing, css);\n        }\n        if (!delay) {\n            started = true;\n        }\n    }\n    function stop() {\n        if (css)\n            delete_rule(node, name);\n        running = false;\n    }\n    loop(now => {\n        if (!started && now >= start_time) {\n            started = true;\n        }\n        if (started && now >= end) {\n            tick(1, 0);\n            stop();\n        }\n        if (!running) {\n            return false;\n        }\n        if (started) {\n            const p = now - start_time;\n            const t = 0 + 1 * easing(p / duration);\n            tick(t, 1 - t);\n        }\n        return true;\n    });\n    start();\n    tick(0, 1);\n    return stop;\n}\nfunction fix_position(node) {\n    const style = getComputedStyle(node);\n    if (style.position !== 'absolute' && style.position !== 'fixed') {\n        const { width, height } = style;\n        const a = node.getBoundingClientRect();\n        node.style.position = 'absolute';\n        node.style.width = width;\n        node.style.height = height;\n        add_transform(node, a);\n    }\n}\nfunction add_transform(node, a) {\n    const b = node.getBoundingClientRect();\n    if (a.left !== b.left || a.top !== b.top) {\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error('Function called outside component initialization');\n    return current_component;\n}\nfunction beforeUpdate(fn) {\n    get_current_component().$$.before_update.push(fn);\n}\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\nfunction afterUpdate(fn) {\n    get_current_component().$$.after_update.push(fn);\n}\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\nfunction createEventDispatcher() {\n    const component = get_current_component();\n    return (type, detail) => {\n        const callbacks = component.$$.callbacks[type];\n        if (callbacks) {\n            // TODO are there situations where events could be dispatched\n            // in a server (non-DOM) environment?\n            const event = custom_event(type, detail);\n            callbacks.slice().forEach(fn => {\n                fn.call(component, event);\n            });\n        }\n    };\n}\nfunction setContext(key, context) {\n    get_current_component().$$.context.set(key, context);\n}\nfunction getContext(key) {\n    return get_current_component().$$.context.get(key);\n}\nfunction hasContext(key) {\n    return get_current_component().$$.context.has(key);\n}\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n    const callbacks = component.$$.callbacks[event.type];\n    if (callbacks) {\n        callbacks.slice().forEach(fn => fn(event));\n    }\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nfunction add_flush_callback(fn) {\n    flush_callbacks.push(fn);\n}\nlet flushing = false;\nconst seen_callbacks = new Set();\nfunction flush() {\n    if (flushing)\n        return;\n    flushing = true;\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        for (let i = 0; i < dirty_components.length; i += 1) {\n            const component = dirty_components[i];\n            set_current_component(component);\n            update(component.$$);\n        }\n        set_current_component(null);\n        dirty_components.length = 0;\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n                callback();\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n    flushing = false;\n    seen_callbacks.clear();\n}\nfunction update($$) {\n    if ($$.fragment !== null) {\n        $$.update();\n        run_all($$.before_update);\n        const dirty = $$.dirty;\n        $$.dirty = [-1];\n        $$.fragment && $$.fragment.p($$.ctx, dirty);\n        $$.after_update.forEach(add_render_callback);\n    }\n}\n\nlet promise;\nfunction wait() {\n    if (!promise) {\n        promise = Promise.resolve();\n        promise.then(() => {\n            promise = null;\n        });\n    }\n    return promise;\n}\nfunction dispatch(node, direction, kind) {\n    node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n    outros = {\n        r: 0,\n        c: [],\n        p: outros // parent group\n    };\n}\nfunction check_outros() {\n    if (!outros.r) {\n        run_all(outros.c);\n    }\n    outros = outros.p;\n}\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\nfunction transition_out(block, local, detach, callback) {\n    if (block && block.o) {\n        if (outroing.has(block))\n            return;\n        outroing.add(block);\n        outros.c.push(() => {\n            outroing.delete(block);\n            if (callback) {\n                if (detach)\n                    block.d(1);\n                callback();\n            }\n        });\n        block.o(local);\n    }\n}\nconst null_transition = { duration: 0 };\nfunction create_in_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = false;\n    let animation_name;\n    let task;\n    let uid = 0;\n    function cleanup() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n        tick(0, 1);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        if (task)\n            task.abort();\n        running = true;\n        add_render_callback(() => dispatch(node, true, 'start'));\n        task = loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(1, 0);\n                    dispatch(node, true, 'end');\n                    cleanup();\n                    return running = false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(t, 1 - t);\n                }\n            }\n            return running;\n        });\n    }\n    let started = false;\n    return {\n        start() {\n            if (started)\n                return;\n            delete_rule(node);\n            if (is_function(config)) {\n                config = config();\n                wait().then(go);\n            }\n            else {\n                go();\n            }\n        },\n        invalidate() {\n            started = false;\n        },\n        end() {\n            if (running) {\n                cleanup();\n                running = false;\n            }\n        }\n    };\n}\nfunction create_out_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = true;\n    let animation_name;\n    const group = outros;\n    group.r += 1;\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        add_render_callback(() => dispatch(node, false, 'start'));\n        loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(0, 1);\n                    dispatch(node, false, 'end');\n                    if (!--group.r) {\n                        // this will result in `end()` being called,\n                        // so we don't need to clean up here\n                        run_all(group.c);\n                    }\n                    return false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(1 - t, t);\n                }\n            }\n            return running;\n        });\n    }\n    if (is_function(config)) {\n        wait().then(() => {\n            // @ts-ignore\n            config = config();\n            go();\n        });\n    }\n    else {\n        go();\n    }\n    return {\n        end(reset) {\n            if (reset && config.tick) {\n                config.tick(1, 0);\n            }\n            if (running) {\n                if (animation_name)\n                    delete_rule(node, animation_name);\n                running = false;\n            }\n        }\n    };\n}\nfunction create_bidirectional_transition(node, fn, params, intro) {\n    let config = fn(node, params);\n    let t = intro ? 0 : 1;\n    let running_program = null;\n    let pending_program = null;\n    let animation_name = null;\n    function clear_animation() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function init(program, duration) {\n        const d = program.b - t;\n        duration *= Math.abs(d);\n        return {\n            a: t,\n            b: program.b,\n            d,\n            duration,\n            start: program.start,\n            end: program.start + duration,\n            group: program.group\n        };\n    }\n    function go(b) {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        const program = {\n            start: now() + delay,\n            b\n        };\n        if (!b) {\n            // @ts-ignore todo: improve typings\n            program.group = outros;\n            outros.r += 1;\n        }\n        if (running_program || pending_program) {\n            pending_program = program;\n        }\n        else {\n            // if this is an intro, and there's a delay, we need to do\n            // an initial tick and/or apply CSS animation immediately\n            if (css) {\n                clear_animation();\n                animation_name = create_rule(node, t, b, duration, delay, easing, css);\n            }\n            if (b)\n                tick(0, 1);\n            running_program = init(program, duration);\n            add_render_callback(() => dispatch(node, b, 'start'));\n            loop(now => {\n                if (pending_program && now > pending_program.start) {\n                    running_program = init(pending_program, duration);\n                    pending_program = null;\n                    dispatch(node, running_program.b, 'start');\n                    if (css) {\n                        clear_animation();\n                        animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n                    }\n                }\n                if (running_program) {\n                    if (now >= running_program.end) {\n                        tick(t = running_program.b, 1 - t);\n                        dispatch(node, running_program.b, 'end');\n                        if (!pending_program) {\n                            // we're done\n                            if (running_program.b) {\n                                // intro — we can tidy up immediately\n                                clear_animation();\n                            }\n                            else {\n                                // outro — needs to be coordinated\n                                if (!--running_program.group.r)\n                                    run_all(running_program.group.c);\n                            }\n                        }\n                        running_program = null;\n                    }\n                    else if (now >= running_program.start) {\n                        const p = now - running_program.start;\n                        t = running_program.a + running_program.d * easing(p / running_program.duration);\n                        tick(t, 1 - t);\n                    }\n                }\n                return !!(running_program || pending_program);\n            });\n        }\n    }\n    return {\n        run(b) {\n            if (is_function(config)) {\n                wait().then(() => {\n                    // @ts-ignore\n                    config = config();\n                    go(b);\n                });\n            }\n            else {\n                go(b);\n            }\n        },\n        end() {\n            clear_animation();\n            running_program = pending_program = null;\n        }\n    };\n}\n\nfunction handle_promise(promise, info) {\n    const token = info.token = {};\n    function update(type, index, key, value) {\n        if (info.token !== token)\n            return;\n        info.resolved = value;\n        let child_ctx = info.ctx;\n        if (key !== undefined) {\n            child_ctx = child_ctx.slice();\n            child_ctx[key] = value;\n        }\n        const block = type && (info.current = type)(child_ctx);\n        let needs_flush = false;\n        if (info.block) {\n            if (info.blocks) {\n                info.blocks.forEach((block, i) => {\n                    if (i !== index && block) {\n                        group_outros();\n                        transition_out(block, 1, 1, () => {\n                            if (info.blocks[i] === block) {\n                                info.blocks[i] = null;\n                            }\n                        });\n                        check_outros();\n                    }\n                });\n            }\n            else {\n                info.block.d(1);\n            }\n            block.c();\n            transition_in(block, 1);\n            block.m(info.mount(), info.anchor);\n            needs_flush = true;\n        }\n        info.block = block;\n        if (info.blocks)\n            info.blocks[index] = block;\n        if (needs_flush) {\n            flush();\n        }\n    }\n    if (is_promise(promise)) {\n        const current_component = get_current_component();\n        promise.then(value => {\n            set_current_component(current_component);\n            update(info.then, 1, info.value, value);\n            set_current_component(null);\n        }, error => {\n            set_current_component(current_component);\n            update(info.catch, 2, info.error, error);\n            set_current_component(null);\n            if (!info.hasCatch) {\n                throw error;\n            }\n        });\n        // if we previously had a then/catch block, destroy it\n        if (info.current !== info.pending) {\n            update(info.pending, 0);\n            return true;\n        }\n    }\n    else {\n        if (info.current !== info.then) {\n            update(info.then, 1, info.value, promise);\n            return true;\n        }\n        info.resolved = promise;\n    }\n}\n\nconst globals = (typeof window !== 'undefined'\n    ? window\n    : typeof globalThis !== 'undefined'\n        ? globalThis\n        : global);\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction outro_and_destroy_block(block, lookup) {\n    transition_out(block, 1, 1, () => {\n        lookup.delete(block.key);\n    });\n}\nfunction fix_and_destroy_block(block, lookup) {\n    block.f();\n    destroy_block(block, lookup);\n}\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n    block.f();\n    outro_and_destroy_block(block, lookup);\n}\nfunction update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            block.p(child_ctx, dirty);\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next);\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    return new_blocks;\n}\nfunction validate_each_keys(ctx, list, get_context, get_key) {\n    const keys = new Set();\n    for (let i = 0; i < list.length; i++) {\n        const key = get_key(get_context(ctx, list, i));\n        if (keys.has(key)) {\n            throw new Error('Cannot have duplicate keys in a keyed each');\n        }\n        keys.add(key);\n    }\n}\n\nfunction get_spread_update(levels, updates) {\n    const update = {};\n    const to_null_out = {};\n    const accounted_for = { $$scope: 1 };\n    let i = levels.length;\n    while (i--) {\n        const o = levels[i];\n        const n = updates[i];\n        if (n) {\n            for (const key in o) {\n                if (!(key in n))\n                    to_null_out[key] = 1;\n            }\n            for (const key in n) {\n                if (!accounted_for[key]) {\n                    update[key] = n[key];\n                    accounted_for[key] = 1;\n                }\n            }\n            levels[i] = n;\n        }\n        else {\n            for (const key in o) {\n                accounted_for[key] = 1;\n            }\n        }\n    }\n    for (const key in to_null_out) {\n        if (!(key in update))\n            update[key] = undefined;\n    }\n    return update;\n}\nfunction get_spread_object(spread_props) {\n    return typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n\n// source: https://html.spec.whatwg.org/multipage/indices.html\nconst boolean_attributes = new Set([\n    'allowfullscreen',\n    'allowpaymentrequest',\n    'async',\n    'autofocus',\n    'autoplay',\n    'checked',\n    'controls',\n    'default',\n    'defer',\n    'disabled',\n    'formnovalidate',\n    'hidden',\n    'ismap',\n    'loop',\n    'multiple',\n    'muted',\n    'nomodule',\n    'novalidate',\n    'open',\n    'playsinline',\n    'readonly',\n    'required',\n    'reversed',\n    'selected'\n]);\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nfunction spread(args, classes_to_add) {\n    const attributes = Object.assign({}, ...args);\n    if (classes_to_add) {\n        if (attributes.class == null) {\n            attributes.class = classes_to_add;\n        }\n        else {\n            attributes.class += ' ' + classes_to_add;\n        }\n    }\n    let str = '';\n    Object.keys(attributes).forEach(name => {\n        if (invalid_attribute_name_character.test(name))\n            return;\n        const value = attributes[name];\n        if (value === true)\n            str += ' ' + name;\n        else if (boolean_attributes.has(name.toLowerCase())) {\n            if (value)\n                str += ' ' + name;\n        }\n        else if (value != null) {\n            str += ` ${name}=\"${String(value).replace(/\"/g, '&#34;').replace(/'/g, '&#39;')}\"`;\n        }\n    });\n    return str;\n}\nconst escaped = {\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;'\n};\nfunction escape(html) {\n    return String(html).replace(/[\"'&<>]/g, match => escaped[match]);\n}\nfunction each(items, fn) {\n    let str = '';\n    for (let i = 0; i < items.length; i += 1) {\n        str += fn(items[i], i);\n    }\n    return str;\n}\nconst missing_component = {\n    $$render: () => ''\n};\nfunction validate_component(component, name) {\n    if (!component || !component.$$render) {\n        if (name === 'svelte:component')\n            name += ' this={...}';\n        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);\n    }\n    return component;\n}\nfunction debug(file, line, column, values) {\n    console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n    console.log(values); // eslint-disable-line no-console\n    return '';\n}\nlet on_destroy;\nfunction create_ssr_component(fn) {\n    function $$render(result, props, bindings, slots, context) {\n        const parent_component = current_component;\n        const $$ = {\n            on_destroy,\n            context: new Map(parent_component ? parent_component.$$.context : context || []),\n            // these will be immediately discarded\n            on_mount: [],\n            before_update: [],\n            after_update: [],\n            callbacks: blank_object()\n        };\n        set_current_component({ $$ });\n        const html = fn(result, props, bindings, slots);\n        set_current_component(parent_component);\n        return html;\n    }\n    return {\n        render: (props = {}, { $$slots = {}, context = new Map() } = {}) => {\n            on_destroy = [];\n            const result = { title: '', head: '', css: new Set() };\n            const html = $$render(result, props, {}, $$slots, context);\n            run_all(on_destroy);\n            return {\n                html,\n                css: {\n                    code: Array.from(result.css).map(css => css.code).join('\\n'),\n                    map: null // TODO\n                },\n                head: result.title + result.head\n            };\n        },\n        $$render\n    };\n}\nfunction add_attribute(name, value, boolean) {\n    if (value == null || (boolean && !value))\n        return '';\n    return ` ${name}${value === true ? '' : `=${typeof value === 'string' ? JSON.stringify(escape(value)) : `\"${value}\"`}`}`;\n}\nfunction add_classes(classes) {\n    return classes ? ` class=\"${classes}\"` : '';\n}\n\nfunction bind(component, name, callback) {\n    const index = component.$$.props[name];\n    if (index !== undefined) {\n        component.$$.bound[index] = callback;\n        callback(component.$$.ctx[index]);\n    }\n}\nfunction create_component(block) {\n    block && block.c();\n}\nfunction claim_component(block, parent_nodes) {\n    block && block.l(parent_nodes);\n}\nfunction mount_component(component, target, anchor, customElement) {\n    const { fragment, on_mount, on_destroy, after_update } = component.$$;\n    fragment && fragment.m(target, anchor);\n    if (!customElement) {\n        // onMount happens before the initial afterUpdate\n        add_render_callback(() => {\n            const new_on_destroy = on_mount.map(run).filter(is_function);\n            if (on_destroy) {\n                on_destroy.push(...new_on_destroy);\n            }\n            else {\n                // Edge case - component was destroyed immediately,\n                // most likely as a result of a binding initialising\n                run_all(new_on_destroy);\n            }\n            component.$$.on_mount = [];\n        });\n    }\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    const $$ = component.$$;\n    if ($$.fragment !== null) {\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = [];\n    }\n}\nfunction make_dirty(component, i) {\n    if (component.$$.dirty[0] === -1) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty.fill(0);\n    }\n    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));\n}\nfunction init(component, options, instance, create_fragment, not_equal, props, dirty = [-1]) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: null,\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        on_disconnect: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(parent_component ? parent_component.$$.context : options.context || []),\n        // everything else\n        callbacks: blank_object(),\n        dirty,\n        skip_bound: false\n    };\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, options.props || {}, (i, ret, ...rest) => {\n            const value = rest.length ? rest[0] : ret;\n            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n                if (!$$.skip_bound && $$.bound[i])\n                    $$.bound[i](value);\n                if (ready)\n                    make_dirty(component, i);\n            }\n            return ret;\n        })\n        : [];\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    // `false` as a special case of no DOM component\n    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n    if (options.target) {\n        if (options.hydrate) {\n            const nodes = children(options.target);\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.l(nodes);\n            nodes.forEach(detach);\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor, options.customElement);\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement === 'function') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            const { on_mount } = this.$$;\n            this.$$.on_disconnect = on_mount.map(run).filter(is_function);\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        disconnectedCallback() {\n            run_all(this.$$.on_disconnect);\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set($$props) {\n            if (this.$$set && !is_empty($$props)) {\n                this.$$.skip_bound = true;\n                this.$$set($$props);\n                this.$$.skip_bound = false;\n            }\n        }\n    };\n}\n/**\n * Base class for Svelte components. Used when dev=false.\n */\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set($$props) {\n        if (this.$$set && !is_empty($$props)) {\n            this.$$.skip_bound = true;\n            this.$$set($$props);\n            this.$$.skip_bound = false;\n        }\n    }\n}\n\nfunction dispatch_dev(type, detail) {\n    document.dispatchEvent(custom_event(type, Object.assign({ version: '3.37.0' }, detail)));\n}\nfunction append_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append(target, node);\n}\nfunction insert_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert(target, node, anchor);\n}\nfunction detach_dev(node) {\n    dispatch_dev('SvelteDOMRemove', { node });\n    detach(node);\n}\nfunction detach_between_dev(before, after) {\n    while (before.nextSibling && before.nextSibling !== after) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction detach_before_dev(after) {\n    while (after.previousSibling) {\n        detach_dev(after.previousSibling);\n    }\n}\nfunction detach_after_dev(before) {\n    while (before.nextSibling) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation) {\n    const modifiers = options === true ? ['capture'] : options ? Array.from(Object.keys(options)) : [];\n    if (has_prevent_default)\n        modifiers.push('preventDefault');\n    if (has_stop_propagation)\n        modifiers.push('stopPropagation');\n    dispatch_dev('SvelteDOMAddEventListener', { node, event, handler, modifiers });\n    const dispose = listen(node, event, handler, options);\n    return () => {\n        dispatch_dev('SvelteDOMRemoveEventListener', { node, event, handler, modifiers });\n        dispose();\n    };\n}\nfunction attr_dev(node, attribute, value) {\n    attr(node, attribute, value);\n    if (value == null)\n        dispatch_dev('SvelteDOMRemoveAttribute', { node, attribute });\n    else\n        dispatch_dev('SvelteDOMSetAttribute', { node, attribute, value });\n}\nfunction prop_dev(node, property, value) {\n    node[property] = value;\n    dispatch_dev('SvelteDOMSetProperty', { node, property, value });\n}\nfunction dataset_dev(node, property, value) {\n    node.dataset[property] = value;\n    dispatch_dev('SvelteDOMSetDataset', { node, property, value });\n}\nfunction set_data_dev(text, data) {\n    data = '' + data;\n    if (text.wholeText === data)\n        return;\n    dispatch_dev('SvelteDOMSetData', { node: text, data });\n    text.data = data;\n}\nfunction validate_each_argument(arg) {\n    if (typeof arg !== 'string' && !(arg && typeof arg === 'object' && 'length' in arg)) {\n        let msg = '{#each} only iterates over array-like objects.';\n        if (typeof Symbol === 'function' && arg && Symbol.iterator in arg) {\n            msg += ' You can use a spread to convert this iterable into an array.';\n        }\n        throw new Error(msg);\n    }\n}\nfunction validate_slots(name, slot, keys) {\n    for (const slot_key of Object.keys(slot)) {\n        if (!~keys.indexOf(slot_key)) {\n            console.warn(`<${name}> received an unexpected slot \"${slot_key}\".`);\n        }\n    }\n}\n/**\n * Base class for Svelte components with some minor dev-enhancements. Used when dev=true.\n */\nclass SvelteComponentDev extends SvelteComponent {\n    constructor(options) {\n        if (!options || (!options.target && !options.$$inline)) {\n            throw new Error(\"'target' is a required option\");\n        }\n        super();\n    }\n    $destroy() {\n        super.$destroy();\n        this.$destroy = () => {\n            console.warn('Component was already destroyed'); // eslint-disable-line no-console\n        };\n    }\n    $capture_state() { }\n    $inject_state() { }\n}\n/**\n * Base class to create strongly typed Svelte components.\n * This only exists for typing purposes and should be used in `.d.ts` files.\n *\n * ### Example:\n *\n * You have component library on npm called `component-library`, from which\n * you export a component called `MyComponent`. For Svelte+TypeScript users,\n * you want to provide typings. Therefore you create a `index.d.ts`:\n * ```ts\n * import { SvelteComponentTyped } from \"svelte\";\n * export class MyComponent extends SvelteComponentTyped<{foo: string}> {}\n * ```\n * Typing this makes it possible for IDEs like VS Code with the Svelte extension\n * to provide intellisense and to use the component like this in a Svelte file\n * with TypeScript:\n * ```svelte\n * <script lang=\"ts\">\n * \timport { MyComponent } from \"component-library\";\n * </script>\n * <MyComponent foo={'bar'} />\n * ```\n *\n * #### Why not make this part of `SvelteComponent(Dev)`?\n * Because\n * ```ts\n * class ASubclassOfSvelteComponent extends SvelteComponent<{foo: string}> {}\n * const component: typeof SvelteComponent = ASubclassOfSvelteComponent;\n * ```\n * will throw a type error, so we need to seperate the more strictly typed class.\n */\nclass SvelteComponentTyped extends SvelteComponentDev {\n    constructor(options) {\n        super(options);\n    }\n}\nfunction loop_guard(timeout) {\n    const start = Date.now();\n    return () => {\n        if (Date.now() - start > timeout) {\n            throw new Error('Infinite loop detected');\n        }\n    };\n}\n\nexport { HtmlTag, SvelteComponent, SvelteComponentDev, SvelteComponentTyped, SvelteElement, action_destroyer, add_attribute, add_classes, add_flush_callback, add_location, add_render_callback, add_resize_listener, add_transform, afterUpdate, append, append_dev, assign, attr, attr_dev, attribute_to_object, beforeUpdate, bind, binding_callbacks, blank_object, bubble, check_outros, children, claim_component, claim_element, claim_space, claim_text, clear_loops, component_subscribe, compute_rest_props, compute_slots, createEventDispatcher, create_animation, create_bidirectional_transition, create_component, create_in_transition, create_out_transition, create_slot, create_ssr_component, current_component, custom_event, dataset_dev, debug, destroy_block, destroy_component, destroy_each, detach, detach_after_dev, detach_before_dev, detach_between_dev, detach_dev, dirty_components, dispatch_dev, each, element, element_is, empty, escape, escaped, exclude_internal_props, fix_and_destroy_block, fix_and_outro_and_destroy_block, fix_position, flush, getContext, get_binding_group_value, get_current_component, get_custom_elements_slots, get_slot_changes, get_slot_context, get_spread_object, get_spread_update, get_store_value, globals, group_outros, handle_promise, hasContext, has_prop, identity, init, insert, insert_dev, intros, invalid_attribute_name_character, is_client, is_crossorigin, is_empty, is_function, is_promise, listen, listen_dev, loop, loop_guard, missing_component, mount_component, noop, not_equal, now, null_to_empty, object_without_properties, onDestroy, onMount, once, outro_and_destroy_block, prevent_default, prop_dev, query_selector_all, raf, run, run_all, safe_not_equal, schedule_update, select_multiple_value, select_option, select_options, select_value, self, setContext, set_attributes, set_current_component, set_custom_element_data, set_data, set_data_dev, set_input_type, set_input_value, set_now, set_raf, set_store_value, set_style, set_svg_attributes, space, spread, stop_propagation, subscribe, svg_element, text, tick, time_ranges_to_array, to_number, toggle_class, transition_in, transition_out, update_keyed_each, update_slot, update_slot_spread, validate_component, validate_each_argument, validate_each_keys, validate_slots, validate_store, xlink_attr };\n","// Taken from https://github.com/rafgraph/detect-it/blob/main/src/index.ts\n\nconst w = typeof window !== 'undefined' ? window : { screen: {}, navigator: {} }\nconst matchMedia = w.matchMedia || (() => ({ matches: false }))\n\nlet passiveOptionAccessed = false\nconst options = {\n  get passive () {\n    return (passiveOptionAccessed = true)\n  }\n}\n\nconst noop = () => {}\nw.addEventListener && w.addEventListener('p', noop, options)\nw.removeEventListener && w.removeEventListener('p', noop, false)\n\nexport const supportsPassiveEvents = passiveOptionAccessed\n\nexport const supportsPointerEvents = 'PointerEvent' in w\n\nconst onTouchStartInWindow = 'ontouchstart' in w\nconst touchEventInWindow = 'TouchEvent' in w\n\nexport const supportsTouchEvents =\n  onTouchStartInWindow || (touchEventInWindow && matchMedia('(any-pointer: coarse)').matches)\n\nconst hasTouch = (w.navigator.maxTouchPoints || 0) > 0 || supportsTouchEvents\n\nconst userAgent = w.navigator.userAgent || ''\n\nconst isIPad =\n  matchMedia('(pointer: coarse)').matches &&\n  /iPad|Macintosh/.test(userAgent) &&\n  Math.min(w.screen.width || 0, w.screen.height || 0) >= 768\n\nconst hasCoarsePrimaryPointer =\n  (matchMedia('(pointer: coarse)').matches ||\n  (!matchMedia('(pointer: fine)').matches && onTouchStartInWindow)) &&\n  !/Windows.*Firefox/.test(userAgent)\n\nconst hasAnyHoverOrAnyFinePointer =\n  matchMedia('(any-pointer: fine)').matches ||\n  matchMedia('(any-hover: hover)').matches ||\n  isIPad || !onTouchStartInWindow\n\nexport const deviceType =\n  hasTouch && (hasAnyHoverOrAnyFinePointer || !hasCoarsePrimaryPointer)\n    ? 'hybrid'\n    : hasTouch\n      ? 'touchOnly'\n      : 'mouseOnly'\n\nexport const primaryInput =\n  deviceType === 'mouseOnly'\n    ? 'mouse'\n    : deviceType === 'touchOnly'\n      ? 'touch'\n      : hasCoarsePrimaryPointer\n        ? 'touch'\n        : 'mouse'\n","import { noop, safe_not_equal, subscribe, run_all, is_function } from '../internal/index.mjs';\nexport { get_store_value as get } from '../internal/index.mjs';\n\nconst subscriber_queue = [];\n/**\n * Creates a `Readable` store that allows reading by subscription.\n * @param value initial value\n * @param {StartStopNotifier}start start and stop notifications for subscriptions\n */\nfunction readable(value, start) {\n    return {\n        subscribe: writable(value, start).subscribe\n    };\n}\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n * @param {*=}value initial value\n * @param {StartStopNotifier=}start start and stop notifications for subscriptions\n */\nfunction writable(value, start = noop) {\n    let stop;\n    const subscribers = [];\n    function set(new_value) {\n        if (safe_not_equal(value, new_value)) {\n            value = new_value;\n            if (stop) { // store is ready\n                const run_queue = !subscriber_queue.length;\n                for (let i = 0; i < subscribers.length; i += 1) {\n                    const s = subscribers[i];\n                    s[1]();\n                    subscriber_queue.push(s, value);\n                }\n                if (run_queue) {\n                    for (let i = 0; i < subscriber_queue.length; i += 2) {\n                        subscriber_queue[i][0](subscriber_queue[i + 1]);\n                    }\n                    subscriber_queue.length = 0;\n                }\n            }\n        }\n    }\n    function update(fn) {\n        set(fn(value));\n    }\n    function subscribe(run, invalidate = noop) {\n        const subscriber = [run, invalidate];\n        subscribers.push(subscriber);\n        if (subscribers.length === 1) {\n            stop = start(set) || noop;\n        }\n        run(value);\n        return () => {\n            const index = subscribers.indexOf(subscriber);\n            if (index !== -1) {\n                subscribers.splice(index, 1);\n            }\n            if (subscribers.length === 0) {\n                stop();\n                stop = null;\n            }\n        };\n    }\n    return { set, update, subscribe };\n}\nfunction derived(stores, fn, initial_value) {\n    const single = !Array.isArray(stores);\n    const stores_array = single\n        ? [stores]\n        : stores;\n    const auto = fn.length < 2;\n    return readable(initial_value, (set) => {\n        let inited = false;\n        const values = [];\n        let pending = 0;\n        let cleanup = noop;\n        const sync = () => {\n            if (pending) {\n                return;\n            }\n            cleanup();\n            const result = fn(single ? values[0] : values, set);\n            if (auto) {\n                set(result);\n            }\n            else {\n                cleanup = is_function(result) ? result : noop;\n            }\n        };\n        const unsubscribers = stores_array.map((store, i) => subscribe(store, (value) => {\n            values[i] = value;\n            pending &= ~(1 << i);\n            if (inited) {\n                sync();\n            }\n        }, () => {\n            pending |= (1 << i);\n        }));\n        inited = true;\n        sync();\n        return function stop() {\n            run_all(unsubscribers);\n            cleanup();\n        };\n    });\n}\n\nexport { derived, readable, writable };\n","import { getContext, setContext } from 'svelte'\nimport { writable } from 'svelte/store'\n\nclass GraphicContext {\n  constructor ({ renderer }) {\n    if (!renderer) {\n      this._rendererOptions = { output: 'svg' }\n    }\n\n    if (renderer) {\n      validateRendererOptions(renderer)\n      this._rendererOptions = renderer\n    }\n  }\n\n  output () {\n    return this._rendererOptions.output\n  }\n}\n\nfunction validateRendererOptions (options) {\n  if (!(\n    options.constructor === Object &&\n    'output' in options &&\n    ['svg'].includes(options.output)\n  )) {\n    throw new Error(`Invalid renderer options: ${JSON.stringify(options)}`)\n  }\n}\n\nconst key = {}\n\nexport function subscribe () {\n  return getContext(key)\n}\n\nexport function init () {\n  const graphicContext = writable()\n  setContext(key, graphicContext)\n\n  return graphicContext\n}\n\nexport function update (graphicContext, options) {\n  graphicContext.set(new GraphicContext(options))\n}\n","export function parsePadding (_padding) {\n  const padding = _padding === undefined\n    ? 0\n    : _padding\n\n  if (padding.constructor === Number) {\n    return { left: padding, right: padding, top: padding, bottom: padding }\n  }\n\n  if (padding.constructor === Object) {\n    return Object.assign(\n      parsePadding(0),\n      padding\n    )\n  }\n\n  throw invalidPaddingError\n}\n\nconst invalidPaddingError = new Error('Invalid padding specification')\n\nexport function applyPadding (range, offsetMin, offsetMax) {\n  ensurePaddingSmallerThanRange(range, offsetMin, offsetMax)\n\n  if (range[0] < range[1]) {\n    return [range[0] + offsetMin, range[1] - offsetMax]\n  } else {\n    return [range[0] - offsetMax, range[1] + offsetMin]\n  }\n}\n\nexport function removePadding (range, offsetMin, offsetMax) {\n  if (range[0] < range[1]) {\n    return [range[0] - offsetMin, range[1] + offsetMax]\n  } else {\n    return [range[0] + offsetMax, range[1] - offsetMin]\n  }\n}\n\nfunction ensurePaddingSmallerThanRange (range, min, max) {\n  if (Math.abs(range[0] - range[1]) < (min + max)) {\n    console.warn('Padding cannot exceed width or height')\n  }\n}\n","import { applyPadding } from '../../utils/padding.js'\n\nexport function getRanges ({ coordinates }) {\n  return {\n    rangeX: [coordinates.x1, coordinates.x2],\n    rangeY: [coordinates.y1, coordinates.y2]\n  }\n}\n\nexport function getFinalRanges (sectionContext, ranges, padding) {\n  const { flipX, flipY, zoomIdentity } = sectionContext\n  const { rangeX, rangeY } = ranges\n  const { left, right, top, bottom } = padding\n\n  let finalRangeX = applyFlip(rangeX, flipX)\n  finalRangeX = applyPadding(finalRangeX, left, right)\n\n  if (zoomIdentity) {\n    validateZoomFactor(zoomIdentity.kx)\n    finalRangeX = applyZoom(finalRangeX, zoomIdentity.kx, zoomIdentity.x)\n  }\n\n  let finalRangeY = applyFlip(rangeY, flipY)\n  finalRangeY = applyPadding(finalRangeY, top, bottom)\n\n  if (zoomIdentity) {\n    validateZoomFactor(zoomIdentity.ky)\n    finalRangeY = applyZoom(finalRangeY, zoomIdentity.ky, zoomIdentity.y)\n  }\n\n  return { finalRangeX, finalRangeY }\n}\n\nfunction applyFlip (range, flip) {\n  return flip\n    ? [range[1], range[0]]\n    : range\n}\n\nfunction applyZoom (range, k, translate) {\n  return [\n    range[0] * k + translate,\n    range[1] * k + translate\n  ]\n}\n\nfunction validateZoomFactor (k) {\n  if (k < 0) throw new Error('Zoom factors have to be positive')\n}\n","export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import ascending from \"./ascending.js\";\n\nexport default function(f) {\n  let delta = f;\n  let compare = f;\n\n  if (f.length === 1) {\n    delta = (d, x) => f(d) - x;\n    compare = ascendingComparator(f);\n  }\n\n  function left(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    while (lo < hi) {\n      const mid = (lo + hi) >>> 1;\n      if (compare(a[mid], x) < 0) lo = mid + 1;\n      else hi = mid;\n    }\n    return lo;\n  }\n\n  function right(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    while (lo < hi) {\n      const mid = (lo + hi) >>> 1;\n      if (compare(a[mid], x) > 0) hi = mid;\n      else lo = mid + 1;\n    }\n    return lo;\n  }\n\n  function center(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    const i = left(a, x, lo, hi - 1);\n    return i > lo && delta(a[i - 1], x) > -delta(a[i], x) ? i - 1 : i;\n  }\n\n  return {left, center, right};\n}\n\nfunction ascendingComparator(f) {\n  return (d, x) => ascending(f(d), x);\n}\n","import ascending from \"./ascending.js\";\nimport bisector from \"./bisector.js\";\nimport number from \"./number.js\";\n\nconst ascendingBisect = bisector(ascending);\nexport const bisectRight = ascendingBisect.right;\nexport const bisectLeft = ascendingBisect.left;\nexport const bisectCenter = bisector(number).center;\nexport default bisectRight;\n","export default function(x) {\n  return x === null ? NaN : +x;\n}\n\nexport function* numbers(values, valueof) {\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  }\n}\n","// https://github.com/python/cpython/blob/a74eea238f5baba15797e2e8b570d153bc8690a7/Modules/mathmodule.c#L1423\nexport class Adder {\n  constructor() {\n    this._partials = new Float64Array(32);\n    this._n = 0;\n  }\n  add(x) {\n    const p = this._partials;\n    let i = 0;\n    for (let j = 0; j < this._n && j < 32; j++) {\n      const y = p[j],\n        hi = x + y,\n        lo = Math.abs(x) < Math.abs(y) ? x - (hi - y) : y - (hi - x);\n      if (lo) p[i++] = lo;\n      x = hi;\n    }\n    p[i] = x;\n    this._n = i + 1;\n    return this;\n  }\n  valueOf() {\n    const p = this._partials;\n    let n = this._n, x, y, lo, hi = 0;\n    if (n > 0) {\n      hi = p[--n];\n      while (n > 0) {\n        x = hi;\n        y = p[--n];\n        hi = x + y;\n        lo = y - (hi - x);\n        if (lo) break;\n      }\n      if (n > 0 && ((lo < 0 && p[n - 1] < 0) || (lo > 0 && p[n - 1] > 0))) {\n        y = lo * 2;\n        x = hi + y;\n        if (y == x - hi) hi = x;\n      }\n    }\n    return hi;\n  }\n}\n\nexport function fsum(values, valueof) {\n  const adder = new Adder();\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value = +value) {\n        adder.add(value);\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if (value = +valueof(value, ++index, values)) {\n        adder.add(value);\n      }\n    }\n  }\n  return +adder;\n}\n\nexport function fcumsum(values, valueof) {\n  const adder = new Adder();\n  let index = -1;\n  return Float64Array.from(values, valueof === undefined\n      ? v => adder.add(+v || 0)\n      : v => adder.add(+valueof(v, ++index, values) || 0)\n  );\n}\n","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nexport default function(start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    let r0 = Math.round(start / step), r1 = Math.round(stop / step);\n    if (r0 * step < start) ++r0;\n    if (r1 * step > stop) --r1;\n    ticks = new Array(n = r1 - r0 + 1);\n    while (++i < n) ticks[i] = (r0 + i) * step;\n  } else {\n    step = -step;\n    let r0 = Math.round(start * step), r1 = Math.round(stop * step);\n    if (r0 / step < start) ++r0;\n    if (r1 / step > stop) --r1;\n    ticks = new Array(n = r1 - r0 + 1);\n    while (++i < n) ticks[i] = (r0 + i) / step;\n  }\n\n  if (reverse) ticks.reverse();\n\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0\n      ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)\n      : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\n\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;\n  else if (error >= e5) step1 *= 5;\n  else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}\n","export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.range(domain); break;\n    default: this.range(range).domain(domain); break;\n  }\n  return this;\n}\n\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: {\n      if (typeof domain === \"function\") this.interpolator(domain);\n      else this.range(domain);\n      break;\n    }\n    default: {\n      this.domain(domain);\n      if (typeof interpolator === \"function\") this.interpolator(interpolator);\n      else this.range(interpolator);\n      break;\n    }\n  }\n  return this;\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy: function(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n}\n\nfunction rgb_formatRgb() {\n  var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n  return (a === 1 ? \"rgb(\" : \"rgba(\")\n      + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n      + (a === 1 ? \")\" : \", \" + a + \")\");\n}\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"hsl(\" : \"hsla(\")\n        + (this.h || 0) + \", \"\n        + (this.s || 0) * 100 + \"%, \"\n        + (this.l || 0) * 100 + \"%\"\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export default x => () => x;\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function(t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n}\n\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n","import value from \"./value.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\n\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import value from \"./value.js\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport {genericArray} from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : isNumberArray(b) ? numberArray\n      : Array.isArray(b) ? genericArray\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return Math.round(a * (1 - t) + b * t);\n  };\n}\n","export default function number(x) {\n  return +x;\n}\n","import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateNumber, interpolateRound} from \"d3-interpolate\";\nimport constant from \"./constant.js\";\nimport number from \"./number.js\";\n\nvar unit = [0, 1];\n\nexport function identity(x) {\n  return x;\n}\n\nfunction normalize(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(isNaN(b) ? NaN : 0.5);\n}\n\nfunction clamper(a, b) {\n  var t;\n  if (a > b) t = a, a = b, b = t;\n  return function(x) { return Math.max(a, Math.min(b, x)); };\n}\n\n// normalize(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// interpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding range value x in [a,b].\nfunction bimap(domain, range, interpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = normalize(d1, d0), r0 = interpolate(r1, r0);\n  else d0 = normalize(d0, d1), r0 = interpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, interpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = normalize(domain[i], domain[i + 1]);\n    r[i] = interpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport function transformer() {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      transform,\n      untransform,\n      unknown,\n      clamp = identity,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    var n = Math.min(domain.length, range.length);\n    if (clamp !== identity) clamp = clamper(domain[0], domain[n - 1]);\n    piecewise = n > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return x == null || isNaN(x = +x) ? unknown : (output || (output = piecewise(domain.map(transform), range, interpolate)))(transform(clamp(x)));\n  }\n\n  scale.invert = function(y) {\n    return clamp(untransform((input || (input = piecewise(range, domain.map(transform), interpolateNumber)))(y)));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = Array.from(_, number), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = Array.from(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = _ ? true : identity, rescale()) : clamp !== identity;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t, u) {\n    transform = t, untransform = u;\n    return rescale();\n  };\n}\n\nexport default function continuous() {\n  return transformer()(identity, identity);\n}\n","export default function constants(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function(x) {\n  return Math.abs(x = Math.round(x)) >= 1e21\n      ? x.toLocaleString(\"en\").replace(/,/g, \"\")\n      : x.toString(10);\n}\n\n// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimalParts(1.23) returns [\"123\", 0].\nexport function formatDecimalParts(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, ±Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x) {\n  return x = formatDecimalParts(Math.abs(x)), x ? x[1] : NaN;\n}\n","// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  return new FormatSpecifier({\n    fill: match[1],\n    align: match[2],\n    sign: match[3],\n    symbol: match[4],\n    zero: match[5],\n    width: match[6],\n    comma: match[7],\n    precision: match[8] && match[8].slice(1),\n    trim: match[9],\n    type: match[10]\n  });\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nexport function FormatSpecifier(specifier) {\n  this.fill = specifier.fill === undefined ? \" \" : specifier.fill + \"\";\n  this.align = specifier.align === undefined ? \">\" : specifier.align + \"\";\n  this.sign = specifier.sign === undefined ? \"-\" : specifier.sign + \"\";\n  this.symbol = specifier.symbol === undefined ? \"\" : specifier.symbol + \"\";\n  this.zero = !!specifier.zero;\n  this.width = specifier.width === undefined ? undefined : +specifier.width;\n  this.comma = !!specifier.comma;\n  this.precision = specifier.precision === undefined ? undefined : +specifier.precision;\n  this.trim = !!specifier.trim;\n  this.type = specifier.type === undefined ? \"\" : specifier.type + \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width === undefined ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision === undefined ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimalParts(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","import formatDecimal from \"./formatDecimal.js\";\nimport formatPrefixAuto from \"./formatPrefixAuto.js\";\nimport formatRounded from \"./formatRounded.js\";\n\nexport default {\n  \"%\": (x, p) => (x * 100).toFixed(p),\n  \"b\": (x) => Math.round(x).toString(2),\n  \"c\": (x) => x + \"\",\n  \"d\": formatDecimal,\n  \"e\": (x, p) => x.toExponential(p),\n  \"f\": (x, p) => x.toFixed(p),\n  \"g\": (x, p) => x.toPrecision(p),\n  \"o\": (x) => Math.round(x).toString(8),\n  \"p\": (x, p) => formatRounded(x * 100, p),\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": (x) => Math.round(x).toString(16).toUpperCase(),\n  \"x\": (x) => Math.round(x).toString(16)\n};\n","export default function(x) {\n  return x;\n}\n","import exponent from \"./exponent.js\";\nimport formatGroup from \"./formatGroup.js\";\nimport formatNumerals from \"./formatNumerals.js\";\nimport formatSpecifier from \"./formatSpecifier.js\";\nimport formatTrim from \"./formatTrim.js\";\nimport formatTypes from \"./formatTypes.js\";\nimport {prefixExponent} from \"./formatPrefixAuto.js\";\nimport identity from \"./identity.js\";\n\nvar map = Array.prototype.map,\n    prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"µ\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping === undefined || locale.thousands === undefined ? identity : formatGroup(map.call(locale.grouping, Number), locale.thousands + \"\"),\n      currencyPrefix = locale.currency === undefined ? \"\" : locale.currency[0] + \"\",\n      currencySuffix = locale.currency === undefined ? \"\" : locale.currency[1] + \"\",\n      decimal = locale.decimal === undefined ? \".\" : locale.decimal + \"\",\n      numerals = locale.numerals === undefined ? identity : formatNumerals(map.call(locale.numerals, String)),\n      percent = locale.percent === undefined ? \"%\" : locale.percent + \"\",\n      minus = locale.minus === undefined ? \"−\" : locale.minus + \"\",\n      nan = locale.nan === undefined ? \"NaN\" : locale.nan + \"\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision === undefined && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currencyPrefix : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currencySuffix : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision === undefined ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Determine the sign. -0 is not less than 0, but 1 / -0 is!\n        var valueNegative = value < 0 || 1 / value < 0;\n\n        // Perform the initial formatting.\n        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero after formatting, and no explicit positive sign is requested, hide the sign.\n        if (valueNegative && +value === 0 && sign !== \"+\") valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : minus) : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer “value” part that can be\n        // grouped, and fractional or exponential “suffix” part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n","// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nexport default function(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (!+s[i]) break out; if (i0 > 0) i0 = 0; break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n","import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function tickFormat(start, stop, count, specifier) {\n  var step = tickStep(start, stop, count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step) {\n  return Math.max(0, -exponent(Math.abs(step)));\n}\n","import {ticks, tickIncrement} from \"d3-array\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport tickFormat from \"./tickFormat.js\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    var d = domain();\n    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);\n  };\n\n  scale.nice = function(count) {\n    if (count == null) count = 10;\n\n    var d = domain();\n    var i0 = 0;\n    var i1 = d.length - 1;\n    var start = d[i0];\n    var stop = d[i1];\n    var prestep;\n    var step;\n    var maxIter = 10;\n\n    if (stop < start) {\n      step = start, start = stop, stop = step;\n      step = i0, i0 = i1, i1 = step;\n    }\n    \n    while (maxIter-- > 0) {\n      step = tickIncrement(start, stop, count);\n      if (step === prestep) {\n        d[i0] = start\n        d[i1] = stop\n        return domain(d);\n      } else if (step > 0) {\n        start = Math.floor(start / step) * step;\n        stop = Math.ceil(stop / step) * step;\n      } else if (step < 0) {\n        start = Math.ceil(start * step) / step;\n        stop = Math.floor(stop * step) / step;\n      } else {\n        break;\n      }\n      prestep = step;\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous();\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return linearish(scale);\n}\n","import { scaleLinear } from 'd3-scale'\n\nexport function createScales ({ scaleX, scaleY }, { rangeX, rangeY }) {\n  return {\n    scaleX: createScale(scaleX, rangeX),\n    scaleY: createScale(scaleY, rangeY)\n  }\n}\nfunction createScale (scale, range) {\n  if (scale) {\n    if (scale.constructor === Array) {\n      return scaleLinear().domain(scale).range(range)\n    }\n\n    const newScale = scale.copy().range(range)\n    newScale.invert = createInvertMethod(newScale)\n\n    return newScale\n  }\n\n  if (!scale) {\n    return scaleLinear().domain(range).range(range)\n  }\n}\n\n/**\n * Taken from react-vis:\n * https://github.com/uber/react-vis/blob/master/src/utils/scales-utils.js#L161\n *\n * By default, d3.scaleBand and d3.scalePoint do not have an .invert method, which is why\n * we are doing this. There are some PRs open for this, though, so hopefully we can\n * get rid of this in the future:\n * - https://github.com/d3/d3-scale/pull/151\n * - https://github.com/d3/d3-scale/pull/60\n */\nfunction createInvertMethod (scale) {\n  if (scale.invert) {\n    return scale.invert\n  }\n\n  return function invert (value) {\n    const [lower, upper] = scale.range()\n    const start = Math.min(lower, upper)\n    const stop = Math.max(lower, upper)\n\n    const flipped = upper < lower\n\n    const domain = scale.domain()\n    const lastIndex = domain.length - 1\n\n    if (value < start + scale.padding() * scale.step()) {\n      return domain[0]\n    }\n\n    if (value > stop - scale.padding() * scale.step()) {\n      return domain[lastIndex]\n    }\n\n    let index\n\n    if (isPointScale(scale)) {\n      index = Math.round((value - start - scale.padding() * scale.step()) / scale.step())\n    }\n\n    if (isBandScale(scale)) {\n      index = Math.round((value - start - scale.padding() * scale.step()) / scale.step())\n      if (index > lastIndex) index = lastIndex\n    }\n\n    return domain[flipped ? lastIndex - index : index]\n  }\n}\n\nfunction isPointScale (scale) {\n  return !('paddingInner' in scale)\n}\n\nfunction isBandScale (scale) {\n  return 'paddingInner' in scale\n}\n\nexport function createFinalScales ({ rangeX, rangeY }, { finalRangeX, finalRangeY }) {\n  const finalScaleX = scaleLinear().domain(rangeX).range(finalRangeX)\n  const finalScaleY = scaleLinear().domain(rangeY).range(finalRangeY)\n\n  return { finalScaleX, finalScaleY }\n}\n","import { scaleLinear } from 'd3-scale'\n\nexport function createPolarTransformation (\n  { rangeX, rangeY },\n  { finalRangeX, finalRangeY }\n) {\n  const toTheta = scaleLinear().domain(rangeX).range([0, 2 * Math.PI])\n  const toRadius = scaleLinear().domain(rangeY).range([0, 1])\n\n  const fitX = scaleLinear().domain([-1, 1]).range(finalRangeX)\n  const fitY = scaleLinear().domain([-1, 1]).range(finalRangeY)\n\n  const transform = function transform ([x, y]) {\n    const theta = toTheta(x)\n    const radius = toRadius(y)\n    const coords = polarToCartesian(theta, radius)\n\n    return [fitX(coords[0]), fitY(coords[1])]\n  }\n\n  const invert = function invert ([x, y]) {\n    const smallCoords = [fitX.invert(x), fitY.invert(y)]\n    const [theta, radius] = cartesianToPolar(...smallCoords)\n\n    return [toTheta.invert(theta), toRadius.invert(radius)]\n  }\n\n  transform.invert = invert\n\n  return transform\n}\n\nfunction polarToCartesian (theta, radius) {\n  const x = radius * Math.sin(theta)\n  const y = radius * Math.cos(theta)\n\n  return [x, y]\n}\n\n// https://www.mathsisfun.com/polar-cartesian-coordinates.html\nfunction cartesianToPolar (x, y) {\n  const quadrant = getQuadrant(x, y)\n\n  const r = Math.sqrt(y ** 2 + x ** 2)\n  let theta = Math.atan(x / y)\n\n  if (quadrant === 2) {\n    theta += Math.PI * 2\n  }\n\n  if (quadrant === 3) {\n    theta += Math.PI\n  }\n\n  if (quadrant === 4) {\n    theta += Math.PI\n  }\n\n  return [theta, r]\n}\n\nfunction getQuadrant (x, y) {\n  if (x >= 0 && y >= 0) return 1\n  if (x < 0 && y >= 0) return 2\n  if (x < 0 && y < 0) return 3\n  if (x >= 0 && y < 0) return 4\n}\n","import { createPolarTransformation } from './polar.js'\n\nexport function attachTransformations (sectionContext) {\n  const {\n    transformation,\n    rangeX,\n    rangeY,\n    finalRangeX,\n    finalRangeY,\n    scaleX,\n    scaleY,\n    finalScaleX,\n    finalScaleY\n  } = sectionContext\n\n  if (transformation !== 'polar') {\n    sectionContext.getTotalTransformation = needsScaling => {\n      const { xNeedsScaling, yNeedsScaling } = parseNeedsScaling(needsScaling)\n\n      return ([x, y]) => ([\n        finalScaleX(xNeedsScaling ? scaleX(x) : x),\n        finalScaleY(yNeedsScaling ? scaleY(y) : y)\n      ])\n    }\n\n    sectionContext.inverseTotalTransformation = ([x, y]) => ([\n      scaleX.invert(finalScaleX.invert(x)),\n      scaleY.invert(finalScaleY.invert(y))\n    ])\n  }\n\n  if (transformation === 'polar') {\n    const getScaleTransformation = needsScaling => {\n      const { xNeedsScaling, yNeedsScaling } = parseNeedsScaling(needsScaling)\n\n      return ([x, y]) => ([\n        xNeedsScaling ? scaleX(x) : x,\n        yNeedsScaling ? scaleY(y) : y\n      ])\n    }\n\n    const postScaleTransformation = createPolarTransformation(\n      { rangeX, rangeY },\n      { finalRangeX, finalRangeY }\n    )\n\n    sectionContext.getScaleTransformation = getScaleTransformation\n    sectionContext.postScaleTransformation = postScaleTransformation\n\n    sectionContext.getTotalTransformation = needsScaling => {\n      const scaleTransformation = getScaleTransformation(needsScaling)\n\n      return point => (\n        postScaleTransformation(scaleTransformation(point))\n      )\n    }\n\n    const inverseScaleTransformation = ([x, y]) => ([\n      scaleX.invert(x),\n      scaleY.invert(y)\n    ])\n\n    sectionContext.inverseTotalTransformation = point => (\n      inverseScaleTransformation(postScaleTransformation.invert(point))\n    )\n  }\n}\n\nfunction parseNeedsScaling (needsScaling) {\n  if (needsScaling === undefined) {\n    return {\n      xNeedsScaling: true,\n      yNeedsScaling: true\n    }\n  }\n\n  if (needsScaling.constructor === Boolean) {\n    return {\n      xNeedsScaling: needsScaling,\n      yNeedsScaling: needsScaling\n    }\n  }\n\n  if (needsScaling.constructor === Object) {\n    return needsScaling\n  }\n}\n","import { parsePadding } from '../../utils/padding.js'\nimport { getRanges, getFinalRanges } from './getRanges.js'\nimport { createScales, createFinalScales } from './createScales.js'\nimport { attachTransformations } from './attachTransformations.js'\n\nexport function createSectionContext (sectionData) {\n  sectionData.zoomIdentity = parseZoomIdentity(sectionData.zoomIdentity)\n\n  const padding = parsePadding(sectionData.padding)\n  const ranges = getRanges(sectionData)\n  const finalRanges = getFinalRanges(sectionData, ranges, padding)\n  const scales = createScales(sectionData, ranges)\n  const finalScales = createFinalScales(ranges, finalRanges)\n\n  const sectionContext = constructSectionContext(\n    sectionData,\n    padding,\n    ranges,\n    finalRanges,\n    scales,\n    finalScales\n  )\n\n  attachTransformations(sectionContext)\n\n  return sectionContext\n}\n\nfunction parseZoomIdentity (zoomIdentity) {\n  return Object.assign({ x: 0, y: 0, kx: 1, ky: 1 }, zoomIdentity)\n}\n\nfunction constructSectionContext (\n  { scaleX, scaleY, padding: _, ...sectionData },\n  padding,\n  ranges,\n  finalRanges,\n  scales,\n  finalScales\n) {\n  return {\n    ...sectionData,\n    padding,\n    ...ranges,\n    ...finalRanges,\n    ...scales,\n    ...finalScales,\n    bbox: getBbox(ranges),\n    paddedBbox: getPaddedBbox(ranges, padding)\n  }\n}\n\nfunction getBbox ({ rangeX, rangeY }) {\n  return {\n    minX: Math.min(...rangeX),\n    maxX: Math.max(...rangeX),\n    minY: Math.min(...rangeY),\n    maxY: Math.max(...rangeY)\n  }\n}\n\nfunction getPaddedBbox ({ rangeX, rangeY }, { left, right, top, bottom }) {\n  return {\n    minX: Math.min(...rangeX) + left,\n    maxX: Math.max(...rangeX) - right,\n    minY: Math.min(...rangeY) + top,\n    maxY: Math.max(...rangeY) - bottom\n  }\n}\n","import { getContext, setContext } from 'svelte'\nimport { writable } from 'svelte/store'\nimport { createSectionContext } from './createSectionContext.js'\n\nconst key = {}\n\nexport function subscribe () {\n  return getContext(key)\n}\n\nexport function init () {\n  const sectionContext = writable()\n  setContext(key, sectionContext)\n\n  return sectionContext\n}\n\nexport function update (sectionContext, options) {\n  sectionContext.set(createSectionContext(options))\n}\n","import { getContext, setContext } from 'svelte'\nimport { writable } from 'svelte/store'\n\nconst key = {}\n\nexport function subscribe () {\n  return getContext(key)\n}\n\nexport function init () {\n  const eventManagerContext = writable()\n  setContext(key, eventManagerContext)\n\n  return eventManagerContext\n}\n\nexport function update (eventManagerContext, eventManager) {\n  eventManagerContext.set(eventManager)\n}\n","import { getContext, setContext } from 'svelte'\nimport { writable } from 'svelte/store'\n\nconst key = {}\n\nexport function subscribe () {\n  return getContext(key)\n}\n\nexport function init () {\n  const interactionManagerContext = writable()\n  setContext(key, interactionManagerContext)\n\n  return interactionManagerContext\n}\n\nexport function update (interactionManagerContext, interactionManager) {\n  interactionManagerContext.set(interactionManager)\n}\n","let handler\n\nexport default class EventTracker {\n  constructor (eventManager, { eventName, nativeEventName, useWindow, preventDefault }) {\n    this._eventManager = eventManager\n    this._eventName = eventName\n    this._nativeEventName = nativeEventName\n    this._useWindow = useWindow\n    this._preventDefault = preventDefault\n\n    this._numberOfActiveListeners = 0\n    this._callbacks = {}\n  }\n\n  setNativeEventName (nativeEventName) {\n    this._nativeEventName = nativeEventName\n  }\n\n  addListener (listenerId, callback) {\n    this._callbacks[listenerId] = callback\n\n    if (this._eventManagerHasBeenMounted()) {\n      this._attachNativeListenerIfNecessary()\n    }\n  }\n\n  attachAllListeners () {\n    /* eslint-disable-next-line */\n    for (const _ in this._callbacks) {\n      this._attachNativeListenerIfNecessary()\n    }\n  }\n\n  removeListener (listenerId) {\n    delete this._callbacks[listenerId]\n\n    if (this._eventManagerHasBeenMounted()) {\n      this._removeNativeListenerIfNecessary()\n    }\n  }\n\n  _eventManagerHasBeenMounted () {\n    return this._eventManager._mounted\n  }\n\n  _attachNativeListenerIfNecessary () {\n    if (this._numberOfActiveListeners === 0) {\n      handler = this._handleEvent.bind(this)\n      const nativeEventName = this._nativeEventName\n\n      if (this._useWindow) {\n        window.addEventListener(nativeEventName, handler)\n      }\n\n      if (!this._useWindow) {\n        this._eventManager._domNode.addEventListener(nativeEventName, handler)\n      }\n    }\n\n    this._numberOfActiveListeners++\n  }\n\n  _removeNativeListenerIfNecessary () {\n    this._numberOfActiveListeners--\n\n    if (this._numberOfActiveListeners === 0) {\n      const nativeEventName = this._nativeEventName\n\n      if (this._useWindow) {\n        window.removeEventListener(nativeEventName, handler)\n      }\n\n      if (!this._useWindow) {\n        this._eventManager._domNode.removeEventListener(nativeEventName, handler)\n      }\n    }\n  }\n\n  _handleEvent (nativeEvent) {\n    if (this._preventDefault) nativeEvent.preventDefault()\n\n    const screenCoordinates = this._getScreenCoordinates(nativeEvent)\n    nativeEvent.eventName = this._eventName\n\n    for (const listenerId in this._callbacks) {\n      this._callbacks[listenerId](screenCoordinates, nativeEvent)\n    }\n  }\n\n  _getScreenCoordinates (nativeEvent) {\n    return this._eventManager._getScreenCoordinates(nativeEvent)\n  }\n}\n","import EventTracker from './EventTracker.js'\n\nexport default class BaseEventManager {\n  constructor (EXPOSED_EVENTS, managerType) {\n    this._domNode = undefined\n    this._svgPoint = undefined\n    this._mounted = false\n    this._trackers = {}\n    this._BROWSER_TYPE = undefined\n    this._managerType = managerType\n\n    for (const event of EXPOSED_EVENTS) {\n      this._trackers[event.eventName] = new EventTracker(this, event)\n    }\n  }\n\n  // Svelte can only bind to DOM nodes after initialization\n  addRootNode (domNode) {\n    this._domNode = domNode\n    this._svgPoint = this._domNode.createSVGPoint()\n\n    // set browser type only after mount\n    this._BROWSER_TYPE = window.navigator.pointerEnabled\n      ? 'IE11 / MSEdge'\n      : window.navigator.msPointerEnabled\n        ? 'IE10 / WP8'\n        : 'other'\n\n    this._mounted = true\n  }\n\n  attachEventListeners () {\n    if (this._mounted === false) throw new Error('root node must be added first')\n\n    for (const eventName in this._trackers) {\n      // set native event names here, just before attaching actual listeners\n      if (this._managerType === 'mouse') {\n        this._trackers[eventName].setNativeEventName(this._getNativeMouseEventName(eventName, this._BROWSER_TYPE))\n      }\n      if (this._managerType === 'touch') {\n        this._trackers[eventName].setNativeEventName(this._getNativeTouchEventName(eventName, this._BROWSER_TYPE))\n      }\n\n      this._trackers[eventName].attachAllListeners()\n    }\n  }\n\n  eventTracker (eventName) {\n    return this._trackers[eventName]\n  }\n}\n","export default str => str.charAt(0).toUpperCase() + str.slice(1)\n","import BaseEventManager from './BaseEventManager.js'\nimport capitalize from '../../utils/capitalize.js'\n\nexport default class MouseEventManager extends BaseEventManager {\n  constructor () {\n    super(EXPOSED_EVENTS, 'mouse')\n  }\n\n  _getNativeMouseEventName (exposedEventName, BROWSER_TYPE) {\n    // 'click' has the same name in every non-mobile browser\n    if (exposedEventName === 'click') return 'click'\n\n    // 'wheel' has the same name in every non-mobile browser\n    if (exposedEventName === 'wheel') return 'wheel'\n\n    // In this non-mobile browser type, events are called 'pointerup' etc\n    if (BROWSER_TYPE === 'IE11 / MSEdge') {\n      const lastPart = sliceOffMouse(exposedEventName)\n      return 'pointer' + lastPart\n    }\n\n    // In this non-mobile browser type, events are called 'MSPointerUp' etc\n    if (BROWSER_TYPE === 'IE10 / WP8') {\n      const lastPart = sliceOffMouse(exposedEventName)\n      return 'MSPointer' + capitalize(lastPart)\n    }\n\n    // In other non-mobile browsers, events are called like the exposed ones\n    if (BROWSER_TYPE === 'other') {\n      return exposedEventName\n    }\n  }\n\n  _getScreenCoordinates (nativeEvent) {\n    this._svgPoint.x = nativeEvent.clientX\n    this._svgPoint.y = nativeEvent.clientY\n\n    return this._svgPoint.matrixTransform(this._domNode.getScreenCTM().inverse())\n  }\n}\n\nconst EVENT_NAMES = ['mousedown', 'mouseup', 'mousemove', 'mouseout', 'click', 'wheel']\nconst WINDOW_EVENTS = ['mousemove', 'mouseup']\nconst PREVENT_DEFAULT = ['mousedown']\n\nconst EXPOSED_EVENTS = EVENT_NAMES.map(eventName => ({\n  eventName,\n  nativeEventName: undefined,\n  useWindow: WINDOW_EVENTS.includes(eventName),\n  preventDefault: PREVENT_DEFAULT.includes(eventName)\n}))\n\nconst sliceOffMouse = str => str.slice(5, str.length)\n","import BaseEventManager from './BaseEventManager.js'\nimport capitalize from '../../utils/capitalize.js'\n\nexport default class TouchEventManager extends BaseEventManager {\n  constructor () {\n    super(EXPOSED_EVENTS, 'touch')\n  }\n\n  _getNativeTouchEventName (exposedEventName, BROWSER_TYPE) {\n    // In this mobile browser type, events are called 'pointerup' etc\n    if (BROWSER_TYPE === 'IE11 / MSEdge') {\n      const lastPart = sliceOffTouch(exposedEventName)\n      return 'pointer' + lastPart\n    }\n\n    // In this mobile browser type, events are called 'MSPointerUp' etc\n    if (BROWSER_TYPE === 'IE10 / WP8') {\n      const lastPart = sliceOffTouch(exposedEventName)\n      return 'MSPointer' + capitalize(lastPart)\n    }\n\n    // In other mobile browsers, events are called like the exposed ones\n    if (BROWSER_TYPE === 'other') {\n      return exposedEventName\n    }\n  }\n\n  _getScreenCoordinates (nativeEvent) {\n    const touches = getTouches(nativeEvent)\n\n    if (touches.length === 1) {\n      return this._getScreenCoordinatesSingle(touches[0])\n    }\n\n    if (touches.length > 1) {\n      return this._getScreenCoordinatesMulti(touches)\n    }\n  }\n\n  _getScreenCoordinatesSingle (touch) {\n    this._svgPoint.x = touch.clientX\n    this._svgPoint.y = touch.clientY\n\n    return this._svgPoint.matrixTransform(this._domNode.getScreenCTM().inverse())\n  }\n\n  _getScreenCoordinatesMulti (touches) {\n    const touchesInScreenCoordinates = []\n\n    for (const touch of touches) {\n      touchesInScreenCoordinates.push(this._getScreenCoordinatesSingle(touch))\n    }\n\n    return touchesInScreenCoordinates\n  }\n}\n\nconst EVENT_NAMES = ['touchstart', 'touchend', 'touchmove', 'touchcancel']\n\nconst EXPOSED_EVENTS = EVENT_NAMES.map(eventName => ({\n  eventName,\n  nativeEventName: undefined,\n  useWindow: false,\n  preventDefault: true\n}))\n\nconst sliceOffTouch = str => str.slice(5, str.length)\n\nfunction getTouches (nativeEvent) {\n  return nativeEvent.touches\n}\n","import * as detectIt from '../../utils/detect.js'\n\nimport MouseEventManager from './MouseEventManager.js'\nimport TouchEventManager from './TouchEventManager.js'\n\nexport default class EventManager {\n  constructor () {\n    if (detectIt.primaryInput === 'mouse') {\n      this._mouseEventManager = new MouseEventManager()\n    }\n\n    if (detectIt.primaryInput === 'touch') {\n      this._touchEventManager = new TouchEventManager()\n    }\n  }\n\n  // Initialization\n  addRootNode (domNode) {\n    this._forEachManager(manager => { manager.addRootNode(domNode) })\n  }\n\n  attachEventListeners () {\n    this._forEachManager(manager => { manager.attachEventListeners() })\n  }\n\n  mouse () {\n    return this._mouseEventManager\n  }\n\n  touch () {\n    return this._touchEventManager\n  }\n\n  _forEachManager (callback) {\n    if (this._mouseEventManager) callback(this._mouseEventManager)\n    if (this._touchEventManager) callback(this._touchEventManager)\n  }\n}\n","export default class BaseInteractionManager {\n  constructor () {\n    this._id = undefined\n    this._eventManager = undefined\n\n    this._section = undefined\n\n    this._markInteractionInterface = undefined\n    this._sectionInteractionInterface = undefined\n  }\n\n  // Initialization\n  setId (id) {\n    this._id = id\n  }\n\n  linkEventManager (eventManager) {\n    this._eventManager = eventManager\n  }\n\n  // Section context loading\n  loadSection (sectionData) {\n    this._section = sectionData\n  }\n\n  // Mark and layer interactions interface\n  marks () {\n    return this._markInteractionInterface\n  }\n\n  // Section interactions interface\n  section () {\n    return this._sectionInteractionInterface\n  }\n}\n","import capitalize from '../../../../utils/capitalize.js'\n\nexport default class BaseInteractionInterface {\n  constructor (interactionManager, InteractionHandlers) {\n    this._interactionManager = interactionManager\n    this._handlers = {}\n\n    for (const handlerName in InteractionHandlers) {\n      this._handlers[handlerName] = new InteractionHandlers[handlerName](this._interactionManager)\n    }\n  }\n\n  _getHandler (interactionName) {\n    const handlerName = interactionNameToHandlerName(interactionName)\n    return this._handlers[handlerName]\n  }\n}\n\nconst interactionNameToHandlerName = interactionName => {\n  return capitalize(interactionName) + 'Handler'\n}\n","export function indexPoint (markData) {\n  const pointAttributes = markData.attributes\n\n  const item = calculateBboxPoint(pointAttributes)\n\n  item.attributes = pointAttributes\n  item.markType = 'Point'\n  item.markId = markData.markId\n\n  return item\n}\n\nexport function indexPointLayer ({ layerAttributes, keyArray, layerId }) {\n  const items = []\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n\n    const pointAttributes = getPointAttributes(layerAttributes, key)\n    const item = calculateBboxPoint(pointAttributes)\n\n    item.key = key\n    item.index = i\n    item.attributes = pointAttributes\n    item.markType = 'Point'\n    item.layerId = layerId\n\n    items.push(item)\n  }\n\n  return items\n}\n\nfunction calculateBboxPoint (pointAttributes) {\n  const x = pointAttributes.pixelGeometry.coordinates[0]\n  const y = pointAttributes.pixelGeometry.coordinates[1]\n\n  return {\n    minX: x - pointAttributes.radius,\n    maxX: x + pointAttributes.radius,\n    minY: y - pointAttributes.radius,\n    maxY: y + pointAttributes.radius\n  }\n}\n\nfunction getPointAttributes (layerAttributes, key) {\n  return {\n    pixelGeometry: layerAttributes.pixelGeometryObject[key],\n    radius: layerAttributes.radiusObject[key]\n  }\n}\n","export var epsilon = 1e-6;\nexport var epsilon2 = 1e-12;\nexport var pi = Math.PI;\nexport var halfPi = pi / 2;\nexport var quarterPi = pi / 4;\nexport var tau = pi * 2;\n\nexport var degrees = 180 / pi;\nexport var radians = pi / 180;\n\nexport var abs = Math.abs;\nexport var atan = Math.atan;\nexport var atan2 = Math.atan2;\nexport var cos = Math.cos;\nexport var ceil = Math.ceil;\nexport var exp = Math.exp;\nexport var floor = Math.floor;\nexport var hypot = Math.hypot;\nexport var log = Math.log;\nexport var pow = Math.pow;\nexport var sin = Math.sin;\nexport var sign = Math.sign || function(x) { return x > 0 ? 1 : x < 0 ? -1 : 0; };\nexport var sqrt = Math.sqrt;\nexport var tan = Math.tan;\n\nexport function acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\n\nexport function asin(x) {\n  return x > 1 ? halfPi : x < -1 ? -halfPi : Math.asin(x);\n}\n\nexport function haversin(x) {\n  return (x = sin(x / 2)) * x;\n}\n","export default function noop() {}\n","function streamGeometry(geometry, stream) {\n  if (geometry && streamGeometryType.hasOwnProperty(geometry.type)) {\n    streamGeometryType[geometry.type](geometry, stream);\n  }\n}\n\nvar streamObjectType = {\n  Feature: function(object, stream) {\n    streamGeometry(object.geometry, stream);\n  },\n  FeatureCollection: function(object, stream) {\n    var features = object.features, i = -1, n = features.length;\n    while (++i < n) streamGeometry(features[i].geometry, stream);\n  }\n};\n\nvar streamGeometryType = {\n  Sphere: function(object, stream) {\n    stream.sphere();\n  },\n  Point: function(object, stream) {\n    object = object.coordinates;\n    stream.point(object[0], object[1], object[2]);\n  },\n  MultiPoint: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) object = coordinates[i], stream.point(object[0], object[1], object[2]);\n  },\n  LineString: function(object, stream) {\n    streamLine(object.coordinates, stream, 0);\n  },\n  MultiLineString: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) streamLine(coordinates[i], stream, 0);\n  },\n  Polygon: function(object, stream) {\n    streamPolygon(object.coordinates, stream);\n  },\n  MultiPolygon: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) streamPolygon(coordinates[i], stream);\n  },\n  GeometryCollection: function(object, stream) {\n    var geometries = object.geometries, i = -1, n = geometries.length;\n    while (++i < n) streamGeometry(geometries[i], stream);\n  }\n};\n\nfunction streamLine(coordinates, stream, closed) {\n  var i = -1, n = coordinates.length - closed, coordinate;\n  stream.lineStart();\n  while (++i < n) coordinate = coordinates[i], stream.point(coordinate[0], coordinate[1], coordinate[2]);\n  stream.lineEnd();\n}\n\nfunction streamPolygon(coordinates, stream) {\n  var i = -1, n = coordinates.length;\n  stream.polygonStart();\n  while (++i < n) streamLine(coordinates[i], stream, 1);\n  stream.polygonEnd();\n}\n\nexport default function(object, stream) {\n  if (object && streamObjectType.hasOwnProperty(object.type)) {\n    streamObjectType[object.type](object, stream);\n  } else {\n    streamGeometry(object, stream);\n  }\n}\n","import {Adder} from \"d3-array\";\nimport {abs} from \"../math.js\";\nimport noop from \"../noop.js\";\n\nvar areaSum = new Adder(),\n    areaRingSum = new Adder(),\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar areaStream = {\n  point: noop,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: function() {\n    areaStream.lineStart = areaRingStart;\n    areaStream.lineEnd = areaRingEnd;\n  },\n  polygonEnd: function() {\n    areaStream.lineStart = areaStream.lineEnd = areaStream.point = noop;\n    areaSum.add(abs(areaRingSum));\n    areaRingSum = new Adder();\n  },\n  result: function() {\n    var area = areaSum / 2;\n    areaSum = new Adder();\n    return area;\n  }\n};\n\nfunction areaRingStart() {\n  areaStream.point = areaPointFirst;\n}\n\nfunction areaPointFirst(x, y) {\n  areaStream.point = areaPoint;\n  x00 = x0 = x, y00 = y0 = y;\n}\n\nfunction areaPoint(x, y) {\n  areaRingSum.add(y0 * x - x0 * y);\n  x0 = x, y0 = y;\n}\n\nfunction areaRingEnd() {\n  areaPoint(x00, y00);\n}\n\nexport default areaStream;\n","export default x => x;\n","import noop from \"../noop.js\";\n\nvar x0 = Infinity,\n    y0 = x0,\n    x1 = -x0,\n    y1 = x1;\n\nvar boundsStream = {\n  point: boundsPoint,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: noop,\n  polygonEnd: noop,\n  result: function() {\n    var bounds = [[x0, y0], [x1, y1]];\n    x1 = y1 = -(y0 = x0 = Infinity);\n    return bounds;\n  }\n};\n\nfunction boundsPoint(x, y) {\n  if (x < x0) x0 = x;\n  if (x > x1) x1 = x;\n  if (y < y0) y0 = y;\n  if (y > y1) y1 = y;\n}\n\nexport default boundsStream;\n","import {sqrt} from \"../math.js\";\n\n// TODO Enforce positive area for exterior, negative area for interior?\n\nvar X0 = 0,\n    Y0 = 0,\n    Z0 = 0,\n    X1 = 0,\n    Y1 = 0,\n    Z1 = 0,\n    X2 = 0,\n    Y2 = 0,\n    Z2 = 0,\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar centroidStream = {\n  point: centroidPoint,\n  lineStart: centroidLineStart,\n  lineEnd: centroidLineEnd,\n  polygonStart: function() {\n    centroidStream.lineStart = centroidRingStart;\n    centroidStream.lineEnd = centroidRingEnd;\n  },\n  polygonEnd: function() {\n    centroidStream.point = centroidPoint;\n    centroidStream.lineStart = centroidLineStart;\n    centroidStream.lineEnd = centroidLineEnd;\n  },\n  result: function() {\n    var centroid = Z2 ? [X2 / Z2, Y2 / Z2]\n        : Z1 ? [X1 / Z1, Y1 / Z1]\n        : Z0 ? [X0 / Z0, Y0 / Z0]\n        : [NaN, NaN];\n    X0 = Y0 = Z0 =\n    X1 = Y1 = Z1 =\n    X2 = Y2 = Z2 = 0;\n    return centroid;\n  }\n};\n\nfunction centroidPoint(x, y) {\n  X0 += x;\n  Y0 += y;\n  ++Z0;\n}\n\nfunction centroidLineStart() {\n  centroidStream.point = centroidPointFirstLine;\n}\n\nfunction centroidPointFirstLine(x, y) {\n  centroidStream.point = centroidPointLine;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nfunction centroidPointLine(x, y) {\n  var dx = x - x0, dy = y - y0, z = sqrt(dx * dx + dy * dy);\n  X1 += z * (x0 + x) / 2;\n  Y1 += z * (y0 + y) / 2;\n  Z1 += z;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nfunction centroidLineEnd() {\n  centroidStream.point = centroidPoint;\n}\n\nfunction centroidRingStart() {\n  centroidStream.point = centroidPointFirstRing;\n}\n\nfunction centroidRingEnd() {\n  centroidPointRing(x00, y00);\n}\n\nfunction centroidPointFirstRing(x, y) {\n  centroidStream.point = centroidPointRing;\n  centroidPoint(x00 = x0 = x, y00 = y0 = y);\n}\n\nfunction centroidPointRing(x, y) {\n  var dx = x - x0,\n      dy = y - y0,\n      z = sqrt(dx * dx + dy * dy);\n\n  X1 += z * (x0 + x) / 2;\n  Y1 += z * (y0 + y) / 2;\n  Z1 += z;\n\n  z = y0 * x - x0 * y;\n  X2 += z * (x0 + x);\n  Y2 += z * (y0 + y);\n  Z2 += z * 3;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nexport default centroidStream;\n","import {tau} from \"../math.js\";\nimport noop from \"../noop.js\";\n\nexport default function PathContext(context) {\n  this._context = context;\n}\n\nPathContext.prototype = {\n  _radius: 4.5,\n  pointRadius: function(_) {\n    return this._radius = _, this;\n  },\n  polygonStart: function() {\n    this._line = 0;\n  },\n  polygonEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line === 0) this._context.closePath();\n    this._point = NaN;\n  },\n  point: function(x, y) {\n    switch (this._point) {\n      case 0: {\n        this._context.moveTo(x, y);\n        this._point = 1;\n        break;\n      }\n      case 1: {\n        this._context.lineTo(x, y);\n        break;\n      }\n      default: {\n        this._context.moveTo(x + this._radius, y);\n        this._context.arc(x, y, this._radius, 0, tau);\n        break;\n      }\n    }\n  },\n  result: noop\n};\n","import {Adder} from \"d3-array\";\nimport {sqrt} from \"../math.js\";\nimport noop from \"../noop.js\";\n\nvar lengthSum = new Adder(),\n    lengthRing,\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar lengthStream = {\n  point: noop,\n  lineStart: function() {\n    lengthStream.point = lengthPointFirst;\n  },\n  lineEnd: function() {\n    if (lengthRing) lengthPoint(x00, y00);\n    lengthStream.point = noop;\n  },\n  polygonStart: function() {\n    lengthRing = true;\n  },\n  polygonEnd: function() {\n    lengthRing = null;\n  },\n  result: function() {\n    var length = +lengthSum;\n    lengthSum = new Adder();\n    return length;\n  }\n};\n\nfunction lengthPointFirst(x, y) {\n  lengthStream.point = lengthPoint;\n  x00 = x0 = x, y00 = y0 = y;\n}\n\nfunction lengthPoint(x, y) {\n  x0 -= x, y0 -= y;\n  lengthSum.add(sqrt(x0 * x0 + y0 * y0));\n  x0 = x, y0 = y;\n}\n\nexport default lengthStream;\n","export default function PathString() {\n  this._string = [];\n}\n\nPathString.prototype = {\n  _radius: 4.5,\n  _circle: circle(4.5),\n  pointRadius: function(_) {\n    if ((_ = +_) !== this._radius) this._radius = _, this._circle = null;\n    return this;\n  },\n  polygonStart: function() {\n    this._line = 0;\n  },\n  polygonEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line === 0) this._string.push(\"Z\");\n    this._point = NaN;\n  },\n  point: function(x, y) {\n    switch (this._point) {\n      case 0: {\n        this._string.push(\"M\", x, \",\", y);\n        this._point = 1;\n        break;\n      }\n      case 1: {\n        this._string.push(\"L\", x, \",\", y);\n        break;\n      }\n      default: {\n        if (this._circle == null) this._circle = circle(this._radius);\n        this._string.push(\"M\", x, \",\", y, this._circle);\n        break;\n      }\n    }\n  },\n  result: function() {\n    if (this._string.length) {\n      var result = this._string.join(\"\");\n      this._string = [];\n      return result;\n    } else {\n      return null;\n    }\n  }\n};\n\nfunction circle(radius) {\n  return \"m0,\" + radius\n      + \"a\" + radius + \",\" + radius + \" 0 1,1 0,\" + -2 * radius\n      + \"a\" + radius + \",\" + radius + \" 0 1,1 0,\" + 2 * radius\n      + \"z\";\n}\n","import identity from \"../identity.js\";\nimport stream from \"../stream.js\";\nimport pathArea from \"./area.js\";\nimport pathBounds from \"./bounds.js\";\nimport pathCentroid from \"./centroid.js\";\nimport PathContext from \"./context.js\";\nimport pathMeasure from \"./measure.js\";\nimport PathString from \"./string.js\";\n\nexport default function(projection, context) {\n  var pointRadius = 4.5,\n      projectionStream,\n      contextStream;\n\n  function path(object) {\n    if (object) {\n      if (typeof pointRadius === \"function\") contextStream.pointRadius(+pointRadius.apply(this, arguments));\n      stream(object, projectionStream(contextStream));\n    }\n    return contextStream.result();\n  }\n\n  path.area = function(object) {\n    stream(object, projectionStream(pathArea));\n    return pathArea.result();\n  };\n\n  path.measure = function(object) {\n    stream(object, projectionStream(pathMeasure));\n    return pathMeasure.result();\n  };\n\n  path.bounds = function(object) {\n    stream(object, projectionStream(pathBounds));\n    return pathBounds.result();\n  };\n\n  path.centroid = function(object) {\n    stream(object, projectionStream(pathCentroid));\n    return pathCentroid.result();\n  };\n\n  path.projection = function(_) {\n    return arguments.length ? (projectionStream = _ == null ? (projection = null, identity) : (projection = _).stream, path) : projection;\n  };\n\n  path.context = function(_) {\n    if (!arguments.length) return context;\n    contextStream = _ == null ? (context = null, new PathString) : new PathContext(context = _);\n    if (typeof pointRadius !== \"function\") contextStream.pointRadius(pointRadius);\n    return path;\n  };\n\n  path.pointRadius = function(_) {\n    if (!arguments.length) return pointRadius;\n    pointRadius = typeof _ === \"function\" ? _ : (contextStream.pointRadius(+_), +_);\n    return path;\n  };\n\n  return path.projection(projection).context(context);\n}\n","export function isInvalid (value) {\n  if (value === undefined || value === null) { return true }\n\n  if (value.constructor === Number) {\n    return !isFinite(value)\n  }\n\n  return false\n}\n\nexport function isValid (value) {\n  return !isInvalid(value)\n}\n\nexport function isDefined (value) {\n  return value !== undefined\n}\n\nexport function isUndefined (value) {\n  return value === undefined\n}\n","import { geoPath } from 'd3-geo'\nimport { isInvalid } from '../equals.js'\n\nexport function calculateBboxGeometries (geometries) {\n  let bbox = [[Infinity, Infinity], [-Infinity, -Infinity]]\n\n  for (let i = 0; i < geometries.length; i++) {\n    const geometry = geometries[i]\n\n    if (!isInvalid(geometry)) {\n      bbox = updateBbox(bbox, geometry)\n    }\n  }\n\n  const bboxObj = {\n    x: [bbox[0][0], bbox[1][0]],\n    y: [bbox[0][1], bbox[1][1]]\n  }\n\n  return bboxObj\n}\n\nexport function calculateBboxGeometry (geometry) {\n  const bbox = path.bounds(geometry)\n\n  const bboxObj = {\n    x: [bbox[0][0], bbox[1][0]],\n    y: [bbox[0][1], bbox[1][1]]\n  }\n\n  return bboxObj\n}\n\nconst path = geoPath()\n\nfunction updateBbox (bbox, geometry) {\n  const newBbox = path.bounds(geometry)\n\n  bbox[0][0] = bbox[0][0] < newBbox[0][0] ? bbox[0][0] : newBbox[0][0]\n  bbox[0][1] = bbox[0][1] < newBbox[0][1] ? bbox[0][1] : newBbox[0][1]\n  bbox[1][0] = bbox[1][0] > newBbox[1][0] ? bbox[1][0] : newBbox[1][0]\n  bbox[1][1] = bbox[1][1] > newBbox[1][1] ? bbox[1][1] : newBbox[1][1]\n\n  return bbox\n}\n","export function isLinearRing (ring) {\n  return ring.constructor === Array\n}\n\nexport function isPolygon (geometry) {\n  return geometry.constructor === Object && geometry.type === 'Polygon'\n}\n\nexport function isMultiPolygon (geometry) {\n  return geometry.constructor === Object && geometry.type === 'MultiPolygon'\n}\n\nexport function isPolygonOrMultiPolygon (geometry) {\n  return isPolygon(geometry) || isMultiPolygon(geometry)\n}\n\nexport function isLineString (geometry) {\n  return geometry.constructor === Object && geometry.type === 'LineString'\n}\n\nexport function isMultiLineString (geometry) {\n  return geometry.constructor === Object && geometry.type === 'MultiLineString'\n}\n\nexport function isLineStringOrMultiLineString (geometry) {\n  return isLineString(geometry) || isMultiLineString(geometry)\n}\n","import { isLinearRing, isPolygon, isMultiPolygon } from './geometryDetectors.js'\n\nexport function polygonArea (polygon) {\n  if (isLinearRing(polygon)) {\n    return getRingArea(polygon)\n  }\n\n  if (isPolygon(polygon)) {\n    return getPolygonArea(polygon)\n  }\n\n  if (isMultiPolygon(polygon)) {\n    return getMultiPolygonArea(polygon)\n  }\n\n  throw new Error('Invalid input')\n}\n\nexport function linearRingIsClockwise (ring) {\n  return getSignedRingArea(ring) < 0\n}\n\nfunction getRingArea (ring) {\n  return Math.abs(getSignedRingArea(ring))\n}\n\n// Taken from: https://stackoverflow.com/a/33670691/7237112\nfunction getSignedRingArea (ring) {\n  let total = 0\n\n  for (let i = 0, l = ring.length; i < l; i++) {\n    const addX = ring[i][0]\n    const addY = ring[i === ring.length - 1 ? 0 : i + 1][1]\n    const subX = ring[i === ring.length - 1 ? 0 : i + 1][0]\n    const subY = ring[i][1]\n\n    total += (addX * addY * 0.5)\n    total -= (subX * subY * 0.5)\n  }\n\n  return total\n}\n\nfunction getPolygonArea (polygon) {\n  let totalArea = getRingArea(polygon.coordinates[0])\n\n  for (let i = 1; i < polygon.coordinates.length; i++) {\n    const holeArea = getRingArea(polygon.coordinates[i])\n    totalArea -= holeArea\n  }\n\n  return totalArea\n}\n\nfunction getMultiPolygonArea (multiPolygon) {\n  let totalArea = 0\n\n  for (let i = 0; i < multiPolygon.coordinates.length; i++) {\n    totalArea += getPolygonArea(multiPolygon.coordinates[i])\n  }\n\n  return totalArea\n}\n","export function pointDistance (point1, point2) {\n  return Math.sqrt(\n    (point1[0] - point2[0]) ** 2 +\n    (point1[1] - point2[1]) ** 2\n  )\n}\n\nexport function linearRingLength (linearRing) {\n  let totalLength = 0\n\n  for (let i = 0; i < linearRing.length - 1; i++) {\n    const from = linearRing[i]\n    const to = linearRing[i + 1]\n\n    totalLength += pointDistance(from, to)\n  }\n\n  return totalLength\n}\n","import {\n  isLinearRing, isPolygon, isMultiPolygon, isLineString, isMultiLineString\n} from './geometryDetectors.js'\nimport { polygonArea } from './polygonArea.js'\nimport { linearRingLength } from './distance.js'\n\nexport default function calculateCentroid (geometry) {\n  if (isLinearRing(geometry)) {\n    return calculateLinearRingCentroid(geometry)\n  }\n\n  if (isPolygon(geometry)) {\n    return calculatePolygonCentroid(geometry)\n  }\n\n  if (isMultiPolygon(geometry)) {\n    return calculateMultiPolygonCentroid(geometry)\n  }\n\n  if (isLineString(geometry)) {\n    return calculateLineStringCentroid(geometry)\n  }\n\n  if (isMultiLineString(geometry)) {\n    return calculateMultiLineStringCentroid(geometry)\n  }\n}\n\n// https://stackoverflow.com/a/33852627/7237112\nfunction calculateLinearRingCentroid (ring) {\n  const nPts = ring.length\n  const off = ring[0]\n  let twicearea = 0\n  let x = 0\n  let y = 0\n  let p1\n  let p2\n  let f\n\n  for (let i = 0, j = nPts - 1; i < nPts; j = i++) {\n    p1 = ring[i]\n    p2 = ring[j]\n    f = (p1[0] - off[0]) * (p2[1] - off[1]) - (p2[0] - off[0]) * (p1[1] - off[1])\n    twicearea += f\n    x += (p1[0] + p2[0] - 2 * off[0]) * f\n    y += (p1[1] + p2[1] - 2 * off[1]) * f\n  }\n\n  f = twicearea * 3\n\n  return [x / f + off[0], y / f + off[1]]\n}\n\nfunction calculatePolygonCentroid (polygon) {\n  // We will ignore holes and just take the outer ring\n  return calculateLinearRingCentroid(polygon.coordinates[0])\n}\n\nfunction calculateMultiPolygonCentroid (multiPolygon) {\n  // We will take the centroid of each polygon (ignoring holes)\n  // and take the weighted (by area) center of these.\n  let x = 0\n  let y = 0\n  let totalArea = 0\n\n  for (let i = 0; i < multiPolygon.coordinates.length; i++) {\n    const polygon = multiPolygon.coordinates[i]\n    const polygonCentroid = calculateLinearRingCentroid(polygon[0])\n    const area = polygonArea(polygon[0])\n\n    x += polygonCentroid[0] * area\n    y += polygonCentroid[1] * area\n    totalArea += area\n  }\n\n  return [x / totalArea, y / totalArea]\n}\n\nfunction calculateLineStringCentroid (lineString) {\n  return calculateLinearRingCentroid(lineString.coordinates)\n}\n\nfunction calculateMultiLineStringCentroid (multiLineString) {\n  // We will take the centroid of each LineString\n  // and take the weighted (by length) center of these.\n  let x = 0\n  let y = 0\n  let totalLength = 0\n\n  for (let i = 0; i < multiLineString.coordinates.length; i++) {\n    const lineString = multiLineString.coordinates[i]\n    const lineStringCentroid = calculateLinearRingCentroid(lineString)\n    const length = linearRingLength(lineString)\n\n    x += lineStringCentroid[0] * length\n    y += lineStringCentroid[1] * length\n    totalLength += length\n  }\n\n  return [x / totalLength, y / totalLength]\n}\n","import { pointDistance } from './distance.js'\n\nexport function pointIntersectsLineSegment (point, lineSegment, lineWidth) {\n  const distance = distanceClosestPointOnLineSegment(point, lineSegment)\n\n  return distance < (lineWidth / 2)\n}\n\nexport function distanceClosestPointOnLineSegment (point, lineSegment) {\n  const closestPoint = closestPointOnLineSegment(point, lineSegment)\n  return pointDistance(point, closestPoint)\n}\n\n// https://stackoverflow.com/a/6853926/7237112\nexport function closestPointOnLineSegment (point, lineSegment) {\n  // Point coordinates\n  const x = point[0]\n  const y = point[1]\n\n  // Line segment coordinates\n  const x1 = lineSegment[0][0]\n  const y1 = lineSegment[0][1]\n  const x2 = lineSegment[1][0]\n  const y2 = lineSegment[1][1]\n\n  const A = x - x1\n  const B = y - y1\n  const C = x2 - x1\n  const D = y2 - y1\n\n  const dot = A * C + B * D\n  const lengthSquared = C * C + D * D\n  let param = -1\n  if (lengthSquared !== 0) { // in case of 0 length line\n    param = dot / lengthSquared\n  }\n\n  let xx, yy\n\n  if (param < 0) {\n    xx = x1\n    yy = y1\n  } else if (param > 1) {\n    xx = x2\n    yy = y2\n  } else {\n    xx = x1 + param * C\n    yy = y1 + param * D\n  }\n\n  return [xx, yy]\n}\n","\"use strict\"\n\nmodule.exports = twoProduct\n\nvar SPLITTER = +(Math.pow(2, 27) + 1.0)\n\nfunction twoProduct(a, b, result) {\n  var x = a * b\n\n  var c = SPLITTER * a\n  var abig = c - a\n  var ahi = c - abig\n  var alo = a - ahi\n\n  var d = SPLITTER * b\n  var bbig = d - b\n  var bhi = d - bbig\n  var blo = b - bhi\n\n  var err1 = x - (ahi * bhi)\n  var err2 = err1 - (alo * bhi)\n  var err3 = err2 - (ahi * blo)\n\n  var y = alo * blo - err3\n\n  if(result) {\n    result[0] = y\n    result[1] = x\n    return result\n  }\n\n  return [ y, x ]\n}","\"use strict\"\n\nmodule.exports = linearExpansionSum\n\n//Easy case: Add two scalars\nfunction scalarScalar(a, b) {\n  var x = a + b\n  var bv = x - a\n  var av = x - bv\n  var br = b - bv\n  var ar = a - av\n  var y = ar + br\n  if(y) {\n    return [y, x]\n  }\n  return [x]\n}\n\nfunction linearExpansionSum(e, f) {\n  var ne = e.length|0\n  var nf = f.length|0\n  if(ne === 1 && nf === 1) {\n    return scalarScalar(e[0], f[0])\n  }\n  var n = ne + nf\n  var g = new Array(n)\n  var count = 0\n  var eptr = 0\n  var fptr = 0\n  var abs = Math.abs\n  var ei = e[eptr]\n  var ea = abs(ei)\n  var fi = f[fptr]\n  var fa = abs(fi)\n  var a, b\n  if(ea < fa) {\n    b = ei\n    eptr += 1\n    if(eptr < ne) {\n      ei = e[eptr]\n      ea = abs(ei)\n    }\n  } else {\n    b = fi\n    fptr += 1\n    if(fptr < nf) {\n      fi = f[fptr]\n      fa = abs(fi)\n    }\n  }\n  if((eptr < ne && ea < fa) || (fptr >= nf)) {\n    a = ei\n    eptr += 1\n    if(eptr < ne) {\n      ei = e[eptr]\n      ea = abs(ei)\n    }\n  } else {\n    a = fi\n    fptr += 1\n    if(fptr < nf) {\n      fi = f[fptr]\n      fa = abs(fi)\n    }\n  }\n  var x = a + b\n  var bv = x - a\n  var y = b - bv\n  var q0 = y\n  var q1 = x\n  var _x, _bv, _av, _br, _ar\n  while(eptr < ne && fptr < nf) {\n    if(ea < fa) {\n      a = ei\n      eptr += 1\n      if(eptr < ne) {\n        ei = e[eptr]\n        ea = abs(ei)\n      }\n    } else {\n      a = fi\n      fptr += 1\n      if(fptr < nf) {\n        fi = f[fptr]\n        fa = abs(fi)\n      }\n    }\n    b = q0\n    x = a + b\n    bv = x - a\n    y = b - bv\n    if(y) {\n      g[count++] = y\n    }\n    _x = q1 + x\n    _bv = _x - q1\n    _av = _x - _bv\n    _br = x - _bv\n    _ar = q1 - _av\n    q0 = _ar + _br\n    q1 = _x\n  }\n  while(eptr < ne) {\n    a = ei\n    b = q0\n    x = a + b\n    bv = x - a\n    y = b - bv\n    if(y) {\n      g[count++] = y\n    }\n    _x = q1 + x\n    _bv = _x - q1\n    _av = _x - _bv\n    _br = x - _bv\n    _ar = q1 - _av\n    q0 = _ar + _br\n    q1 = _x\n    eptr += 1\n    if(eptr < ne) {\n      ei = e[eptr]\n    }\n  }\n  while(fptr < nf) {\n    a = fi\n    b = q0\n    x = a + b\n    bv = x - a\n    y = b - bv\n    if(y) {\n      g[count++] = y\n    } \n    _x = q1 + x\n    _bv = _x - q1\n    _av = _x - _bv\n    _br = x - _bv\n    _ar = q1 - _av\n    q0 = _ar + _br\n    q1 = _x\n    fptr += 1\n    if(fptr < nf) {\n      fi = f[fptr]\n    }\n  }\n  if(q0) {\n    g[count++] = q0\n  }\n  if(q1) {\n    g[count++] = q1\n  }\n  if(!count) {\n    g[count++] = 0.0  \n  }\n  g.length = count\n  return g\n}","\"use strict\"\n\nmodule.exports = fastTwoSum\n\nfunction fastTwoSum(a, b, result) {\n\tvar x = a + b\n\tvar bv = x - a\n\tvar av = x - bv\n\tvar br = b - bv\n\tvar ar = a - av\n\tif(result) {\n\t\tresult[0] = ar + br\n\t\tresult[1] = x\n\t\treturn result\n\t}\n\treturn [ar+br, x]\n}","\"use strict\"\n\nvar twoProduct = require(\"two-product\")\nvar twoSum = require(\"two-sum\")\n\nmodule.exports = scaleLinearExpansion\n\nfunction scaleLinearExpansion(e, scale) {\n  var n = e.length\n  if(n === 1) {\n    var ts = twoProduct(e[0], scale)\n    if(ts[0]) {\n      return ts\n    }\n    return [ ts[1] ]\n  }\n  var g = new Array(2 * n)\n  var q = [0.1, 0.1]\n  var t = [0.1, 0.1]\n  var count = 0\n  twoProduct(e[0], scale, q)\n  if(q[0]) {\n    g[count++] = q[0]\n  }\n  for(var i=1; i<n; ++i) {\n    twoProduct(e[i], scale, t)\n    var pq = q[1]\n    twoSum(pq, t[0], q)\n    if(q[0]) {\n      g[count++] = q[0]\n    }\n    var a = t[1]\n    var b = q[1]\n    var x = a + b\n    var bv = x - a\n    var y = b - bv\n    q[1] = x\n    if(y) {\n      g[count++] = y\n    }\n  }\n  if(q[1]) {\n    g[count++] = q[1]\n  }\n  if(count === 0) {\n    g[count++] = 0.0\n  }\n  g.length = count\n  return g\n}","\"use strict\"\n\nmodule.exports = robustSubtract\n\n//Easy case: Add two scalars\nfunction scalarScalar(a, b) {\n  var x = a + b\n  var bv = x - a\n  var av = x - bv\n  var br = b - bv\n  var ar = a - av\n  var y = ar + br\n  if(y) {\n    return [y, x]\n  }\n  return [x]\n}\n\nfunction robustSubtract(e, f) {\n  var ne = e.length|0\n  var nf = f.length|0\n  if(ne === 1 && nf === 1) {\n    return scalarScalar(e[0], -f[0])\n  }\n  var n = ne + nf\n  var g = new Array(n)\n  var count = 0\n  var eptr = 0\n  var fptr = 0\n  var abs = Math.abs\n  var ei = e[eptr]\n  var ea = abs(ei)\n  var fi = -f[fptr]\n  var fa = abs(fi)\n  var a, b\n  if(ea < fa) {\n    b = ei\n    eptr += 1\n    if(eptr < ne) {\n      ei = e[eptr]\n      ea = abs(ei)\n    }\n  } else {\n    b = fi\n    fptr += 1\n    if(fptr < nf) {\n      fi = -f[fptr]\n      fa = abs(fi)\n    }\n  }\n  if((eptr < ne && ea < fa) || (fptr >= nf)) {\n    a = ei\n    eptr += 1\n    if(eptr < ne) {\n      ei = e[eptr]\n      ea = abs(ei)\n    }\n  } else {\n    a = fi\n    fptr += 1\n    if(fptr < nf) {\n      fi = -f[fptr]\n      fa = abs(fi)\n    }\n  }\n  var x = a + b\n  var bv = x - a\n  var y = b - bv\n  var q0 = y\n  var q1 = x\n  var _x, _bv, _av, _br, _ar\n  while(eptr < ne && fptr < nf) {\n    if(ea < fa) {\n      a = ei\n      eptr += 1\n      if(eptr < ne) {\n        ei = e[eptr]\n        ea = abs(ei)\n      }\n    } else {\n      a = fi\n      fptr += 1\n      if(fptr < nf) {\n        fi = -f[fptr]\n        fa = abs(fi)\n      }\n    }\n    b = q0\n    x = a + b\n    bv = x - a\n    y = b - bv\n    if(y) {\n      g[count++] = y\n    }\n    _x = q1 + x\n    _bv = _x - q1\n    _av = _x - _bv\n    _br = x - _bv\n    _ar = q1 - _av\n    q0 = _ar + _br\n    q1 = _x\n  }\n  while(eptr < ne) {\n    a = ei\n    b = q0\n    x = a + b\n    bv = x - a\n    y = b - bv\n    if(y) {\n      g[count++] = y\n    }\n    _x = q1 + x\n    _bv = _x - q1\n    _av = _x - _bv\n    _br = x - _bv\n    _ar = q1 - _av\n    q0 = _ar + _br\n    q1 = _x\n    eptr += 1\n    if(eptr < ne) {\n      ei = e[eptr]\n    }\n  }\n  while(fptr < nf) {\n    a = fi\n    b = q0\n    x = a + b\n    bv = x - a\n    y = b - bv\n    if(y) {\n      g[count++] = y\n    } \n    _x = q1 + x\n    _bv = _x - q1\n    _av = _x - _bv\n    _br = x - _bv\n    _ar = q1 - _av\n    q0 = _ar + _br\n    q1 = _x\n    fptr += 1\n    if(fptr < nf) {\n      fi = -f[fptr]\n    }\n  }\n  if(q0) {\n    g[count++] = q0\n  }\n  if(q1) {\n    g[count++] = q1\n  }\n  if(!count) {\n    g[count++] = 0.0  \n  }\n  g.length = count\n  return g\n}","\"use strict\"\n\nvar twoProduct = require(\"two-product\")\nvar robustSum = require(\"robust-sum\")\nvar robustScale = require(\"robust-scale\")\nvar robustSubtract = require(\"robust-subtract\")\n\nvar NUM_EXPAND = 5\n\nvar EPSILON     = 1.1102230246251565e-16\nvar ERRBOUND3   = (3.0 + 16.0 * EPSILON) * EPSILON\nvar ERRBOUND4   = (7.0 + 56.0 * EPSILON) * EPSILON\n\nfunction cofactor(m, c) {\n  var result = new Array(m.length-1)\n  for(var i=1; i<m.length; ++i) {\n    var r = result[i-1] = new Array(m.length-1)\n    for(var j=0,k=0; j<m.length; ++j) {\n      if(j === c) {\n        continue\n      }\n      r[k++] = m[i][j]\n    }\n  }\n  return result\n}\n\nfunction matrix(n) {\n  var result = new Array(n)\n  for(var i=0; i<n; ++i) {\n    result[i] = new Array(n)\n    for(var j=0; j<n; ++j) {\n      result[i][j] = [\"m\", j, \"[\", (n-i-1), \"]\"].join(\"\")\n    }\n  }\n  return result\n}\n\nfunction sign(n) {\n  if(n & 1) {\n    return \"-\"\n  }\n  return \"\"\n}\n\nfunction generateSum(expr) {\n  if(expr.length === 1) {\n    return expr[0]\n  } else if(expr.length === 2) {\n    return [\"sum(\", expr[0], \",\", expr[1], \")\"].join(\"\")\n  } else {\n    var m = expr.length>>1\n    return [\"sum(\", generateSum(expr.slice(0, m)), \",\", generateSum(expr.slice(m)), \")\"].join(\"\")\n  }\n}\n\nfunction determinant(m) {\n  if(m.length === 2) {\n    return [[\"sum(prod(\", m[0][0], \",\", m[1][1], \"),prod(-\", m[0][1], \",\", m[1][0], \"))\"].join(\"\")]\n  } else {\n    var expr = []\n    for(var i=0; i<m.length; ++i) {\n      expr.push([\"scale(\", generateSum(determinant(cofactor(m, i))), \",\", sign(i), m[0][i], \")\"].join(\"\"))\n    }\n    return expr\n  }\n}\n\nfunction orientation(n) {\n  var pos = []\n  var neg = []\n  var m = matrix(n)\n  var args = []\n  for(var i=0; i<n; ++i) {\n    if((i&1)===0) {\n      pos.push.apply(pos, determinant(cofactor(m, i)))\n    } else {\n      neg.push.apply(neg, determinant(cofactor(m, i)))\n    }\n    args.push(\"m\" + i)\n  }\n  var posExpr = generateSum(pos)\n  var negExpr = generateSum(neg)\n  var funcName = \"orientation\" + n + \"Exact\"\n  var code = [\"function \", funcName, \"(\", args.join(), \"){var p=\", posExpr, \",n=\", negExpr, \",d=sub(p,n);\\\nreturn d[d.length-1];};return \", funcName].join(\"\")\n  var proc = new Function(\"sum\", \"prod\", \"scale\", \"sub\", code)\n  return proc(robustSum, twoProduct, robustScale, robustSubtract)\n}\n\nvar orientation3Exact = orientation(3)\nvar orientation4Exact = orientation(4)\n\nvar CACHED = [\n  function orientation0() { return 0 },\n  function orientation1() { return 0 },\n  function orientation2(a, b) { \n    return b[0] - a[0]\n  },\n  function orientation3(a, b, c) {\n    var l = (a[1] - c[1]) * (b[0] - c[0])\n    var r = (a[0] - c[0]) * (b[1] - c[1])\n    var det = l - r\n    var s\n    if(l > 0) {\n      if(r <= 0) {\n        return det\n      } else {\n        s = l + r\n      }\n    } else if(l < 0) {\n      if(r >= 0) {\n        return det\n      } else {\n        s = -(l + r)\n      }\n    } else {\n      return det\n    }\n    var tol = ERRBOUND3 * s\n    if(det >= tol || det <= -tol) {\n      return det\n    }\n    return orientation3Exact(a, b, c)\n  },\n  function orientation4(a,b,c,d) {\n    var adx = a[0] - d[0]\n    var bdx = b[0] - d[0]\n    var cdx = c[0] - d[0]\n    var ady = a[1] - d[1]\n    var bdy = b[1] - d[1]\n    var cdy = c[1] - d[1]\n    var adz = a[2] - d[2]\n    var bdz = b[2] - d[2]\n    var cdz = c[2] - d[2]\n    var bdxcdy = bdx * cdy\n    var cdxbdy = cdx * bdy\n    var cdxady = cdx * ady\n    var adxcdy = adx * cdy\n    var adxbdy = adx * bdy\n    var bdxady = bdx * ady\n    var det = adz * (bdxcdy - cdxbdy) \n            + bdz * (cdxady - adxcdy)\n            + cdz * (adxbdy - bdxady)\n    var permanent = (Math.abs(bdxcdy) + Math.abs(cdxbdy)) * Math.abs(adz)\n                  + (Math.abs(cdxady) + Math.abs(adxcdy)) * Math.abs(bdz)\n                  + (Math.abs(adxbdy) + Math.abs(bdxady)) * Math.abs(cdz)\n    var tol = ERRBOUND4 * permanent\n    if ((det > tol) || (-det > tol)) {\n      return det\n    }\n    return orientation4Exact(a,b,c,d)\n  }\n]\n\nfunction slowOrient(args) {\n  var proc = CACHED[args.length]\n  if(!proc) {\n    proc = CACHED[args.length] = orientation(args.length)\n  }\n  return proc.apply(undefined, args)\n}\n\nfunction generateOrientationProc() {\n  while(CACHED.length <= NUM_EXPAND) {\n    CACHED.push(orientation(CACHED.length))\n  }\n  var args = []\n  var procArgs = [\"slow\"]\n  for(var i=0; i<=NUM_EXPAND; ++i) {\n    args.push(\"a\" + i)\n    procArgs.push(\"o\" + i)\n  }\n  var code = [\n    \"function getOrientation(\", args.join(), \"){switch(arguments.length){case 0:case 1:return 0;\"\n  ]\n  for(var i=2; i<=NUM_EXPAND; ++i) {\n    code.push(\"case \", i, \":return o\", i, \"(\", args.slice(0, i).join(), \");\")\n  }\n  code.push(\"}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation\")\n  procArgs.push(code.join(\"\"))\n\n  var proc = Function.apply(undefined, procArgs)\n  module.exports = proc.apply(undefined, [slowOrient].concat(CACHED))\n  for(var i=0; i<=NUM_EXPAND; ++i) {\n    module.exports[i] = CACHED[i]\n  }\n}\n\ngenerateOrientationProc()","module.exports = robustPointInPolygon\n\nvar orient = require('robust-orientation')\n\nfunction robustPointInPolygon(vs, point) {\n  var x = point[0]\n  var y = point[1]\n  var n = vs.length\n  var inside = 1\n  var lim = n\n  for(var i = 0, j = n-1; i<lim; j=i++) {\n    var a = vs[i]\n    var b = vs[j]\n    var yi = a[1]\n    var yj = b[1]\n    if(yj < yi) {\n      if(yj < y && y < yi) {\n        var s = orient(a, b, point)\n        if(s === 0) {\n          return 0\n        } else {\n          inside ^= (0 < s)|0\n        }\n      } else if(y === yi) {\n        var c = vs[(i+1)%n]\n        var yk = c[1]\n        if(yi < yk) {\n          var s = orient(a, b, point)\n          if(s === 0) {\n            return 0\n          } else {\n            inside ^= (0 < s)|0\n          }\n        }\n      }\n    } else if(yi < yj) {\n      if(yi < y && y < yj) {\n        var s = orient(a, b, point)\n        if(s === 0) {\n          return 0\n        } else {\n          inside ^= (s < 0)|0\n        }\n      } else if(y === yi) {\n        var c = vs[(i+1)%n]\n        var yk = c[1]\n        if(yk < yi) {\n          var s = orient(a, b, point)\n          if(s === 0) {\n            return 0\n          } else {\n            inside ^= (s < 0)|0\n          }\n        }\n      }\n    } else if(y === yi) {\n      var x0 = Math.min(a[0], b[0])\n      var x1 = Math.max(a[0], b[0])\n      if(i === 0) {\n        while(j>0) {\n          var k = (j+n-1)%n\n          var p = vs[k]\n          if(p[1] !== y) {\n            break\n          }\n          var px = p[0]\n          x0 = Math.min(x0, px)\n          x1 = Math.max(x1, px)\n          j = k\n        }\n        if(j === 0) {\n          if(x0 <= x && x <= x1) {\n            return 0\n          }\n          return 1 \n        }\n        lim = j+1\n      }\n      var y0 = vs[(j+n-1)%n][1]\n      while(i+1<lim) {\n        var p = vs[i+1]\n        if(p[1] !== y) {\n          break\n        }\n        var px = p[0]\n        x0 = Math.min(x0, px)\n        x1 = Math.max(x1, px)\n        i += 1\n      }\n      if(x0 <= x && x <= x1) {\n        return 0\n      }\n      var y1 = vs[(i+1)%n][1]\n      if(x < x0 && (y0 < y !== y1 < y)) {\n        inside ^= 1\n      }\n    }\n  }\n  return 2 * inside - 1\n}","import robustPointInPolygon from 'robust-point-in-polygon'\n\nexport default function (point, geometry) {\n  switch (geometry.type) {\n    case 'Polygon': return pointInPolygon(point, geometry)\n    case 'MultiPolygon': return pointInMultiPolygon(point, geometry)\n  }\n}\n\nfunction pointInPolygon (point, geometry) {\n  const coordinates = geometry.coordinates\n  return pointInPolygonCoordinates(point, coordinates)\n}\n\nfunction pointInPolygonCoordinates (point, coordinates) {\n  const outerRing = coordinates[0]\n\n  if (!pointInRing(point, outerRing)) return false\n\n  for (let i = 1; i < coordinates.length; i++) {\n    const hole = coordinates[i]\n\n    if (pointInRing(point, hole)) return false\n  }\n\n  return true\n}\n\nfunction pointInMultiPolygon (point, geometry) {\n  const coordinates = geometry.coordinates\n\n  for (let i = 0; i < coordinates.length; i++) {\n    const polygonCoordinates = coordinates[i]\n\n    if (pointInPolygonCoordinates(point, polygonCoordinates)) return true\n  }\n\n  return false\n}\n\nfunction pointInRing (point, coordinates) {\n  return robustPointInPolygon(coordinates, point) === -1\n}\n","import { scaleLinear } from 'd3-scale';\n\nconst invalidInputError = new Error('Invalid input');\n\nfunction getInput (geometry) {\n  if ('coordinates' in geometry) {\n    return 'geojson'\n  }\n\n  if ('x' in geometry && 'y' in geometry) {\n    if (geometry.type !== 'Point') {\n      ensureSameLength(geometry.x, geometry.y);\n    }\n\n    return 'xy'\n  }\n\n  throw invalidInputError\n}\n\nfunction ensureSameLength (x, y) {\n  if (x !== undefined && y !== undefined) {\n    if (x.constructor === Array && y.constructor === Array) {\n      if (x.length === y.length && x.length > 1) {\n        return\n      }\n    }\n  }\n\n  throw invalidInputError\n}\n\nfunction roundPoint ([x, y], decimals) {\n  const zeroes = 10 ** decimals;\n\n  return [\n    Math.round(x * zeroes) / zeroes,\n    Math.round(y * zeroes) / zeroes\n  ]\n}\n\nfunction pointDistance (p1, p2) {\n  return Math.sqrt(\n    (p1[0] - p2[0]) ** 2 +\n    (p1[1] - p2[1]) ** 2\n  )\n}\n\nfunction transformLinearRing (linearRing, transformation, settings) {\n  if (!settings.simplify || linearRing.length < 3) {\n    return transformLinearRingUnsimplified(linearRing, transformation)\n  }\n\n  if (settings.simplify === true) {\n    return transformLinearRingSimplified(linearRing, transformation, settings.simplificationThreshold)\n  }\n}\n\nfunction transformLinearRingUnsimplified (linearRing, transformation) {\n  const transformedLinearRing = [];\n\n  for (let i = 0; i < linearRing.length; i++) {\n    transformedLinearRing.push(transformation(linearRing[i]));\n  }\n\n  return transformedLinearRing\n}\n\nfunction transformLinearRingSimplified (linearRing, transformation, simplificationThreshold = 1) {\n  const transformedLinearRing = [transformation(linearRing[0])];\n\n  let start = transformedLinearRing[0];\n  let end;\n\n  for (let i = 1; i < linearRing.length - 1; i++) {\n    end = transformation(linearRing[i]);\n\n    const dontSkip = pointDistance(start, end) >= simplificationThreshold;\n\n    if (dontSkip) {\n      transformedLinearRing.push(end);\n      start = end;\n    }\n  }\n\n  const lastPoint = transformation(linearRing[linearRing.length - 1]);\n  transformedLinearRing.push(lastPoint);\n\n  return transformedLinearRing\n}\n\nfunction transformSetOfLinearRings (linearRings, transformation, settings) {\n  const transformedLinearRings = [];\n\n  for (let i = 0; i < linearRings.length; i++) {\n    transformedLinearRings.push(transformLinearRing(linearRings[i], transformation, settings));\n  }\n\n  return transformedLinearRings\n}\n\nfunction transformXYArrays ({ x, y }, transformation, settings) {\n  if (!settings.simplify || x.length < 3) {\n    return transformXYArraysUnsimplified(x, y, transformation)\n  }\n\n  if (settings.simplify === true) {\n    return transformXYArraysSimplified(x, y, transformation, settings.simplificationThreshold)\n  }\n}\n\nfunction transformXYArraysUnsimplified (x, y, transformation) {\n  const transformedLinearRing = [];\n\n  for (let i = 0; i < x.length; i++) {\n    transformedLinearRing.push(transformation([x[i], y[i]]));\n  }\n\n  return transformedLinearRing\n}\n\nfunction transformXYArraysSimplified (x, y, transformation, simplificationThreshold = 1) {\n  const transformedLinearRing = [transformation([x[0], y[0]])];\n\n  let start = transformedLinearRing[0];\n  let end;\n\n  for (let i = 1; i < x.length - 1; i++) {\n    end = transformation([x[i], y[i]]);\n\n    const dontSkip = pointDistance(start, end) >= simplificationThreshold;\n\n    if (dontSkip) {\n      transformedLinearRing.push(end);\n      start = end;\n    }\n  }\n\n  const lastIndex = x.length - 1;\n  const lastPoint = transformation([x[lastIndex], y[lastIndex]]);\n  transformedLinearRing.push(lastPoint);\n\n  return transformedLinearRing\n}\n\nconst transformFunctions = {\n  transformPoint,\n  transformMultiPoint,\n  transformLineString,\n  transformMultiLineString,\n  transformPolygon,\n  transformMultiPolygon\n};\n\nfunction transformGeometry (geometry, _transformation, settings = {}) {\n  const functionName = 'transform' + geometry.type;\n\n  const transformation = settings.decimals\n    ? point => roundPoint(_transformation(point), settings.decimals)\n    : _transformation;\n\n  return transformFunctions[functionName](geometry, transformation, settings)\n}\n\nfunction transformPoint (point, transformation) {\n  const input = getInput(point);\n\n  if (input === 'geojson') {\n    return {\n      type: 'Point',\n      coordinates: transformation(point.coordinates)\n    }\n  }\n\n  if (input === 'xy') {\n    return {\n      type: 'Point',\n      coordinates: transformation([\n        point.x,\n        point.y\n      ])\n    }\n  }\n}\n\nfunction transformMultiPoint (multiPoint, transformation) {\n  const input = getInput(multiPoint);\n\n  if (input === 'geojson') {\n    return {\n      type: 'MultiPoint',\n      coordinates: transformLinearRing(multiPoint.coordinates, transformation, {})\n    }\n  }\n\n  if (input === 'xy') {\n    return {\n      type: 'MultiPoint',\n      coordinates: transformXYArrays(multiPoint, transformation, {})\n    }\n  }\n}\n\nfunction transformLineString (lineString, transformation, settings) {\n  const input = getInput(lineString);\n\n  if (input === 'geojson') {\n    return {\n      type: 'LineString',\n      coordinates: transformLinearRing(lineString.coordinates, transformation, settings)\n    }\n  }\n\n  if (input === 'xy') {\n    return {\n      type: 'LineString',\n      coordinates: transformXYArrays(lineString, transformation, settings)\n    }\n  }\n}\n\nfunction transformMultiLineString (multiLineString, transformation, settings) {\n  const input = getInput(multiLineString);\n\n  if (input === 'geojson') {\n    return {\n      type: 'MultiLineString',\n      coordinates: transformSetOfLinearRings(multiLineString.coordinates, transformation, settings)\n    }\n  }\n\n  if (input === 'xy') {\n    return {\n      type: 'MultiLineString',\n      coordinates: [\n        transformXYArrays(multiLineString, transformation, settings)\n      ]\n    }\n  }\n}\n\nfunction transformPolygon (polygon, transformation, settings) {\n  const input = getInput(polygon);\n\n  if (input === 'geojson') {\n    return {\n      type: 'Polygon',\n      coordinates: transformSetOfLinearRings(polygon.coordinates, transformation, settings)\n    }\n  }\n\n  if (input === 'xy') {\n    return {\n      type: 'Polygon',\n      coordinates: [\n        transformXYArrays(polygon, transformation, settings)\n      ]\n    }\n  }\n}\n\nfunction transformMultiPolygon (multiPolygon, transformation, settings) {\n  const input = getInput(multiPolygon);\n\n  if (input === 'geojson') {\n    const polygons = multiPolygon.coordinates;\n    const transformedPolygons = [];\n\n    for (let i = 0; i < polygons.length; i++) {\n      transformedPolygons.push(transformSetOfLinearRings(polygons[i], transformation, settings));\n    }\n\n    return {\n      type: 'MultiPolygon',\n      coordinates: transformedPolygons\n    }\n  }\n\n  if (input === 'xy') {\n    return {\n      type: 'MultiPolygon',\n      coordinates: [\n        [transformXYArrays(multiPolygon, transformation, settings)]\n      ]\n    }\n  }\n}\n\nfunction getNumberOfInterpolatedPoints (\n  from,\n  to,\n  toPolar,\n  context,\n  { interpolationThreshold = 1 }\n) {\n  const fromScaledDown = toPolar(from);\n  const toScaledDown = toPolar(to);\n\n  const totalScaleFactor = getTotalScaleFactor(context);\n\n  if (straightInYDimension(fromScaledDown, toScaledDown, totalScaleFactor)) {\n    return 0\n  }\n\n  const functionalForm = getFunctionalForm(fromScaledDown, toScaledDown);\n  const scaledDownLength = getPolarLength(functionalForm);\n\n  const realLength = scaledDownLength * totalScaleFactor;\n  const numberOfPointsNeeded = realLength / interpolationThreshold;\n\n  return Math.floor(numberOfPointsNeeded)\n}\n\nfunction getFunctionalForm (from, to) {\n  const pointsSorted = from[0] < to[0]\n    ? [from, to]\n    : [to, from];\n\n  const [[x1, y1], [x2, y2]] = pointsSorted;\n\n  const a = (y2 - y1) / (x2 - x1);\n  const b = y1 - (x1 * a);\n  const interval = [x1, x2];\n\n  return { a, b, interval }\n}\n\nfunction straightInYDimension (from, to, totalScaleFactor) {\n  return Math.abs(from[0] - to[0]) * totalScaleFactor < 1\n}\n\nfunction getPolarLength ({ a, b, interval }) {\n  const [c, d] = interval;\n\n  if (a === 0) {\n    return (d - c) * b\n  }\n\n  const aSq = a ** 2;\n  const bSq = b ** 2;\n\n  /*\n   * This is the integral of:\n   * sqrt( (a * theta + b) ** 2 + a ** 2 )\n   * between c and d\n   */\n  return (\n    aSq * Math.asinh((a * d + b) / a) + (a * d + b) *\n    Math.sqrt(aSq * d ** 2 + 2 * a * b * d + bSq + aSq) -\n    aSq * Math.asinh((a * c + b) / a) + (-a * c - b) *\n    Math.sqrt(aSq * c ** 2 + 2 * a * b * c + bSq + aSq)\n  ) / (2 * a)\n}\n\nfunction getTotalScaleFactor ({ finalRangeX, finalRangeY }) {\n  const totalScaleFactorX = Math.abs(finalRangeX[0] - finalRangeX[1]) / 2;\n  const totalScaleFactorY = Math.abs(finalRangeY[0] - finalRangeY[1]) / 2;\n\n  return Math.max(totalScaleFactorX, totalScaleFactorY)\n}\n\nfunction interpolatePoints (\n  transformedLinearRing,\n  from,\n  to,\n  postScaleTransformation,\n  numberOfPointsNeeded\n) {\n  const interpolator = interpolate(from, to);\n\n  for (let i = 0; i < numberOfPointsNeeded; i++) {\n    const t = (i + 1) / (numberOfPointsNeeded + 1);\n    transformedLinearRing.push(\n      postScaleTransformation(interpolator(t))\n    );\n  }\n}\n\nfunction interpolate (a, b) {\n  const dx = b[0] - a[0];\n  const dy = b[1] - a[1];\n\n  return t => ([\n    a[0] + t * dx,\n    a[1] + t * dy\n  ])\n}\n\nfunction interpolateLinearRing (linearRing, context, transformations, settings) {\n  if (!settings.simplify || linearRing.length < 3) {\n    return interpolateLinearRingUnsimplified(linearRing, context, transformations, settings)\n  }\n\n  if (settings.simplify === true) {\n    return interpolateLinearRingSimplified()\n  }\n}\n\nfunction interpolateLinearRingUnsimplified (linearRing, context, transformations, settings) {\n  const interpolatedLinearRing = [];\n  const { scaleTransformation, postScaleTransformation, toPolar } = transformations;\n\n  for (let i = 0; i < linearRing.length - 1; i++) {\n    const from = linearRing[i];\n    const to = linearRing[i + 1];\n    const fromScaled = scaleTransformation(from);\n    const toScaled = scaleTransformation(to);\n\n    interpolatedLinearRing.push(postScaleTransformation(fromScaled));\n\n    const numberOfPointsNeeded = getNumberOfInterpolatedPoints(\n      fromScaled,\n      toScaled,\n      toPolar,\n      context,\n      settings\n    );\n\n    if (numberOfPointsNeeded > 0) {\n      interpolatePoints(\n        interpolatedLinearRing,\n        fromScaled,\n        toScaled,\n        postScaleTransformation,\n        numberOfPointsNeeded\n      );\n    }\n  }\n\n  const lastPoint = linearRing[linearRing.length - 1];\n  interpolatedLinearRing.push(postScaleTransformation(\n    scaleTransformation(lastPoint)\n  ));\n\n  return interpolatedLinearRing\n}\n\nfunction interpolateLinearRingSimplified (linearRing, context, transformations, settings) {\n\n}\n\nfunction interpolateSetOfLinearRings (linearRings, context, transformations, settings) {\n  const interpolatedLinearRings = [];\n\n  for (let i = 0; i < linearRings.length; i++) {\n    interpolatedLinearRings.push(interpolateLinearRing(linearRings[i], context, transformations, settings));\n  }\n\n  return interpolatedLinearRings\n}\n\nfunction interpolateXYArrays ({ x, y }, context, transformations, settings) {\n  if (!settings.simplify || x.length < 3) {\n    return interpolateXYArraysUnsimplified(x, y, context, transformations, settings)\n  }\n\n  if (settings.simplify === true) {\n    return interpolateXYArraysSimplified()\n  }\n}\n\nfunction interpolateXYArraysUnsimplified (x, y, context, transformations, settings) {\n  const interpolatedLinearRing = [];\n  const { scaleTransformation, postScaleTransformation, toPolar } = transformations;\n\n  for (let i = 0; i < x.length - 1; i++) {\n    const from = [x[i], y[i]];\n    const to = [x[i + 1], y[i + 1]];\n    const fromScaled = scaleTransformation(from);\n    const toScaled = scaleTransformation(to);\n\n    interpolatedLinearRing.push(postScaleTransformation(fromScaled));\n\n    const numberOfPointsNeeded = getNumberOfInterpolatedPoints(\n      fromScaled,\n      toScaled,\n      toPolar,\n      context,\n      settings\n    );\n\n    if (numberOfPointsNeeded > 0) {\n      interpolatePoints(\n        interpolatedLinearRing,\n        fromScaled,\n        toScaled,\n        postScaleTransformation,\n        numberOfPointsNeeded\n      );\n    }\n  }\n\n  const lastIndex = x.length - 1;\n  const lastPoint = [x[lastIndex], y[lastIndex]];\n  interpolatedLinearRing.push(postScaleTransformation(\n    scaleTransformation(lastPoint)\n  ));\n\n  return interpolatedLinearRing\n}\n\nfunction interpolateXYArraysSimplified (x, y, context, transformations, settings) {\n\n}\n\nconst interpolateFunctions = {\n  interpolateLineString,\n  interpolateMultiLineString,\n  interpolatePolygon,\n  interpolateMultiPolygon\n};\n\nfunction polarGeometry (geometry, context, _transformations, settings = {}) {\n  const functionName = 'interpolate' + geometry.type;\n\n  const { scaleTransformation, postScaleTransformation: _postScaleTransformation } = _transformations;\n\n  const postScaleTransformation = settings.decimals !== undefined\n    ? point => roundPoint(_postScaleTransformation(point), settings.decimals)\n    : _postScaleTransformation;\n\n  const toTheta = scaleLinear().domain(context.rangeX).range([0, 2 * Math.PI]);\n  const toRadius = scaleLinear().domain(context.rangeY).range([0, 1]);\n  const toPolar = ([x, y]) => ([toTheta(x), toRadius(y)]);\n\n  const transformations = { scaleTransformation, postScaleTransformation, toPolar };\n\n  return interpolateFunctions[functionName](geometry, context, transformations, settings)\n}\n\nfunction interpolateLineString (lineString, context, transformations, settings) {\n  const input = getInput(lineString);\n\n  if (input === 'geojson') {\n    return {\n      type: 'LineString',\n      coordinates: interpolateLinearRing(lineString.coordinates, context, transformations, settings)\n    }\n  }\n\n  if (input === 'xy') {\n    return {\n      type: 'LineString',\n      coordinates: interpolateXYArrays(lineString, context, transformations, settings)\n    }\n  }\n}\n\nfunction interpolateMultiLineString (multiLineString, context, transformations, settings) {\n  const input = getInput(multiLineString);\n\n  if (input === 'geojson') {\n    return {\n      type: 'MultiLineString',\n      coordinates: interpolateSetOfLinearRings(multiLineString.coordinates, context, transformations, settings)\n    }\n  }\n\n  if (input === 'xy') {\n    return {\n      type: 'MultiLineString',\n      coordinates: [\n        interpolateXYArrays(multiLineString, context, transformations, settings)\n      ]\n    }\n  }\n}\n\nfunction interpolatePolygon (polygon, context, transformations, settings) {\n  const input = getInput(polygon);\n\n  if (input === 'geojson') {\n    return {\n      type: 'Polygon',\n      coordinates: interpolateSetOfLinearRings(polygon.coordinates, context, transformations, settings)\n    }\n  }\n\n  if (input === 'xy') {\n    return {\n      type: 'Polygon',\n      coordinates: [\n        interpolateXYArrays(polygon, context, transformations, settings)\n      ]\n    }\n  }\n}\n\nfunction interpolateMultiPolygon (multiPolygon, context, transformations, settings) {\n  const input = getInput(multiPolygon);\n\n  if (input === 'geojson') {\n    const polygons = multiPolygon.coordinates;\n    const transformedPolygons = [];\n\n    for (let i = 0; i < polygons.length; i++) {\n      transformedPolygons.push(interpolateSetOfLinearRings(polygons[i], context, transformations, settings));\n    }\n\n    return {\n      type: 'MultiPolygon',\n      coordinates: transformedPolygons\n    }\n  }\n\n  if (input === 'xy') {\n    return {\n      type: 'MultiPolygon',\n      coordinates: [\n        [interpolateXYArrays(multiPolygon, context, transformations, settings)]\n      ]\n    }\n  }\n}\n\nexport { polarGeometry, transformGeometry };\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy: function(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n}\n\nfunction rgb_formatRgb() {\n  var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n  return (a === 1 ? \"rgb(\" : \"rgba(\")\n      + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n      + (a === 1 ? \")\" : \", \" + a + \")\");\n}\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"hsl(\" : \"hsla(\")\n        + (this.h || 0) + \", \"\n        + (this.s || 0) * 100 + \"%, \"\n        + (this.l || 0) * 100 + \"%\"\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function(t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n}\n\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n","import value from \"./value.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\n\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import value from \"./value.js\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport {genericArray} from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : isNumberArray(b) ? numberArray\n      : Array.isArray(b) ? genericArray\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","'use strict';\n\nmodule.exports = earcut;\nmodule.exports.default = earcut;\n\nfunction earcut(data, holeIndices, dim) {\n\n    dim = dim || 2;\n\n    var hasHoles = holeIndices && holeIndices.length,\n        outerLen = hasHoles ? holeIndices[0] * dim : data.length,\n        outerNode = linkedList(data, 0, outerLen, dim, true),\n        triangles = [];\n\n    if (!outerNode || outerNode.next === outerNode.prev) return triangles;\n\n    var minX, minY, maxX, maxY, x, y, invSize;\n\n    if (hasHoles) outerNode = eliminateHoles(data, holeIndices, outerNode, dim);\n\n    // if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n    if (data.length > 80 * dim) {\n        minX = maxX = data[0];\n        minY = maxY = data[1];\n\n        for (var i = dim; i < outerLen; i += dim) {\n            x = data[i];\n            y = data[i + 1];\n            if (x < minX) minX = x;\n            if (y < minY) minY = y;\n            if (x > maxX) maxX = x;\n            if (y > maxY) maxY = y;\n        }\n\n        // minX, minY and invSize are later used to transform coords into integers for z-order calculation\n        invSize = Math.max(maxX - minX, maxY - minY);\n        invSize = invSize !== 0 ? 1 / invSize : 0;\n    }\n\n    earcutLinked(outerNode, triangles, dim, minX, minY, invSize);\n\n    return triangles;\n}\n\n// create a circular doubly linked list from polygon points in the specified winding order\nfunction linkedList(data, start, end, dim, clockwise) {\n    var i, last;\n\n    if (clockwise === (signedArea(data, start, end, dim) > 0)) {\n        for (i = start; i < end; i += dim) last = insertNode(i, data[i], data[i + 1], last);\n    } else {\n        for (i = end - dim; i >= start; i -= dim) last = insertNode(i, data[i], data[i + 1], last);\n    }\n\n    if (last && equals(last, last.next)) {\n        removeNode(last);\n        last = last.next;\n    }\n\n    return last;\n}\n\n// eliminate colinear or duplicate points\nfunction filterPoints(start, end) {\n    if (!start) return start;\n    if (!end) end = start;\n\n    var p = start,\n        again;\n    do {\n        again = false;\n\n        if (!p.steiner && (equals(p, p.next) || area(p.prev, p, p.next) === 0)) {\n            removeNode(p);\n            p = end = p.prev;\n            if (p === p.next) break;\n            again = true;\n\n        } else {\n            p = p.next;\n        }\n    } while (again || p !== end);\n\n    return end;\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\nfunction earcutLinked(ear, triangles, dim, minX, minY, invSize, pass) {\n    if (!ear) return;\n\n    // interlink polygon nodes in z-order\n    if (!pass && invSize) indexCurve(ear, minX, minY, invSize);\n\n    var stop = ear,\n        prev, next;\n\n    // iterate through ears, slicing them one by one\n    while (ear.prev !== ear.next) {\n        prev = ear.prev;\n        next = ear.next;\n\n        if (invSize ? isEarHashed(ear, minX, minY, invSize) : isEar(ear)) {\n            // cut off the triangle\n            triangles.push(prev.i / dim);\n            triangles.push(ear.i / dim);\n            triangles.push(next.i / dim);\n\n            removeNode(ear);\n\n            // skipping the next vertex leads to less sliver triangles\n            ear = next.next;\n            stop = next.next;\n\n            continue;\n        }\n\n        ear = next;\n\n        // if we looped through the whole remaining polygon and can't find any more ears\n        if (ear === stop) {\n            // try filtering points and slicing again\n            if (!pass) {\n                earcutLinked(filterPoints(ear), triangles, dim, minX, minY, invSize, 1);\n\n            // if this didn't work, try curing all small self-intersections locally\n            } else if (pass === 1) {\n                ear = cureLocalIntersections(filterPoints(ear), triangles, dim);\n                earcutLinked(ear, triangles, dim, minX, minY, invSize, 2);\n\n            // as a last resort, try splitting the remaining polygon into two\n            } else if (pass === 2) {\n                splitEarcut(ear, triangles, dim, minX, minY, invSize);\n            }\n\n            break;\n        }\n    }\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\nfunction isEar(ear) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    // now make sure we don't have other points inside the potential ear\n    var p = ear.next.next;\n\n    while (p !== ear.prev) {\n        if (pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.next;\n    }\n\n    return true;\n}\n\nfunction isEarHashed(ear, minX, minY, invSize) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    // triangle bbox; min & max are calculated like this for speed\n    var minTX = a.x < b.x ? (a.x < c.x ? a.x : c.x) : (b.x < c.x ? b.x : c.x),\n        minTY = a.y < b.y ? (a.y < c.y ? a.y : c.y) : (b.y < c.y ? b.y : c.y),\n        maxTX = a.x > b.x ? (a.x > c.x ? a.x : c.x) : (b.x > c.x ? b.x : c.x),\n        maxTY = a.y > b.y ? (a.y > c.y ? a.y : c.y) : (b.y > c.y ? b.y : c.y);\n\n    // z-order range for the current triangle bbox;\n    var minZ = zOrder(minTX, minTY, minX, minY, invSize),\n        maxZ = zOrder(maxTX, maxTY, minX, minY, invSize);\n\n    var p = ear.prevZ,\n        n = ear.nextZ;\n\n    // look for points inside the triangle in both directions\n    while (p && p.z >= minZ && n && n.z <= maxZ) {\n        if (p !== ear.prev && p !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n\n        if (n !== ear.prev && n !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y) &&\n            area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    // look for remaining points in decreasing z-order\n    while (p && p.z >= minZ) {\n        if (p !== ear.prev && p !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n    }\n\n    // look for remaining points in increasing z-order\n    while (n && n.z <= maxZ) {\n        if (n !== ear.prev && n !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y) &&\n            area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    return true;\n}\n\n// go through all polygon nodes and cure small local self-intersections\nfunction cureLocalIntersections(start, triangles, dim) {\n    var p = start;\n    do {\n        var a = p.prev,\n            b = p.next.next;\n\n        if (!equals(a, b) && intersects(a, p, p.next, b) && locallyInside(a, b) && locallyInside(b, a)) {\n\n            triangles.push(a.i / dim);\n            triangles.push(p.i / dim);\n            triangles.push(b.i / dim);\n\n            // remove two nodes involved\n            removeNode(p);\n            removeNode(p.next);\n\n            p = start = b;\n        }\n        p = p.next;\n    } while (p !== start);\n\n    return filterPoints(p);\n}\n\n// try splitting polygon into two and triangulate them independently\nfunction splitEarcut(start, triangles, dim, minX, minY, invSize) {\n    // look for a valid diagonal that divides the polygon into two\n    var a = start;\n    do {\n        var b = a.next.next;\n        while (b !== a.prev) {\n            if (a.i !== b.i && isValidDiagonal(a, b)) {\n                // split the polygon in two by the diagonal\n                var c = splitPolygon(a, b);\n\n                // filter colinear points around the cuts\n                a = filterPoints(a, a.next);\n                c = filterPoints(c, c.next);\n\n                // run earcut on each half\n                earcutLinked(a, triangles, dim, minX, minY, invSize);\n                earcutLinked(c, triangles, dim, minX, minY, invSize);\n                return;\n            }\n            b = b.next;\n        }\n        a = a.next;\n    } while (a !== start);\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\nfunction eliminateHoles(data, holeIndices, outerNode, dim) {\n    var queue = [],\n        i, len, start, end, list;\n\n    for (i = 0, len = holeIndices.length; i < len; i++) {\n        start = holeIndices[i] * dim;\n        end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n        list = linkedList(data, start, end, dim, false);\n        if (list === list.next) list.steiner = true;\n        queue.push(getLeftmost(list));\n    }\n\n    queue.sort(compareX);\n\n    // process holes from left to right\n    for (i = 0; i < queue.length; i++) {\n        eliminateHole(queue[i], outerNode);\n        outerNode = filterPoints(outerNode, outerNode.next);\n    }\n\n    return outerNode;\n}\n\nfunction compareX(a, b) {\n    return a.x - b.x;\n}\n\n// find a bridge between vertices that connects hole with an outer ring and and link it\nfunction eliminateHole(hole, outerNode) {\n    outerNode = findHoleBridge(hole, outerNode);\n    if (outerNode) {\n        var b = splitPolygon(outerNode, hole);\n\n        // filter collinear points around the cuts\n        filterPoints(outerNode, outerNode.next);\n        filterPoints(b, b.next);\n    }\n}\n\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\nfunction findHoleBridge(hole, outerNode) {\n    var p = outerNode,\n        hx = hole.x,\n        hy = hole.y,\n        qx = -Infinity,\n        m;\n\n    // find a segment intersected by a ray from the hole's leftmost point to the left;\n    // segment's endpoint with lesser x will be potential connection point\n    do {\n        if (hy <= p.y && hy >= p.next.y && p.next.y !== p.y) {\n            var x = p.x + (hy - p.y) * (p.next.x - p.x) / (p.next.y - p.y);\n            if (x <= hx && x > qx) {\n                qx = x;\n                if (x === hx) {\n                    if (hy === p.y) return p;\n                    if (hy === p.next.y) return p.next;\n                }\n                m = p.x < p.next.x ? p : p.next;\n            }\n        }\n        p = p.next;\n    } while (p !== outerNode);\n\n    if (!m) return null;\n\n    if (hx === qx) return m; // hole touches outer segment; pick leftmost endpoint\n\n    // look for points inside the triangle of hole point, segment intersection and endpoint;\n    // if there are no points found, we have a valid connection;\n    // otherwise choose the point of the minimum angle with the ray as connection point\n\n    var stop = m,\n        mx = m.x,\n        my = m.y,\n        tanMin = Infinity,\n        tan;\n\n    p = m;\n\n    do {\n        if (hx >= p.x && p.x >= mx && hx !== p.x &&\n                pointInTriangle(hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y)) {\n\n            tan = Math.abs(hy - p.y) / (hx - p.x); // tangential\n\n            if (locallyInside(p, hole) &&\n                (tan < tanMin || (tan === tanMin && (p.x > m.x || (p.x === m.x && sectorContainsSector(m, p)))))) {\n                m = p;\n                tanMin = tan;\n            }\n        }\n\n        p = p.next;\n    } while (p !== stop);\n\n    return m;\n}\n\n// whether sector in vertex m contains sector in vertex p in the same coordinates\nfunction sectorContainsSector(m, p) {\n    return area(m.prev, m, p.prev) < 0 && area(p.next, m, m.next) < 0;\n}\n\n// interlink polygon nodes in z-order\nfunction indexCurve(start, minX, minY, invSize) {\n    var p = start;\n    do {\n        if (p.z === null) p.z = zOrder(p.x, p.y, minX, minY, invSize);\n        p.prevZ = p.prev;\n        p.nextZ = p.next;\n        p = p.next;\n    } while (p !== start);\n\n    p.prevZ.nextZ = null;\n    p.prevZ = null;\n\n    sortLinked(p);\n}\n\n// Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\nfunction sortLinked(list) {\n    var i, p, q, e, tail, numMerges, pSize, qSize,\n        inSize = 1;\n\n    do {\n        p = list;\n        list = null;\n        tail = null;\n        numMerges = 0;\n\n        while (p) {\n            numMerges++;\n            q = p;\n            pSize = 0;\n            for (i = 0; i < inSize; i++) {\n                pSize++;\n                q = q.nextZ;\n                if (!q) break;\n            }\n            qSize = inSize;\n\n            while (pSize > 0 || (qSize > 0 && q)) {\n\n                if (pSize !== 0 && (qSize === 0 || !q || p.z <= q.z)) {\n                    e = p;\n                    p = p.nextZ;\n                    pSize--;\n                } else {\n                    e = q;\n                    q = q.nextZ;\n                    qSize--;\n                }\n\n                if (tail) tail.nextZ = e;\n                else list = e;\n\n                e.prevZ = tail;\n                tail = e;\n            }\n\n            p = q;\n        }\n\n        tail.nextZ = null;\n        inSize *= 2;\n\n    } while (numMerges > 1);\n\n    return list;\n}\n\n// z-order of a point given coords and inverse of the longer side of data bbox\nfunction zOrder(x, y, minX, minY, invSize) {\n    // coords are transformed into non-negative 15-bit integer range\n    x = 32767 * (x - minX) * invSize;\n    y = 32767 * (y - minY) * invSize;\n\n    x = (x | (x << 8)) & 0x00FF00FF;\n    x = (x | (x << 4)) & 0x0F0F0F0F;\n    x = (x | (x << 2)) & 0x33333333;\n    x = (x | (x << 1)) & 0x55555555;\n\n    y = (y | (y << 8)) & 0x00FF00FF;\n    y = (y | (y << 4)) & 0x0F0F0F0F;\n    y = (y | (y << 2)) & 0x33333333;\n    y = (y | (y << 1)) & 0x55555555;\n\n    return x | (y << 1);\n}\n\n// find the leftmost node of a polygon ring\nfunction getLeftmost(start) {\n    var p = start,\n        leftmost = start;\n    do {\n        if (p.x < leftmost.x || (p.x === leftmost.x && p.y < leftmost.y)) leftmost = p;\n        p = p.next;\n    } while (p !== start);\n\n    return leftmost;\n}\n\n// check if a point lies within a convex triangle\nfunction pointInTriangle(ax, ay, bx, by, cx, cy, px, py) {\n    return (cx - px) * (ay - py) - (ax - px) * (cy - py) >= 0 &&\n           (ax - px) * (by - py) - (bx - px) * (ay - py) >= 0 &&\n           (bx - px) * (cy - py) - (cx - px) * (by - py) >= 0;\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\nfunction isValidDiagonal(a, b) {\n    return a.next.i !== b.i && a.prev.i !== b.i && !intersectsPolygon(a, b) && // dones't intersect other edges\n           (locallyInside(a, b) && locallyInside(b, a) && middleInside(a, b) && // locally visible\n            (area(a.prev, a, b.prev) || area(a, b.prev, b)) || // does not create opposite-facing sectors\n            equals(a, b) && area(a.prev, a, a.next) > 0 && area(b.prev, b, b.next) > 0); // special zero-length case\n}\n\n// signed area of a triangle\nfunction area(p, q, r) {\n    return (q.y - p.y) * (r.x - q.x) - (q.x - p.x) * (r.y - q.y);\n}\n\n// check if two points are equal\nfunction equals(p1, p2) {\n    return p1.x === p2.x && p1.y === p2.y;\n}\n\n// check if two segments intersect\nfunction intersects(p1, q1, p2, q2) {\n    var o1 = sign(area(p1, q1, p2));\n    var o2 = sign(area(p1, q1, q2));\n    var o3 = sign(area(p2, q2, p1));\n    var o4 = sign(area(p2, q2, q1));\n\n    if (o1 !== o2 && o3 !== o4) return true; // general case\n\n    if (o1 === 0 && onSegment(p1, p2, q1)) return true; // p1, q1 and p2 are collinear and p2 lies on p1q1\n    if (o2 === 0 && onSegment(p1, q2, q1)) return true; // p1, q1 and q2 are collinear and q2 lies on p1q1\n    if (o3 === 0 && onSegment(p2, p1, q2)) return true; // p2, q2 and p1 are collinear and p1 lies on p2q2\n    if (o4 === 0 && onSegment(p2, q1, q2)) return true; // p2, q2 and q1 are collinear and q1 lies on p2q2\n\n    return false;\n}\n\n// for collinear points p, q, r, check if point q lies on segment pr\nfunction onSegment(p, q, r) {\n    return q.x <= Math.max(p.x, r.x) && q.x >= Math.min(p.x, r.x) && q.y <= Math.max(p.y, r.y) && q.y >= Math.min(p.y, r.y);\n}\n\nfunction sign(num) {\n    return num > 0 ? 1 : num < 0 ? -1 : 0;\n}\n\n// check if a polygon diagonal intersects any polygon segments\nfunction intersectsPolygon(a, b) {\n    var p = a;\n    do {\n        if (p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n                intersects(p, p.next, a, b)) return true;\n        p = p.next;\n    } while (p !== a);\n\n    return false;\n}\n\n// check if a polygon diagonal is locally inside the polygon\nfunction locallyInside(a, b) {\n    return area(a.prev, a, a.next) < 0 ?\n        area(a, b, a.next) >= 0 && area(a, a.prev, b) >= 0 :\n        area(a, b, a.prev) < 0 || area(a, a.next, b) < 0;\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\nfunction middleInside(a, b) {\n    var p = a,\n        inside = false,\n        px = (a.x + b.x) / 2,\n        py = (a.y + b.y) / 2;\n    do {\n        if (((p.y > py) !== (p.next.y > py)) && p.next.y !== p.y &&\n                (px < (p.next.x - p.x) * (py - p.y) / (p.next.y - p.y) + p.x))\n            inside = !inside;\n        p = p.next;\n    } while (p !== a);\n\n    return inside;\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\nfunction splitPolygon(a, b) {\n    var a2 = new Node(a.i, a.x, a.y),\n        b2 = new Node(b.i, b.x, b.y),\n        an = a.next,\n        bp = b.prev;\n\n    a.next = b;\n    b.prev = a;\n\n    a2.next = an;\n    an.prev = a2;\n\n    b2.next = a2;\n    a2.prev = b2;\n\n    bp.next = b2;\n    b2.prev = bp;\n\n    return b2;\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\nfunction insertNode(i, x, y, last) {\n    var p = new Node(i, x, y);\n\n    if (!last) {\n        p.prev = p;\n        p.next = p;\n\n    } else {\n        p.next = last.next;\n        p.prev = last;\n        last.next.prev = p;\n        last.next = p;\n    }\n    return p;\n}\n\nfunction removeNode(p) {\n    p.next.prev = p.prev;\n    p.prev.next = p.next;\n\n    if (p.prevZ) p.prevZ.nextZ = p.nextZ;\n    if (p.nextZ) p.nextZ.prevZ = p.prevZ;\n}\n\nfunction Node(i, x, y) {\n    // vertex index in coordinates array\n    this.i = i;\n\n    // vertex coordinates\n    this.x = x;\n    this.y = y;\n\n    // previous and next vertex nodes in a polygon ring\n    this.prev = null;\n    this.next = null;\n\n    // z-order curve value\n    this.z = null;\n\n    // previous and next nodes in z-order\n    this.prevZ = null;\n    this.nextZ = null;\n\n    // indicates whether this is a steiner point\n    this.steiner = false;\n}\n\n// return a percentage difference between the polygon area and its triangulation area;\n// used to verify correctness of triangulation\nearcut.deviation = function (data, holeIndices, dim, triangles) {\n    var hasHoles = holeIndices && holeIndices.length;\n    var outerLen = hasHoles ? holeIndices[0] * dim : data.length;\n\n    var polygonArea = Math.abs(signedArea(data, 0, outerLen, dim));\n    if (hasHoles) {\n        for (var i = 0, len = holeIndices.length; i < len; i++) {\n            var start = holeIndices[i] * dim;\n            var end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n            polygonArea -= Math.abs(signedArea(data, start, end, dim));\n        }\n    }\n\n    var trianglesArea = 0;\n    for (i = 0; i < triangles.length; i += 3) {\n        var a = triangles[i] * dim;\n        var b = triangles[i + 1] * dim;\n        var c = triangles[i + 2] * dim;\n        trianglesArea += Math.abs(\n            (data[a] - data[c]) * (data[b + 1] - data[a + 1]) -\n            (data[a] - data[b]) * (data[c + 1] - data[a + 1]));\n    }\n\n    return polygonArea === 0 && trianglesArea === 0 ? 0 :\n        Math.abs((trianglesArea - polygonArea) / polygonArea);\n};\n\nfunction signedArea(data, start, end, dim) {\n    var sum = 0;\n    for (var i = start, j = end - dim; i < end; i += dim) {\n        sum += (data[j] - data[i]) * (data[i + 1] + data[j + 1]);\n        j = i;\n    }\n    return sum;\n}\n\n// turn a polygon in a multi-dimensional array form (e.g. as in GeoJSON) into a form Earcut accepts\nearcut.flatten = function (data) {\n    var dim = data[0][0].length,\n        result = {vertices: [], holes: [], dimensions: dim},\n        holeIndex = 0;\n\n    for (var i = 0; i < data.length; i++) {\n        for (var j = 0; j < data[i].length; j++) {\n            for (var d = 0; d < dim; d++) result.vertices.push(data[i][j][d]);\n        }\n        if (i > 0) {\n            holeIndex += data[i - 1].length;\n            result.holes.push(holeIndex);\n        }\n    }\n    return result;\n};\n","export default function(x) {\n  return x;\n}\n","import reverse from \"./reverse.js\";\nimport transform from \"./transform.js\";\n\nexport default function(topology, o) {\n  if (typeof o === \"string\") o = topology.objects[o];\n  return o.type === \"GeometryCollection\"\n      ? {type: \"FeatureCollection\", features: o.geometries.map(function(o) { return feature(topology, o); })}\n      : feature(topology, o);\n}\n\nfunction feature(topology, o) {\n  var id = o.id,\n      bbox = o.bbox,\n      properties = o.properties == null ? {} : o.properties,\n      geometry = object(topology, o);\n  return id == null && bbox == null ? {type: \"Feature\", properties: properties, geometry: geometry}\n      : bbox == null ? {type: \"Feature\", id: id, properties: properties, geometry: geometry}\n      : {type: \"Feature\", id: id, bbox: bbox, properties: properties, geometry: geometry};\n}\n\nexport function object(topology, o) {\n  var transformPoint = transform(topology.transform),\n      arcs = topology.arcs;\n\n  function arc(i, points) {\n    if (points.length) points.pop();\n    for (var a = arcs[i < 0 ? ~i : i], k = 0, n = a.length; k < n; ++k) {\n      points.push(transformPoint(a[k], k));\n    }\n    if (i < 0) reverse(points, n);\n  }\n\n  function point(p) {\n    return transformPoint(p);\n  }\n\n  function line(arcs) {\n    var points = [];\n    for (var i = 0, n = arcs.length; i < n; ++i) arc(arcs[i], points);\n    if (points.length < 2) points.push(points[0]); // This should never happen per the specification.\n    return points;\n  }\n\n  function ring(arcs) {\n    var points = line(arcs);\n    while (points.length < 4) points.push(points[0]); // This may happen if an arc has only two points.\n    return points;\n  }\n\n  function polygon(arcs) {\n    return arcs.map(ring);\n  }\n\n  function geometry(o) {\n    var type = o.type, coordinates;\n    switch (type) {\n      case \"GeometryCollection\": return {type: type, geometries: o.geometries.map(geometry)};\n      case \"Point\": coordinates = point(o.coordinates); break;\n      case \"MultiPoint\": coordinates = o.coordinates.map(point); break;\n      case \"LineString\": coordinates = line(o.arcs); break;\n      case \"MultiLineString\": coordinates = o.arcs.map(line); break;\n      case \"Polygon\": coordinates = polygon(o.arcs); break;\n      case \"MultiPolygon\": coordinates = o.arcs.map(polygon); break;\n      default: return null;\n    }\n    return {type: type, coordinates: coordinates};\n  }\n\n  return geometry(o);\n}\n","import identity from \"./identity.js\";\n\nexport default function(transform) {\n  if (transform == null) return identity;\n  var x0,\n      y0,\n      kx = transform.scale[0],\n      ky = transform.scale[1],\n      dx = transform.translate[0],\n      dy = transform.translate[1];\n  return function(input, i) {\n    if (!i) x0 = y0 = 0;\n    var j = 2, n = input.length, output = new Array(n);\n    output[0] = (x0 += input[0]) * kx + dx;\n    output[1] = (y0 += input[1]) * ky + dy;\n    while (j < n) output[j] = input[j], ++j;\n    return output;\n  };\n}\n","export default function(array, n) {\n  var t, j = array.length, i = j - n;\n  while (i < --j) t = array[i], array[i++] = array[j], array[j] = t;\n}\n","export default function(topology, arcs) {\n  var stitchedArcs = {},\n      fragmentByStart = {},\n      fragmentByEnd = {},\n      fragments = [],\n      emptyIndex = -1;\n\n  // Stitch empty arcs first, since they may be subsumed by other arcs.\n  arcs.forEach(function(i, j) {\n    var arc = topology.arcs[i < 0 ? ~i : i], t;\n    if (arc.length < 3 && !arc[1][0] && !arc[1][1]) {\n      t = arcs[++emptyIndex], arcs[emptyIndex] = i, arcs[j] = t;\n    }\n  });\n\n  arcs.forEach(function(i) {\n    var e = ends(i),\n        start = e[0],\n        end = e[1],\n        f, g;\n\n    if (f = fragmentByEnd[start]) {\n      delete fragmentByEnd[f.end];\n      f.push(i);\n      f.end = end;\n      if (g = fragmentByStart[end]) {\n        delete fragmentByStart[g.start];\n        var fg = g === f ? f : f.concat(g);\n        fragmentByStart[fg.start = f.start] = fragmentByEnd[fg.end = g.end] = fg;\n      } else {\n        fragmentByStart[f.start] = fragmentByEnd[f.end] = f;\n      }\n    } else if (f = fragmentByStart[end]) {\n      delete fragmentByStart[f.start];\n      f.unshift(i);\n      f.start = start;\n      if (g = fragmentByEnd[start]) {\n        delete fragmentByEnd[g.end];\n        var gf = g === f ? f : g.concat(f);\n        fragmentByStart[gf.start = g.start] = fragmentByEnd[gf.end = f.end] = gf;\n      } else {\n        fragmentByStart[f.start] = fragmentByEnd[f.end] = f;\n      }\n    } else {\n      f = [i];\n      fragmentByStart[f.start = start] = fragmentByEnd[f.end = end] = f;\n    }\n  });\n\n  function ends(i) {\n    var arc = topology.arcs[i < 0 ? ~i : i], p0 = arc[0], p1;\n    if (topology.transform) p1 = [0, 0], arc.forEach(function(dp) { p1[0] += dp[0], p1[1] += dp[1]; });\n    else p1 = arc[arc.length - 1];\n    return i < 0 ? [p1, p0] : [p0, p1];\n  }\n\n  function flush(fragmentByEnd, fragmentByStart) {\n    for (var k in fragmentByEnd) {\n      var f = fragmentByEnd[k];\n      delete fragmentByStart[f.start];\n      delete f.start;\n      delete f.end;\n      f.forEach(function(i) { stitchedArcs[i < 0 ? ~i : i] = 1; });\n      fragments.push(f);\n    }\n  }\n\n  flush(fragmentByEnd, fragmentByStart);\n  flush(fragmentByStart, fragmentByEnd);\n  arcs.forEach(function(i) { if (!stitchedArcs[i < 0 ? ~i : i]) fragments.push([i]); });\n\n  return fragments;\n}\n","import {object} from \"./feature.js\";\nimport stitch from \"./stitch.js\";\n\nfunction planarRingArea(ring) {\n  var i = -1, n = ring.length, a, b = ring[n - 1], area = 0;\n  while (++i < n) a = b, b = ring[i], area += a[0] * b[1] - a[1] * b[0];\n  return Math.abs(area); // Note: doubled area!\n}\n\nexport default function(topology) {\n  return object(topology, mergeArcs.apply(this, arguments));\n}\n\nexport function mergeArcs(topology, objects) {\n  var polygonsByArc = {},\n      polygons = [],\n      groups = [];\n\n  objects.forEach(geometry);\n\n  function geometry(o) {\n    switch (o.type) {\n      case \"GeometryCollection\": o.geometries.forEach(geometry); break;\n      case \"Polygon\": extract(o.arcs); break;\n      case \"MultiPolygon\": o.arcs.forEach(extract); break;\n    }\n  }\n\n  function extract(polygon) {\n    polygon.forEach(function(ring) {\n      ring.forEach(function(arc) {\n        (polygonsByArc[arc = arc < 0 ? ~arc : arc] || (polygonsByArc[arc] = [])).push(polygon);\n      });\n    });\n    polygons.push(polygon);\n  }\n\n  function area(ring) {\n    return planarRingArea(object(topology, {type: \"Polygon\", arcs: [ring]}).coordinates[0]);\n  }\n\n  polygons.forEach(function(polygon) {\n    if (!polygon._) {\n      var group = [],\n          neighbors = [polygon];\n      polygon._ = 1;\n      groups.push(group);\n      while (polygon = neighbors.pop()) {\n        group.push(polygon);\n        polygon.forEach(function(ring) {\n          ring.forEach(function(arc) {\n            polygonsByArc[arc < 0 ? ~arc : arc].forEach(function(polygon) {\n              if (!polygon._) {\n                polygon._ = 1;\n                neighbors.push(polygon);\n              }\n            });\n          });\n        });\n      }\n    }\n  });\n\n  polygons.forEach(function(polygon) {\n    delete polygon._;\n  });\n\n  return {\n    type: \"MultiPolygon\",\n    arcs: groups.map(function(polygons) {\n      var arcs = [], n;\n\n      // Extract the exterior (unique) arcs.\n      polygons.forEach(function(polygon) {\n        polygon.forEach(function(ring) {\n          ring.forEach(function(arc) {\n            if (polygonsByArc[arc < 0 ? ~arc : arc].length < 2) {\n              arcs.push(arc);\n            }\n          });\n        });\n      });\n\n      // Stitch the arcs into one or more rings.\n      arcs = stitch(topology, arcs);\n\n      // If more than one ring is returned,\n      // at most one of these rings can be the exterior;\n      // choose the one with the greatest absolute area.\n      if ((n = arcs.length) > 1) {\n        for (var i = 1, k = area(arcs[0]), ki, t; i < n; ++i) {\n          if ((ki = area(arcs[i])) > k) {\n            t = arcs[0], arcs[0] = arcs[i], arcs[i] = t, k = ki;\n          }\n        }\n      }\n\n      return arcs;\n    }).filter(function(arcs) {\n      return arcs.length > 0;\n    })\n  };\n}\n","import { interpolate } from 'd3-interpolate';\nimport earcut from 'earcut';\nimport { feature, mergeArcs } from 'topojson-client';\nimport { bisector } from 'd3-array';\n\nfunction pointDistance (point1, point2) {\n  return Math.sqrt(\n    (point1[0] - point2[0]) ** 2 +\n    (point1[1] - point2[1]) ** 2\n  )\n}\n\nfunction linearRingLength (linearRing) {\n  let totalLength = 0;\n\n  for (let i = 0; i < linearRing.length - 1; i++) {\n    const from = linearRing[i];\n    const to = linearRing[i + 1];\n\n    totalLength += pointDistance(from, to);\n  }\n\n  return totalLength\n}\n\n/*\n  Why this weird map function when there is Array.map?\n  Well, usually premature optimization is the root of all evil,\n  but Array.map is just really really slow.\n\n  See, for example,  https://jsperf.com/map-reduce-named-functions/2\n  Array.map is more than 6x slower than a classical for loop,\n  and almost 4x slower than a custom implementation like this one.\n*/\nfunction map (array, callback) {\n  const result = [];\n\n  for (let i = 0; i < array.length; i++) {\n    result.push(callback(array[i], i));\n  }\n\n  return result\n}\n\nfunction every (array, condition) {\n  for (let i = 0; i < array.length; i++) {\n    if (condition(array[i], i)) return false\n  }\n\n  return true\n}\n\nfunction getOrderDescending (array) {\n  const indexArray = map(array, (_, i) => i);\n  indexArray.sort((a, b) => array[b] - array[a]);\n\n  return indexArray\n}\n\nfunction sortIntoOrder (array, order) {\n  return map(order, i => array[i])\n}\n\nfunction getInsertionIndexDescending (arraySortedDescending, value) {\n  if (arraySortedDescending.length === 0) return 0\n\n  for (let i = arraySortedDescending.length - 1; i >= 0; i--) {\n    const arrayValue = arraySortedDescending[i];\n\n    if (value <= arrayValue) return i\n  }\n\n  return 0\n}\n\nfunction removeClosingPoint (linearRing) {\n  linearRing.pop();\n\n  return linearRing\n}\n\nfunction closeRing (linearRing) {\n  let firstPoint = linearRing[0];\n  linearRing.push(firstPoint);\n\n  return linearRing\n}\n\nfunction insertPointsLinearRing (inputLinearRing, numberOfAdditionalPoints) {\n  let linearRing = cloneLinearRing(inputLinearRing);\n  linearRing = removeClosingPoint(linearRing);\n  linearRing = insertPoints(linearRing, numberOfAdditionalPoints, { ring: true });\n  linearRing = closeRing(linearRing);\n\n  return linearRing\n}\n\nfunction insertPointsLineString (inputLineString, numberOfAdditionalPoints) {\n  const lineString = cloneLinearRing(inputLineString);\n  return insertPoints(lineString, numberOfAdditionalPoints, { ring: false })\n}\n\nfunction insertPoints (lineString, numberOfAdditionalPoints, { ring }) {\n  const edgeLengths = getEdgeLengths(lineString, ring);\n  let orderedEdgeIds = getOrderDescending(edgeLengths);\n\n  for (let i = 0; i < numberOfAdditionalPoints; i++) {\n    const longestEdgeId = orderedEdgeIds[0];\n\n    const edge = getEdge(lineString, longestEdgeId);\n\n    const edgeLength = edgeLengths[longestEdgeId];\n\n    const newEdges = splitEdge(edge);\n    const newEdgesLength = edgeLength / 2;\n\n    // Remove old edge\n    orderedEdgeIds.shift();\n    lineString[longestEdgeId] = null;\n    edgeLengths[longestEdgeId] = null;\n\n    // Insert new edges\n    orderedEdgeIds = insertOrderedId(orderedEdgeIds, edgeLengths, longestEdgeId, newEdgesLength);\n\n    lineString[longestEdgeId] = newEdges[0][0];\n    lineString.splice(longestEdgeId + 1, 0, newEdges[1][0]);\n\n    edgeLengths[longestEdgeId] = newEdgesLength;\n    edgeLengths.splice(longestEdgeId + 1, 0, newEdgesLength);\n  }\n\n  return lineString\n}\n\nfunction cloneLinearRing (linearRing) {\n  const clonedLinearRing = [];\n\n  for (let i = 0; i < linearRing.length; i++) {\n    clonedLinearRing.push(linearRing[i].slice(0));\n  }\n\n  return clonedLinearRing\n}\n\nfunction getEdgeLengths (linearRing, ring) {\n  const edgeLengths = [];\n  const edges = ring ? linearRing.length : linearRing.length - 1;\n\n  for (let i = 0; i < edges; i++) {\n    const edge = getEdge(linearRing, i);\n\n    edgeLengths.push(pointDistance(edge[0], edge[1]));\n  }\n\n  return edgeLengths\n}\n\nfunction getEdge (linearRing, index) {\n  return [\n    linearRing[index], linearRing[(index + 1) % linearRing.length]\n  ]\n}\n\nfunction splitEdge (edge) {\n  const pointInBetween = interpolate(edge[0], edge[1])(0.5);\n\n  return [\n    [edge[0], pointInBetween],\n    [pointInBetween, edge[1]]\n  ]\n}\n\nfunction insertOrderedId (orderedIds, edgeLengths, valueIndex, newValue) {\n  // Insert new Ids right place\n  let idsWereInserted = false;\n\n  for (let i = 0; i < orderedIds.length; i++) {\n    const index = orderedIds[i];\n\n    // Increase all indices after the valueIndex with 1\n    if (index > valueIndex) orderedIds[i] = orderedIds[i] + 1;\n\n    const currentArrayValue = edgeLengths[index];\n    if (currentArrayValue === null) continue\n\n    if (newValue >= currentArrayValue) {\n      orderedIds.splice(i, 0, valueIndex);\n      orderedIds.splice(i + 1, 0, valueIndex + 1);\n\n      idsWereInserted = true;\n      break\n    }\n  }\n\n  if (!idsWereInserted) {\n    orderedIds.push(valueIndex);\n    orderedIds.push(valueIndex + 1);\n  }\n\n  return orderedIds\n}\n\n/*\n  Taken from flubber:\n  https://github.com/veltman/flubber\n*/\n\nfunction rotatePointsLinearRing (inputLinearRing, toLinearRing) {\n  let fromLinearRing = cloneLinearRing(inputLinearRing);\n  fromLinearRing = removeClosingPoint(fromLinearRing);\n\n  const fromLength = fromLinearRing.length;\n  let min = Infinity;\n  let bestOffset;\n  let sumOfSquares;\n  let spliced;\n\n  for (let offset = 0; offset < fromLength; offset++) {\n    sumOfSquares = 0;\n\n    toLinearRing.forEach((point, i) => {\n      const distance = pointDistance(fromLinearRing[(offset + i) % fromLength], point);\n      sumOfSquares += distance * distance;\n    });\n\n    if (sumOfSquares < min) {\n      min = sumOfSquares;\n      bestOffset = offset;\n    }\n  }\n\n  if (bestOffset) {\n    spliced = fromLinearRing.splice(0, bestOffset);\n    fromLinearRing.splice(fromLinearRing.length, 0, ...spliced);\n  }\n\n  fromLinearRing = closeRing(fromLinearRing);\n\n  return fromLinearRing\n}\n\nfunction isLinearRing (ring) {\n  return ring.constructor === Array\n}\n\nfunction isPolygon (geometry) {\n  return geometry.constructor === Object && geometry.type === 'Polygon'\n}\n\nfunction isMultiPolygon (geometry) {\n  return geometry.constructor === Object && geometry.type === 'MultiPolygon'\n}\n\nfunction isPolygonOrMultiPolygon (geometry) {\n  return isPolygon(geometry) || isMultiPolygon(geometry)\n}\n\nfunction isLineString (geometry) {\n  return geometry.constructor === Object && geometry.type === 'LineString'\n}\n\nfunction isMultiLineString (geometry) {\n  return geometry.constructor === Object && geometry.type === 'MultiLineString'\n}\n\nfunction isLineStringOrMultiLineString (geometry) {\n  return isLineString(geometry) || isMultiLineString(geometry)\n}\n\nfunction polygonArea (polygon) {\n  if (isLinearRing(polygon)) {\n    return getRingArea(polygon)\n  }\n\n  if (isPolygon(polygon)) {\n    return getPolygonArea(polygon)\n  }\n\n  if (isMultiPolygon(polygon)) {\n    return getMultiPolygonArea(polygon)\n  }\n\n  throw new Error('Invalid input')\n}\n\nfunction linearRingIsClockwise (ring) {\n  return getSignedRingArea(ring) < 0\n}\n\nfunction getRingArea (ring) {\n  return Math.abs(getSignedRingArea(ring))\n}\n\n// Taken from: https://stackoverflow.com/a/33670691/7237112\nfunction getSignedRingArea (ring) {\n  let total = 0;\n\n  for (let i = 0, l = ring.length; i < l; i++) {\n    const addX = ring[i][0];\n    const addY = ring[i === ring.length - 1 ? 0 : i + 1][1];\n    const subX = ring[i === ring.length - 1 ? 0 : i + 1][0];\n    const subY = ring[i][1];\n\n    total += (addX * addY * 0.5);\n    total -= (subX * subY * 0.5);\n  }\n\n  return total\n}\n\nfunction getPolygonArea (polygon) {\n  let totalArea = getRingArea(polygon.coordinates[0]);\n\n  for (let i = 1; i < polygon.coordinates.length; i++) {\n    const holeArea = getRingArea(polygon.coordinates[i]);\n    totalArea -= holeArea;\n  }\n\n  return totalArea\n}\n\nfunction getMultiPolygonArea (multiPolygon) {\n  let totalArea = 0;\n\n  for (let i = 0; i < multiPolygon.coordinates.length; i++) {\n    totalArea += getPolygonArea(multiPolygon.coordinates[i]);\n  }\n\n  return totalArea\n}\n\nfunction matchLinearRings (fromRings, toRings) {\n  if (tooManyRings(fromRings)) {\n    return map(fromRings, (_, i) => i)\n  }\n\n  return bestOrder(fromRings, toRings)\n}\n\nfunction tooManyRings (rings) {\n  // with more than 9 rings, everything will be too chaotic to notice this stuff anyway.\n  return rings.length > 9\n}\n\nfunction bestOrder (fromRings, toRings) {\n  const fromAreas = map(fromRings, polygonArea);\n  const toAreas = map(toRings, polygonArea);\n\n  const fromAreasOrderDescending = getOrderDescending(fromAreas);\n  const toAreasOrderDescending = getOrderDescending(toAreas);\n\n  const pairs = {};\n\n  for (let i = 0; i < toAreasOrderDescending.length; i++) {\n    const fromIndex = fromAreasOrderDescending[i];\n    const toIndex = toAreasOrderDescending[i];\n\n    pairs[toIndex] = fromIndex;\n  }\n\n  const fromOrder = [];\n\n  for (let i = 0; i < toRings.length; i++) {\n    fromOrder.push(pairs[i]);\n  }\n\n  return fromOrder\n}\n\nfunction calculateCentroid (geometry) {\n  if (isLinearRing(geometry)) {\n    return calculateLinearRingCentroid(geometry)\n  }\n\n  if (isPolygon(geometry)) {\n    return calculatePolygonCentroid(geometry)\n  }\n\n  if (isMultiPolygon(geometry)) {\n    return calculateMultiPolygonCentroid(geometry)\n  }\n}\n\n// https://stackoverflow.com/a/33852627/7237112\nfunction calculateLinearRingCentroid (ring) {\n  const nPts = ring.length;\n  const off = ring[0];\n  let twicearea = 0;\n  let x = 0;\n  let y = 0;\n  let p1;\n  let p2;\n  let f;\n\n  for (let i = 0, j = nPts - 1; i < nPts; j = i++) {\n    p1 = ring[i];\n    p2 = ring[j];\n    f = (p1[0] - off[0]) * (p2[1] - off[1]) - (p2[0] - off[0]) * (p1[1] - off[1]);\n    twicearea += f;\n    x += (p1[0] + p2[0] - 2 * off[0]) * f;\n    y += (p1[1] + p2[1] - 2 * off[1]) * f;\n  }\n\n  f = twicearea * 3;\n\n  return [x / f + off[0], y / f + off[1]]\n}\n\nfunction calculatePolygonCentroid (polygon) {\n  // We will ignore holes and just take the outer ring\n  return calculateLinearRingCentroid(polygon.coordinates[0])\n}\n\nfunction calculateMultiPolygonCentroid (multiPolygon) {\n  // We will take the centroid of each polygon (ignoring holes)\n  // and take the weighted (by area) center of these.\n  let x = 0;\n  let y = 0;\n  let totalArea = 0;\n\n  for (let i = 0; i < multiPolygon.coordinates.length; i++) {\n    const polygon = multiPolygon.coordinates[i];\n    const polygonCentroid = calculateLinearRingCentroid(polygon[0]);\n    const area = polygonArea(polygon[0]);\n\n    x += polygonCentroid[0] * area;\n    y += polygonCentroid[1] * area;\n    totalArea += area;\n  }\n\n  return [x / totalArea, y / totalArea]\n}\n\nfunction polygonToPolygon (from, to) {\n  const fromOuterRing = from.coordinates[0];\n  const toOuterRing = to.coordinates[0];\n\n  const [fromOuterRingPrepared, toOuterRingPrepared] = prepareLinearRings(fromOuterRing, toOuterRing);\n\n  if (neitherHasHoles(from, to)) {\n    return createInterpolatorNoHoles(from, to, fromOuterRingPrepared, toOuterRingPrepared)\n  }\n\n  const holeInterpolators = createHoleInterpolators(from, to);\n\n  return createInterpolatorWithHoles(\n    from, to, fromOuterRingPrepared, toOuterRingPrepared, holeInterpolators\n  )\n}\n\nfunction prepareLinearRings (fromRing, toRing) {\n  const lengthDifference = fromRing.length - toRing.length;\n\n  if (lengthDifference > 0) {\n    toRing = insertPointsLinearRing(toRing, lengthDifference);\n  }\n\n  if (lengthDifference < 0) {\n    fromRing = insertPointsLinearRing(fromRing, -lengthDifference);\n  }\n\n  const rotatedFromRing = rotatePointsLinearRing(fromRing, toRing);\n\n  return [rotatedFromRing, toRing]\n}\n\nfunction createInterpolatorNoHoles (from, to, fromOuterRingPrepared, toOuterRingPrepared) {\n  const outerRingInterpolator = interpolate(fromOuterRingPrepared, toOuterRingPrepared);\n\n  return function interpolator (t) {\n    if (t === 0) return from\n    if (t === 1) return to\n\n    const interpolatedLinearRing = outerRingInterpolator(t);\n\n    return {\n      type: 'Polygon',\n      coordinates: [interpolatedLinearRing]\n    }\n  }\n}\n\nfunction neitherHasHoles (from, to) {\n  return from.coordinates.length === 1 && to.coordinates.length === 1\n}\n\nfunction getHoles (polygon, numberOfHoles) {\n  const holes = [];\n\n  for (let i = 1; i <= numberOfHoles; i++) {\n    holes.push(polygon.coordinates[i]);\n  }\n\n  return holes\n}\n\nfunction createHoleInterpolators (from, to) {\n  let holeInterpolators = [];\n\n  const numberOfMatchableHoles = Math.min(from.coordinates.length, to.coordinates.length) - 1;\n\n  if (numberOfMatchableHoles > 0) {\n    holeInterpolators = holeInterpolators.concat(\n      createMatchableHoleInterpolators(from, to, numberOfMatchableHoles)\n    );\n  }\n\n  const differenceBetweenNumberOfHoles = from.coordinates.length - to.coordinates.length;\n\n  if (differenceBetweenNumberOfHoles > 0) {\n    holeInterpolators = holeInterpolators.concat(\n      createHoleImploders(from, differenceBetweenNumberOfHoles)\n    );\n  }\n\n  if (differenceBetweenNumberOfHoles < 0) {\n    holeInterpolators = holeInterpolators.concat(\n      createHoleExploders(to, -differenceBetweenNumberOfHoles)\n    );\n  }\n\n  return holeInterpolators\n}\n\nfunction createMatchableHoleInterpolators (from, to, numberOfMatchableHoles) {\n  const holeInterpolators = [];\n\n  const fromHoles = getHoles(from, numberOfMatchableHoles);\n  const toHoles = getHoles(to, numberOfMatchableHoles);\n\n  const fromOrder = matchLinearRings(fromHoles, toHoles);\n  const fromHolesSorted = map(fromOrder, i => fromHoles[i]);\n\n  for (let i = 0; i < numberOfMatchableHoles; i++) {\n    const fromHole = fromHolesSorted[i];\n    const toHole = toHoles[i];\n\n    const [fromHolePrepared, toHolePrepared] = prepareLinearRings(fromHole, toHole);\n\n    const holeInterpolator = interpolate(fromHolePrepared, toHolePrepared);\n\n    holeInterpolators.push(holeInterpolator);\n  }\n\n  return holeInterpolators\n}\n\nfunction createHoleImploders (polygon, differenceBetweenNumberOfHoles) {\n  const interpolators = [];\n\n  const firstHoleThatNeedsImplodingIndex = polygon.coordinates.length - differenceBetweenNumberOfHoles;\n\n  for (let i = firstHoleThatNeedsImplodingIndex; i < polygon.coordinates.length; i++) {\n    const hole = polygon.coordinates[i];\n    const holeCentroid = calculateCentroid(hole);\n    const smallRectangleAroundCentroid = makeSmallRectangleAroundPoint(holeCentroid);\n\n    const [preparedPolygon, preparedImplodePoint] = prepareLinearRings(hole, smallRectangleAroundCentroid);\n\n    interpolators.push(interpolate(preparedPolygon, preparedImplodePoint));\n  }\n\n  return interpolators\n}\n\nfunction createHoleExploders (polygon, differenceBetweenNumberOfHoles) {\n  return map(createHoleImploders(polygon, differenceBetweenNumberOfHoles), holeInterpolator => {\n    return t => holeInterpolator(1 - t)\n  })\n}\n\nfunction makeSmallRectangleAroundPoint ([x, y]) {\n  const epsilon = 1e-6;\n\n  const x1 = x - epsilon;\n  const x2 = x + epsilon;\n  const y1 = y - epsilon;\n  const y2 = y + epsilon;\n\n  return [[x1, y1], [x1, y2], [x2, y2], [x2, y1], [x1, y1]]\n}\n\nfunction createInterpolatorWithHoles (\n  from, to, fromOuterRingPrepared, toOuterRingPrepared, holeInterpolators\n) {\n  const outerRingInterpolator = interpolate(fromOuterRingPrepared, toOuterRingPrepared);\n\n  return function interpolator (t) {\n    if (t === 0) return from\n    if (t === 1) return to\n\n    const interpolatedLinearRing = outerRingInterpolator(t);\n\n    return {\n      type: 'Polygon',\n      coordinates: [\n        interpolatedLinearRing,\n        ...map(holeInterpolators, holeInterpolator => holeInterpolator(t))\n      ]\n    }\n  }\n}\n\n/*\n  Taken from flubber:\n  https://github.com/veltman/flubber\n*/\n\nfunction createTopology (vertices, triangleIndices) {\n  const arcIndices = {};\n  const topology = createEmptyTopology();\n\n  for (let i = 0; i < triangleIndices.length; i += 3) {\n    const geometry = [];\n\n    const triangleIndexArcs = createTriangleIndexArcs(triangleIndices, i);\n\n    triangleIndexArcs.forEach(arc => {\n      const slug = createArcSlug(arc);\n\n      const coordinates = map(arc, pointIndex => getPoint(vertices, pointIndex));\n\n      if (slug in arcIndices) {\n        geometry.push(~arcIndices[slug]); // Not sure what this is doing\n      } else {\n        geometry.push((arcIndices[slug] = topology.arcs.length));\n        topology.arcs.push(coordinates);\n      }\n    });\n\n    const area = getTriangleArea(vertices, triangleIndexArcs);\n    const polygon = createTopoPolygon(area, geometry);\n\n    topology.objects.triangles.geometries.push(polygon);\n  }\n\n  // Sort smallest first\n  // TODO sorted insertion?\n  topology.objects.triangles.geometries.sort((a, b) => a.area - b.area);\n\n  return topology\n}\n\nfunction createEmptyTopology () {\n  return {\n    type: 'Topology',\n    objects: {\n      triangles: {\n        type: 'GeometryCollection',\n        geometries: []\n      }\n    },\n    arcs: []\n  }\n}\n\nfunction createTriangleIndexArcs (triangleIndices, i) {\n  const a = triangleIndices[i];\n  const b = triangleIndices[i + 1];\n  const c = triangleIndices[i + 2];\n\n  return [[a, b], [b, c], [c, a]]\n}\n\nfunction createArcSlug (arc) {\n  return arc[0] < arc[1] ? arc.join(',') : arc[1] + ',' + arc[0]\n}\n\nfunction getPoint (vertices, i) {\n  return [vertices[i * 2], vertices[(i * 2) + 1]]\n}\n\nfunction createTopoPolygon (area, geometry) {\n  return {\n    type: 'Polygon',\n    area,\n    arcs: [geometry]\n  }\n}\n\nfunction getTriangleArea (vertices, triangleIndexArcs) {\n  return Math.abs(\n    polygonArea(map(triangleIndexArcs, arc => getPoint(vertices, arc[0])))\n  )\n}\n\n/*\n  Taken from flubber:\n  https://github.com/veltman/flubber\n*/\n\nconst bisect = bisector(d => d.area).left;\n\nfunction findNeighbor (geoms) {\n  // we assume the first geom is the candidate for which\n  // we want to find a neighbor\n  const sourceArcs = geoms[0].arcs[0].map(arc => arc < 0 ? ~arc : arc);\n\n  let neighbor;\n\n  // start loop at index 1, first possible neighbor\n  for (let index = 1; index < geoms.length; index++) {\n    const targetArcs = geoms[index].arcs[0].map(arc => arc < 0 ? ~arc : arc);\n    if (sourceArcs.some(arc => targetArcs.includes(arc))) {\n      neighbor = index;\n      break\n    }\n  }\n  return neighbor\n}\n\nfunction collapseTopology (topology, numberOfPieces) {\n  const triangleGeometries = topology.objects.triangles.geometries;\n\n  while (triangleGeometries.length > numberOfPieces) {\n    mergeSmallestFeature();\n  }\n\n  if (numberOfPieces > triangleGeometries.length) {\n    throw new RangeError('Can\\'t collapse topology into ' + numberOfPieces + ' pieces.')\n  }\n\n  const geojson = feature(topology, topology.objects.triangles);\n  const geojsonTriangleGeometries = map(geojson.features, feature => feature.geometry);\n\n  return geojsonTriangleGeometries\n\n  function mergeSmallestFeature () {\n    const smallest = triangleGeometries[0];\n    const neighborIndex = findNeighbor(triangleGeometries);\n    const neighbor = triangleGeometries[neighborIndex];\n    const merged = mergeArcs(topology, [smallest, neighbor]);\n\n    // MultiPolygon -> Polygon\n    merged.area = smallest.area + neighbor.area;\n    merged.type = 'Polygon';\n    merged.arcs = merged.arcs[0];\n\n    // Delete smallest and its chosen neighbor\n    triangleGeometries.splice(neighborIndex, 1);\n    triangleGeometries.shift();\n\n    // Add new merged shape in sorted order\n    triangleGeometries.splice(bisect(triangleGeometries, merged.area), 0, merged);\n  }\n}\n\nfunction createGeometries (vertices, triangleIndices) {\n  const geometries = [];\n\n  for (let i = 0; i < triangleIndices.length; i += 3) {\n    const triangleIndexArcs = createTriangleIndexArcs(triangleIndices, i);\n\n    let outerRing = map(triangleIndexArcs, arc => getPoint(vertices, arc[0]));\n    outerRing.push(getPoint(vertices, triangleIndexArcs[0][0])); // close ring\n\n    // earcut doesn't always give counterclockwise rings back\n    if (linearRingIsClockwise(outerRing)) {\n      outerRing = outerRing.reverse();\n    }\n\n    geometries.push({\n      type: 'Polygon',\n      coordinates: [outerRing]\n    });\n  }\n\n  return geometries\n}\n\nfunction sliceUpTriangles (geometries, numberOfPieces) {\n  const areas = map(geometries, polygonArea);\n\n  const order = getOrderDescending(areas);\n\n  const areasSorted = sortIntoOrder(areas, order);\n  const geometriesSorted = sortIntoOrder(geometries, order);\n\n  while (geometriesSorted.length < numberOfPieces) {\n    areasSorted.shift();\n    const biggestTriangle = geometriesSorted.shift();\n\n    const cutTriangles = cutTriangleInTwo(biggestTriangle);\n\n    const areaCutTriangles = map(cutTriangles, polygonArea);\n\n    for (let i = 0; i < cutTriangles.length; i++) {\n      const areaCutTriangle = areaCutTriangles[i];\n      const cutTriangle = cutTriangles[i];\n\n      const insertionIndex = getInsertionIndexDescending(areasSorted, areaCutTriangle);\n\n      areasSorted.splice(insertionIndex, 0, areaCutTriangle);\n      geometriesSorted.splice(insertionIndex, 0, cutTriangle);\n    }\n  }\n\n  return geometriesSorted\n}\n\nfunction cutTriangleInTwo (triangle) {\n  const a = triangle.coordinates[0][0];\n  const b = triangle.coordinates[0][1];\n  const c = triangle.coordinates[0][2];\n\n  const pointBetweenAB = interpolate(a, b)(0.5);\n\n  const firstTriangle = createTriangleGeometry([a, pointBetweenAB, c, a]);\n  const secondTriangle = createTriangleGeometry([b, c, pointBetweenAB, b]);\n\n  return [firstTriangle, secondTriangle]\n}\n\nfunction createTriangleGeometry (points) {\n  return {\n    type: 'Polygon',\n    coordinates: [points]\n  }\n}\n\n/*\n  Inspired by flubber:\n  https://github.com/veltman/flubber\n*/\n\nconst dimensions = 2;\n\nfunction cutPolygon (polygon, numberOfPieces) {\n  if (numberOfPieces < 2) throw new Error('Cannot cut polygon in less than 2 pieces')\n\n  const flattenedPolygon = earcut.flatten(polygon.coordinates);\n  const triangleIndices = earcut(flattenedPolygon.vertices, flattenedPolygon.holes, dimensions);\n\n  const numberOfTriangles = getNumberOfTriangles(triangleIndices);\n\n  if (numberOfTriangles >= numberOfPieces) {\n    const topology = createTopology(flattenedPolygon.vertices, triangleIndices);\n    return collapseTopology(topology, numberOfPieces)\n  }\n\n  if (numberOfTriangles < numberOfPieces) {\n    const triangleGeometries = createGeometries(flattenedPolygon.vertices, triangleIndices);\n    return sliceUpTriangles(triangleGeometries, numberOfPieces)\n  }\n}\n\nfunction getNumberOfTriangles (triangleIndices) {\n  return triangleIndices.length / 3\n}\n\nfunction cutPolygons (polygons, numberOfDesiredAdditionalPolygons) {\n  if (numberOfDesiredAdditionalPolygons < 1) throw wrongNumberOfPolygonsError\n\n  const polygonAreas = map(polygons, polygonArea);\n  const numberOfCutsPerPolygon = assignCuts(polygonAreas, numberOfDesiredAdditionalPolygons);\n\n  let resultingPolygons = [];\n\n  for (let i = 0; i < polygons.length; i++) {\n    const polygon = polygons[i];\n    const numberOfCuts = numberOfCutsPerPolygon[i];\n\n    if (numberOfCuts === 0) {\n      resultingPolygons.push(polygon);\n    }\n\n    if (numberOfCuts > 0) {\n      const numberOfDesiredPolygons = numberOfCuts + 1;\n      resultingPolygons = resultingPolygons.concat(cutPolygon(polygon, numberOfDesiredPolygons));\n    }\n  }\n\n  return resultingPolygons\n}\n\nconst wrongNumberOfPolygonsError = new Error('Number of desired additional polygons must be larger than 0');\n\n// https://stackoverflow.com/a/38905829/7237112\nfunction assignCuts (polygonAreas, numberOfPieces) {\n  const numberOfCutsPerPolygon = [];\n  let totalArea = sum(polygonAreas);\n\n  for (let i = 0; i < polygonAreas.length; i++) {\n    const area = polygonAreas[i];\n    const numberOfCuts = Math.round(area / totalArea * numberOfPieces);\n\n    numberOfCutsPerPolygon.push(numberOfCuts);\n    totalArea -= area;\n    numberOfPieces -= numberOfCuts;\n  }\n\n  return numberOfCutsPerPolygon\n}\n\nfunction sum (array) {\n  let sum = 0;\n\n  for (let i = 0; i < array.length; i++) {\n    sum += array[i];\n  }\n\n  return sum\n}\n\nfunction combineIntoMultiPolygon (inputGeometries) {\n  const multiPolygon = createEmptyMultiPolygon();\n\n  for (const inputGeometry of inputGeometries) {\n    if (inputGeometry.type === 'Polygon') {\n      multiPolygon.coordinates.push(inputGeometry.coordinates);\n    }\n\n    if (inputGeometry.type === 'MultiPolygon') {\n      for (const polygon of inputGeometry.coordinates) {\n        multiPolygon.coordinates.push(polygon);\n      }\n    }\n  }\n\n  return multiPolygon\n}\n\nfunction splitMultiPolygon (multiPolygon) {\n  const polygons = [];\n\n  for (const polygonCoordinates of multiPolygon.coordinates) {\n    const polygon = createEmptyPolygon();\n    polygon.coordinates = polygonCoordinates;\n\n    polygons.push(polygon);\n  }\n\n  return polygons\n}\n\nfunction createEmptyMultiPolygon () {\n  return { type: 'MultiPolygon', coordinates: [] }\n}\n\nfunction createEmptyPolygon () {\n  return { type: 'Polygon', coordinates: undefined }\n}\n\nfunction multiPolygonToMultiPolygon (from, to) {\n  let fromPolygons = splitMultiPolygon(from);\n  let toPolygons = splitMultiPolygon(to);\n\n  const lengthDifference = fromPolygons.length - toPolygons.length;\n\n  if (lengthDifference > 0) {\n    toPolygons = cutPolygons(toPolygons, lengthDifference);\n  }\n\n  if (lengthDifference < 0) {\n    fromPolygons = cutPolygons(fromPolygons, -lengthDifference);\n  }\n\n  return createInterpolatorPolygons(from, to, fromPolygons, toPolygons)\n}\n\nfunction createInterpolatorPolygons (from, to, fromPolygons, toPolygons) {\n  const fromOuterRings = map(fromPolygons, polygon => polygon.coordinates[0]);\n  const toOuterRings = map(toPolygons, polygon => polygon.coordinates[0]);\n\n  const fromOrder = matchLinearRings(fromOuterRings, toOuterRings);\n  fromPolygons = map(fromOrder, i => fromPolygons[i]);\n\n  const polygonInterpolators = [];\n\n  for (let i = 0; i < fromPolygons.length; i++) {\n    const fromPolygon = fromPolygons[i];\n    const toPolygon = toPolygons[i];\n\n    polygonInterpolators.push(polygonToPolygon(fromPolygon, toPolygon));\n  }\n\n  return function interpolator (t) {\n    if (t === 0) return from\n    if (t === 1) return to\n\n    return combineIntoMultiPolygon(\n      map(polygonInterpolators, polygonInterpolator => polygonInterpolator(t))\n    )\n  }\n}\n\nfunction multiPolygonToPolygon (from, to) {\n  const fromPolygons = splitMultiPolygon(from);\n  let toPolygons = [to];\n\n  const numberOfFromPolygons = fromPolygons.length;\n  const numberOfAdditionalToPolygonsRequried = numberOfFromPolygons - 1;\n\n  if (numberOfAdditionalToPolygonsRequried > 0) {\n    toPolygons = cutPolygon(to, numberOfFromPolygons);\n  }\n\n  return createInterpolatorPolygons(from, to, fromPolygons, toPolygons)\n}\n\nfunction polygonToMultiPolygon (from, to) {\n  const reverseInterpolator = multiPolygonToPolygon(to, from);\n\n  return function interpolator (t) {\n    return reverseInterpolator(1 - t)\n  }\n}\n\nfunction lineStringtoLineString (from, to) {\n  const [preparedFromCoordinates, preparedToCoordinates] = prepareCoordinates(\n    from.coordinates, to.coordinates\n  );\n\n  return createInterpolator(from, to, preparedFromCoordinates, preparedToCoordinates)\n}\n\nfunction prepareCoordinates (fromCoordinates, toCoordinates) {\n  const lengthDifference = fromCoordinates.length - toCoordinates.length;\n\n  let preparedFromCoordinates = fromCoordinates;\n  let preparedToCoordinates = toCoordinates;\n\n  if (lengthDifference > 0) {\n    preparedToCoordinates = insertPointsLineString(toCoordinates, lengthDifference);\n  }\n\n  if (lengthDifference < 0) {\n    preparedFromCoordinates = insertPointsLineString(fromCoordinates, -lengthDifference);\n  }\n\n  preparedFromCoordinates = reverseIfBetterMatching(preparedFromCoordinates, preparedToCoordinates);\n\n  return [preparedFromCoordinates, preparedToCoordinates]\n}\n\nfunction createInterpolator (from, to, preparedFromCoordinates, preparedToCoordinates) {\n  const coordinateInterpolator = interpolate(preparedFromCoordinates, preparedToCoordinates);\n\n  return function interpolator (t) {\n    if (t === 0) return from\n    if (t === 1) return to\n\n    return {\n      type: 'LineString',\n      coordinates: coordinateInterpolator(t)\n    }\n  }\n}\n\nfunction reverseIfBetterMatching (from, to) {\n  const normalTotalSquareDistance = getTotalSquaredDistancePositions(from, to);\n  const fromReversed = cloneLinearRing(from).reverse();\n  const reversedTotalSquareDistance = getTotalSquaredDistancePositions(fromReversed, to);\n\n  if (normalTotalSquareDistance <= reversedTotalSquareDistance) {\n    return from\n  } else {\n    return fromReversed\n  }\n}\n\nfunction getTotalSquaredDistancePositions (from, to) {\n  let totalSquaredDistance = 0;\n\n  for (let i = 0; i < from.length; i++) {\n    totalSquaredDistance += pointDistance(from[i], to[i]);\n  }\n\n  return totalSquaredDistance\n}\n\nfunction movePointAlongLine (a, b, distance) {\n  const unitVector = getUnitVector(a, b);\n  return movePoint(a, unitVector, distance)\n}\n\nfunction getUnitVector (a, b) {\n  const magnitude = pointDistance(a, b);\n  const dx = b[0] - a[0];\n  const dy = b[1] - a[1];\n\n  return [dx / magnitude, dy / magnitude]\n}\n\nfunction movePoint (point, unitVector, distance) {\n  return [\n    point[0] + unitVector[0] * distance,\n    point[1] + unitVector[1] * distance\n  ]\n}\n\nfunction multiLineStringToLineString (from, to) {\n  const numberOfFromLineStrings = from.coordinates.length;\n  const preparedToCoordinates = cutLineString(to.coordinates, numberOfFromLineStrings);\n  const lineStringInterpolators = createLineStringInterpolators(from.coordinates, preparedToCoordinates);\n\n  return createMultiLineStringInterpolator(from, to, lineStringInterpolators)\n}\n\nfunction lineStringToMultiLineString (from, to) {\n  const reverseInterpolator = multiLineStringToLineString(to, from);\n\n  return function interpolator (t) {\n    return reverseInterpolator(1 - t)\n  }\n}\n\nfunction cutLineString (toCoordinates, numberOfLineStrings) {\n  const multiLineStringCoordinates = [];\n\n  const totalLengthTo = linearRingLength(toCoordinates);\n  const desiredSegmentSize = totalLengthTo / numberOfLineStrings;\n\n  const lastPointIndex = toCoordinates.length - 1;\n\n  let currentSegment = [];\n  let elapsedDistanceSinceLastCut = 0;\n\n  for (let i = 0; i < lastPointIndex; i++) {\n    const a = toCoordinates[i];\n    currentSegment.push(a);\n    const b = toCoordinates[i + 1];\n\n    const distanceAB = pointDistance(a, b);\n    const distanceIncludingCurrentSegment = elapsedDistanceSinceLastCut + distanceAB;\n\n    if (distanceIncludingCurrentSegment < desiredSegmentSize) {\n      elapsedDistanceSinceLastCut += distanceAB;\n    }\n\n    if (distanceIncludingCurrentSegment >= desiredSegmentSize) {\n      const numberOfCuts = Math.floor(distanceIncludingCurrentSegment / desiredSegmentSize);\n\n      const cutCoordinates = calculateCutCoordinates(\n        a, b, elapsedDistanceSinceLastCut, desiredSegmentSize, numberOfCuts\n      );\n\n      currentSegment = currentSegment.concat(cutCoordinates);\n      multiLineStringCoordinates.push(currentSegment);\n\n      const lastCut = cutCoordinates[cutCoordinates.length - 1];\n\n      if (pointsEqual(lastCut, b)) {\n        currentSegment = [];\n      } else {\n        currentSegment = [lastCut];\n      }\n\n      elapsedDistanceSinceLastCut = pointDistance(lastCut, b);\n    }\n  }\n\n  return multiLineStringCoordinates\n}\n\nfunction calculateCutCoordinates (a, b, offset, size, numberOfCuts) {\n  const cuts = [];\n\n  for (let i = 1; i <= numberOfCuts; i++) {\n    cuts.push(movePointAlongLine(a, b, ((size * i) - offset)));\n  }\n\n  return cuts\n}\n\nfunction pointsEqual (a, b) {\n  return a[0] === b[0] && a[1] === b[1]\n}\n\nfunction createLineStringInterpolators (fromCoordinates, toCoordinates) {\n  const interpolators = [];\n\n  for (let i = 0; i < fromCoordinates.length; i++) {\n    const fromLineString = fromCoordinates[i];\n    const toLineString = toCoordinates[i];\n\n    const [preparedFromLineString, preparedToLineString] = prepareCoordinates(fromLineString, toLineString);\n    const interpolator = interpolate(preparedFromLineString, preparedToLineString);\n    interpolators.push(interpolator);\n  }\n\n  return interpolators\n}\n\nfunction createMultiLineStringInterpolator (from, to, lineStringInterpolators) {\n  return function interpolator (t) {\n    if (t === 0) return from\n    if (t === 1) return to\n\n    return {\n      type: 'MultiLineString',\n      coordinates: map(\n        lineStringInterpolators,\n        lineStringInterpolator => lineStringInterpolator(t)\n      )\n    }\n  }\n}\n\nfunction matchLineStrings (input, target) {\n  const inputOrder = getInputOrder(input, target);\n  return inputOrder.map(i => input[i])\n}\n\nfunction getInputOrder (input, target) {\n  const inputLengths = map(input, linearRingLength);\n  const targetLengths = map(target, linearRingLength);\n\n  const inputLengthOrderDescending = getOrderDescending(inputLengths);\n  const targetLengthOrderDescending = getOrderDescending(targetLengths);\n\n  const pairs = {};\n\n  for (let i = 0; i < targetLengthOrderDescending.length; i++) {\n    const inputIndex = inputLengthOrderDescending[i];\n    const targetIndex = targetLengthOrderDescending[i];\n\n    pairs[inputIndex] = targetIndex;\n  }\n\n  const inputOrder = [];\n\n  for (let i = 0; i < target.length; i++) {\n    inputOrder.push(pairs[i]);\n  }\n\n  return inputOrder\n}\n\nfunction multiLineStringToMultiLineString (from, to) {\n  let fromLineStrings = from.coordinates;\n  let toLineStrings = to.coordinates;\n\n  const lengthDifference = fromLineStrings.length - toLineStrings.length;\n\n  if (lengthDifference > 0) {\n    toLineStrings = splitLineStrings(toLineStrings, lengthDifference);\n  }\n\n  if (lengthDifference < 0) {\n    fromLineStrings = splitLineStrings(fromLineStrings, -lengthDifference);\n  }\n\n  fromLineStrings = matchLineStrings(fromLineStrings, toLineStrings);\n\n  const lineStringInterpolators = createLineStringInterpolators(fromLineStrings, toLineStrings);\n\n  return createMultiLineStringInterpolator(from, to, lineStringInterpolators)\n}\n\nfunction splitLineStrings (lineStrings, numberOfDesiredLineStrings) {\n  const lineStringLengths = getLengths(lineStrings);\n  const numberOfCutsPerLineString = assignCuts(lineStringLengths, numberOfDesiredLineStrings);\n\n  let resultingLineStrings = [];\n\n  for (let i = 0; i < numberOfCutsPerLineString.length; i++) {\n    const lineString = lineStrings[i];\n    const numberOfCuts = numberOfCutsPerLineString[i];\n\n    if (numberOfCuts === 0) {\n      resultingLineStrings.push(lineString);\n    }\n\n    if (numberOfCuts > 0) {\n      const numberOfDesiredPieces = numberOfCuts + 1;\n\n      resultingLineStrings = resultingLineStrings.concat(\n        cutLineString(lineString, numberOfDesiredPieces)\n      );\n    }\n  }\n\n  return resultingLineStrings\n}\n\nfunction getLengths (lineStrings) {\n  const lengths = [];\n\n  for (let i = 0; i < lineStrings.length; i++) {\n    lengths.push(\n      linearRingLength(lineStrings[i])\n    );\n  }\n\n  return lengths\n}\n\nfunction transshape (from, to) {\n  ensureValidInput(from, to);\n\n  // Polygon transitions\n  if (from.type === 'Polygon' && to.type === 'Polygon') {\n    return polygonToPolygon(from, to)\n  }\n\n  if (from.type === 'MultiPolygon' && to.type === 'Polygon') {\n    return multiPolygonToPolygon(from, to)\n  }\n\n  if (from.type === 'Polygon' && to.type === 'MultiPolygon') {\n    return polygonToMultiPolygon(from, to)\n  }\n\n  if (from.type === 'MultiPolygon' && to.type === 'MultiPolygon') {\n    return multiPolygonToMultiPolygon(from, to)\n  }\n\n  // LineString transitions\n  if (from.type === 'LineString' && to.type === 'LineString') {\n    return lineStringtoLineString(from, to)\n  }\n\n  if (from.type === 'MultiLineString' && to.type === 'LineString') {\n    return multiLineStringToLineString(from, to)\n  }\n\n  if (from.type === 'LineString' && to.type === 'MultiLineString') {\n    return lineStringToMultiLineString(from, to)\n  }\n\n  if (from.type === 'MultiLineString' && to.type === 'MultiLineString') {\n    return multiLineStringToMultiLineString(from, to)\n  }\n}\n\nfunction ensureValidInput (from, to) {\n  if (bothPolygons(from, to) || bothLines(from, to)) {\n    return\n  }\n\n  throw new Error('Invalid input')\n}\n\nfunction bothPolygons (from, to) {\n  return isPolygonOrMultiPolygon(from) && isPolygonOrMultiPolygon(to)\n}\n\nfunction bothLines (from, to) {\n  return isLineStringOrMultiLineString(from) && isLineStringOrMultiLineString(to)\n}\n\nfunction implode (geometry) {\n  ensureValidInput$1(geometry);\n\n  const centroid = calculateCentroid(geometry);\n  const implosionPoint = createSmallPolygonAroundPoint(centroid);\n\n  return transshape(geometry, implosionPoint)\n}\n\nfunction explode (geometry) {\n  ensureValidInput$1(geometry);\n\n  const centroid = calculateCentroid(geometry);\n  const explosionPoint = createSmallPolygonAroundPoint(centroid);\n\n  return transshape(explosionPoint, geometry)\n}\n\nfunction ensureValidInput$1 (geometry) {\n  if (!isPolygonOrMultiPolygon(geometry)) {\n    throw new Error('Invalid input')\n  }\n}\n\nfunction createSmallPolygonAroundPoint (point) {\n  const linearRingAroundPoint = makeSmallRectangleAroundPoint(point);\n  return {\n    type: 'Polygon',\n    coordinates: [linearRingAroundPoint]\n  }\n}\n\nfunction transshapeLayer (fromLayer, toLayer) {\n  ensureValidInput$2(fromLayer);\n\n  const keyOverlap = getKeyOverlap(fromLayer, toLayer);\n  const interpolatorObject = constructInterpolatorObject(fromLayer, toLayer, keyOverlap);\n\n  return createLayerInterpolator(fromLayer, toLayer, interpolatorObject)\n}\n\nfunction ensureValidInput$2 (fromLayer, toLayer) {\n  return every(Object.values(fromLayer), isPolygonOrMultiPolygon) &&\n    every(Object.values(fromLayer), isPolygonOrMultiPolygon)\n}\n\nfunction getKeyOverlap (fromLayer, toLayer) {\n  const keyOverlap = {};\n\n  for (const key in fromLayer) {\n    keyOverlap[key] = 'from';\n  }\n\n  for (const key in toLayer) {\n    if (keyOverlap[key]) {\n      keyOverlap[key] = 'both';\n    } else {\n      keyOverlap[key] = 'to';\n    }\n  }\n\n  return keyOverlap\n}\n\nfunction constructInterpolatorObject (fromLayer, toLayer, keyOverlap) {\n  const interpolatorObject = {};\n\n  for (const key in keyOverlap) {\n    const overlap = keyOverlap[key];\n\n    if (overlap === 'both') {\n      interpolatorObject[key] = transshape(fromLayer[key], toLayer[key]);\n    }\n\n    if (overlap === 'from') {\n      interpolatorObject[key] = implode(fromLayer[key]);\n    }\n\n    if (overlap === 'to') {\n      interpolatorObject[key] = explode(toLayer[key]);\n    }\n  }\n\n  return interpolatorObject\n}\n\nfunction createLayerInterpolator (fromLayer, toLayer, interpolatorObject) {\n  return function interpolator (t) {\n    if (t === 0) return fromLayer\n    if (t === 1) return toLayer\n\n    const layerObject = {};\n\n    for (const key in interpolatorObject) {\n      layerObject[key] = interpolatorObject[key](t);\n    }\n\n    return layerObject\n  }\n}\n\nexport { cutPolygon, cutPolygons, explode, implode, insertPointsLinearRing, matchLinearRings, rotatePointsLinearRing, transshape, transshapeLayer };\n","import { interpolate } from 'd3-interpolate'\nimport { transshape } from '@snlab/transshape'\n\nexport function transitionGeometry (fromGeometry, toGeometry) {\n  if (pointTransition(fromGeometry, toGeometry)) {\n    return interpolate(fromGeometry, toGeometry)\n  }\n\n  if (polygonTransition(fromGeometry, toGeometry)) {\n    return transshape(fromGeometry, toGeometry)\n  }\n\n  if (lineStringTransition(fromGeometry, toGeometry)) {\n    return transshape(fromGeometry, toGeometry)\n  }\n\n  throw new Error('Invalid input')\n}\n\nexport function transitionGeometries (fromLayer, toLayer) {\n  const firstFromGeometry = getFirstGeometry(fromLayer)\n  const firstToGeometry = getFirstGeometry(toLayer)\n\n  if (pointTransition(firstFromGeometry, firstToGeometry)) {\n    return transitionLayer(fromLayer, toLayer, interpolate)\n  }\n\n  if (polygonTransition(firstFromGeometry, firstToGeometry)) {\n    return transitionLayer(fromLayer, toLayer, transshape)\n  }\n\n  if (lineStringTransition(firstFromGeometry, firstToGeometry)) {\n    return transitionLayer(fromLayer, toLayer, transshape)\n  }\n\n  throw new Error('Invalid input')\n}\n\nfunction pointTransition (fromGeometry, toGeometry) {\n  return fromGeometry.type === 'Point' && toGeometry.type === 'Point'\n}\n\nconst polygonTypes = ['Polygon', 'MultiPolygon']\n\nfunction polygonTransition (fromGeometry, toGeometry) {\n  return polygonTypes.includes(fromGeometry.type) &&\n    polygonTypes.includes(toGeometry.type)\n}\n\nconst lineStringTypes = ['LineString', 'MultiLineString']\n\nfunction lineStringTransition (fromGeometry, toGeometry) {\n  return lineStringTypes.includes(fromGeometry.type) &&\n    lineStringTypes.includes(toGeometry.type)\n}\n\nfunction getFirstGeometry (layer) {\n  return layer[Object.keys(layer)[0]]\n}\n\nfunction transitionLayer (fromLayer, toLayer, interpolationMethod) {\n  const interpolatorObject = {}\n\n  for (const key in toLayer) {\n    if (key in fromLayer) {\n      interpolatorObject[key] = interpolationMethod(fromLayer[key], toLayer[key])\n    } else {\n      interpolatorObject[key] = () => toLayer[key]\n    }\n  }\n\n  return function interpolator (t) {\n    if (t === 0) return fromLayer\n    if (t === 1) return toLayer\n\n    const layer = {}\n    for (const key in interpolatorObject) {\n      layer[key] = interpolatorObject[key](t)\n    }\n\n    return layer\n  }\n}\n","export default function (bbox) {\n  return {\n    minX: bbox.x[0],\n    maxX: bbox.x[1],\n    minY: bbox.y[0],\n    maxY: bbox.y[1]\n  }\n}\n","import { calculateBboxGeometry } from '../../../../../utils/geometryUtils'\nimport createItemFromBbox from '../../../utils/createItemFromBbox.js'\n\nexport function indexRectangle (markData) {\n  const rectangleAttributes = markData.attributes\n\n  const bbox = calculateBboxGeometry(rectangleAttributes.screenGeometry)\n  const item = createItemFromBbox(bbox)\n\n  item.attributes = rectangleAttributes\n  item.markType = 'Rectangle'\n  item.markId = markData.markId\n\n  return item\n}\n\nexport function indexRectangleLayer ({ layerAttributes, keyArray, layerId }) {\n  const items = []\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n\n    const rectangleAttributes = getRectangleAttributes(layerAttributes, key)\n    const bbox = calculateBboxGeometry(rectangleAttributes.screenGeometry)\n    const item = createItemFromBbox(bbox)\n\n    item.key = key\n    item.index = i\n    item.attributes = rectangleAttributes\n    item.markType = 'Rectangle'\n    item.layerId = layerId\n\n    items.push(item)\n  }\n\n  return items\n}\n\nfunction getRectangleAttributes (layerAttributes, key) {\n  return { screenGeometry: layerAttributes.screenGeometryObject[key] }\n}\n","import { calculateBboxGeometry } from '../../../../../utils/geometryUtils'\nimport createItemFromBbox from '../../../utils/createItemFromBbox.js'\n\nexport function indexPolygon (markData) {\n  const polygonAttributes = markData.attributes\n\n  const bbox = calculateBboxGeometry(polygonAttributes.screenGeometry)\n  const item = createItemFromBbox(bbox)\n\n  item.attributes = polygonAttributes\n  item.markType = 'Polygon'\n  item.markId = markData.markId\n\n  return item\n}\n\nexport function indexPolygonLayer ({ layerAttributes, keyArray, layerId }) {\n  const items = []\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n\n    const polygonAttributes = getPolygonAttributes(layerAttributes, key)\n    const bbox = calculateBboxGeometry(polygonAttributes.screenGeometry)\n    const item = createItemFromBbox(bbox)\n\n    item.key = key\n    item.index = i\n    item.attributes = polygonAttributes\n    item.markType = 'Polygon'\n    item.layerId = layerId\n\n    items.push(item)\n  }\n\n  return items\n}\n\nfunction getPolygonAttributes (layerAttributes, key) {\n  return { screenGeometry: layerAttributes.screenGeometryObject[key] }\n}\n","import { calculateBboxGeometry } from '../../../../../utils/geometryUtils'\nimport createItemFromBbox from '../../../utils/createItemFromBbox.js'\n\nexport function indexLine (markData) {\n  const lineAttributes = markData.attributes\n  const markId = markData.markId\n\n  const pixelGeometry = lineAttributes.pixelGeometry\n  const lineStringCoords = pixelGeometry.coordinates\n\n  if (pixelGeometry.type === 'LineString') {\n    return indexLineString(lineStringCoords, lineAttributes, markId)\n  }\n\n  if (pixelGeometry.type === 'MultiLineString') {\n    return indexMultiLineString(lineStringCoords, lineAttributes, markId)\n  }\n}\n\nfunction indexLineString (lineStringCoords, lineAttributes, markId, lineStringIndex) {\n  const indexableSegments = []\n\n  for (let i = 0; i < lineStringCoords.length - 1; i++) {\n    const segment = [lineStringCoords[i], lineStringCoords[i + 1]]\n\n    const item = createSegmentItem(segment, lineAttributes, i)\n    if (lineStringIndex) {\n      // Only for MultiLineStrings\n      item.lineStringIndex = lineStringIndex\n    }\n    item.markId = markId\n    indexableSegments.push(item)\n  }\n\n  return indexableSegments\n}\n\nfunction indexMultiLineString (lineStringCoords, lineAttributes, markId) {\n  let indexableSegments = []\n\n  for (let lineStringIndex = 0; lineStringIndex < lineStringCoords.length; lineStringIndex++) {\n    indexableSegments = indexableSegments.concat(indexLineString(\n      lineStringCoords[lineStringIndex], lineAttributes, markId, lineStringIndex\n    ))\n  }\n\n  return indexableSegments\n}\n\nfunction createSegmentItem (segment, attributes, i) {\n  const segmentGeometry = { type: 'LineString', coordinates: segment }\n  const bbox = calculateBboxGeometry(segmentGeometry)\n  let item = createItemFromBbox(bbox)\n  item = takeIntoAccountStrokeWidth(item, attributes.strokeWidth)\n\n  item.attributes = {}\n  item.attributes.strokeWidth = attributes.strokeWidth\n  item.attributes.segmentGeometry = segmentGeometry\n  item.markType = 'Line'\n  item.segmentIndex = i\n\n  return item\n}\n\nfunction takeIntoAccountStrokeWidth (item, strokeWidth) {\n  const halfStrokeWidth = strokeWidth / 2\n\n  const newBbox = {\n    minX: item.minX - halfStrokeWidth,\n    maxX: item.maxX + halfStrokeWidth,\n    minY: item.minY - halfStrokeWidth,\n    maxY: item.maxY + halfStrokeWidth\n  }\n\n  return Object.assign(item, newBbox)\n}\n\nexport function indexLineLayer ({ layerAttributes, keyArray, layerId }) {\n  let items = []\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n    const lineAttributes = createLineAttributes(layerAttributes, key)\n    const pixelGeometry = lineAttributes.pixelGeometry\n    const lineStringCoords = pixelGeometry.coordinates\n\n    if (pixelGeometry.type === 'LineString') {\n      let segments = indexLineString(\n        lineStringCoords, lineAttributes, key\n      )\n\n      segments = modifyForLayer(segments, layerId, key, i)\n      items = items.concat(segments)\n    }\n\n    if (pixelGeometry.type === 'MultiLineString') {\n      let segments = indexMultiLineString(\n        lineStringCoords, lineAttributes, key\n      )\n\n      segments = modifyForLayer(segments, layerId, key, i)\n      items = items.concat(segments)\n    }\n  }\n\n  return items\n}\n\nfunction createLineAttributes (attributes, key) {\n  return {\n    pixelGeometry: attributes.pixelGeometryObject[key],\n    strokeWidth: attributes.strokeWidthObject[key]\n  }\n}\n\nfunction modifyForLayer (segments, layerId, key, index) {\n  for (let i = 0; i < segments.length; i++) {\n    const segmentItem = segments[i]\n    delete segmentItem.markId\n\n    segmentItem.layerId = layerId\n    segmentItem.key = key\n    segmentItem.index = index\n  }\n\n  return segments\n}\n","import { calculateBboxGeometry } from '../../../../../utils/geometryUtils'\nimport createItemFromBbox from '../../../utils/createItemFromBbox.js'\n\nexport function indexArea (markData) {\n  const areaAttributes = markData.attributes\n\n  const bbox = calculateBboxGeometry(areaAttributes.screenGeometry)\n  const item = createItemFromBbox(bbox)\n\n  item.attributes = areaAttributes\n  item.markType = 'Area'\n  item.markId = markData.markId\n\n  return item\n}\n\nexport function indexAreaLayer ({ layerAttributes, keyArray, layerId }) {\n  const items = []\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n\n    const areaAttributes = getAreaAttributes(layerAttributes, key)\n    const bbox = calculateBboxGeometry(areaAttributes.screenGeometry)\n    const item = createItemFromBbox(bbox)\n\n    item.key = key\n    item.index = i\n    item.attributes = areaAttributes\n    item.markType = 'Area'\n    item.layerId = layerId\n\n    items.push(item)\n  }\n\n  return items\n}\n\nfunction getAreaAttributes (layerAttributes, key) {\n  return { screenGeometry: layerAttributes.screenGeometryObject[key] }\n}\n","import { calculateBboxGeometry } from '../../../../../utils/geometryUtils'\nimport createItemFromBbox from '../../../utils/createItemFromBbox.js'\n\nexport function indexSymbol (markData) {\n  const symbolAttributes = markData.attributes\n\n  const bbox = calculateBboxGeometry(symbolAttributes.screenGeometry)\n  const item = createItemFromBbox(bbox)\n\n  item.attributes = symbolAttributes\n  item.markType = 'Symbol'\n  item.markId = markData.markId\n\n  return item\n}\n\nexport function indexSymbolLayer ({ layerAttributes, keyArray, layerId }) {\n  const items = []\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n\n    const symbolAttributes = getSymbolAttributes(layerAttributes, key)\n    const bbox = calculateBboxGeometry(symbolAttributes.screenGeometry)\n    const item = createItemFromBbox(bbox)\n\n    item.key = key\n    item.index = i\n    item.attributes = symbolAttributes\n    item.markType = 'Symbol'\n    item.layerId = layerId\n\n    items.push(item)\n  }\n\n  return items\n}\n\nfunction getSymbolAttributes (layerAttributes, key) {\n  return { screenGeometry: layerAttributes.screenGeometryObject[key] }\n}\n","import { indexPoint, indexPointLayer } from './indexPoint.js'\nimport { indexRectangle, indexRectangleLayer } from './indexRectangle.js'\nimport { indexPolygon, indexPolygonLayer } from './indexPolygon.js'\nimport { indexLine, indexLineLayer } from './indexLine.js'\nimport { indexArea, indexAreaLayer } from './indexArea.js'\nimport { indexSymbol, indexSymbolLayer } from './indexSymbol.js'\n\nexport const markIndexing = {\n  Point: indexPoint,\n  Rectangle: indexRectangle,\n  Polygon: indexPolygon,\n  Line: indexLine,\n  Label: indexPoint,\n  Area: indexArea,\n  Symbol: indexSymbol\n}\n\nexport const layerIndexing = {\n  Point: indexPointLayer,\n  Rectangle: indexRectangleLayer,\n  Polygon: indexPolygonLayer,\n  Line: indexLineLayer,\n  Label: indexPointLayer,\n  Area: indexAreaLayer,\n  Symbol: indexSymbolLayer\n}\n","import BaseInteractionInterface from './BaseInteractionInterface.js'\nimport { markIndexing, layerIndexing } from './createIndexableData'\n\nexport default class MarkInteractionInterface extends BaseInteractionInterface {\n  constructor (interactionManager, InteractionHandlers) {\n    super(interactionManager, InteractionHandlers)\n\n    this._indexableMarks = {}\n    this._indexableLayers = {}\n  }\n\n  // Mark loading and removing\n  loadMark (markType, markData) {\n    const indexingFunction = markIndexing[markType]\n    const indexableMark = indexingFunction(markData)\n\n    const markId = markData.markId\n    this._indexableMarks[markId] = indexableMark\n  }\n\n  markIsLoaded (markId) {\n    return markId in this._indexableMarks\n  }\n\n  removeMark (markId) {\n    delete this._indexableMarks[markId]\n  }\n\n  // Layer loading and removing\n  loadLayer (layerType, layerData) {\n    const indexingFunction = layerIndexing[layerType]\n    const indexableLayer = indexingFunction(layerData)\n\n    const layerId = layerData.layerId\n    this._indexableLayers[layerId] = indexableLayer\n  }\n\n  layerIsLoaded (layerId) {\n    return layerId in this._indexableLayers\n  }\n\n  removeLayer (layerId) {\n    delete this._indexableLayers[layerId]\n  }\n\n  // Add/remove mark interactions\n  addMarkInteraction (interactionName, markId, callback) {\n    this._getHandler(interactionName).addMarkInteraction(markId, callback)\n  }\n\n  removeAllMarkInteractions (markId) {\n    for (const handlerName in this._handlers) {\n      const handler = this._handlers[handlerName]\n\n      if (handler.hasMark(markId)) {\n        handler.removeMarkInteraction(markId)\n      }\n    }\n  }\n\n  // Add/remove layer interactions\n  addLayerInteraction (interactionName, layerId, callback) {\n    this._getHandler(interactionName).addLayerInteraction(layerId, callback)\n  }\n\n  removeAllLayerInteractions (layerId) {\n    for (const handlerName in this._handlers) {\n      const handler = this._handlers[handlerName]\n\n      if (handler.hasLayer(layerId)) {\n        handler.removeLayerInteraction(layerId)\n      }\n    }\n  }\n}\n","import BaseInteractionInterface from './BaseInteractionInterface.js'\n\nexport default class SectionInteractionInterface extends BaseInteractionInterface {\n  addInteraction (interactionName, callback) {\n    this._getHandler(interactionName).addInteraction(callback)\n  }\n\n  removeAllInteractions () {\n    for (const handlerName in this._handlers) {\n      const handler = this._handlers[handlerName]\n\n      if (handler.hasInteraction()) {\n        handler.removeInteraction()\n      }\n    }\n  }\n}\n","export default class BaseInteractionHandler {\n  constructor (interactionManager, { eventName, interactionName }) {\n    this._interactionManager = interactionManager\n    this._eventName = eventName\n    this._interactionName = interactionName\n  }\n\n  interactionManager () {\n    return this._interactionManager\n  }\n\n  eventManager () {\n    return this._interactionManager._eventManager\n  }\n\n  section () {\n    return this._interactionManager._section\n  }\n\n  id () {\n    return this._interactionManager._id\n  }\n\n  _addEventListener () {\n    const handler = this._handleEvent.bind(this)\n\n    const eventManager = this.eventManager()\n    const listenerId = this.getId()\n\n    const events = isArray(this._eventName) ? this._eventName : [this._eventName]\n\n    for (const event of events) {\n      eventManager\n        .eventTracker(event)\n        .addListener(listenerId, handler)\n    }\n  }\n\n  _removeEventListener () {\n    const eventManager = this.eventManager()\n    const listenerId = this.getId()\n\n    const events = isArray(this._eventName) ? this._eventName : [this._eventName]\n\n    for (const event of events) {\n      eventManager\n        .eventTracker(event)\n        .removeListener(listenerId)\n    }\n  }\n}\n\nfunction isArray (value) {\n  return value.constructor === Array\n}\n","!function(t,i){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=i():\"function\"==typeof define&&define.amd?define(i):(t=t||self).RBush=i()}(this,function(){\"use strict\";function t(t,r,e,a,h){!function t(n,r,e,a,h){for(;a>e;){if(a-e>600){var o=a-e+1,s=r-e+1,l=Math.log(o),f=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*f*(o-f)/o)*(s-o/2<0?-1:1),m=Math.max(e,Math.floor(r-s*f/o+u)),c=Math.min(a,Math.floor(r+(o-s)*f/o+u));t(n,r,m,c,h)}var p=n[r],d=e,x=a;for(i(n,e,r),h(n[a],p)>0&&i(n,e,a);d<x;){for(i(n,d,x),d++,x--;h(n[d],p)<0;)d++;for(;h(n[x],p)>0;)x--}0===h(n[e],p)?i(n,e,x):i(n,++x,a),x<=r&&(e=x+1),r<=x&&(a=x-1)}}(t,r,e||0,a||t.length-1,h||n)}function i(t,i,n){var r=t[i];t[i]=t[n],t[n]=r}function n(t,i){return t<i?-1:t>i?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function e(t,i,n){if(!n)return i.indexOf(t);for(var r=0;r<i.length;r++)if(n(t,i[r]))return r;return-1}function a(t,i){h(t,0,t.children.length,i,t)}function h(t,i,n,r,e){e||(e=p(null)),e.minX=1/0,e.minY=1/0,e.maxX=-1/0,e.maxY=-1/0;for(var a=i;a<n;a++){var h=t.children[a];o(e,t.leaf?r(h):h)}return e}function o(t,i){return t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY),t}function s(t,i){return t.minX-i.minX}function l(t,i){return t.minY-i.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function m(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function c(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(i,n,r,e,a){for(var h=[n,r];h.length;)if(!((r=h.pop())-(n=h.pop())<=e)){var o=n+Math.ceil((r-n)/e/2)*e;t(i,o,n,r,a),h.push(n,o,o,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var i=this.data,n=[];if(!c(t,i))return n;for(var r=this.toBBox,e=[];i;){for(var a=0;a<i.children.length;a++){var h=i.children[a],o=i.leaf?r(h):h;c(t,o)&&(i.leaf?n.push(h):m(t,o)?this._all(h,n):e.push(h))}i=e.pop()}return n},r.prototype.collides=function(t){var i=this.data;if(!c(t,i))return!1;for(var n=[];i;){for(var r=0;r<i.children.length;r++){var e=i.children[r],a=i.leaf?this.toBBox(e):e;if(c(t,a)){if(i.leaf||m(t,a))return!0;n.push(e)}}i=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var i=0;i<t.length;i++)this.insert(t[i]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=p([]),this},r.prototype.remove=function(t,i){if(!t)return this;for(var n,r,a,h=this.data,o=this.toBBox(t),s=[],l=[];h||s.length;){if(h||(h=s.pop(),r=s[s.length-1],n=l.pop(),a=!0),h.leaf){var f=e(t,h.children,i);if(-1!==f)return h.children.splice(f,1),s.push(h),this._condense(s),this}a||h.leaf||!m(h,o)?r?(n++,h=r.children[n],a=!1):h=null:(s.push(h),l.push(n),n=0,r=h,h=h.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,i){return t.minX-i.minX},r.prototype.compareMinY=function(t,i){return t.minY-i.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,i){for(var n=[];t;)t.leaf?i.push.apply(i,t.children):n.push.apply(n,t.children),t=n.pop();return i},r.prototype._build=function(t,i,n,r){var e,h=n-i+1,o=this._maxEntries;if(h<=o)return a(e=p(t.slice(i,n+1)),this.toBBox),e;r||(r=Math.ceil(Math.log(h)/Math.log(o)),o=Math.ceil(h/Math.pow(o,r-1))),(e=p([])).leaf=!1,e.height=r;var s=Math.ceil(h/o),l=s*Math.ceil(Math.sqrt(o));d(t,i,n,l,this.compareMinX);for(var f=i;f<=n;f+=l){var u=Math.min(f+l-1,n);d(t,f,u,s,this.compareMinY);for(var m=f;m<=u;m+=s){var c=Math.min(m+s-1,u);e.children.push(this._build(t,m,c,r-1))}}return a(e,this.toBBox),e},r.prototype._chooseSubtree=function(t,i,n,r){for(;r.push(i),!i.leaf&&r.length-1!==n;){for(var e=1/0,a=1/0,h=void 0,o=0;o<i.children.length;o++){var s=i.children[o],l=f(s),u=(m=t,c=s,(Math.max(c.maxX,m.maxX)-Math.min(c.minX,m.minX))*(Math.max(c.maxY,m.maxY)-Math.min(c.minY,m.minY))-l);u<a?(a=u,e=l<e?l:e,h=s):u===a&&l<e&&(e=l,h=s)}i=h||i.children[0]}var m,c;return i},r.prototype._insert=function(t,i,n){var r=n?t:this.toBBox(t),e=[],a=this._chooseSubtree(r,this.data,i,e);for(a.children.push(t),o(a,r);i>=0&&e[i].children.length>this._maxEntries;)this._split(e,i),i--;this._adjustParentBBoxes(r,e,i)},r.prototype._split=function(t,i){var n=t[i],r=n.children.length,e=this._minEntries;this._chooseSplitAxis(n,e,r);var h=this._chooseSplitIndex(n,e,r),o=p(n.children.splice(h,n.children.length-h));o.height=n.height,o.leaf=n.leaf,a(n,this.toBBox),a(o,this.toBBox),i?t[i-1].children.push(o):this._splitRoot(n,o)},r.prototype._splitRoot=function(t,i){this.data=p([t,i]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,i,n){for(var r,e,a,o,s,l,u,m=1/0,c=1/0,p=i;p<=n-i;p++){var d=h(t,0,p,this.toBBox),x=h(t,p,n,this.toBBox),v=(e=d,a=x,o=void 0,s=void 0,l=void 0,u=void 0,o=Math.max(e.minX,a.minX),s=Math.max(e.minY,a.minY),l=Math.min(e.maxX,a.maxX),u=Math.min(e.maxY,a.maxY),Math.max(0,l-o)*Math.max(0,u-s)),M=f(d)+f(x);v<m?(m=v,r=p,c=M<c?M:c):v===m&&M<c&&(c=M,r=p)}return r||n-i},r.prototype._chooseSplitAxis=function(t,i,n){var r=t.leaf?this.compareMinX:s,e=t.leaf?this.compareMinY:l;this._allDistMargin(t,i,n,r)<this._allDistMargin(t,i,n,e)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,i,n,r){t.children.sort(r);for(var e=this.toBBox,a=h(t,0,i,e),s=h(t,n-i,n,e),l=u(a)+u(s),f=i;f<n-i;f++){var m=t.children[f];o(a,t.leaf?e(m):m),l+=u(a)}for(var c=n-i-1;c>=i;c--){var p=t.children[c];o(s,t.leaf?e(p):p),l+=u(s)}return l},r.prototype._adjustParentBBoxes=function(t,i,n){for(var r=n;r>=0;r--)o(i[r],t)},r.prototype._condense=function(t){for(var i=t.length-1,n=void 0;i>=0;i--)0===t[i].children.length?i>0?(n=t[i-1].children).splice(n.indexOf(t[i]),1):this.clear():a(t[i],this.toBBox)},r});\n","import { pointDistance } from '../../../../utils/geometryUtils'\n\nexport default function pointCollision (coordinates, pointAttributes) {\n  const distance = pointDistance(\n    [coordinates.x, coordinates.y],\n    pointAttributes.pixelGeometry.coordinates\n  )\n\n  return distance < pointAttributes.radius\n}\n","import pointCollision from './pointCollision.js'\nimport rectangleCollision from './rectangleCollision.js'\nimport polygonCollision from './polygonCollision.js'\nimport lineCollision from './lineCollision.js'\nimport symbolCollision from './symbolCollision.js'\nimport areaCollision from './areaCollision.js'\n\nexport default {\n  Point: pointCollision,\n  Rectangle: rectangleCollision,\n  Polygon: polygonCollision,\n  Line: lineCollision,\n  Label: pointCollision,\n  Symbol: symbolCollision,\n  Area: areaCollision\n}\n","import { pointInPolygon } from '../../../../utils/geometryUtils'\n\nexport default function rectangleCollision (coordinates, rectangleAttributes) {\n  const point = [coordinates.x, coordinates.y]\n  return pointInPolygon(point, rectangleAttributes.screenGeometry)\n}\n","import { pointInPolygon } from '../../../../utils/geometryUtils'\n\nexport default function polygonCollision (coordinates, polygonAttributes) {\n  const point = [coordinates.x, coordinates.y]\n  return pointInPolygon(point, polygonAttributes.screenGeometry)\n}\n","import { pointIntersectsLineSegment } from '../../../../utils/geometryUtils'\n\nexport default function lineCollision (coordinates, lineAttributes) {\n  const mouseCoordinates = [coordinates.x, coordinates.y]\n  return pointIntersectsLineSegment(\n    mouseCoordinates,\n    lineAttributes.segmentGeometry.coordinates,\n    lineAttributes.strokeWidth\n  )\n}\n","import { pointInPolygon } from '../../../../utils/geometryUtils'\n\nexport default function symbolCollision (coordinates, symbolAttributes) {\n  const point = [coordinates.x, coordinates.y]\n  return pointInPolygon(point, symbolAttributes.screenGeometry)\n}\n","import { pointInPolygon } from '../../../../utils/geometryUtils'\n\nexport default function areaCollision (coordinates, areaAttributes) {\n  const point = [coordinates.x, coordinates.y]\n  return pointInPolygon(point, areaAttributes.screenGeometry)\n}\n","import RBush from 'rbush'\nimport collisionTests from './collisionTests'\n\nexport default class SpatialIndex {\n  constructor (interactionHandler, getMark, getLayer) {\n    this._rbush = new RBush()\n    this._interactionHandler = interactionHandler\n\n    this._getMark = getMark.bind(interactionHandler)\n    this._getLayer = getLayer.bind(interactionHandler)\n  }\n\n  // Layer indexing and unindexing\n  indexLayer (layerId) {\n    const layer = this._getLayer(layerId)\n    this._rbush.load(layer)\n  }\n\n  unindexLayer (layerId) {\n    const layer = this._getLayer(layerId)\n\n    for (let i = 0; i < layer.length; i++) {\n      const item = layer[i]\n      this._rbush.remove(item)\n    }\n  }\n\n  // Mark loading and removing\n  indexMark (markId) {\n    const mark = this._getMark(markId)\n\n    if (multipleSegments(mark)) {\n      this._rbush.load(mark)\n    } else {\n      this._rbush.insert(mark)\n    }\n  }\n\n  unindexMark (markId) {\n    const mark = this._getMark(markId)\n\n    if (multipleSegments(mark)) {\n      for (let i = 0; i < mark.length; i++) {\n        const item = mark[i]\n        this._rbush.remove(item)\n      }\n    } else {\n      this._rbush.remove(mark)\n    }\n  }\n\n  // Query functions\n  queryMouseCoordinates (mouseCoordinates, radius) {\n    const searchArea = searchAreaFromCoordinates(mouseCoordinates, radius)\n    const indexQueryResults = this._rbush.search(searchArea)\n\n    return this._getHits(mouseCoordinates, indexQueryResults)\n  }\n\n  queryBoundingBox (boundingBox) {\n    return this._rbush.search(boundingBox)\n  }\n\n  // Internal\n  _getHits (coordinates, indexQueryResults) {\n    const hits = []\n\n    for (let i = 0; i < indexQueryResults.length; i++) {\n      const indexQueryResult = indexQueryResults[i]\n      const collisionTest = collisionTests[indexQueryResult.markType]\n\n      if (collisionTest(coordinates, indexQueryResult.attributes)) {\n        hits.push(indexQueryResult)\n      }\n    }\n\n    return hits\n  }\n}\n\nfunction searchAreaFromCoordinates (coordinates, radius = 3) {\n  return {\n    minX: coordinates.x - radius,\n    maxX: coordinates.x + radius,\n    minY: coordinates.y - radius,\n    maxY: coordinates.y + radius\n  }\n}\n\nfunction multipleSegments (indexableItem) {\n  return indexableItem.constructor === Array\n}\n","import BaseInteractionHandler from './BaseInteractionHandler.js'\nimport SpatialIndex from '../../SpatialIndex'\n\nexport default class MarkInteractionHandler extends BaseInteractionHandler {\n  constructor (interactionManager, options) {\n    super(interactionManager, options)\n\n    const getMark = function (markId) {\n      return this._interactionManager.marks()._indexableMarks[markId]\n    }\n\n    const getLayer = function (layerId) {\n      return this._interactionManager.marks()._indexableLayers[layerId]\n    }\n\n    this._spatialIndex = new SpatialIndex(this, getMark, getLayer)\n\n    this._numberOfInteractions = 0\n\n    this._markCallbacks = {}\n    this._layerCallbacks = {}\n  }\n\n  // Add/remove mark interactions\n  addMarkInteraction (markId, callback) {\n    this._addEventListenerIfNecessary()\n    this._numberOfInteractions++\n    this._markCallbacks[markId] = callback\n\n    this._spatialIndex.indexMark(markId)\n  }\n\n  hasMark (markId) {\n    return markId in this._markCallbacks\n  }\n\n  removeMarkInteraction (markId) {\n    this._removeEventListenerIfNecessary()\n    delete this._markCallbacks[markId]\n    this._numberOfInteractions--\n\n    this._spatialIndex.unindexMark(markId)\n  }\n\n  // Add/remove layer interactions\n  addLayerInteraction (layerId, callback) {\n    if (!(layerId in this._layerCallbacks)) {\n      this._addEventListenerIfNecessary()\n      this._numberOfInteractions++\n      this._layerCallbacks[layerId] = callback\n\n      this._spatialIndex.indexLayer(layerId)\n    }\n  }\n\n  hasLayer (layerId) {\n    return layerId in this._layerCallbacks\n  }\n\n  removeLayerInteraction (layerId) {\n    if (layerId in this._layerCallbacks) {\n      this._numberOfInteractions--\n      delete this._layerCallbacks[layerId]\n      this._removeEventListenerIfNecessary()\n\n      this._spatialIndex.unindexLayer(layerId)\n    }\n  }\n\n  _addEventListenerIfNecessary () {\n    if (this._numberOfInteractions === 0) {\n      this._addEventListener()\n    }\n  }\n\n  _removeEventListenerIfNecessary () {\n    if (this._numberOfInteractions === 0) {\n      this._removeEventListener()\n    }\n  }\n\n  getId () {\n    return `${this.id()}-mark-${this._interactionName}`\n  }\n}\n","export function createMarkEvent (eventType, eventOptions, hit, nativeEvent) {\n  eventOptions.markType = hit.markType\n  eventOptions.hitBbox = extractBbox(hit)\n  eventOptions.hitSource = 'mark'\n\n  return createEvent(eventType, eventOptions, nativeEvent)\n}\n\nexport function createLayerEvent (eventType, eventOptions, hit, nativeEvent) {\n  eventOptions.markType = hit.markType\n  eventOptions.hitBbox = extractBbox(hit)\n  eventOptions.key = hit.key\n  eventOptions.index = hit.index\n  eventOptions.hitSource = 'layer'\n\n  return createEvent(eventType, eventOptions, nativeEvent)\n}\n\nexport function createSectionEvent (eventType, eventOptions, nativeEvent) {\n  eventOptions.hitSource = 'section'\n\n  return createEvent(eventType, eventOptions, nativeEvent)\n}\n\nfunction extractBbox (hit) {\n  return { minX: hit.minX, maxX: hit.maxX, minY: hit.minY, maxY: hit.maxY }\n}\n\nfunction createEvent (eventType, eventOptions, nativeEvent) {\n  const event = eventOptions\n\n  event.type = eventType\n  event.nativeType = nativeEvent.type\n\n  for (const key of INTERESTING_NATIVE_KEYS) {\n    event[key] = nativeEvent[key]\n  }\n\n  return event\n}\n\nconst INTERESTING_NATIVE_KEYS = [\n  'altKey', 'ctrlKey', 'shiftKey',\n  'clientX', 'clientY',\n  'pageX', 'pageY',\n  'screenX', 'screenY',\n  'timeStamp'\n]\n\nexport function createSelectMarkEvent (eventType, hit) {\n  const event = {\n    type: eventType,\n    markType: hit.markType,\n    hitSource: 'mark'\n  }\n\n  return event\n}\n\nexport function createSelectLayerEvent (eventType, hit) {\n  const event = {\n    type: eventType,\n    markType: hit.markType,\n    key: hit.key,\n    index: hit.index,\n    hitSource: 'layer'\n  }\n\n  return event\n}\n","export function getLocalCoordinates (screenCoordinates, interactionManager) {\n  const section = interactionManager._section\n  const inverseTotalTransformation = section.inverseTotalTransformation\n\n  const { minX, maxX, minY, maxY } = section.paddedBbox\n\n  const clampedX = clamp(screenCoordinates.x, minX, maxX)\n  const clampedY = clamp(screenCoordinates.y, minY, maxY)\n\n  const [localX, localY] = inverseTotalTransformation([clampedX, clampedY])\n\n  return { x: localX, y: localY }\n}\n\nexport function clamp (value, min, max) {\n  return Math.max(min, Math.min(value, max))\n}\n","export function coordinatesAreInsideSection (hit, section) {\n  const bbox = section.bbox\n\n  return (\n    hit.x >= bbox.minX &&\n    hit.x <= bbox.maxX &&\n    hit.y >= bbox.minY &&\n    hit.y <= bbox.maxY\n  )\n}\n\nexport function hitIsMark (hit) {\n  return 'markId' in hit\n}\n\nexport function hitIsInLayer (hit) {\n  return 'layerId' in hit\n}\n\nexport function getHitId (hit) {\n  if (hitIsMark(hit)) return hit.markId\n  if (hitIsInLayer(hit)) return hit.layerId + '-' + hit.key\n}\n","import MarkInteractionHandler from '../../base/handlers/MarkInteractionHandler.js'\n\nimport { createMarkEvent, createLayerEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection, hitIsMark, hitIsInLayer } from '../../utils/hitUtils.js'\n\nexport default class ClickHandler extends MarkInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'click',\n      eventName: 'click'\n    })\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    if (!coordinatesAreInsideSection(screenCoordinates, this.section())) {\n      return\n    }\n\n    const spatialIndex = this._spatialIndex\n    const hits = spatialIndex.queryMouseCoordinates(screenCoordinates)\n    const localCoordinates = getLocalCoordinates(screenCoordinates, this.interactionManager())\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n\n      if (hitIsMark(hit)) {\n        const clickEvent = createMarkEvent('click', {\n          screenCoordinates,\n          localCoordinates\n        }, hit, nativeEvent)\n\n        this._markCallbacks[hit.markId](clickEvent)\n      }\n\n      if (hitIsInLayer(hit)) {\n        const clickEvent = createLayerEvent('click', {\n          screenCoordinates,\n          localCoordinates\n        }, hit, nativeEvent)\n\n        this._layerCallbacks[hit.layerId](clickEvent)\n      }\n    }\n  }\n}\n","import MarkInteractionHandler from '../../base/handlers/MarkInteractionHandler.js'\n\nimport { createMarkEvent, createLayerEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { hitIsMark, hitIsInLayer, getHitId } from '../../utils/hitUtils.js'\n\nexport default class MouseoverHandler extends MarkInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'mouseover',\n      eventName: 'mousemove'\n    })\n\n    this._previousMouseoverIds = {}\n    this._currentMouseoverIds = {}\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    const spatialIndex = this._spatialIndex\n    const hits = spatialIndex.queryMouseCoordinates(screenCoordinates)\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n      const hitId = getHitId(hit)\n\n      this._currentMouseoverIds[hitId] = true\n\n      if (!(hitId in this._previousMouseoverIds)) {\n        this._fireCallback(hit, screenCoordinates, nativeEvent)\n      }\n    }\n\n    this._previousMouseoverIds = this._currentMouseoverIds\n    this._currentMouseoverIds = {}\n  }\n\n  _fireCallback (hit, screenCoordinates, nativeEvent) {\n    const localCoordinates = getLocalCoordinates(screenCoordinates, this.interactionManager())\n\n    if (hitIsMark(hit)) {\n      const mouseoverEvent = createMarkEvent('mouseover', {\n        screenCoordinates,\n        localCoordinates\n      }, hit, nativeEvent)\n\n      this._markCallbacks[hit.markId](mouseoverEvent)\n    }\n\n    if (hitIsInLayer(hit)) {\n      const mouseoverEvent = createLayerEvent('mouseover', {\n        screenCoordinates,\n        localCoordinates\n      }, hit, nativeEvent)\n\n      this._layerCallbacks[hit.layerId](mouseoverEvent)\n    }\n  }\n}\n","import MarkInteractionHandler from '../../base/handlers/MarkInteractionHandler.js'\n\nimport { createMarkEvent, createLayerEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { hitIsMark, hitIsInLayer, getHitId } from '../../utils/hitUtils.js'\n\nexport default class MouseoutHandler extends MarkInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'mouseout',\n      eventName: 'mousemove'\n    })\n\n    this._previousMouseoverHits = {}\n    this._currentMouseoverHits = {}\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    const spatialIndex = this._spatialIndex\n    const hits = spatialIndex.queryMouseCoordinates(screenCoordinates)\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n      const hitId = getHitId(hit)\n\n      this._currentMouseoverHits[hitId] = hit\n    }\n\n    for (const hitId in this._previousMouseoverHits) {\n      if (!(hitId in this._currentMouseoverHits)) {\n        const hit = this._previousMouseoverHits[hitId]\n        this._fireCallback(hit, screenCoordinates, nativeEvent)\n      }\n    }\n\n    this._previousMouseoverHits = this._currentMouseoverHits\n    this._currentMouseoverHits = {}\n  }\n\n  _fireCallback (hit, screenCoordinates, nativeEvent) {\n    const localCoordinates = getLocalCoordinates(screenCoordinates, this.interactionManager())\n\n    if (hitIsMark(hit)) {\n      const mouseoutEvent = createMarkEvent('mouseout', {\n        screenCoordinates,\n        localCoordinates\n      }, hit, nativeEvent)\n\n      this._markCallbacks[hit.markId](mouseoutEvent)\n    }\n\n    if (hitIsInLayer(hit)) {\n      const mouseoutEvent = createLayerEvent('mouseout', {\n        screenCoordinates,\n        localCoordinates\n      }, hit, nativeEvent)\n\n      this._layerCallbacks[hit.layerId](mouseoutEvent)\n    }\n  }\n}\n","import MarkInteractionHandler from '../../base/handlers/MarkInteractionHandler.js'\n\nimport { createMarkEvent, createLayerEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection, hitIsMark, hitIsInLayer } from '../../utils/hitUtils.js'\n\nexport default class MousedownHandler extends MarkInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'mousedown',\n      eventName: 'mousedown'\n    })\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    if (!coordinatesAreInsideSection(screenCoordinates, this.section())) {\n      return\n    }\n\n    const spatialIndex = this._spatialIndex\n    const hits = spatialIndex.queryMouseCoordinates(screenCoordinates)\n    const localCoordinates = getLocalCoordinates(screenCoordinates, this.interactionManager())\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n\n      if (hitIsMark(hit)) {\n        const mousedownEvent = createMarkEvent('mousedown', {\n          screenCoordinates,\n          localCoordinates\n        }, hit, nativeEvent)\n\n        this._markCallbacks[hit.markId](mousedownEvent)\n      }\n\n      if (hitIsInLayer(hit)) {\n        const mousedownEvent = createLayerEvent('mousedown', {\n          screenCoordinates,\n          localCoordinates\n        }, hit, nativeEvent)\n\n        this._layerCallbacks[hit.layerId](mousedownEvent)\n      }\n    }\n  }\n}\n","import MarkInteractionHandler from '../../base/handlers/MarkInteractionHandler.js'\n\nimport { createMarkEvent, createLayerEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection, hitIsMark, hitIsInLayer } from '../../utils/hitUtils.js'\n\nexport default class MouseupHandler extends MarkInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'mouseup',\n      eventName: 'mouseup'\n    })\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    if (!coordinatesAreInsideSection(screenCoordinates, this.section())) {\n      return\n    }\n\n    const spatialIndex = this._spatialIndex\n    const hits = spatialIndex.queryMouseCoordinates(screenCoordinates)\n    const localCoordinates = getLocalCoordinates(screenCoordinates, this.interactionManager())\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n\n      if (hitIsMark(hit)) {\n        const mouseupEvent = createMarkEvent('mouseup', {\n          screenCoordinates,\n          localCoordinates\n        }, hit, nativeEvent)\n\n        this._markCallbacks[hit.markId](mouseupEvent)\n      }\n\n      if (hitIsInLayer(hit)) {\n        const mouseupEvent = createLayerEvent('mouseup', {\n          screenCoordinates,\n          localCoordinates\n        }, hit, nativeEvent)\n\n        this._layerCallbacks[hit.layerId](mouseupEvent)\n      }\n    }\n  }\n}\n","import MarkInteractionHandler from '../../base/handlers/MarkInteractionHandler.js'\n\nimport { createMarkEvent, createLayerEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection, hitIsMark, hitIsInLayer, getHitId } from '../../utils/hitUtils.js'\n\nexport default class MousedragHandler extends MarkInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'mousedrag',\n      eventName: ['mousedown', 'mousemove', 'mouseup']\n    })\n\n    this._currentHits = {}\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    if (nativeEvent.eventName === 'mousedown') {\n      this._handleMousedown(screenCoordinates, nativeEvent)\n    }\n\n    if (nativeEvent.eventName === 'mousemove') {\n      this._handleMousemove(screenCoordinates, nativeEvent)\n    }\n\n    if (nativeEvent.eventName === 'mouseup') {\n      this._handleMouseup(screenCoordinates, nativeEvent)\n    }\n  }\n\n  _handleMousedown (screenCoordinates, nativeEvent) {\n    if (!coordinatesAreInsideSection(screenCoordinates, this.section())) {\n      return\n    }\n\n    const spatialIndex = this._spatialIndex\n    const hits = spatialIndex.queryMouseCoordinates(screenCoordinates)\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n      const hitId = getHitId(hit)\n\n      this._currentHits[hitId] = hit\n\n      this._fireCallback(hit, screenCoordinates, nativeEvent, 'start')\n    }\n  }\n\n  _handleMousemove (screenCoordinates, nativeEvent) {\n    if (!coordinatesAreInsideSection(screenCoordinates, this.section())) {\n      return\n    }\n\n    for (const hitId in this._currentHits) {\n      const hit = this._currentHits[hitId]\n      this._fireCallback(hit, screenCoordinates, nativeEvent, 'drag')\n    }\n  }\n\n  _handleMouseup (screenCoordinates, nativeEvent) {\n    for (const hitId in this._currentHits) {\n      const hit = this._currentHits[hitId]\n      this._fireCallback(hit, screenCoordinates, nativeEvent, 'end')\n    }\n\n    this._currentHits = {}\n  }\n\n  _fireCallback (hit, screenCoordinates, nativeEvent, dragType) {\n    const localCoordinates = getLocalCoordinates(screenCoordinates, this.interactionManager())\n\n    if (hitIsMark(hit)) {\n      const mousedragEvent = createMarkEvent('mousedrag', {\n        screenCoordinates,\n        localCoordinates,\n        dragType\n      }, hit, nativeEvent)\n\n      this._markCallbacks[hit.markId](mousedragEvent)\n    }\n\n    if (hitIsInLayer(hit)) {\n      const mousedragEvent = createLayerEvent('mousedrag', {\n        screenCoordinates,\n        localCoordinates,\n        dragType\n      }, hit, nativeEvent)\n\n      this._layerCallbacks[hit.layerId](mousedragEvent)\n    }\n  }\n}\n","import BaseInteractionHandler from './BaseInteractionHandler.js'\n\nexport default class SectionInteractionHandler extends BaseInteractionHandler {\n  constructor (interactionManager, options) {\n    super(interactionManager, options)\n    this._callback = undefined\n  }\n\n  addInteraction (callback) {\n    this._addEventListener()\n    this._callback = callback\n  }\n\n  hasInteraction () {\n    return this._callback !== undefined\n  }\n\n  removeInteraction () {\n    if (this._callback) {\n      this._callback = undefined\n      this._removeEventListener()\n    }\n  }\n\n  getId () {\n    return `${this.id()}-section-${this._interactionName}`\n  }\n}\n","import SectionInteractionHandler from '../../base/handlers/SectionInteractionHandler.js'\n\nimport { createSectionEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection } from '../../utils/hitUtils.js'\nimport getScrollLineHeight from '../../utils/getScrollLineHeight.js'\n\nexport default class WheelHandler extends SectionInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'wheel',\n      eventName: 'wheel'\n    })\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    nativeEvent.preventDefault()\n    nativeEvent.stopPropagation()\n\n    const interactionManager = this.interactionManager()\n    const section = this.section()\n\n    if (coordinatesAreInsideSection(screenCoordinates, section)) {\n      const localCoordinates = getLocalCoordinates(screenCoordinates, interactionManager)\n      const delta = getDelta(nativeEvent)\n\n      const wheelEvent = createSectionEvent('wheel', {\n        screenCoordinates,\n        localCoordinates,\n        delta\n      }, nativeEvent)\n\n      this._callback(wheelEvent)\n    }\n  }\n}\n\nlet scrollLineHeight\n\nfunction getDelta (nativeEvent) {\n  let delta\n\n  // Legacy\n  // IE pixels\n  if ('wheelDelta' in nativeEvent && nativeEvent.wheelDelta !== 0) {\n    delta = -nativeEvent.wheelDelta\n  }\n\n  // Mozilla\n  if ('detail' in nativeEvent && nativeEvent.detail !== 0) {\n    delta = -nativeEvent.detail\n  }\n\n  // Most other cases\n  if ('deltaY' in nativeEvent && nativeEvent.deltaY !== 0) {\n    delta = -nativeEvent.deltaY\n  }\n\n  if (!scrollLineHeight) {\n    scrollLineHeight = getScrollLineHeight()\n  }\n\n  return delta * (nativeEvent.deltaMode ? scrollLineHeight : 1) / 500\n}\n","// Taken from:\n// https://stackoverflow.com/a/37474225/7237112\n\nexport default function getScrollLineHeight () {\n  var r\n  var iframe = document.createElement('iframe')\n  iframe.src = '#'\n  document.body.appendChild(iframe)\n  var iwin = iframe.contentWindow\n  var idoc = iwin.document\n  idoc.open()\n  idoc.write('<!DOCTYPE html><html><head></head><body><span>a</span></body></html>')\n  idoc.close()\n  var span = idoc.body.firstElementChild\n  r = span.offsetHeight\n  document.body.removeChild(iframe)\n\n  return r\n}\n","import SectionInteractionHandler from '../../base/handlers/SectionInteractionHandler.js'\n\nimport { createSectionEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection } from '../../utils/hitUtils.js'\n\nexport default class ClickHandler extends SectionInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'click',\n      eventName: 'click'\n    })\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    const interactionManager = this.interactionManager()\n    const section = this.section()\n\n    if (coordinatesAreInsideSection(screenCoordinates, section)) {\n      const localCoordinates = getLocalCoordinates(screenCoordinates, interactionManager)\n\n      const clickEvent = createSectionEvent('click', {\n        screenCoordinates,\n        localCoordinates\n      }, nativeEvent)\n\n      this._callback(clickEvent)\n    }\n  }\n}\n","import SectionInteractionHandler from '../../base/handlers/SectionInteractionHandler.js'\n\nimport { createSectionEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection } from '../../utils/hitUtils.js'\n\nexport default class MousedownHandler extends SectionInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'mousedown',\n      eventName: 'mousedown'\n    })\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    const interactionManager = this.interactionManager()\n    const section = this.section()\n\n    if (coordinatesAreInsideSection(screenCoordinates, section)) {\n      const localCoordinates = getLocalCoordinates(screenCoordinates, interactionManager)\n\n      const mousedownEvent = createSectionEvent('mousedown', {\n        screenCoordinates,\n        localCoordinates\n      }, nativeEvent)\n\n      this._callback(mousedownEvent)\n    }\n  }\n}\n","import SectionInteractionHandler from '../../base/handlers/SectionInteractionHandler.js'\n\nimport { createSectionEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection } from '../../utils/hitUtils.js'\n\nexport default class MouseupHandler extends SectionInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'mouseup',\n      eventName: 'mouseup'\n    })\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    const interactionManager = this.interactionManager()\n    const section = this.section()\n\n    if (coordinatesAreInsideSection(screenCoordinates, section)) {\n      const localCoordinates = getLocalCoordinates(screenCoordinates, interactionManager)\n\n      const mouseupEvent = createSectionEvent('mouseup', {\n        screenCoordinates,\n        localCoordinates\n      }, nativeEvent)\n\n      this._callback(mouseupEvent)\n    }\n  }\n}\n","import SectionInteractionHandler from '../../base/handlers/SectionInteractionHandler.js'\n\nimport { createSectionEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection } from '../../utils/hitUtils.js'\n\nexport default class MouseoverHandler extends SectionInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'mouseover',\n      eventName: 'mousemove'\n    })\n\n    this._mouseCurrentlyOverSection = false\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    const interactionManager = this.interactionManager()\n    const section = this.section()\n\n    if (coordinatesAreInsideSection(screenCoordinates, section)) {\n      if (!this._mouseCurrentlyOverSection) {\n        const localCoordinates = getLocalCoordinates(screenCoordinates, interactionManager)\n\n        const mousedownEvent = createSectionEvent('mouseover', {\n          screenCoordinates,\n          localCoordinates\n        }, nativeEvent)\n\n        this._callback(mousedownEvent)\n        this._mouseCurrentlyOverSection = true\n      }\n    } else {\n      if (this._mouseCurrentlyOverSection) {\n        this._mouseCurrentlyOverSection = false\n      }\n    }\n  }\n}\n","import SectionInteractionHandler from '../../base/handlers/SectionInteractionHandler.js'\n\nimport { createSectionEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection } from '../../utils/hitUtils.js'\n\nexport default class MouseoutHandler extends SectionInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'mouseout',\n      eventName: 'mousemove'\n    })\n\n    this._mouseCurrentlyOverSection = false\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    const interactionManager = this.interactionManager()\n    const section = this.section()\n\n    if (coordinatesAreInsideSection(screenCoordinates, section)) {\n      if (!this._mouseCurrentlyOverSection) {\n        this._mouseCurrentlyOverSection = true\n      }\n    } else {\n      if (this._mouseCurrentlyOverSection) {\n        const localCoordinates = getLocalCoordinates(screenCoordinates, interactionManager)\n\n        const mouseoutEvent = createSectionEvent('mouseout', {\n          screenCoordinates,\n          localCoordinates\n        }, nativeEvent)\n\n        this._callback(mouseoutEvent)\n        this._mouseCurrentlyOverSection = false\n      }\n    }\n  }\n}\n","import SectionInteractionHandler from '../../base/handlers/SectionInteractionHandler.js'\n\nimport { createSectionEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection } from '../../utils/hitUtils.js'\n\nexport default class MousemoveHandler extends SectionInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'mouseover',\n      eventName: 'mousemove'\n    })\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    const interactionManager = this.interactionManager()\n    const section = this.section()\n\n    if (coordinatesAreInsideSection(screenCoordinates, section)) {\n      const localCoordinates = getLocalCoordinates(screenCoordinates, interactionManager)\n\n      const mousemoveEvent = createSectionEvent('mousemove', {\n        screenCoordinates,\n        localCoordinates\n      }, nativeEvent)\n\n      this._callback(mousemoveEvent)\n    }\n  }\n}\n","import BaseInteractionManager from '../base/managers/BaseInteractionManager.js'\nimport MarkInteractionInterface from '../base/interfaces/MarkInteractionInterface.js'\nimport SectionInteractionInterface from '../base/interfaces/SectionInteractionInterface.js'\n\nimport * as MarkInteractionHandlers from './mark'\nimport * as SectionInteractionHandlers from './section'\n\nexport default class MouseInteractionManager extends BaseInteractionManager {\n  constructor () {\n    super()\n\n    this._markInteractionInterface = new MarkInteractionInterface(this, MarkInteractionHandlers)\n    this._sectionInteractionInterface = new SectionInteractionInterface(this, SectionInteractionHandlers)\n  }\n}\n","export default function numberOfTouches (screenCoordinates) {\n  if (screenCoordinates.constructor === Object) return 1\n\n  return screenCoordinates.length\n}\n","import MarkInteractionHandler from '../../base/handlers/MarkInteractionHandler.js'\n\nimport { createMarkEvent, createLayerEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { hitIsMark, hitIsInLayer } from '../../utils/hitUtils.js'\nimport numberOfTouches from '../../utils/numberOfTouches.js'\n\nexport default class TouchdownHandler extends MarkInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'touchdown',\n      eventName: 'touchstart'\n    })\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    if (numberOfTouches(screenCoordinates) !== 1) {\n      return\n    }\n\n    const spatialIndex = this._spatialIndex\n    const hits = spatialIndex.queryMouseCoordinates(screenCoordinates)\n    const localCoordinates = getLocalCoordinates(screenCoordinates, this.interactionManager())\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n\n      if (hitIsMark(hit)) {\n        const touchdownEvent = createMarkEvent('touchdown', {\n          screenCoordinates,\n          localCoordinates\n        }, hit, nativeEvent)\n\n        this._markCallbacks[hit.markId](touchdownEvent)\n      }\n\n      if (hitIsInLayer(hit)) {\n        const touchdownEvent = createLayerEvent('touchdown', {\n          screenCoordinates,\n          localCoordinates\n        }, hit, nativeEvent)\n\n        this._layerCallbacks[hit.layerId](touchdownEvent)\n      }\n    }\n  }\n}\n","import MarkInteractionHandler from '../../base/handlers/MarkInteractionHandler.js'\n\nimport { createMarkEvent, createLayerEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { hitIsMark, hitIsInLayer } from '../../utils/hitUtils.js'\nimport numberOfTouches from '../../utils/numberOfTouches.js'\n\nexport default class TouchupHandler extends MarkInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'touchup',\n      eventName: ['touchend', 'touchcancel']\n    })\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    if (numberOfTouches(screenCoordinates) !== 1) {\n      return\n    }\n\n    const spatialIndex = this._spatialIndex\n    const hits = spatialIndex.queryMouseCoordinates(screenCoordinates)\n    const localCoordinates = getLocalCoordinates(screenCoordinates, this.interactionManager())\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n\n      if (hitIsMark(hit)) {\n        const touchupEvent = createMarkEvent('touchup', {\n          screenCoordinates,\n          localCoordinates\n        }, hit, nativeEvent)\n\n        this._markCallbacks[hit.markId](touchupEvent)\n      }\n\n      if (hitIsInLayer(hit)) {\n        const touchupEvent = createLayerEvent('touchup', {\n          screenCoordinates,\n          localCoordinates\n        }, hit, nativeEvent)\n\n        this._layerCallbacks[hit.layerId](touchupEvent)\n      }\n    }\n  }\n}\n","import MarkInteractionHandler from '../../base/handlers/MarkInteractionHandler.js'\n\nimport { createMarkEvent, createLayerEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection, hitIsMark, hitIsInLayer, getHitId } from '../../utils/hitUtils.js'\nimport numberOfTouches from '../../utils/numberOfTouches.js'\n\nexport default class TouchoverHandler extends MarkInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'touchover',\n      eventName: ['touchstart', 'touchmove']\n    })\n\n    this._previousHits = {}\n    this._currentHits = {}\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    if (numberOfTouches(screenCoordinates) !== 1) {\n      return\n    }\n\n    if (nativeEvent.eventName === 'touchstart') {\n      this._handleTouchstart(screenCoordinates, nativeEvent)\n    }\n\n    if (nativeEvent.eventName === 'touchmove') {\n      this._handleTouchmove(screenCoordinates, nativeEvent)\n    }\n  }\n\n  _handleTouchstart (screenCoordinates, nativeEvent) {\n    if (!coordinatesAreInsideSection(screenCoordinates, this.section())) {\n      return\n    }\n\n    const spatialIndex = this._spatialIndex\n    const hits = spatialIndex.queryMouseCoordinates(screenCoordinates)\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n      const hitId = getHitId(hit)\n\n      this._previousHits[hitId] = true\n    }\n  }\n\n  _handleTouchmove (screenCoordinates, nativeEvent) {\n    if (!coordinatesAreInsideSection(screenCoordinates, this.section())) {\n      return\n    }\n\n    const spatialIndex = this._spatialIndex\n    const hits = spatialIndex.queryMouseCoordinates(screenCoordinates)\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n      const hitId = getHitId(hit)\n\n      this._currentHits[hitId] = true\n\n      if (!(hitId in this._previousHits)) {\n        this._fireCallback(hit, screenCoordinates, nativeEvent)\n      }\n    }\n\n    this._previousHits = this._currentHits\n    this._currentHits = {}\n  }\n\n  _fireCallback (hit, screenCoordinates, nativeEvent) {\n    const localCoordinates = getLocalCoordinates(screenCoordinates, this.interactionManager())\n\n    if (hitIsMark(hit)) {\n      const touchoverEvent = createMarkEvent('touchover', {\n        screenCoordinates,\n        localCoordinates\n      }, hit, nativeEvent)\n\n      this._markCallbacks[hit.markId](touchoverEvent)\n    }\n\n    if (hitIsInLayer(hit)) {\n      const touchoverEvent = createLayerEvent('touchover', {\n        screenCoordinates,\n        localCoordinates\n      }, hit, nativeEvent)\n\n      this._layerCallbacks[hit.layerId](touchoverEvent)\n    }\n  }\n}\n","import MarkInteractionHandler from '../../base/handlers/MarkInteractionHandler.js'\n\nimport { createMarkEvent, createLayerEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection, hitIsMark, hitIsInLayer, getHitId } from '../../utils/hitUtils.js'\nimport numberOfTouches from '../../utils/numberOfTouches.js'\n\nexport default class TouchoutHandler extends MarkInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'touchout',\n      eventName: ['touchstart', 'touchmove', 'touchend']\n    })\n\n    this._previousHits = {}\n    this._currentHits = {}\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    if (numberOfTouches(screenCoordinates) !== 1) {\n      return\n    }\n\n    if (nativeEvent.eventName === 'touchstart') {\n      this._handleTouchstart(screenCoordinates, nativeEvent)\n    }\n\n    if (nativeEvent.eventName === 'touchmove') {\n      this._handleTouchmove(screenCoordinates, nativeEvent)\n    }\n\n    if (nativeEvent.eventName === 'touchend') {\n      this._handleTouchend()\n    }\n  }\n\n  _handleTouchstart (screenCoordinates, nativeEvent) {\n    if (!coordinatesAreInsideSection(screenCoordinates, this.section())) {\n      return\n    }\n\n    const spatialIndex = this._spatialIndex\n    const hits = spatialIndex.queryMouseCoordinates(screenCoordinates)\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n      const hitId = getHitId(hit)\n\n      this._previousHits[hitId] = hit\n    }\n  }\n\n  _handleTouchmove (screenCoordinates, nativeEvent) {\n    if (!coordinatesAreInsideSection(screenCoordinates, this.section())) {\n      return\n    }\n\n    const spatialIndex = this._spatialIndex\n    const hits = spatialIndex.queryMouseCoordinates(screenCoordinates)\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n      const hitId = getHitId(hit)\n\n      this._currentHits[hitId] = hit\n    }\n\n    for (const hitId in this._previousHits) {\n      if (!(hitId in this._currentHits)) {\n        const hit = this._previousHits[hitId]\n        this._fireCallback(hit, screenCoordinates, nativeEvent)\n      }\n    }\n\n    this._previousHits = this._currentHits\n    this._currentHits = {}\n  }\n\n  _handleTouchend () {\n    this._previousHits = {}\n    this._currentHits = {}\n  }\n\n  _fireCallback (hit, screenCoordinates, nativeEvent) {\n    const localCoordinates = getLocalCoordinates(screenCoordinates, this.interactionManager())\n\n    if (hitIsMark(hit)) {\n      const touchoutEvent = createMarkEvent('touchout', {\n        screenCoordinates,\n        localCoordinates\n      }, hit, nativeEvent)\n\n      this._markCallbacks[hit.markId](touchoutEvent)\n    }\n\n    if (hitIsInLayer(hit)) {\n      const touchoutEvent = createLayerEvent('touchout', {\n        screenCoordinates,\n        localCoordinates\n      }, hit, nativeEvent)\n\n      this._layerCallbacks[hit.layerId](touchoutEvent)\n    }\n  }\n}\n","import MarkInteractionHandler from '../../base/handlers/MarkInteractionHandler.js'\n\nimport { createMarkEvent, createLayerEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection, hitIsMark, hitIsInLayer, getHitId } from '../../utils/hitUtils.js'\nimport numberOfTouches from '../../utils/numberOfTouches.js'\n\nexport default class TouchdragHandler extends MarkInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'touchdrag',\n      eventName: ['touchstart', 'touchmove', 'touchend']\n    })\n\n    this._currentHits = {}\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    if (numberOfTouches(screenCoordinates) !== 1) {\n      return\n    }\n\n    if (nativeEvent.eventName === 'touchstart') {\n      this._handleTouchstart(screenCoordinates, nativeEvent)\n    }\n\n    if (nativeEvent.eventName === 'touchmove') {\n      this._handleTouchmove(screenCoordinates, nativeEvent)\n    }\n\n    if (nativeEvent.eventName === 'touchend') {\n      this._handleTouchend(screenCoordinates, nativeEvent)\n    }\n  }\n\n  _handleTouchstart (screenCoordinates, nativeEvent) {\n    if (!coordinatesAreInsideSection(screenCoordinates, this.section())) {\n      return\n    }\n\n    const spatialIndex = this._spatialIndex\n    const hits = spatialIndex.queryMouseCoordinates(screenCoordinates)\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n      const hitId = getHitId(hit)\n\n      this._currentHits[hitId] = hit\n\n      this._fireCallback(hit, screenCoordinates, nativeEvent, 'start')\n    }\n  }\n\n  _handleTouchmove (screenCoordinates, nativeEvent) {\n    if (!coordinatesAreInsideSection(screenCoordinates, this.section())) {\n      return\n    }\n\n    for (const hitId in this._currentHits) {\n      const hit = this._currentHits[hitId]\n      this._fireCallback(hit, screenCoordinates, nativeEvent, 'drag')\n    }\n  }\n\n  _handleTouchend (screenCoordinates, nativeEvent) {\n    for (const hitId in this._currentHits) {\n      const hit = this._currentHits[hitId]\n      this._fireCallback(hit, screenCoordinates, nativeEvent, 'end')\n    }\n\n    this._currentHits = {}\n  }\n\n  _fireCallback (hit, screenCoordinates, nativeEvent, dragType) {\n    const localCoordinates = getLocalCoordinates(screenCoordinates, this.interactionManager())\n\n    if (hitIsMark(hit)) {\n      const touchdragEvent = createMarkEvent('touchdrag', {\n        screenCoordinates,\n        localCoordinates,\n        dragType\n      }, hit, nativeEvent)\n\n      this._markCallbacks[hit.markId](touchdragEvent)\n    }\n\n    if (hitIsInLayer(hit)) {\n      const touchdragEvent = createLayerEvent('touchdrag', {\n        screenCoordinates,\n        localCoordinates,\n        dragType\n      }, hit, nativeEvent)\n\n      this._layerCallbacks[hit.layerId](touchdragEvent)\n    }\n  }\n}\n","import SectionInteractionHandler from '../../base/handlers/SectionInteractionHandler.js'\n\nimport { createSectionEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection } from '../../utils/hitUtils.js'\nimport numberOfTouches from '../../utils/numberOfTouches.js'\n\nexport default class PinchHandler extends SectionInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'pinch',\n      eventName: ['touchstart', 'touchmove', 'touchend']\n    })\n\n    this._previousTouchDistance = undefined\n  }\n\n  _handleEvent (screenCoordinatesArray, nativeEvent) {\n    if (nativeEvent.type === 'touchstart') {\n      this._handleTouchstart(screenCoordinatesArray, nativeEvent)\n    }\n\n    if (nativeEvent.type === 'touchmove') {\n      this._handleTouchmove(screenCoordinatesArray, nativeEvent)\n    }\n\n    if (nativeEvent.type === 'touchend') {\n      this._handleTouchend(screenCoordinatesArray, nativeEvent)\n    }\n  }\n\n  _handleTouchstart (screenCoordinatesArray, nativeEvent) {\n    if (numberOfTouches(screenCoordinatesArray) !== 2) {\n      return\n    }\n\n    const section = this.section()\n\n    if (allCoordinatesAreInsideSection(screenCoordinatesArray, section)) {\n      this._previousTouchDistance = getDistance(screenCoordinatesArray)\n    }\n  }\n\n  _handleTouchmove (screenCoordinatesArray, nativeEvent) {\n    if (numberOfTouches(screenCoordinatesArray) !== 2) {\n      return\n    }\n\n    if (this._previousTouchDistance === undefined) return\n\n    const section = this.section()\n\n    if (allCoordinatesAreInsideSection(screenCoordinatesArray, section)) {\n      const sectionHeight = section.maxY - section.minY\n\n      const center = getCenter(screenCoordinatesArray)\n\n      const touchDistance = getDistance(screenCoordinatesArray)\n      const touchDelta = this._previousTouchDistance - touchDistance\n      const relativeTouchDelta = touchDelta / sectionHeight\n\n      this._previousTouchDistance = touchDistance\n      this._fireCallback(screenCoordinatesArray, nativeEvent, relativeTouchDelta, center)\n    }\n  }\n\n  _handleTouchend (screenCoordinatesArray, nativeEvent) {\n    this._previousTouchDistance = undefined\n  }\n\n  _fireCallback (screenCoordinatesArray, nativeEvent, delta, center) {\n    const screenCenter = center\n    const localCenter = getLocalCoordinates(screenCenter, this.interactionManager())\n    const screenCoordinates = screenCoordinatesArray\n    const localCoordinates = screenCoordinatesArray.map(screenCoordinates => {\n      return getLocalCoordinates(screenCoordinates, this.interactionManager())\n    })\n\n    const pinchEvent = createSectionEvent('pinch', {\n      screenCenter,\n      localCenter,\n      screenCoordinates,\n      localCoordinates,\n      delta\n    }, nativeEvent)\n\n    this._callback(pinchEvent)\n  }\n}\n\nfunction allCoordinatesAreInsideSection (screenCoordinatesArray, section) {\n  return screenCoordinatesArray.every(screenCoordinates => {\n    return coordinatesAreInsideSection(screenCoordinates, section)\n  })\n}\n\nfunction getDistance (screenCoordinatesArray) {\n  const [coords1, coords2] = screenCoordinatesArray\n  return Math.sqrt((coords2.x - coords1.x) ** 2 + (coords2.y - coords1.y) ** 2)\n}\n\nfunction getCenter (screenCoordinatesArray) {\n  const [coords1, coords2] = screenCoordinatesArray\n  return { x: (coords2.x + coords1.x) / 2, y: (coords2.y + coords1.y) / 2 }\n}\n","import SectionInteractionHandler from '../../base/handlers/SectionInteractionHandler.js'\n\nimport { createSectionEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection } from '../../utils/hitUtils.js'\nimport numberOfTouches from '../../utils/numberOfTouches.js'\n\nexport default class TouchdownHandler extends SectionInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'touchdown',\n      eventName: 'touchstart'\n    })\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    if (numberOfTouches(screenCoordinates) !== 1) {\n      return\n    }\n\n    const interactionManager = this.interactionManager()\n    const section = this.section()\n\n    if (coordinatesAreInsideSection(screenCoordinates, section)) {\n      const localCoordinates = getLocalCoordinates(screenCoordinates, interactionManager)\n\n      const touchdownEvent = createSectionEvent('touchdown', {\n        screenCoordinates,\n        localCoordinates\n      }, nativeEvent)\n\n      this._callback(touchdownEvent)\n    }\n  }\n}\n","import SectionInteractionHandler from '../../base/handlers/SectionInteractionHandler.js'\n\nimport { createSectionEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection } from '../../utils/hitUtils.js'\nimport numberOfTouches from '../../utils/numberOfTouches.js'\n\nexport default class TouchmoveHandler extends SectionInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'touchmove',\n      eventName: 'touchmove'\n    })\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    if (numberOfTouches(screenCoordinates) !== 1) {\n      return\n    }\n\n    const interactionManager = this.interactionManager()\n    const section = this.section()\n\n    if (coordinatesAreInsideSection(screenCoordinates, section)) {\n      const localCoordinates = getLocalCoordinates(screenCoordinates, interactionManager)\n\n      const touchmoveEvent = createSectionEvent('touchmove', {\n        screenCoordinates,\n        localCoordinates\n      }, nativeEvent)\n\n      this._callback(touchmoveEvent)\n    }\n  }\n}\n","import SectionInteractionHandler from '../../base/handlers/SectionInteractionHandler.js'\n\nimport { createSectionEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection } from '../../utils/hitUtils.js'\nimport numberOfTouches from '../../utils/numberOfTouches.js'\n\nexport default class TouchupHandler extends SectionInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'touchup',\n      eventName: ['touchend', 'touchcancel']\n    })\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    if (numberOfTouches(screenCoordinates) !== 1) {\n      return\n    }\n\n    const interactionManager = this.interactionManager()\n    const section = this.section()\n\n    if (coordinatesAreInsideSection(screenCoordinates, section)) {\n      const localCoordinates = getLocalCoordinates(screenCoordinates, interactionManager)\n\n      const touchupEvent = createSectionEvent('touchup', {\n        screenCoordinates,\n        localCoordinates\n      }, nativeEvent)\n\n      this._callback(touchupEvent)\n    }\n  }\n}\n","import SectionInteractionHandler from '../../base/handlers/SectionInteractionHandler.js'\n\nimport { createSectionEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection } from '../../utils/hitUtils.js'\nimport numberOfTouches from '../../utils/numberOfTouches.js'\n\nexport default class TouchoverHandler extends SectionInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'touchover',\n      eventName: ['touchstart', 'touchmove']\n    })\n\n    this._fingerCurrentlyOverSection = false\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    if (numberOfTouches(screenCoordinates) !== 1) {\n      return\n    }\n\n    if (nativeEvent.eventName === 'touchstart') {\n      this._handleTouchstart(screenCoordinates, nativeEvent)\n    }\n\n    if (nativeEvent.eventName === 'touchmove') {\n      this._handleTouchmove(screenCoordinates, nativeEvent)\n    }\n  }\n\n  _handleTouchstart (screenCoordinates, nativeEvent) {\n    const section = this.section()\n\n    if (coordinatesAreInsideSection(screenCoordinates, section)) {\n      this._fingerCurrentlyOverSection = true\n    }\n  }\n\n  _handleTouchmove (screenCoordinates, nativeEvent) {\n    const interactionManager = this.interactionManager()\n    const section = this.section()\n\n    if (coordinatesAreInsideSection(screenCoordinates, section)) {\n      if (!this._fingerCurrentlyOverSection) {\n        const localCoordinates = getLocalCoordinates(screenCoordinates, interactionManager)\n\n        const touchoverEvent = createSectionEvent('touchover', {\n          screenCoordinates,\n          localCoordinates\n        }, nativeEvent)\n\n        this._callback(touchoverEvent)\n        this._fingerCurrentlyOverSection = true\n      }\n    } else {\n      if (this._fingerCurrentlyOverSection) {\n        this._fingerCurrentlyOverSection = false\n      }\n    }\n  }\n}\n","import SectionInteractionHandler from '../../base/handlers/SectionInteractionHandler.js'\n\nimport { createSectionEvent } from '../../utils/createEvent.js'\nimport { getLocalCoordinates } from '../../utils/getLocalCoordinates.js'\nimport { coordinatesAreInsideSection } from '../../utils/hitUtils.js'\nimport numberOfTouches from '../../utils/numberOfTouches.js'\n\nexport default class TouchoutHandler extends SectionInteractionHandler {\n  constructor (interactionManager) {\n    super(interactionManager, {\n      interactionName: 'touchout',\n      eventName: ['touchstart', 'touchmove', 'touchend']\n    })\n\n    this._fingerCurrentlyOverSection = false\n  }\n\n  _handleEvent (screenCoordinates, nativeEvent) {\n    if (numberOfTouches(screenCoordinates) !== 1) {\n      return\n    }\n\n    if (nativeEvent.eventName === 'touchstart') {\n      this._handleTouchstart(screenCoordinates, nativeEvent)\n    }\n\n    if (nativeEvent.eventName === 'touchmove') {\n      this._handleTouchmove(screenCoordinates, nativeEvent)\n    }\n\n    if (nativeEvent.eventName === 'touchend') {\n      this._handleTouchend()\n    }\n  }\n\n  _handleTouchstart (screenCoordinates, nativeEvent) {\n    const section = this.section()\n\n    if (coordinatesAreInsideSection(screenCoordinates, section)) {\n      this._fingerCurrentlyOverSection = true\n    }\n  }\n\n  _handleTouchmove (screenCoordinates, nativeEvent) {\n    const interactionManager = this.interactionManager()\n    const section = this.section()\n\n    if (coordinatesAreInsideSection(screenCoordinates, section)) {\n      if (!this._fingerCurrentlyOverSection) {\n        this._fingerCurrentlyOverSection = true\n      }\n    } else {\n      if (this._fingerCurrentlyOverSection) {\n        const localCoordinates = getLocalCoordinates(screenCoordinates, interactionManager)\n\n        const touchoutEvent = createSectionEvent('touchout', {\n          screenCoordinates,\n          localCoordinates\n        }, nativeEvent)\n\n        this._callback(touchoutEvent)\n        this._fingerCurrentlyOverSection = false\n      }\n    }\n  }\n\n  _handleTouchend () {\n    this._fingerCurrentlyOverSection = false\n  }\n}\n","import BaseInteractionManager from '../base/managers/BaseInteractionManager.js'\nimport MarkInteractionInterface from '../base/interfaces/MarkInteractionInterface.js'\nimport SectionInteractionInterface from '../base/interfaces/SectionInteractionInterface.js'\n\nimport * as MarkInteractionHandlers from './mark'\nimport * as SectionInteractionHandlers from './section'\n\nexport default class TouchInteractionManager extends BaseInteractionManager {\n  constructor () {\n    super()\n\n    this._markInteractionInterface = new MarkInteractionInterface(this, MarkInteractionHandlers)\n    this._sectionInteractionInterface = new SectionInteractionInterface(this, SectionInteractionHandlers)\n  }\n}\n","export default function (point) {\n  return {\n    x: [point[0], point[0]],\n    y: [point[1], point[1]]\n  }\n}\n","import bboxPoint from './utils/bboxPoint.js'\nimport createItemFromBbox from '../../utils/createItemFromBbox.js'\n\nexport function indexPoint (markData) {\n  const pointAttributes = markData.attributes\n\n  const bbox = bboxPoint(pointAttributes.pixelGeometry.coordinates)\n  const item = createItemFromBbox(bbox)\n\n  item.attributes = pointAttributes\n  item.markType = 'Point'\n  item.markId = markData.markId\n\n  return item\n}\n\nexport function indexPointLayer ({ layerAttributes, keyArray, layerId }) {\n  const items = []\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n\n    const pointAttributes = getPointAttributes(layerAttributes, key)\n    const bbox = bboxPoint(pointAttributes.pixelGeometry.coordinates)\n    const item = createItemFromBbox(bbox)\n\n    item.key = key\n    item.index = i\n    item.attributes = pointAttributes\n    item.markType = 'Point'\n    item.layerId = layerId\n\n    items.push(item)\n  }\n\n  return items\n}\n\nfunction getPointAttributes (layerAttributes, key) {\n  return {\n    pixelGeometry: layerAttributes.pixelGeometryObject[key],\n    radius: layerAttributes.radiusObject[key]\n  }\n}\n","import { calculateCentroid } from '../../../../utils/geometryUtils'\nimport bboxPoint from './utils/bboxPoint.js'\nimport createItemFromBbox from '../../utils/createItemFromBbox.js'\n\nexport function indexRectangle (markData) {\n  const rectangleAttributes = markData.attributes\n\n  const centroid = calculateCentroid(rectangleAttributes.screenGeometry)\n  const bbox = bboxPoint(centroid)\n  const item = createItemFromBbox(bbox)\n\n  item.attributes = rectangleAttributes\n  item.markType = 'Rectangle'\n  item.markId = markData.markId\n\n  return item\n}\n\nexport function indexRectangleLayer ({ layerAttributes, keyArray, layerId }) {\n  const items = []\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n\n    const rectangleAttributes = getRectangleAttributes(layerAttributes, key)\n\n    const centroid = calculateCentroid(rectangleAttributes.screenGeometry)\n    const bbox = bboxPoint(centroid)\n    const item = createItemFromBbox(bbox)\n\n    item.key = key\n    item.index = i\n    item.attributes = rectangleAttributes\n    item.markType = 'Rectangle'\n    item.layerId = layerId\n\n    items.push(item)\n  }\n\n  return items\n}\n\nfunction getRectangleAttributes (layerAttributes, key) {\n  return { screenGeometry: layerAttributes.screenGeometryObject[key] }\n}\n","import { calculateCentroid } from '../../../../utils/geometryUtils'\nimport bboxPoint from './utils/bboxPoint.js'\nimport createItemFromBbox from '../../utils/createItemFromBbox.js'\n\nexport function indexPolygon (markData) {\n  const polygonAttributes = markData.attributes\n\n  const centroid = calculateCentroid(polygonAttributes.screenGeometry)\n  const bbox = bboxPoint(centroid)\n  const item = createItemFromBbox(bbox)\n\n  item.attributes = polygonAttributes\n  item.markType = 'Polygon'\n  item.markId = markData.markId\n\n  return item\n}\n\nexport function indexPolygonLayer ({ layerAttributes, keyArray, layerId }) {\n  const items = []\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n\n    const polygonAttributes = getPolygonAttributes(layerAttributes, key)\n\n    const centroid = calculateCentroid(polygonAttributes.screenGeometry)\n    const bbox = bboxPoint(centroid)\n    const item = createItemFromBbox(bbox)\n\n    item.key = key\n    item.index = i\n    item.attributes = polygonAttributes\n    item.markType = 'Polygon'\n    item.layerId = layerId\n\n    items.push(item)\n  }\n\n  return items\n}\n\nfunction getPolygonAttributes (layerAttributes, key) {\n  return { screenGeometry: layerAttributes.screenGeometryObject[key] }\n}\n","import { calculateCentroid } from '../../../../utils/geometryUtils'\nimport bboxPoint from './utils/bboxPoint.js'\nimport createItemFromBbox from '../../utils/createItemFromBbox.js'\n\nexport function indexLine (markData) {\n  const lineAttributes = markData.attributes\n\n  const centroid = calculateCentroid(lineAttributes.pixelGeometry)\n  const bbox = bboxPoint(centroid)\n  const item = createItemFromBbox(bbox)\n\n  item.attributes = lineAttributes\n  item.markType = 'Line'\n  item.markId = markData.markId\n\n  return item\n}\n\nexport function indexLineLayer ({ layerAttributes, keyArray, layerId }) {\n  const items = []\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n\n    const lineAttributes = getLineAttributes(layerAttributes, key)\n\n    const centroid = calculateCentroid(lineAttributes.screenGeometry)\n    const bbox = bboxPoint(centroid)\n    const item = createItemFromBbox(bbox)\n\n    item.key = key\n    item.index = i\n    item.attributes = lineAttributes\n    item.markType = 'Line'\n    item.layerId = layerId\n\n    items.push(item)\n  }\n\n  return items\n}\n\nfunction getLineAttributes (layerAttributes, key) {\n  return { screenGeometry: layerAttributes.pixelGeometryObject[key] }\n}\n","import { calculateCentroid } from '../../../../utils/geometryUtils'\nimport bboxPoint from './utils/bboxPoint.js'\nimport createItemFromBbox from '../../utils/createItemFromBbox.js'\n\nexport function indexArea (markData) {\n  const areaAttributes = markData.attributes\n\n  const centroid = calculateCentroid(areaAttributes.screenGeometry)\n  const bbox = bboxPoint(centroid)\n  const item = createItemFromBbox(bbox)\n\n  item.attributes = areaAttributes\n  item.markType = 'Area'\n  item.markId = markData.markId\n\n  return item\n}\n\nexport function indexAreaLayer ({ layerAttributes, keyArray, layerId }) {\n  const items = []\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n\n    const areaAttributes = getAreaAttributes(layerAttributes, key)\n\n    const centroid = calculateCentroid(areaAttributes.screenGeometry)\n    const bbox = bboxPoint(centroid)\n    const item = createItemFromBbox(bbox)\n\n    item.key = key\n    item.index = i\n    item.attributes = areaAttributes\n    item.markType = 'Area'\n    item.layerId = layerId\n\n    items.push(item)\n  }\n\n  return items\n}\n\nfunction getAreaAttributes (layerAttributes, key) {\n  return { screenGeometry: layerAttributes.screenGeometryObject[key] }\n}\n","import { indexPoint, indexPointLayer } from './indexPoint.js'\nimport { indexRectangle, indexRectangleLayer } from './indexRectangle.js'\nimport { indexPolygon, indexPolygonLayer } from './indexPolygon.js'\nimport { indexLine, indexLineLayer } from './indexLine.js'\nimport { indexArea, indexAreaLayer } from './indexArea.js'\n\nexport const markIndexing = {\n  Point: indexPoint,\n  Rectangle: indexRectangle,\n  Polygon: indexPolygon,\n  Line: indexLine,\n  Label: indexPoint,\n  Area: indexArea\n}\n\nexport const layerIndexing = {\n  Point: indexPointLayer,\n  Rectangle: indexRectangleLayer,\n  Polygon: indexPolygonLayer,\n  Line: indexLineLayer,\n  Label: indexPointLayer,\n  Area: indexAreaLayer\n}\n","import SpatialIndex from '../SpatialIndex'\nimport { markIndexing, layerIndexing } from './createIndexableData'\nimport { hitIsMark, hitIsInLayer, getHitId } from '../utils/hitUtils.js'\nimport { createSelectMarkEvent, createSelectLayerEvent } from '../utils/createEvent.js'\nimport { calculateBboxGeometry, pointInPolygon } from '../../../utils/geometryUtils'\n\nexport default class SelectManager {\n  constructor () {\n    this._selectableMarks = {}\n    this._selectableLayers = {}\n\n    this._markCallbacks = {}\n    this._layerCallbacks = {}\n\n    this._previousSelection = {}\n    this._currentSelection = {}\n\n    const getMark = function (markId) {\n      return this._selectableMarks[markId]\n    }\n\n    const getLayer = function (layerId) {\n      return this._selectableLayers[layerId]\n    }\n\n    this._spatialIndex = new SpatialIndex(this, getMark, getLayer)\n\n    this._selectPolygon = { start: undefined, points: [] }\n  }\n\n  // Loading/indexing\n  loadMark (markType, markData, callbacks) {\n    const indexingFunction = markIndexing[markType]\n    const indexableMark = indexingFunction(markData)\n\n    const markId = markData.markId\n\n    this._selectableMarks[markId] = indexableMark\n    this._markCallbacks[markId] = callbacks\n\n    this._spatialIndex.indexMark(markId)\n  }\n\n  markIsLoaded (markId) {\n    return markId in this._selectableMarks\n  }\n\n  removeMark (markId) {\n    this._spatialIndex.unindexMark(markId)\n\n    delete this._selectableMarks[markId]\n    delete this._markCallbacks[markId]\n  }\n\n  loadLayer (layerType, layerData, callbacks) {\n    const indexingFunction = layerIndexing[layerType]\n    const indexableLayer = indexingFunction(layerData)\n\n    const layerId = layerData.layerId\n\n    this._selectableLayers[layerId] = indexableLayer\n    this._layerCallbacks[layerId] = callbacks\n\n    this._spatialIndex.indexLayer(layerId)\n  }\n\n  layerIsLoaded (layerId) {\n    return layerId in this._selectableLayers\n  }\n\n  removeLayer (layerId) {\n    this._spatialIndex.unindexLayer(layerId)\n\n    delete this._selectableLayers[layerId]\n    delete this._layerCallbacks[layerId]\n  }\n\n  // Rectangle\n  selectRectangle (rectangle) {\n    const hits = this._spatialIndex.queryBoundingBox(rectangleToRBushBbox(rectangle))\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n      const hitId = getHitId(hit)\n\n      this._currentSelection[hitId] = hit\n\n      this._fireSelectCallback(hit)\n    }\n  }\n\n  updateSelectRectangle (rectangle) {\n    this._previousSelection = this._currentSelection\n    this._currentSelection = {}\n\n    const hits = this._spatialIndex.queryBoundingBox(rectangleToRBushBbox(rectangle))\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n      const hitId = getHitId(hit)\n\n      this._currentSelection[hitId] = hit\n\n      if (!(hitId in this._previousSelection)) {\n        this._fireSelectCallback(hit)\n      }\n    }\n\n    for (const hitId in this._previousSelection) {\n      if (!(hitId in this._currentSelection)) {\n        const hit = this._previousSelection[hitId]\n\n        this._fireDeselectCallback(hit)\n      }\n    }\n  }\n\n  resetSelectRectangle () {\n    for (const hitId in this._currentSelection) {\n      const hit = this._currentSelection[hitId]\n\n      this._fireDeselectCallback(hit)\n    }\n\n    this._previousSelection = {}\n    this._currentSelection = {}\n  }\n\n  // Polygon\n  startSelectPolygon (startCoordinates) {\n    this._selectPolygon.start = parseCoordinates(startCoordinates)\n  }\n\n  addPointToSelectPolygon (coordinates) {\n    this._selectPolygon.points.push(parseCoordinates(coordinates))\n\n    if (this._selectPolygon.points.length > 1) {\n      const lastThreePointsPolygon = this._getLastThreePointsPolygon()\n      const bbox = calculateBboxGeometry(lastThreePointsPolygon)\n\n      const hits = this._spatialIndex.queryBoundingBox(bboxToRBushBbox(bbox))\n\n      for (let i = 0; i < hits.length; i++) {\n        const hit = hits[i]\n        const hitCentroid = [hit.minX, hit.minY]\n\n        if (pointInPolygon(hitCentroid, lastThreePointsPolygon)) {\n          const hitId = getHitId(hit)\n\n          if (hitId in this._currentSelection) {\n            this._fireDeselectCallback(hit)\n            delete this._currentSelection[hitId]\n          } else {\n            this._fireSelectCallback(hit)\n            this._currentSelection[hitId] = hit\n          }\n        }\n      }\n    }\n  }\n\n  moveSelectPolygon (_delta) {\n    this._previousSelection = this._currentSelection\n    this._currentSelection = {}\n\n    const delta = parseCoordinates(_delta)\n\n    const start = this._selectPolygon.start\n    const points = this._selectPolygon.points\n\n    this._selectPolygon.start = [start[0] + delta[0], start[1] + delta[1]]\n    this._selectPolygon.points = points.map(point => [point[0] + delta[0], point[1] + delta[1]])\n\n    const polygon = this.getSelectPolygon()\n    const bbox = calculateBboxGeometry(polygon)\n\n    const hits = this._spatialIndex.queryBoundingBox(bboxToRBushBbox(bbox))\n\n    for (let i = 0; i < hits.length; i++) {\n      const hit = hits[i]\n      const hitCentroid = [hit.minX, hit.minY]\n\n      if (pointInPolygon(hitCentroid, polygon)) {\n        const hitId = getHitId(hit)\n\n        this._currentSelection[hitId] = hit\n\n        if (!(hitId in this._previousSelection)) {\n          this._fireSelectCallback(hit)\n        }\n      }\n    }\n\n    for (const hitId in this._previousSelection) {\n      if (!(hitId in this._currentSelection)) {\n        const hit = this._previousSelection[hitId]\n\n        this._fireDeselectCallback(hit)\n      }\n    }\n  }\n\n  getSelectPolygon () {\n    if (this._selectPolygon.start) {\n      return {\n        type: 'Polygon',\n        coordinates: [[\n          this._selectPolygon.start,\n          ...this._selectPolygon.points,\n          this._selectPolygon.start\n        ]]\n      }\n    }\n  }\n\n  resetSelectPolygon () {\n    for (const hitId in this._currentSelection) {\n      const hit = this._currentSelection[hitId]\n\n      this._fireDeselectCallback(hit)\n    }\n\n    this._selectPolygon = { start: undefined, points: [] }\n    this._currentSelection = {}\n  }\n\n  _fireSelectCallback (hit) {\n    if (hitIsMark(hit)) {\n      const selectEvent = createSelectMarkEvent('select', hit)\n      const callback = this._markCallbacks[hit.markId].onSelect\n\n      if (callback) callback(selectEvent)\n    }\n\n    if (hitIsInLayer(hit)) {\n      const selectEvent = createSelectLayerEvent('select', hit)\n      const callback = this._layerCallbacks[hit.layerId].onSelect\n\n      if (callback) callback(selectEvent)\n    }\n  }\n\n  _fireDeselectCallback (hit) {\n    if (hitIsMark(hit)) {\n      const deselectEvent = createSelectMarkEvent('deselect', hit)\n      const callback = this._markCallbacks[hit.markId].onDeselect\n\n      if (callback) callback(deselectEvent)\n    }\n\n    if (hitIsInLayer(hit)) {\n      const deselectEvent = createSelectLayerEvent('deselect', hit)\n      const callback = this._layerCallbacks[hit.layerId].onDeselect\n\n      if (callback) callback(deselectEvent)\n    }\n  }\n\n  _getLastThreePointsPolygon () {\n    const points = this._selectPolygon.points\n    const lastPointIndex = points.length - 1\n    const start = this._selectPolygon.start\n\n    return {\n      type: 'Polygon',\n      coordinates: [\n        [start, points[lastPointIndex - 1], points[lastPointIndex], start]\n      ]\n    }\n  }\n}\n\nfunction rectangleToRBushBbox (rectangle) {\n  return {\n    minX: Math.min(rectangle.x1, rectangle.x2),\n    maxX: Math.max(rectangle.x1, rectangle.x2),\n    minY: Math.min(rectangle.y1, rectangle.y2),\n    maxY: Math.max(rectangle.y1, rectangle.y2)\n  }\n}\n\nfunction parseCoordinates (coordinates) {\n  if (is2dArray(coordinates)) return coordinates\n  if (isXYObject(coordinates)) return [coordinates.x, coordinates.y]\n\n  throw new Error(`Invalid input: ${coordinates}`)\n}\n\nfunction is2dArray (coordinates) {\n  return coordinates.constructor === Array &&\n    coordinates.length === 2 &&\n    coordinates.every(c => c && c.constructor === Number)\n}\n\nfunction isXYObject (coordinates) {\n  return 'x' in coordinates && 'y' in coordinates &&\n    coordinates.x.constructor === Number &&\n    coordinates.y.constructor === Number\n}\n\nfunction bboxToRBushBbox (bbox) {\n  return {\n    minX: Math.min(...bbox.x),\n    maxX: Math.max(...bbox.x),\n    minY: Math.min(...bbox.y),\n    maxY: Math.max(...bbox.y)\n  }\n}\n","import * as detectIt from '../../utils/detect.js'\nimport MouseInteractionManager from './mouse/MouseInteractionManager.js'\nimport TouchInteractionManager from './touch/TouchInteractionManager.js'\nimport SelectManager from './select/SelectManager.js'\n\nexport default class InteractionManager {\n  constructor () {\n    if (detectIt.primaryInput === 'mouse') {\n      this._mouseInteractionManager = new MouseInteractionManager()\n    }\n\n    if (detectIt.primaryInput === 'touch') {\n      this._touchInteractionManager = new TouchInteractionManager()\n    }\n\n    this._selectManager = new SelectManager()\n  }\n\n  // Initialization\n  setId (id) {\n    this._forEachManager(manager => { manager.setId(id) })\n  }\n\n  linkEventManager (eventManager) {\n    if (this._mouseInteractionManager) {\n      this._mouseInteractionManager.linkEventManager(eventManager.mouse())\n    }\n\n    if (this._touchInteractionManager) {\n      this._touchInteractionManager.linkEventManager(eventManager.touch())\n    }\n  }\n\n  // Section context loading\n  loadSection (sectionContext) {\n    this._forEachManager(manager => { manager.loadSection(sectionContext) })\n  }\n\n  mouse () {\n    return this._mouseInteractionManager\n  }\n\n  touch () {\n    return this._touchInteractionManager\n  }\n\n  select () {\n    return this._selectManager\n  }\n\n  _forEachManager (callback) {\n    if (this._mouseInteractionManager) callback(this._mouseInteractionManager)\n    if (this._touchInteractionManager) callback(this._touchInteractionManager)\n  }\n}\n","<script context=\"module\">\n  let idCounter = 0\n  function getId () {\n    return 'gr' + idCounter++\n  }\n</script>\n\n<script>\n  import * as detectIt from '../../../utils/detect.js'\n  import { onMount } from 'svelte'\n  import * as GraphicContext from './GraphicContext'\n  import * as SectionContext from '../Section/SectionContext'\n  import * as EventManagerContext from './EventManagerContext'\n  import * as InteractionManagerContext from '../Section/InteractionManagerContext'\n\n  import EventManager from '../../../interactivity/events/EventManager.js'\n  import InteractionManager from '../../../interactivity/interactions/InteractionManager.js'\n\n  import { getClipPropsPadding, getClipPropsNoPadding } from '../Section/getClipProps.js'\n\n  const graphicId = getId()\n\n  // Positioning\n  export let width = 500\n  export let height = 500\n  export let viewBox = undefined\n  export let preserveAspectRatio = 'xMidYMid meet'\n\n  // Local coordinates\n  export let scaleX = undefined\n  export let scaleY = undefined\n  export let flipX = false\n  export let flipY = false\n  export let padding = 0\n  export let zoomIdentity = undefined\n\n  // Mouse interactions\n  export let onClick = undefined\n  export let onWheel = undefined\n  export let onMousedown = undefined\n  export let onMouseup = undefined\n  export let onMouseover = undefined\n  export let onMouseout = undefined\n  export let onMousemove = undefined\n\n  // Touch interactions\n  export let onPinch = undefined\n  export let onTouchdown = undefined\n  export let onTouchmove = undefined\n  export let onTouchup = undefined\n  export let onTouchover = undefined\n  export let onTouchout = undefined\n\n  // Aesthetics\n  export let backgroundColor = undefined\n  export let paddingColor = undefined\n\n  // Other\n  export let transformation = undefined\n  export let blockReindexing = false\n  export let clip = true\n  export let renderer = undefined\n\n  // Contexts\n  const graphicContext = GraphicContext.init()\n  const sectionContext = SectionContext.init()\n  const eventManagerContext = EventManagerContext.init()\n  const interactionManagerContext = InteractionManagerContext.init()\n\n  $: {\n    GraphicContext.update(graphicContext, { renderer })\n  }\n\n  let rootNode\n\n  // set up event and interaction manager\n  const eventManager = new EventManager()\n  EventManagerContext.update(eventManagerContext, eventManager)\n  \n  const interactionManager = new InteractionManager()\n  interactionManager.setId(graphicId)\n  interactionManager.linkEventManager(eventManager)\n  InteractionManagerContext.update(interactionManagerContext, interactionManager)\n\n  // Keep SectionContext and InteractionManagerContext up to date\n  let numberWidth = width\n  let numberHeight = height\n  $: coordinates = { x1: 0, y1: 0, x2: numberWidth, y2: numberHeight }\n\n  $: {\n    const sectionData = {\n      sectionId: graphicId,\n      coordinates,\n      scaleX,\n      scaleY,\n      padding,\n      flipX,\n      flipY,\n      blockReindexing,\n      transformation,\n      zoomIdentity\n    }\n\n    SectionContext.update(sectionContext, sectionData)\n    $interactionManagerContext.loadSection($sectionContext)\n  }\n\n  $: clipPropsPadding = getClipPropsPadding(coordinates, padding)\n  $: clipPropsNoPadding = getClipPropsNoPadding(coordinates)\n\n  const originalViewBox = viewBox\n  let originalViewBoxArray\n  \n  if (originalViewBox !== undefined) {\n    originalViewBoxArray = originalViewBox.split(' ')\n  }\n  $: {\n    if (width.constructor === Number && height.constructor === Number) {\n      numberWidth = width\n      numberHeight = height\n    } else if (originalViewBox !== undefined) {\n      numberWidth = Number(originalViewBoxArray[2])\n      numberHeight = Number(originalViewBoxArray[3])\n    } else if (originalViewBox === undefined) {\n      numberWidth = 100\n      numberHeight = 100\n    }\n  }\n  $: {\n    if (originalViewBox === undefined) {\n      viewBox = `0 0 ${numberWidth} ${numberHeight}`\n    }\n  }\n\n  onMount(() => {\n    // Only on mount can we bind the svg root node and attach actual event listeners.\n    // Sometimes rootNode is undefined for some weird reason. In this case,\n    // we will use document.getElementById instead\n    let _rootNode = rootNode\n      ? rootNode\n      : document.getElementById(graphicId)\n\n    eventManager.addRootNode(_rootNode)\n    eventManager.attachEventListeners()\n  })\n\n  // Interactions\n  // Change callbacks if necessary\n  $: {\n    removeSectionInteractionsIfNecessary(\n      onWheel,\n      onClick,\n      onMousedown,\n      onMouseup,\n      onMouseover,\n      onMouseout,\n      onTouchdown,\n      onTouchmove,\n      onTouchup,\n      onTouchover,\n      onTouchout,\n      onPinch\n    )\n  }\n\n  function removeSectionInteractionsIfNecessary () {\n    if (detectIt.primaryInput === 'mouse') {\n      const sectionInterface = $interactionManagerContext.mouse().section()\n      sectionInterface.removeAllInteractions()\n\n      if (onWheel) sectionInterface.addInteraction('wheel', onWheel)\n      if (onClick) sectionInterface.addInteraction('click', onClick)\n      if (onMousedown) sectionInterface.addInteraction('mousedown', onMousedown)\n      if (onMouseup) sectionInterface.addInteraction('mouseup', onMouseup)\n      if (onMouseover) sectionInterface.addInteraction('mouseover', onMouseover)\n      if (onMouseout) sectionInterface.addInteraction('mouseout', onMouseout)\n      if (onMousemove) sectionInterface.addInteraction('mousemove', onMousemove)\n    }\n\n    if (detectIt.primaryInput === 'touch') {\n      const sectionInterface = $interactionManagerContext.touch().section()\n      sectionInterface.removeAllInteractions()\n\n      if (onTouchdown) sectionInterface.addInteraction('touchdown', onTouchdown)\n      if (onTouchmove) sectionInterface.addInteraction('touchmove', onTouchmove)\n      if (onTouchup) sectionInterface.addInteraction('touchup', onTouchup)\n      if (onTouchover) sectionInterface.addInteraction('touchover', onTouchover)\n      if (onTouchout) sectionInterface.addInteraction('touchout', onTouchout)\n      if (onPinch) sectionInterface.addInteraction('pinch', onPinch)\n    }\n  }\n\n  export function selectRectangle (rectangle) {\n    $interactionManagerContext.select().selectRectangle(rectangle)\n  }\n\n  export function updateSelectRectangle (rectangle) {\n    $interactionManagerContext.select().updateSelectRectangle(rectangle)\n  }\n\n  export function resetSelectRectangle () {\n    $interactionManagerContext.select().resetSelectRectangle()\n  }\n\n  export function startSelectPolygon (startCoordinates) {\n    $interactionManagerContext.select().startSelectPolygon(startCoordinates)\n  }\n\n  export function addPointToSelectPolygon (pointCoordinates) {\n    $interactionManagerContext\n      .select()\n      .addPointToSelectPolygon(pointCoordinates)\n  }\n\n  export function moveSelectPolygon (delta) {\n    $interactionManagerContext.select().moveSelectPolygon(delta)\n  }\n\n  export function getSelectPolygon () {\n    return $interactionManagerContext.select().getSelectPolygon()\n  }\n\n  export function resetSelectPolygon () {\n    $interactionManagerContext.select().resetSelectPolygon()\n  }\n</script>\n\n<svg\n  id={graphicId}\n  {width}\n  {height}\n  {viewBox}\n  {preserveAspectRatio}\n  bind:this={rootNode}\n>\n  {#if clip}\n\n    <clipPath id={`clip-${graphicId}`}>\n      <rect {...clipPropsPadding} />\n    </clipPath>\n\n  {/if}\n\n  <defs>\n    <mask id={`${graphicId}-mask-padding-bg`}>\n      <rect {...clipPropsNoPadding} fill=\"white\" />\n      <rect {...clipPropsPadding} fill=\"black\" />\n    </mask>\n  </defs>\n\n  {#if backgroundColor}\n    <rect \n      class=\"content-background\"\n      {...clipPropsPadding}\n      fill={backgroundColor}\n    />\n  {/if}\n\n  {#if paddingColor}\n    <rect \n      class=\"padding-background\"\n      mask={`url(#${graphicId}-mask-padding-bg)`}\n      {...clipPropsNoPadding}\n      fill={paddingColor} \n    />\n  {/if}\n\n  <slot />\n</svg>","import { parsePadding } from '../utils/padding.js'\n\nexport function getClipPropsNoPadding ({ x1, x2, y1, y2 }) {\n  return {\n    x: Math.min(x1, x2),\n    y: Math.min(y1, y2),\n    width: Math.abs(x1 - x2),\n    height: Math.abs(y1 - y2)\n  }\n}\n\nexport function getClipPropsPadding ({ x1, x2, y1, y2 }, padding) {\n  const { left, right, top, bottom } = parsePadding(padding)\n\n  return {\n    x: Math.min(x1, x2) + left,\n    y: Math.min(y1, y2) + top,\n    width: Math.abs(x1 - x2) - (left + right),\n    height: Math.abs(y1 - y2) - (top + bottom)\n  }\n}\n","export default function (keyProp, length) {\n  if (keyProp) {\n    if (keyProp.constructor !== Array) throw new Error('\\'key\\' must be Array')\n    if (keyProp.length !== length) throw new Error('\\'key\\' must be of same length as positioning props')\n    if (keyProp.some(key => key.constructor !== String)) {\n      throw new Error('Keys can only be Strings')\n    }\n\n    return keyProp\n  } else {\n    return new Array(length).fill(0).map((_, i) => i.toString())\n  }\n}\n","import { transformGeometry, polarGeometry } from '../../../utils/geometryUtils'\nimport { isDefined } from '../../../utils/equals.js'\nimport getKeyArray from './getKeyArray.js'\n\nexport function createPixelGeometryFromGeometry (\n  geometry,\n  sectionContext,\n  renderSettings,\n  geometryNeedsScaling\n) {\n  ensureValidGeometry(geometry)\n\n  const interpolationNecessary = (\n    sectionContext.transformation === 'polar' &&\n    renderSettings.interpolate === true\n  )\n\n  if (interpolationNecessary) {\n    const scaleTransformation = sectionContext.getScaleTransformation(geometryNeedsScaling)\n    const postScaleTransformation = sectionContext.postScaleTransformation\n\n    return polarGeometry(\n      geometry,\n      sectionContext,\n      { scaleTransformation, postScaleTransformation },\n      renderSettings\n    )\n  }\n\n  if (!interpolationNecessary) {\n    const totalTransformation = sectionContext.getTotalTransformation(geometryNeedsScaling)\n\n    return transformGeometry(geometry, totalTransformation, renderSettings)\n  }\n}\n\nexport function ensureValidGeometry (geometry) {\n  if (\n    isDefined(geometry) &&\n    geometry.constructor === Object &&\n    'type' in geometry &&\n    'coordinates' in geometry\n  ) {\n    return\n  }\n\n  throw new Error('Invalid geometry')\n}\n\nexport function createPixelGeometryObjectFromGeometry (\n  geometry,\n  keyProp,\n  sectionContext,\n  renderSettings,\n  geometryNeedsScaling\n) {\n  const keyArray = getKeyArray(keyProp, geometry.length)\n  const pixelGeometryObject = {}\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n\n    pixelGeometryObject[key] = createPixelGeometryFromGeometry(\n      geometry[i],\n      sectionContext,\n      renderSettings,\n      geometryNeedsScaling\n    )\n  }\n\n  return pixelGeometryObject\n}\n","import { createPixelGeometryFromGeometry } from '../utils/createPixelGeometryFromGeometry.js'\nimport { isDefined, isUndefined, isInvalid } from '../../../utils/equals.js'\n\nexport default function createPixelGeometry (\n  geometryProps,\n  sectionContext,\n  renderSettings\n) {\n  const scaledCoordinates = scaleCoordinates(geometryProps, sectionContext)\n  const scaledGeometry = createScaledGeometry(scaledCoordinates)\n\n  return createPixelGeometryFromGeometry(\n    scaledGeometry,\n    sectionContext,\n    renderSettings,\n    false\n  )\n}\n\nexport function scaleCoordinates (geometryProps, sectionContext) {\n  ensureValidCombination(geometryProps)\n  validateTypes(geometryProps)\n\n  const { x1, x2, y1, y2 } = geometryProps\n\n  const scaledCoordinates = {}\n\n  if (wereSpecified(x1, x2)) {\n    scaledCoordinates.x1 = scaleCoordinate(x1, 'x1', sectionContext)\n    scaledCoordinates.x2 = scaleCoordinate(x2, 'x2', sectionContext)\n  } else {\n    scaledCoordinates.x1 = sectionContext.rangeX[0]\n    scaledCoordinates.x2 = sectionContext.rangeX[1]\n  }\n\n  if (wereSpecified(y1, y2)) {\n    scaledCoordinates.y1 = scaleCoordinate(y1, 'y1', sectionContext)\n    scaledCoordinates.y2 = scaleCoordinate(y2, 'y2', sectionContext)\n  } else {\n    scaledCoordinates.y1 = sectionContext.rangeY[0]\n    scaledCoordinates.y2 = sectionContext.rangeY[1]\n  }\n\n  return scaledCoordinates\n}\n\nconst s = JSON.stringify\n\nexport function ensureValidCombination (c) {\n  if (onlyOne(c.x1, c.x2)) {\n    throw new Error(`Rectangle: invalid combination of 'x1' and 'x2': ${s(c.x1)}, ${s(c.x2)}. Either provide both or none.`)\n  }\n\n  if (onlyOne(c.y1, c.y2)) {\n    throw new Error(`Rectangle: invalid combination of 'y1' and 'y2': ${s(c.y1)}, ${s(c.y2)}. Either provide both or none.`)\n  }\n}\n\nfunction onlyOne (a, b) {\n  return isUndefined(a) ? isDefined(b) : isUndefined(b)\n}\n\nconst invalidCoordinateValueError = (value, name) => new Error(`Rectangle: invalid coordinate value for '${name}': ${s(value)}`)\n\nfunction validateTypes (geometryProps) {\n  for (const coordinateName in geometryProps) {\n    const coordinate = geometryProps[coordinateName]\n\n    if (isDefined(coordinate)) {\n      if (isInvalid(coordinate)) throw invalidCoordinateValueError(coordinate, coordinateName)\n\n      if (![Number, String, Date, Function].includes(coordinate.constructor)) {\n        throw invalidCoordinateValueError(coordinate, coordinateName)\n      }\n    }\n  }\n}\n\nfunction wereSpecified (a, b) {\n  return isDefined(a) && isDefined(b)\n}\n\nfunction scaleCoordinate (coordinate, coordinateName, sectionContext) {\n  if (coordinate.constructor === Function) {\n    return coordinate(sectionContext)\n  } else {\n    const scale = ['x1', 'x2'].includes(coordinateName) ? sectionContext.scaleX : sectionContext.scaleY\n    const scaledCoordinate = scale(coordinate)\n    throwErrorIfInvalidScaledCoordinate(coordinate, scaledCoordinate, coordinateName)\n\n    return scaledCoordinate\n  }\n}\n\nfunction throwErrorIfInvalidScaledCoordinate (input, output, coordinateName) {\n  const parentScale = ['x1', 'x2'].includes(coordinateName) ? 'scaleX' : 'scaleY'\n  if (isInvalid(output)) throw new Error(`Scale '${parentScale}' received '${s(input)}' and returned '${s(output)}`)\n}\n\nexport function createScaledGeometry (c) {\n  return {\n    type: 'Polygon',\n    coordinates: [\n      [\n        [c.x1, c.y1],\n        [c.x2, c.y1],\n        [c.x2, c.y2],\n        [c.x1, c.y2],\n        [c.x1, c.y1]\n      ]\n    ]\n  }\n}\n","/**\n * Point props default and required or not are defined here.\n */\n\nexport default {\n  x: {\n    required: false\n  },\n  y: {\n    required: false\n  },\n  geometry: {\n    required: false\n  },\n  radius: {\n    required: false,\n    default: 3\n  },\n  fill: {\n    required: false,\n    default: 'black'\n  },\n  stroke: {\n    required: false,\n    default: 'none'\n  },\n  strokeWidth: {\n    required: false,\n    default: 0\n  },\n  fillOpacity: {\n    required: false\n  },\n  strokeOpacity: {\n    required: false\n  },\n  opacity: {\n    required: false,\n    default: 1\n  }\n}\n","export default {\n  x1: {\n    required: false\n  },\n  x2: {\n    required: false\n  },\n  y1: {\n    required: false\n  },\n  y2: {\n    required: false\n  },\n  fill: {\n    required: false,\n    default: 'black'\n  },\n  stroke: {\n    required: false,\n    default: 'none'\n  },\n  strokeWidth: {\n    required: false,\n    default: 0\n  },\n  fillOpacity: {\n    required: false\n  },\n  strokeOpacity: {\n    required: false\n  },\n  opacity: {\n    required: false,\n    default: 1\n  }\n}\n","export default {\n  x: {\n    required: false\n  },\n  y: {\n    required: false\n  },\n  geometry: {\n    required: false\n  },\n  fill: {\n    required: false,\n    default: 'black'\n  },\n  stroke: {\n    required: false,\n    default: 'none'\n  },\n  strokeWidth: {\n    required: false,\n    default: 0\n  },\n  fillOpacity: {\n    required: false\n  },\n  strokeOpacity: {\n    required: false\n  },\n  opacity: {\n    required: false,\n    default: 1\n  }\n}\n","export default {\n  x: {\n    required: false\n  },\n  y: {\n    required: false\n  },\n  geometry: {\n    required: false\n  },\n  strokeWidth: {\n    required: false,\n    default: 3\n  },\n  stroke: {\n    required: false,\n    default: 'black'\n  },\n  opacity: {\n    required: false,\n    default: 1\n  }\n}\n","export default {\n  x: {\n    required: false\n  },\n  y: {\n    required: false\n  },\n  geometry: {\n    required: false\n  },\n  fill: {\n    required: false,\n    default: 'black'\n  },\n  stroke: {\n    required: false,\n    default: 'none'\n  },\n  strokeWidth: {\n    required: false,\n    default: 0\n  },\n  fillOpacity: {\n    required: false\n  },\n  strokeOpacity: {\n    required: false\n  },\n  opacity: {\n    required: false,\n    default: 1\n  },\n  text: {\n    required: false\n  },\n  fontFamily: {\n    required: false,\n    default: 'Helvetica'\n  },\n  fontSize: {\n    required: false,\n    default: 16\n  },\n  fontWeight: {\n    required: false,\n    default: 'normal'\n  },\n  rotation: {\n    required: false,\n    default: 0\n  },\n  anchorPoint: {\n    required: false,\n    default: 'center'\n  }\n}\n","export default {\n  x: {\n    required: false\n  },\n  y: {\n    required: false\n  },\n  geometry: {\n    required: false\n  },\n  shape: {\n    required: false\n  },\n  size: {\n    required: false\n  },\n  fill: {\n    required: false,\n    default: 'black'\n  },\n  stroke: {\n    required: false,\n    default: 'none'\n  },\n  strokeWidth: {\n    required: false,\n    default: 0\n  },\n  fillOpacity: {\n    required: false\n  },\n  strokeOpacity: {\n    required: false\n  },\n  opacity: {\n    required: false,\n    default: 1\n  }\n}\n","export default {\n  x1: {\n    required: false\n  },\n  x2: {\n    required: false\n  },\n  y1: {\n    required: false\n  },\n  y2: {\n    required: false\n  },\n  independentAxis: {\n    required: false\n  },\n  fill: {\n    required: false,\n    default: 'black'\n  },\n  stroke: {\n    required: false,\n    default: 'none'\n  },\n  strokeWidth: {\n    required: false,\n    default: 0\n  },\n  strokeOpacity: {\n    required: false\n  },\n  fillOpacity: {\n    required: false\n  },\n  opacity: {\n    required: false,\n    default: 1\n  }\n}\n","import pointAesthetics from '../Point/aesthetics.js'\nimport rectangleAesthetics from '../Rectangle/aesthetics.js'\nimport polygonAesthetics from '../Polygon/aesthetics.js'\nimport lineAesthetics from '../Line/aesthetics.js'\nimport labelAesthetics from '../Label/aesthetics.js'\nimport symbolAesthetics from '../Symbol/aesthetics.js'\nimport areaAesthetics from '../Area/aesthetics.js'\n\nimport { isDefined, isUndefined } from '../../../utils/equals.js'\n\nexport default function (type, aesthetics) {\n  if (type === 'Point') {\n    return validateAesthetics(aesthetics, pointAesthetics)\n  }\n\n  if (type === 'Rectangle') {\n    return validateAesthetics(aesthetics, rectangleAesthetics)\n  }\n\n  if (type === 'Polygon') {\n    return validateAesthetics(aesthetics, polygonAesthetics)\n  }\n\n  if (type === 'Line') {\n    return validateAesthetics(aesthetics, lineAesthetics)\n  }\n\n  if (type === 'Label') {\n    return validateAesthetics(aesthetics, labelAesthetics)\n  }\n\n  if (type === 'Symbol') {\n    return validateAesthetics(aesthetics, symbolAesthetics)\n  }\n\n  if (type === 'Area') {\n    return validateAesthetics(aesthetics, areaAesthetics)\n  }\n}\n\nfunction validateAesthetics (passedAesthetics, allowedAesthetics) {\n  const aesthetics = {}\n\n  for (const aestheticName in passedAesthetics) {\n    const aestheticValue = passedAesthetics[aestheticName]\n    const aestheticRequirements = allowedAesthetics[aestheticName]\n\n    if (isDefined(aestheticValue)) {\n      if (!(aestheticName in allowedAesthetics)) throw aestheticNotAllowedError(aestheticName)\n      aesthetics[aestheticName] = aestheticValue\n    }\n\n    if (isUndefined(aestheticValue)) {\n      if (aestheticName in allowedAesthetics) {\n        if (aestheticRequirements.required) throw aestheticRequiredError(aestheticName)\n        if (isDefined(aestheticRequirements.default)) {\n          aesthetics[aestheticName] = aestheticRequirements.default\n        } else {\n          aesthetics[aestheticName] = aestheticValue\n        }\n      }\n    }\n  }\n\n  return aesthetics\n}\n\nconst aestheticNotAllowedError = name => {\n  return new Error(`Aesthetic '${name}' not allowed`)\n}\n\nconst aestheticRequiredError = name => {\n  return new Error(`Required aesthetic '${name}' is missing`)\n}\n","import { isDefined, isUndefined } from '../../../utils/equals.js'\n\nexport function ensureValidGeometryProps ({ x, y, geometry }, markType) {\n  if (isDefined(x) && isDefined(y) && isUndefined(geometry)) return\n\n  if (isUndefined(x) && isUndefined(y) && isDefined(geometry)) return\n\n  throw new Error(`${markType}: Invalid combination of 'x', 'y', and 'geometry' props`)\n}\n\nexport function getInputType ({ x, y, geometry }) {\n  if (isUndefined(geometry)) return 'xy'\n  if (isDefined(geometry)) return 'geometry'\n}\n\nexport function validateXYProps (x, y) {\n  if (![Array, Function].includes(x.constructor)) {\n    throw new Error('\\'x\\' prop must be Array or Function')\n  }\n\n  if (![Array, Function].includes(y.constructor)) {\n    throw new Error('\\'y\\' prop must be Array or Function')\n  }\n}\n\nexport function validateGeometryProp (geometry) {\n  if (![Object, Function].includes(geometry.constructor)) {\n    throw new Error('\\'geometry\\' prop must be Object or Function')\n  }\n}\n\nexport function validateXYPropsLayer (x, y) {\n  if (![Array, Function].includes(x.constructor)) {\n    throw new Error('\\'x\\' prop must be Array or Function')\n  }\n\n  if (![Array, Function].includes(y.constructor)) {\n    throw new Error('\\'y\\' prop must be Array or Function')\n  }\n}\n\nexport function validateGeometryPropLayer (geometry) {\n  if (![Array, Function].includes(geometry.constructor)) {\n    throw new Error('\\'geometry\\' prop must be Array or Function')\n  }\n}\n","export default function propNeedsScaling (prop) {\n  return prop.constructor !== Function\n}\n","import {\n  ensureValidGeometryProps,\n  getInputType\n} from '../utils/geometryPropTools.js'\nimport propNeedsScaling from '../utils/propNeedsScaling.js'\nimport { transformGeometry } from '../../../utils/geometryUtils/index.js'\n\nexport default function createPixelGeometry (\n  geometryProps,\n  sectionContext,\n  renderSettings\n) {\n  ensureValidGeometryProps(geometryProps)\n  const inputType = getInputType(geometryProps)\n\n  if (inputType === 'xy') {\n    const xNeedsScaling = propNeedsScaling(geometryProps.x)\n    const yNeedsScaling = propNeedsScaling(geometryProps.y)\n\n    const x = xNeedsScaling\n      ? geometryProps.x\n      : geometryProps.x(sectionContext)\n\n    const y = yNeedsScaling\n      ? geometryProps.y\n      : geometryProps.y(sectionContext)\n\n    const totalTransformation = sectionContext.getTotalTransformation({ xNeedsScaling, yNeedsScaling })\n\n    return transformGeometry({ type: 'Point', x, y }, totalTransformation, renderSettings)\n  }\n\n  if (inputType === 'geometry') {\n    const needsScaling = propNeedsScaling(geometryProps.geometry)\n\n    const geometry = needsScaling\n      ? geometryProps.geometry\n      : geometryProps.geometry(sectionContext)\n\n    const totalTransformation = sectionContext.getTotalTransformation(needsScaling)\n\n    return transformGeometry(geometry, totalTransformation, renderSettings)\n  }\n}\n","import { transformGeometry, polarGeometry } from '../../../utils/geometryUtils'\nimport getKeyArray from './getKeyArray.js'\n\nexport function createPixelGeometryFromXYArrays (\n  { x, y },\n  sectionContext,\n  renderSettings,\n  geometryType,\n  needsScaling\n) {\n  validateXYArrays(x, y)\n\n  if (geometryType === 'Polygon') {\n    closeIfNecessary(x, y)\n  }\n\n  const rendervousInput = createRendervousInput(x, y, geometryType)\n\n  const interpolationNecessary = (\n    sectionContext.transformation === 'polar' &&\n    renderSettings.interpolate === true\n  )\n\n  if (interpolationNecessary) {\n    const scaleTransformation = sectionContext.getScaleTransformation(needsScaling)\n    const postScaleTransformation = sectionContext.postScaleTransformation\n\n    return polarGeometry(\n      rendervousInput,\n      sectionContext,\n      { scaleTransformation, postScaleTransformation },\n      renderSettings\n    )\n  }\n\n  if (!interpolationNecessary) {\n    const totalTransformation = sectionContext.getTotalTransformation(needsScaling)\n\n    return transformGeometry(rendervousInput, totalTransformation, renderSettings)\n  }\n}\n\nexport function validateXYArrays (x, y) {\n  if (x.constructor !== Array) {\n    throw new Error('\\'x\\' prop must be Array or function that returns array')\n  }\n\n  if (y.constructor !== Array) {\n    throw new Error('\\'y\\' prop must be Array or function that returns array')\n  }\n\n  if (x.length !== y.length) {\n    throw new Error('Arrays passed to \\'x\\' and \\'y\\' must have the same length')\n  }\n}\n\nfunction closeIfNecessary (x, y) {\n  const xNotClosed = x[0] !== x[x.length - 1]\n  const yNotClosed = y[0] !== y[y.length - 1]\n\n  if (xNotClosed || yNotClosed) {\n    x.push(x[0])\n    y.push(y[0])\n  }\n}\n\nfunction createRendervousInput (x, y, geometryType) {\n  return {\n    type: geometryType,\n    x,\n    y\n  }\n}\n\nexport function createPixelGeometryObjectFromXYArrays (\n  { x, y },\n  keyProp,\n  sectionContext,\n  renderSettings,\n  geometryType,\n  needsScaling\n) {\n  validateXYArrays(x, y)\n\n  const keyArray = getKeyArray(keyProp, x.length)\n  const pixelGeometryObject = {}\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n\n    pixelGeometryObject[key] = createPixelGeometryFromXYArrays(\n      { x: x[i], y: y[i] },\n      sectionContext,\n      renderSettings,\n      geometryType,\n      needsScaling\n    )\n  }\n\n  return pixelGeometryObject\n}\n","export default {\n  cross: [\n    [-0.5, -1], [0.5, -1], [0.5, -0.5], [1, -0.5], [1, 0.5], [0.5, 0.5], [0.5, 1], [-0.5, 1], [-0.5, 0.5], [-1, 0.5], [-1, -0.5], [-0.5, -0.5], [-0.5, -1], [-0.5, -1]\n  ],\n  'cross-sharp': [\n    [0, -1], [0.2, -0.2], [1, 0], [0.2, 0.2], [0, 1], [-0.2, 0.2], [-1, 0], [-0.2, -0.2], [0, -1]\n  ],\n  diamond: [\n    [0, -1], [1, 0], [0, 1], [-1, 0], [0, -1], [0, -1]\n  ],\n  'triangle-up': [\n    [0, -1], [1, 1], [-1, 1], [0, -1], [0, -1]\n  ],\n  'triangle-down': [\n    [1, -1], [0, 1], [-1, -1], [1, -1], [1, -1]\n  ],\n  'triangle-right': [\n    [-1, -1], [1, 0], [-1, 1], [-1, -1], [-1, -1]\n  ],\n  'triangle-left': [\n    [1, -1], [-1, 0], [1, 1], [1, -1], [1, -1]\n  ],\n  star4: [\n    [0, 0.71], [1, 1], [0.71, 0], [1, -1], [0, -0.71], [-1, -1], [-0.71, 0], [-1, 1], [0, 0.71], [0, 0.71]\n  ],\n  star5: [\n    [0, 0.5], [0.6, 0.8], [0.5, 0.1], [1, -0.3], [0.3, -0.4], [0, -1], [-0.3, -0.4], [-1, -0.3], [-0.5, 0.1], [-0.6, 0.8], [0, 0.5], [0, 0.5]\n  ],\n  star: [\n    [0, 0.5], [0.6, 0.8], [0.5, 0.1], [1, -0.3], [0.3, -0.4], [0, -1], [-0.3, -0.4], [-1, -0.3], [-0.5, 0.1], [-0.6, 0.8], [0, 0.5], [0, 0.5]\n  ],\n  star6: [\n    [0, 0.58], [0.5, 1], [0.43, 0.29], [1, 0], [0.43, -0.29], [0.5, -1], [0, -0.58], [-0.5, -1], [-0.43, -0.29], [-1, 0], [-0.43, 0.29], [-0.5, 1], [0, 0.58]\n  ],\n  star8: [\n    [0, 0.54], [0.41, 1], [0.38, 0.38], [1, 0.41], [0.54, 0], [1, -0.41], [0.38, -0.38], [0.41, -1], [0, -0.54], [-0.41, -1], [-0.38, -0.38], [-1, -0.41], [-0.54, 0], [-1, 0.41], [-0.38, 0.38], [-0.41, 1], [0, 0.54]\n  ],\n  pentagon: [\n    [-1, -0.24], [0, -1], [1, -0.24], [0.62, 1], [-0.62, 1], [-1, -0.24], [-1, -0.24]\n  ],\n  hexagon: [\n    [-1, 0], [-0.57, -1], [0.57, -1], [1, 0], [0.57, 1], [-0.57, 1], [-1, 0], [-1, 0]\n  ],\n  heptagon: [\n    [-1, 0.29], [-0.8, -0.6], [0, -1], [0.8, -0.6], [1, 0.29], [0.45, 1], [-0.45, 1], [-1, 0.29], [-1, 0.29]\n  ],\n  septagon: [\n    [-1, 0.29], [-0.8, -0.6], [0, -1], [0.8, -0.6], [1, 0.29], [0.45, 1], [-0.45, 1], [-1, 0.29], [-1, 0.29]\n  ],\n  octagon: [\n    [-1, -0.41], [-0.41, -1], [0.41, -1], [1, -0.41], [1, 0.41], [0.41, 1], [-0.41, 1], [-1, 0.41], [-1, -0.41], [-1, -0.41]\n  ],\n  nonagon: [\n    [0.35, -1], [0.88, -0.55], [1, 0.15], [0.65, 0.76], [0, 1], [-0.65, 0.76], [-1, 0.15], [-0.88, -0.55], [-0.35, -1], [0.35, -1], [0.35, -1]\n  ],\n  decagon: [\n    [-1, 0], [-0.81, -0.62], [-0.31, -1], [0.31, -1], [0.81, -0.62], [1, 0], [0.81, 0.62], [0.31, 1], [-0.31, 1], [-0.81, 0.62], [-1, 0], [-1, 0]\n  ]\n}\n","// https://stackoverflow.com/a/155678/7237112\nexport function representPointAsPolygon (point, { radius }) {\n  const x = point.coordinates[0]\n  const y = point.coordinates[1]\n\n  const circumference = Math.PI * 2 * radius\n  const steps = Math.max(Math.ceil(circumference), 9)\n\n  const polygon = {\n    type: 'Polygon',\n    coordinates: [[]]\n  }\n\n  for (let i = 0; i < steps; i++) {\n    polygon.coordinates[0].push(\n      [\n        x + radius * Math.cos(Math.PI * i / steps * 2 - Math.PI / 2),\n        y + radius * Math.sin(Math.PI * i / steps * 2 - Math.PI / 2)\n      ]\n    )\n  }\n\n  // close polygon\n  polygon.coordinates[0].push(polygon.coordinates[0][0])\n\n  return polygon\n}\n\nexport function representPointsAsPolygons (points, { radiusObject }) {\n  const polygons = {}\n\n  for (const key in points) {\n    polygons[key] = representPointAsPolygon(points[key], { radius: radiusObject[key] })\n  }\n\n  return polygons\n}\n","import createPixelGeometryPoint from '../Point/createPixelGeometry.js'\nimport { createScaledGeometry as createSquareGeometry } from '../Rectangle/createPixelGeometry.js'\nimport geometryAlias from './geometryAlias.js'\nimport { transformGeometry } from '../../../utils/geometryUtils'\nimport { representPointAsPolygon } from '../Point/representPointAsPolygon.js'\n\nexport default function createPixelGeometry (\n  geometryProps,\n  sectionContext,\n  renderSettings\n) {\n  const pointGeometry = createPixelGeometryPoint(\n    geometryProps,\n    sectionContext,\n    renderSettings\n  )\n\n  const symbolGeometry = createSymbolGeometry(pointGeometry, geometryProps)\n\n  return symbolGeometry\n}\n\nexport function createSymbolGeometry (pointGeometry, geometryProps) {\n  const [cx, cy] = pointGeometry.coordinates\n\n  const shape = geometryProps.shape || 'circle'\n  const size = geometryProps.size || 8\n\n  if (shape === 'circle') {\n    return createPoint(cx, cy, size)\n  }\n\n  if (shape === 'square') {\n    return createSquare(cx, cy, size)\n  }\n\n  if (shape in geometryAlias) {\n    const coordinates = [geometryAlias[shape]]\n    const geometry = {\n      type: 'Polygon',\n      coordinates\n    }\n\n    return createSymbolFromGeometry(cx, cy, geometry, size)\n  }\n\n  return createSymbolFromGeometry(cx, cy, shape, size)\n}\n\nfunction createPoint (cx, cy, size) {\n  const radius = size / 2\n  const pointGeometry = {\n    type: 'Point',\n    coordinates: [cx, cy]\n  }\n  return representPointAsPolygon(pointGeometry, { radius })\n}\n\nfunction createSquare (cx, cy, size) {\n  const halfSize = size / 2\n\n  const x1 = cx - halfSize\n  const x2 = cx + halfSize\n  const y1 = cy - halfSize\n  const y2 = cy + halfSize\n\n  return createSquareGeometry({ x1, x2, y1, y2 })\n}\n\nfunction createSymbolFromGeometry (cx, cy, geometry, size) {\n  const halfSize = size / 2\n  const transformation = p => [p[0] * halfSize + cx, p[1] * halfSize + cy]\n\n  return transformGeometry(geometry, transformation)\n}\n","import { createPixelGeometryFromGeometry } from '../utils/createPixelGeometryFromGeometry.js'\n\nexport default function createPixelGeometry (\n  geometryProps,\n  sectionContext,\n  renderSettings\n) {\n  // filter for allowed props; leave any undefined props in place\n  const allowedProps =\n    (({\n      x1 = undefined,\n      y1 = undefined,\n      x2 = undefined,\n      y2 = undefined,\n      independentAxis = undefined\n    }) => ({ x1, y1, x2, y2, independentAxis }))(geometryProps)\n\n  const scaledGeometry = createScaledGeometry(scaleCoordinates(augmentProps(validateProps(normalize(\n    allowedProps,\n    sectionContext\n  ))), sectionContext))\n\n  return createPixelGeometryFromGeometry(\n    scaledGeometry,\n    sectionContext,\n    renderSettings,\n    false\n  )\n}\n\nfunction normalize ({ independentAxis, ...coordinateProps }, sectionContext) {\n  const normalized = Object.entries(coordinateProps).reduce((acc, [k, v]) => {\n    const extracted = typeof v === 'function' ? v(sectionContext) : v\n\n    acc[k] = {\n      type: extracted === undefined ? 'none' : Array.isArray(extracted) ? 'array' : 'singleton',\n      ...(Array.isArray(extracted) && { arrayLength: extracted.length }),\n      value: extracted,\n      scaled: typeof v === 'function'\n    }\n    return acc\n  }, {})\n  normalized.independentAxis = independentAxis && independentAxis.toLowerCase()\n  return normalized\n}\n\nexport function validateProps (normalized) {\n  const { independentAxis, ...coordinateProps } = normalized\n\n  const definedTypes = ['singleton', 'array']\n  const definedProps = Object.entries(coordinateProps)\n    .filter(([k, v]) => definedTypes.includes(v.type))\n    .reduce((acc, [k, v]) => {\n      acc[k] = coordinateProps[k]\n      return acc\n    }, {})\n\n  const definedKeys = Object.keys(definedProps)\n\n  // reject if props do not include x1 and y1\n  const containsx1y1 = ['x1', 'y1'].every(k => definedKeys.includes(k))\n  if (!containsx1y1) { throw new Error('At least x1 and y1 must be provided') }\n\n  // reject if at least x1 or y1 is not an array\n  if (definedProps.x1.type === 'singleton' && definedProps.y1.type === 'singleton') {\n    throw new Error('At least x1 or y1 must be passed an array')\n  }\n\n  // reject if independentAxis does not align with x/y types\n  if (!independentAxis || independentAxis === 'x') {\n    // check that x is the independent variable\n    // reject if x1 is not given an array of at least length 2 - x must not be constant\n    // x1 should also be distinct (for all types) and monotonically increasing for Number/Date types, but no checks will be performed for these\n    if (definedProps.x1.type === 'singleton' || (definedProps.x1.type === 'array' && definedProps.x1.arrayLength < 2)) {\n      throw new Error('x1 must be passed an array of at least length 2 when independentAxis is \"x\" or undefined')\n    }\n    // reject if x1, y1 and x2 are provided but independentAxis is not y\n    if (definedKeys.includes('x2')) {\n      throw new Error('independentAxis must be \"y\" when x1, y1 and x2 are specified')\n    }\n  } else if (independentAxis === 'y') {\n    // check that y is the independent variable\n    // reject if y1 is not given an array of at least length 2 - y must not be constant\n    // y1 should also be distinct (for all types) and monotonically increasing for Number/Date types, but no checks will be performed for these\n    if (definedProps.y1.type === 'singleton' || (definedProps.y1.type === 'array' && definedProps.y1.arrayLength < 2)) {\n      throw new Error('y1 must be passed an array of at least length 2 when independentAxis is \"y\"')\n    }\n    // reject if x1, y1 and y2 are provided but independentAxis is not x\n    if (definedKeys.includes('y2')) {\n      throw new Error('independentAxis must be \"x\" when x1, y1 and y2 are specified')\n    }\n  } else {\n    // reject if defined independentAxis is passed a value other than X or Y\n    throw new Error('independentAxis must be passed \"x\" or \"y\" or left blank')\n  }\n\n  // reject if arrays given are not of equal length\n  const arrayLengths = Object.values(definedProps)\n    .filter(v => v.type === 'array')\n    .map(v => v.value.length)\n\n  const arrayLengthsEqual = arrayLengths.every((val, idx, arr) => val === arr[0])\n  if (!arrayLengthsEqual) { throw new Error('Arrays given must be of equal length') }\n\n  return normalized\n}\n\nexport function augmentProps ({ independentAxis, x1, y1, x2, y2 }) {\n  const indAx = !independentAxis || independentAxis === 'x' ? 'x' : 'y'\n\n  const [indKey, indVal] = indAx === 'x' ? ['x1', x1] : ['y1', y1]\n  const [depKey1, depVal1] = indAx === 'x' ? ['y1', y1] : ['x1', x1]\n  const [depKey2, depVal2] = indAx === 'x' ? ['y2', y2] : ['x2', x2]\n  const length = indVal.arrayLength\n\n  const depVal1Map = {\n    singleton: {\n      value: Array(length).fill(depVal1.value),\n      type: 'array',\n      arrayLength: length\n    },\n    array: depVal1\n  }\n  const depVal2Map = {\n    singleton: {\n      value: Array(length).fill(depVal2.value),\n      type: 'array',\n      arrayLength: length\n    },\n    none: {\n      value: Array(length).fill(0),\n      type: 'array',\n      arrayLength: length\n    },\n    array: depVal2\n  }\n\n  return {\n    independentAxis: indAx,\n    [indKey]: indVal,\n    [depKey1]: depVal1Map[depVal1.type],\n    [depKey2]: depVal2Map[depVal2.type]\n  }\n}\n\nconst scaleMap = { x1: 'scaleX', y1: 'scaleY', x2: 'scaleX', y2: 'scaleY' }\n\nexport function scaleCoordinates ({ independentAxis, ...coordinateProps }, sectionContext) {\n  const scaledProps = Object.entries(coordinateProps).reduce((acc, [k, v]) => {\n    if (v.scaled) {\n      acc[k] = v.value\n    } else {\n      const scale = sectionContext[scaleMap[k]]\n      acc[k] = v.value.map(d => scale(d))\n    }\n    return acc\n  }, {})\n  return { independentAxis, ...scaledProps }\n}\n\nexport function createScaledGeometry ({ x1, y1, x2, y2, independentAxis }) {\n  // polygon outer ring is defined counterclockwise\n\n  let bottomPoints, topPoints\n\n  if (independentAxis === 'x') {\n    bottomPoints = y2.map((y2, i) => [x1[i], y2])\n    topPoints = y1.map((y1, i) => [x1[i], y1]).reverse()\n  } else { // y independent\n    bottomPoints = x2.map((x2, i) => [x2, y1[i]])\n    topPoints = x1.map((x1, i) => [x1, y1[i]]).reverse()\n  }\n\n  const origin = [bottomPoints[0]]\n  const allPoints = [bottomPoints.concat(topPoints, origin)]\n\n  const scaledGeometryArray = { type: 'Polygon', coordinates: allPoints }\n  return scaledGeometryArray\n}\n","import {\n  ensureValidGeometryProps,\n  getInputType,\n  validateXYProps,\n  validateGeometryPropLayer\n} from '../utils/geometryPropTools.js'\n\nimport { validateXYArrays } from '../utils/createPixelGeometryFromXYArrays.js'\nimport propNeedsScaling from '../utils/propNeedsScaling.js'\nimport getKeyArray from '../utils/getKeyArray.js'\n\nexport default function createPixelGeometryObject (\n  geometryProps,\n  keyProp,\n  sectionContext,\n  renderSettings\n) {\n  ensureValidGeometryProps(geometryProps)\n\n  const inputType = getInputType(geometryProps)\n\n  if (inputType === 'xy') {\n    return createPixelGeometryObjectFromCoordinates(\n      geometryProps,\n      keyProp,\n      sectionContext,\n      renderSettings\n    )\n  }\n\n  if (inputType === 'geometry') {\n    return createPixelGeometryObjectFromGeometry(\n      geometryProps,\n      keyProp,\n      sectionContext,\n      renderSettings\n    )\n  }\n}\n\nfunction createPixelGeometryObjectFromCoordinates (\n  { x, y },\n  keyProp,\n  sectionContext,\n  renderSettings\n) {\n  validateXYProps(x, y)\n\n  const xNeedsScaling = propNeedsScaling(x)\n  const yNeedsScaling = propNeedsScaling(y)\n\n  const xScaled = xNeedsScaling\n    ? x\n    : x(sectionContext)\n\n  const yScaled = yNeedsScaling\n    ? y\n    : y(sectionContext)\n\n  const { xArray, yArray } = applyRecyclingIfNecessary(xScaled, yScaled)\n  validateXYArrays(xArray, yArray)\n\n  const keyArray = getKeyArray(keyProp, xArray.length)\n\n  const totalTransformation = sectionContext.getTotalTransformation({ xNeedsScaling, yNeedsScaling })\n\n  return transformXYArraysIntoGeometryObject(xArray, yArray, keyArray, totalTransformation)\n}\n\nfunction applyRecyclingIfNecessary (xScaled, yScaled) {\n  if (xScaled.constructor !== Array && yScaled.constructor !== Array) {\n    throw new Error('Invalid input: cannot recycle all geometry props')\n  }\n\n  return {\n    xArray: xScaled.constructor === Array ? xScaled : recycle(xScaled, yScaled.length),\n    yArray: yScaled.constructor === Array ? yScaled : recycle(yScaled, xScaled.length)\n  }\n}\n\nfunction recycle (value, length) {\n  return new Array(length).fill(value)\n}\n\nfunction transformXYArraysIntoGeometryObject (xArray, yArray, keyArray, transformation) {\n  const geometryObject = {}\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n\n    geometryObject[key] = {\n      type: 'Point',\n      coordinates: transformation([\n        xArray[i],\n        yArray[i]\n      ])\n    }\n  }\n\n  return geometryObject\n}\n\nfunction createPixelGeometryObjectFromGeometry (\n  geometryProps,\n  keyProp,\n  sectionContext,\n  renderSettings\n) {\n  validateGeometryPropLayer(geometryProps.geometry)\n\n  const geometryNeedsScaling = propNeedsScaling(geometryProps.geometry)\n\n  const geometry = geometryNeedsScaling\n    ? geometryProps.geometry\n    : geometryProps.geometry(sectionContext)\n\n  const keyArray = getKeyArray(keyProp, geometry.length)\n\n  const totalTransformation = sectionContext.getTotalTransformation(geometryNeedsScaling)\n\n  return transformGeometryArrayIntoGeometryObject(\n    geometry,\n    keyArray,\n    totalTransformation\n  )\n}\n\nfunction transformGeometryArrayIntoGeometryObject (geometryArray, keyArray, transformation) {\n  const geometryObject = {}\n\n  for (let i = 0; i < keyArray.length; i++) {\n    const key = keyArray[i]\n\n    geometryObject[key] = {\n      type: 'Point',\n      coordinates: transformation(geometryArray[i].coordinates)\n    }\n  }\n\n  return geometryObject\n}\n","export default function (value, length) {\n  return new Array(length).fill(value)\n}\n","import { createPixelGeometryObjectFromGeometry } from '../utils/createPixelGeometryFromGeometry.js'\nimport { createScaledGeometry, ensureValidCombination } from './createPixelGeometry.js'\nimport generateArrayOfLength from '../utils/generateArrayOfLength.js'\nimport { isDefined, isUndefined } from '../../../utils/equals.js'\n\nexport default function createPixelGeometryObject (\n  geometryProps,\n  keyProp,\n  sectionContext,\n  renderSettings\n) {\n  const { scaledCoordinates, length } = scaleCoordinates(geometryProps, sectionContext)\n  const scaledGeometryArray = createScaledGeometryArray(scaledCoordinates, length)\n\n  return createPixelGeometryObjectFromGeometry(\n    scaledGeometryArray,\n    keyProp,\n    sectionContext,\n    renderSettings,\n    false\n  )\n}\n\nfunction scaleCoordinates (coordinateProps, sectionContext) {\n  ensureValidCombination(coordinateProps)\n\n  const coordinatesThatNeedScaling = whichCoordinatesNeedScaling(coordinateProps)\n\n  const nonMissingCoordinates = getMissingCoordinatesFromContext(coordinateProps, sectionContext)\n  const coordinateValues = getCoordinateValues(nonMissingCoordinates, sectionContext)\n\n  const length = getNRectangles(coordinateValues)\n\n  const coordinatesThatArePrimitive = whichCoordinatesArePrimitive(coordinateValues)\n\n  const scaledCoordinates = _scaleCoordinates(\n    coordinateValues,\n    sectionContext,\n    coordinatesThatNeedScaling,\n    coordinatesThatArePrimitive,\n    length\n  )\n\n  return { scaledCoordinates, length }\n}\n\nconst coordinateNames = ['x1', 'x2', 'y1', 'y2']\n\nfunction whichCoordinatesNeedScaling (coordinates) {\n  const coordinatesThatNeedScaling = {}\n\n  for (const coordinateName of coordinateNames) {\n    const coordinateValue = coordinates[coordinateName]\n    coordinatesThatNeedScaling[coordinateName] = isDefined(coordinateValue) && coordinateValue.constructor !== Function\n  }\n\n  return coordinatesThatNeedScaling\n}\n\nfunction getMissingCoordinatesFromContext (coordinates, sectionContext) {\n  const nonMissingCoordinates = {}\n\n  for (const coordinateName of coordinateNames) {\n    const coordinateValue = coordinates[coordinateName]\n    nonMissingCoordinates[coordinateName] = isUndefined(coordinateValue)\n      ? getMissingCoordinateFromContext(coordinateName, sectionContext)\n      : coordinateValue\n  }\n\n  return nonMissingCoordinates\n}\n\nconst coordMap = { x1: 'minX', x2: 'maxX', y1: 'minY', y2: 'maxY' }\n\nfunction getMissingCoordinateFromContext (coordinateName, sectionContext) {\n  return sectionContext.paddedBbox[coordMap[coordinateName]]\n}\n\nfunction getCoordinateValues (nonMissingCoordinates, sectionContext) {\n  const coordinateValues = {}\n\n  for (const coordinateName in nonMissingCoordinates) {\n    const coordinateValue = nonMissingCoordinates[coordinateName]\n    if (coordinateValue.constructor === Function) {\n      coordinateValues[coordinateName] = coordinateValue(sectionContext)\n    } else {\n      coordinateValues[coordinateName] = coordinateValue\n    }\n  }\n\n  return coordinateValues\n}\n\nconst invalidCoordinateError = new Error('RectangleLayer: invalid coordinate specification')\n\nfunction getNRectangles (coordinateValues) {\n  let atLeastOneArray = false\n  let length\n\n  for (const coordinateName in coordinateValues) {\n    const coordinateValue = coordinateValues[coordinateName]\n\n    if (coordinateValue.constructor === Array) {\n      atLeastOneArray = true\n      length = length || coordinateValue.length\n\n      if (length !== coordinateValue.length) throw invalidCoordinateError\n    }\n  }\n\n  if (!atLeastOneArray) throw invalidCoordinateError\n\n  return length\n}\n\nfunction whichCoordinatesArePrimitive (coordinateValues) {\n  const coordinatesThatArePrimitive = {}\n\n  for (const coordinateName in coordinateValues) {\n    const coordinateValue = coordinateValues[coordinateName]\n\n    coordinatesThatArePrimitive[coordinateName] = coordinateValue.constructor !== Array\n  }\n\n  return coordinatesThatArePrimitive\n}\n\nfunction _scaleCoordinates (\n  coordinateValues, scales, coordinatesThatNeedScaling, coordinatesThatArePrimitive, length\n) {\n  const scaledCoordinates = {}\n\n  for (const coordinateName in coordinateValues) {\n    const coordinateValue = coordinateValues[coordinateName]\n    let array\n    const scale = coordinateName.startsWith('x') ? scales.scaleX : scales.scaleY\n\n    if (coordinatesThatArePrimitive[coordinateName]) array = generateArrayOfLength(coordinateValue, length)\n    if (!coordinatesThatArePrimitive[coordinateName]) array = coordinateValue\n\n    scaledCoordinates[coordinateName] = coordinatesThatNeedScaling[coordinateName]\n      ? array.map(scale)\n      : array\n  }\n\n  return scaledCoordinates\n}\n\nfunction createScaledGeometryArray (scaledCoordinates, length) {\n  const scaledGeometryArray = []\n\n  for (let i = 0; i < length; i++) {\n    scaledGeometryArray.push(\n      createScaledGeometry({\n        x1: scaledCoordinates.x1[i],\n        x2: scaledCoordinates.x2[i],\n        y1: scaledCoordinates.y1[i],\n        y2: scaledCoordinates.y2[i]\n      })\n    )\n  }\n\n  return scaledGeometryArray\n}\n","import createPixelGeometryObjectPoint from '../Point/createPixelGeometryObject.js'\nimport { createSymbolGeometry } from './createPixelGeometry.js'\n\nexport default function createPixelGeometryObject (\n  geometryProps,\n  keyProp,\n  sectionContext,\n  renderSettings\n) {\n  const pointGeometryObject = createPixelGeometryObjectPoint(\n    geometryProps,\n    keyProp,\n    sectionContext,\n    renderSettings\n  )\n\n  const symbolGeometryObject = createSymbolGeometryObject(pointGeometryObject, geometryProps)\n\n  return symbolGeometryObject\n}\n\nfunction createSymbolGeometryObject (pointGeometryObject, geometryProps) {\n  const keys = Object.keys(pointGeometryObject)\n\n  const shapeGetter = createPropGetter(geometryProps.shape, keys)\n  const sizeGetter = createPropGetter(geometryProps.size, keys)\n\n  const symbolGeometryObject = {}\n\n  for (const key in pointGeometryObject) {\n    const shape = shapeGetter(key)\n    const size = sizeGetter(key)\n\n    symbolGeometryObject[key] = createSymbolGeometry(pointGeometryObject[key], { shape, size })\n  }\n\n  return symbolGeometryObject\n}\n\nfunction createPropGetter (prop, keys) {\n  if (prop === undefined) return () => {}\n\n  if (prop.constructor === Function) {\n    return prop\n  }\n\n  const propObject = createPropObject(prop, keys)\n  return key => propObject[key]\n}\n\nfunction createPropObject (prop, keys) {\n  const length = keys.length\n  const propObject = {}\n\n  if (prop.constructor === Array) {\n    validatePropArrayLength(prop, length)\n\n    for (let i = 0; i < length; i++) {\n      const key = keys[i]\n      propObject[key] = prop[i]\n    }\n  } else {\n    for (let i = 0; i < length; i++) {\n      const key = keys[i]\n      propObject[key] = prop\n    }\n  }\n\n  return propObject\n}\n\nfunction validatePropArrayLength (prop, length) {\n  if (prop.length !== length) {\n    throw new Error('If provided as Arrays, all positioning props must be the same length')\n  }\n}\n","import createPixelGeometryPoint from '../Point/createPixelGeometry.js'\nimport createPixelGeometryRectangle from '../Rectangle/createPixelGeometry.js'\nimport createPixelGeometryPolygon from '../Polygon/createPixelGeometry.js'\nimport createPixelGeometryLine from '../Line/createPixelGeometry.js'\nimport createPixelGeometrySymbol from '../Symbol/createPixelGeometry.js'\nimport createPixelGeometryArea from '../Area/createPixelGeometry.js'\n\nimport createPixelGeometryObjectPoint from '../Point/createPixelGeometryObject.js'\nimport createPixelGeometryObjectRectangle from '../Rectangle/createPixelGeometryObject.js'\nimport createPixelGeometryObjectPolygon from '../Polygon/createPixelGeometryObject.js'\nimport createPixelGeometryObjectLine from '../Line/createPixelGeometryObject.js'\nimport createPixelGeometryObjectSymbol from '../Symbol/createPixelGeometryObject.js'\nimport createPixelGeometryObjectArea from '../Area/createPixelGeometryObject.js'\n\nexport const markPixelGeometryFuncs = new Proxy({\n  Point: createPixelGeometryPoint,\n  Rectangle: createPixelGeometryRectangle,\n  Polygon: createPixelGeometryPolygon,\n  Line: createPixelGeometryLine,\n  Label: createPixelGeometryPoint,\n  Symbol: createPixelGeometrySymbol,\n  Area: createPixelGeometryArea\n}, {\n  get: (obj, prop) => {\n    if (prop in obj) {\n      return obj[prop]\n    } else {\n      throw new Error(`Invalid Mark type: '${prop}'`)\n    }\n  }\n})\n\nexport const layerPixelGeometryFuncs = new Proxy({\n  Point: createPixelGeometryObjectPoint,\n  Rectangle: createPixelGeometryObjectRectangle,\n  Polygon: createPixelGeometryObjectPolygon,\n  Line: createPixelGeometryObjectLine,\n  Label: createPixelGeometryObjectPoint,\n  Symbol: createPixelGeometryObjectSymbol,\n  Area: createPixelGeometryObjectArea\n}, {\n  get: (obj, prop) => {\n    if (prop in obj) {\n      return obj[prop]\n    } else {\n      throw new Error(`Invalid Layer type: '${prop}'`)\n    }\n  }\n})\n","import {\n  ensureValidGeometryProps,\n  getInputType\n} from '../utils/geometryPropTools.js'\n\nimport propNeedsScaling from '../utils/propNeedsScaling.js'\nimport { createPixelGeometryFromXYArrays } from '../utils/createPixelGeometryFromXYArrays.js'\nimport { createPixelGeometryFromGeometry } from '../utils/createPixelGeometryFromGeometry.js'\n\nexport default function createPixelGeometry (\n  geometryProps,\n  sectionContext,\n  renderSettings\n) {\n  ensureValidGeometryProps(geometryProps)\n  const inputType = getInputType(geometryProps)\n\n  if (inputType === 'xy') {\n    const xNeedsScaling = propNeedsScaling(geometryProps.x)\n    const yNeedsScaling = propNeedsScaling(geometryProps.y)\n\n    const x = xNeedsScaling\n      ? geometryProps.x\n      : geometryProps.x(sectionContext)\n\n    const y = yNeedsScaling\n      ? geometryProps.y\n      : geometryProps.y(sectionContext)\n\n    return createPixelGeometryFromXYArrays(\n      { x, y },\n      sectionContext,\n      renderSettings,\n      'Polygon',\n      { xNeedsScaling, yNeedsScaling }\n    )\n  }\n\n  if (inputType === 'geometry') {\n    const needsScaling = propNeedsScaling(geometryProps.geometry)\n\n    const geometry = needsScaling\n      ? geometryProps.geometry\n      : geometryProps.geometry(sectionContext)\n\n    return createPixelGeometryFromGeometry(\n      geometry,\n      sectionContext,\n      renderSettings,\n      needsScaling\n    )\n  }\n}\n","import {\n  ensureValidGeometryProps,\n  getInputType\n} from '../utils/geometryPropTools.js'\n\nimport propNeedsScaling from '../utils/propNeedsScaling.js'\nimport { createPixelGeometryFromXYArrays } from '../utils/createPixelGeometryFromXYArrays.js'\nimport { createPixelGeometryFromGeometry } from '../utils/createPixelGeometryFromGeometry.js'\n\nexport default function createPixelGeometry (\n  geometryProps,\n  sectionContext,\n  renderSettings\n) {\n  ensureValidGeometryProps(geometryProps)\n  const inputType = getInputType(geometryProps)\n\n  if (inputType === 'xy') {\n    const xNeedsScaling = propNeedsScaling(geometryProps.x)\n    const yNeedsScaling = propNeedsScaling(geometryProps.y)\n\n    const x = xNeedsScaling\n      ? geometryProps.x\n      : geometryProps.x(sectionContext)\n\n    const y = yNeedsScaling\n      ? geometryProps.y\n      : geometryProps.y(sectionContext)\n\n    return createPixelGeometryFromXYArrays(\n      { x, y },\n      sectionContext,\n      renderSettings,\n      'LineString',\n      { xNeedsScaling, yNeedsScaling }\n    )\n  }\n\n  if (inputType === 'geometry') {\n    const needsScaling = propNeedsScaling(geometryProps.geometry)\n\n    const geometry = needsScaling\n      ? geometryProps.geometry\n      : geometryProps.geometry(sectionContext)\n\n    return createPixelGeometryFromGeometry(\n      geometry,\n      sectionContext,\n      renderSettings,\n      needsScaling\n    )\n  }\n}\n","import {\n  ensureValidGeometryProps,\n  getInputType\n} from '../utils/geometryPropTools.js'\n\nimport propNeedsScaling from '../utils/propNeedsScaling.js'\nimport { createPixelGeometryObjectFromXYArrays } from '../utils/createPixelGeometryFromXYArrays.js'\nimport { createPixelGeometryObjectFromGeometry } from '../utils/createPixelGeometryFromGeometry.js'\n\nexport default function createPixelGeometry (\n  geometryProps,\n  keyProp,\n  sectionContext,\n  renderSettings\n) {\n  ensureValidGeometryProps(geometryProps)\n  const inputType = getInputType(geometryProps)\n\n  if (inputType === 'xy') {\n    const xNeedsScaling = propNeedsScaling(geometryProps.x)\n    const yNeedsScaling = propNeedsScaling(geometryProps.y)\n\n    const x = xNeedsScaling\n      ? geometryProps.x\n      : geometryProps.x(sectionContext)\n\n    const y = yNeedsScaling\n      ? geometryProps.y\n      : geometryProps.y(sectionContext)\n\n    return createPixelGeometryObjectFromXYArrays(\n      { x, y },\n      keyProp,\n      sectionContext,\n      renderSettings,\n      'Polygon',\n      { xNeedsScaling, yNeedsScaling }\n    )\n  }\n\n  if (inputType === 'geometry') {\n    const needsScaling = propNeedsScaling(geometryProps.geometry)\n\n    const geometry = needsScaling\n      ? geometryProps.geometry\n      : geometryProps.geometry(sectionContext)\n\n    return createPixelGeometryObjectFromGeometry(\n      geometry,\n      keyProp,\n      sectionContext,\n      renderSettings,\n      needsScaling\n    )\n  }\n}\n","import {\n  ensureValidGeometryProps,\n  getInputType\n} from '../utils/geometryPropTools.js'\n\nimport propNeedsScaling from '../utils/propNeedsScaling.js'\nimport { createPixelGeometryObjectFromXYArrays } from '../utils/createPixelGeometryFromXYArrays.js'\nimport { createPixelGeometryObjectFromGeometry } from '../utils/createPixelGeometryFromGeometry.js'\n\nexport default function createPixelGeometry (\n  geometryProps,\n  keyProp,\n  sectionContext,\n  renderSettings\n) {\n  ensureValidGeometryProps(geometryProps)\n  const inputType = getInputType(geometryProps)\n\n  if (inputType === 'xy') {\n    const xNeedsScaling = propNeedsScaling(geometryProps.x)\n    const yNeedsScaling = propNeedsScaling(geometryProps.y)\n\n    const x = xNeedsScaling\n      ? geometryProps.x\n      : geometryProps.x(sectionContext)\n\n    const y = yNeedsScaling\n      ? geometryProps.y\n      : geometryProps.y(sectionContext)\n\n    return createPixelGeometryObjectFromXYArrays(\n      { x, y },\n      keyProp,\n      sectionContext,\n      renderSettings,\n      'LineString',\n      { xNeedsScaling, yNeedsScaling }\n    )\n  }\n\n  if (inputType === 'geometry') {\n    const needsScaling = propNeedsScaling(geometryProps.geometry)\n\n    const geometry = needsScaling\n      ? geometryProps.geometry\n      : geometryProps.geometry(sectionContext)\n\n    return createPixelGeometryObjectFromGeometry(\n      geometry,\n      keyProp,\n      sectionContext,\n      renderSettings,\n      needsScaling\n    )\n  }\n}\n","import { createPixelGeometryObjectFromGeometry } from '../utils/createPixelGeometryFromGeometry.js'\nimport { validateProps, augmentProps, scaleCoordinates, createScaledGeometry } from './createPixelGeometry.js'\n\nexport default function createPixelGeometryObject (\n  geometryProps,\n  keyProp,\n  sectionContext,\n  renderSettings\n) {\n  // filter for allowed props; leave any undefined props in place\n  const allowedProps =\n    (({\n      x1 = undefined,\n      y1 = undefined,\n      x2 = undefined,\n      y2 = undefined,\n      independentAxis = undefined\n    }) => ({ x1, y1, x2, y2, independentAxis }))(geometryProps)\n\n  const { numAreas, independentAxis, ...augmentedAreas } =\n    augmentAreas(\n      validateAreas(\n        normalizeAreas(\n          allowedProps,\n          sectionContext)))\n\n  // pivot data for use with area mark methods\n  const areasAsArray = [...Array(numAreas).keys()].map(areaIndex =>\n    Object.entries(augmentedAreas).reduce((acc, [k, v]) => {\n      const isNestedArray = v.type === 'array of arrays'\n\n      acc[k] = {\n        type: isNestedArray ? 'array' : 'none',\n        value: isNestedArray ? v.value[areaIndex] : v.value,\n        ...(isNestedArray && { arrayLength: v.value[areaIndex].length }),\n        scaled: v.scaled\n      }\n\n      acc.independentAxis = independentAxis\n      return acc\n    }, {})\n  )\n\n  const scaledGeometryArray = areasAsArray.map(area => {\n    return createScaledGeometry(\n      scaleCoordinates(\n        augmentProps(\n          validateProps(\n            area)),\n        sectionContext))\n  })\n\n  return createPixelGeometryObjectFromGeometry(\n    scaledGeometryArray,\n    keyProp,\n    sectionContext,\n    renderSettings,\n    false\n  )\n}\n\nfunction normalizeAreas ({ independentAxis, ...coordinateProps }, sectionContext) {\n  const normalized = Object.entries(coordinateProps).reduce((acc, [k, v]) => {\n    const extracted = typeof v === 'function' ? v(sectionContext) : v\n\n    const isUndefined = (x) => typeof x === 'undefined'\n    const isSingleton = (x) => !isUndefined(x) && !Array.isArray(x)\n    const isNestedArray = (xs) => !isUndefined(xs) && !isSingleton(xs) && xs.every(x => Array.isArray(x))\n\n    acc[k] = {\n      type: isUndefined(extracted)\n        ? 'none'\n        : isSingleton(extracted)\n          ? 'singleton'\n          : isNestedArray(extracted)\n            ? 'array of arrays'\n            : 'array',\n      ...(isNestedArray(extracted) && { numAreas: extracted.length }),\n      value: extracted,\n      scaled: typeof v === 'function'\n    }\n    return acc\n  }, {})\n\n  normalized.independentAxis = independentAxis && independentAxis.toLowerCase()\n  return normalized\n}\n\nfunction validateAreas (normalizedAreas) {\n  const { independentAxis, ...coordinateProps } = normalizedAreas\n  const { x1, x2, y1, y2 } = coordinateProps\n\n  // reject singletons\n  Object.values(coordinateProps).forEach(v => {\n    if (v.type === 'singleton') {\n      throw new Error('Props passed to the AreaLayer must be either an array or an array of arrays')\n    }\n  })\n\n  const indAx = !independentAxis || independentAxis === 'x' ? 'x' : 'y'\n  const [depKey1, depVal1] = indAx === 'x' ? ['y1', y1] : ['x1', x1]\n  const [depKey2, depVal2] = indAx === 'x' ? ['y2', y2] : ['x2', x2]\n\n  // only x1 can be broadcasted when x is the independent variable\n  // only y1 can be broadcasted when y is the independent variable\n  if (depVal1.type === 'array' || depVal2.type === 'array') {\n    throw new Error(`${depKey1} and ${depKey2} must be passed an array of arrays when independentAxis is \"${indAx}\"`)\n  }\n\n  // reject if number of areas per prop are not equal\n  const numAreasAll = Object.values(coordinateProps)\n    .filter(v => v.type === 'array of arrays')\n    .map(v => v.numAreas)\n\n  const numAreasEqual = numAreasAll.every((val, idx, arr) => val === arr[0])\n  if (!numAreasEqual) {\n    throw new Error('Number of areas declared per prop must be equal')\n  }\n\n  const numAreas = numAreasAll[0]\n  return { numAreas, independentAxis, ...normalizedAreas }\n}\n\nfunction augmentAreas ({ numAreas, independentAxis, x1, y1, x2, y2 }) {\n  const indAx = !independentAxis || independentAxis === 'x' ? 'x' : 'y'\n  const [indKey1, indVal1] = indAx === 'x' ? ['x1', x1] : ['y1', y1]\n  const [indKey2, indVal2] = indAx === 'x' ? ['x2', x2] : ['y2', y2]\n  const [depKey1, depVal1] = indAx === 'x' ? ['y1', y1] : ['x1', x1]\n  const [depKey2, depVal2] = indAx === 'x' ? ['y2', y2] : ['x2', x2]\n\n  const indValMap = {\n    array: {\n      value: Array(numAreas).fill(indVal1.value),\n      type: 'array of arrays',\n      numAreas: numAreas,\n      scaled: indVal1.scaled\n    },\n    'array of arrays': indVal1\n  }\n\n  return {\n    numAreas: numAreas,\n    independentAxis: indAx,\n    [indKey1]: indValMap[indVal1.type],\n    [indKey2]: indVal2,\n    [depKey1]: depVal1,\n    [depKey2]: depVal2\n  }\n}\n","import { pointDistance } from '../../../utils/geometryUtils'\n\nexport function representLineAsPolygon (lineString, { strokeWidth }) {\n  const lineCoordinates = lineString.coordinates\n\n  if (lineString.type === 'LineString') {\n    const outerRing = createOuterRing(lineCoordinates, strokeWidth)\n\n    return {\n      type: 'Polygon',\n      coordinates: [outerRing]\n    }\n  }\n\n  if (lineString.type === 'MultiLineString') {\n    const polygons = []\n\n    for (let i = 0; i < lineCoordinates.length; i++) {\n      polygons.push(\n        [createOuterRing(lineCoordinates[i], strokeWidth)]\n      )\n    }\n\n    return {\n      type: 'MultiPolygon',\n      coordinates: polygons\n    }\n  }\n}\n\nfunction createOuterRing (lineCoordinates, strokeWidth) {\n  const length = lineCoordinates.length\n  const lastIndex = length - 1\n  const distance = strokeWidth / 2\n\n  const coordinatesBottom = new Array(length)\n  const coordinatesTop = new Array(length)\n\n  for (let i = 0; i < length; i++) {\n    if (i === 0) {\n      const [bottomPoint, topPoint] = getCornerPointsStart(lineCoordinates, distance)\n      coordinatesBottom[0] = bottomPoint\n      coordinatesTop[lastIndex] = topPoint\n    }\n\n    if (i === lastIndex) {\n      const [bottomPoint, topPoint] = getCornerPointsEnd(lineCoordinates, distance)\n      coordinatesBottom[lastIndex] = bottomPoint\n      coordinatesTop[0] = topPoint\n    }\n\n    if (i > 0 && i < lastIndex) {\n      const [bottomPoint, topPoint] = getCornerPointsIndex(lineCoordinates, i, distance)\n      coordinatesBottom[i] = bottomPoint\n      coordinatesTop[lastIndex - i] = topPoint\n    }\n  }\n\n  const outerRing = coordinatesBottom.concat(coordinatesTop)\n\n  // Close ring if necessary\n  if (ringIsNotClosed(outerRing)) {\n    outerRing.push(outerRing[0])\n  }\n\n  return outerRing\n}\n\nexport function representLinesAsPolygons (lines, { strokeWidthObject }) {\n  const polygons = {}\n\n  for (const key in lines) {\n    polygons[key] = representLineAsPolygon(lines[key], { strokeWidth: strokeWidthObject[key] })\n  }\n\n  return polygons\n}\n\nfunction getCornerPointsStart (lineCoordinates, distance) {\n  const segment = getNextSegment(0, lineCoordinates)\n  const cornerPoint = segment[0]\n\n  return getParallelPoints(segment, cornerPoint, distance)\n}\n\nfunction getCornerPointsEnd (lineCoordinates, distance) {\n  const segment = getPreviousSegment(lineCoordinates.length - 1, lineCoordinates)\n  const cornerPoint = segment[1]\n\n  return getParallelPoints(segment, cornerPoint, distance)\n}\n\nfunction getCornerPointsIndex (lineCoordinates, index, distance) {\n  const previousSegment = getPreviousSegment(index, lineCoordinates)\n  const nextSegment = getNextSegment(index, lineCoordinates)\n\n  const previousUnitVector = getUnitVector(previousSegment)\n  const nextUnitVector = getUnitVector(nextSegment)\n\n  if (previousUnitVector[0] === nextUnitVector[0] && previousUnitVector[1] === nextUnitVector[1]) {\n    // unit vectors are the same, we can just use the existing line point\n\n    const currentCornerPerpendicularPoints = getParallelPoints(\n      previousSegment, previousSegment[1], distance\n    )\n\n    return currentCornerPerpendicularPoints\n  } else {\n    const previousCornerPerpendicularPoints = getParallelPoints(\n      previousSegment, previousSegment[0], distance\n    )\n    const nextCornerPerpendicularPoints = getParallelPoints(\n      nextSegment, nextSegment[1], distance\n    )\n\n    const bottomPoint = findIntersection(\n      previousCornerPerpendicularPoints[0],\n      previousUnitVector,\n      nextCornerPerpendicularPoints[0],\n      nextUnitVector\n    )\n    const topPoint = findIntersection(\n      previousCornerPerpendicularPoints[1],\n      previousUnitVector,\n      nextCornerPerpendicularPoints[1],\n      nextUnitVector\n    )\n\n    return [bottomPoint, topPoint]\n  }\n}\n\nconst getPreviousSegment = (i, coordinates) => [coordinates[i - 1], coordinates[i]]\nconst getNextSegment = (i, coordinates) => [coordinates[i], coordinates[i + 1]]\n\nfunction getUnitVector (segment) {\n  const [a, b] = segment\n\n  const magnitude = pointDistance(a, b)\n  const dx = b[0] - a[0]\n  const dy = b[1] - a[1]\n\n  return [dx / magnitude, dy / magnitude]\n}\n\nconst getNormalVector = vector => [-vector[1], vector[0]]\n\nfunction movePoint (point, unitVector, distance) {\n  return [\n    point[0] + unitVector[0] * distance,\n    point[1] + unitVector[1] * distance\n  ]\n}\n\nexport function getParallelPoints (segment, point, distance) {\n  const unitVector = getUnitVector(segment)\n  const normalVector = getNormalVector(unitVector)\n\n  const bottomPoint = movePoint(point, normalVector, distance)\n  const topPoint = movePoint(point, normalVector, -distance)\n\n  return [bottomPoint, topPoint]\n}\n\nfunction findIntersection (point1, vector1, point2, vector2) {\n  const lambda1 = findLambda(point1, vector1, point2, vector2)\n  return [\n    point1[0] + (vector1[0] * lambda1),\n    point1[1] + (vector1[1] * lambda1)\n  ]\n}\n\nexport function findLambda (p1, v1, p2, v2) {\n  const deltaX = p1[0] - p2[0]\n  const deltaY = p1[1] - p2[1]\n  const v1x = v1[0]\n  const v2x = v2[0]\n  const v1y = v1[1]\n  const v2y = v2[1]\n\n  const lambda1 = ((v2x * deltaY) - (deltaX * v2y)) /\n    ((v1x * v2y) - (v2x * v1y))\n  return lambda1\n}\n\nfunction ringIsNotClosed (ring) {\n  const first = ring[0]\n  const last = ring[ring.length - 1]\n\n  const closed = first[0] === last[0] && first[1] === last[1]\n\n  return !closed\n}\n","import { representPointAsPolygon, representPointsAsPolygons } from '../Point/representPointAsPolygon.js'\nimport { representLineAsPolygon, representLinesAsPolygons } from '../Line/representLineAsPolygon.js'\n\nexport const markRepresentAsPolygonFuncs = {\n  Point: representPointAsPolygon,\n  Line: representLineAsPolygon\n}\n\nexport const layerRepresentAsPolygonFuncs = {\n  Point: representPointsAsPolygons,\n  Line: representLinesAsPolygons\n}\n","export { identity as linear } from '../internal/index.mjs';\n\n/*\nAdapted from https://github.com/mattdesl\nDistributed under MIT License https://github.com/mattdesl/eases/blob/master/LICENSE.md\n*/\nfunction backInOut(t) {\n    const s = 1.70158 * 1.525;\n    if ((t *= 2) < 1)\n        return 0.5 * (t * t * ((s + 1) * t - s));\n    return 0.5 * ((t -= 2) * t * ((s + 1) * t + s) + 2);\n}\nfunction backIn(t) {\n    const s = 1.70158;\n    return t * t * ((s + 1) * t - s);\n}\nfunction backOut(t) {\n    const s = 1.70158;\n    return --t * t * ((s + 1) * t + s) + 1;\n}\nfunction bounceOut(t) {\n    const a = 4.0 / 11.0;\n    const b = 8.0 / 11.0;\n    const c = 9.0 / 10.0;\n    const ca = 4356.0 / 361.0;\n    const cb = 35442.0 / 1805.0;\n    const cc = 16061.0 / 1805.0;\n    const t2 = t * t;\n    return t < a\n        ? 7.5625 * t2\n        : t < b\n            ? 9.075 * t2 - 9.9 * t + 3.4\n            : t < c\n                ? ca * t2 - cb * t + cc\n                : 10.8 * t * t - 20.52 * t + 10.72;\n}\nfunction bounceInOut(t) {\n    return t < 0.5\n        ? 0.5 * (1.0 - bounceOut(1.0 - t * 2.0))\n        : 0.5 * bounceOut(t * 2.0 - 1.0) + 0.5;\n}\nfunction bounceIn(t) {\n    return 1.0 - bounceOut(1.0 - t);\n}\nfunction circInOut(t) {\n    if ((t *= 2) < 1)\n        return -0.5 * (Math.sqrt(1 - t * t) - 1);\n    return 0.5 * (Math.sqrt(1 - (t -= 2) * t) + 1);\n}\nfunction circIn(t) {\n    return 1.0 - Math.sqrt(1.0 - t * t);\n}\nfunction circOut(t) {\n    return Math.sqrt(1 - --t * t);\n}\nfunction cubicInOut(t) {\n    return t < 0.5 ? 4.0 * t * t * t : 0.5 * Math.pow(2.0 * t - 2.0, 3.0) + 1.0;\n}\nfunction cubicIn(t) {\n    return t * t * t;\n}\nfunction cubicOut(t) {\n    const f = t - 1.0;\n    return f * f * f + 1.0;\n}\nfunction elasticInOut(t) {\n    return t < 0.5\n        ? 0.5 *\n            Math.sin(((+13.0 * Math.PI) / 2) * 2.0 * t) *\n            Math.pow(2.0, 10.0 * (2.0 * t - 1.0))\n        : 0.5 *\n            Math.sin(((-13.0 * Math.PI) / 2) * (2.0 * t - 1.0 + 1.0)) *\n            Math.pow(2.0, -10.0 * (2.0 * t - 1.0)) +\n            1.0;\n}\nfunction elasticIn(t) {\n    return Math.sin((13.0 * t * Math.PI) / 2) * Math.pow(2.0, 10.0 * (t - 1.0));\n}\nfunction elasticOut(t) {\n    return (Math.sin((-13.0 * (t + 1.0) * Math.PI) / 2) * Math.pow(2.0, -10.0 * t) + 1.0);\n}\nfunction expoInOut(t) {\n    return t === 0.0 || t === 1.0\n        ? t\n        : t < 0.5\n            ? +0.5 * Math.pow(2.0, 20.0 * t - 10.0)\n            : -0.5 * Math.pow(2.0, 10.0 - t * 20.0) + 1.0;\n}\nfunction expoIn(t) {\n    return t === 0.0 ? t : Math.pow(2.0, 10.0 * (t - 1.0));\n}\nfunction expoOut(t) {\n    return t === 1.0 ? t : 1.0 - Math.pow(2.0, -10.0 * t);\n}\nfunction quadInOut(t) {\n    t /= 0.5;\n    if (t < 1)\n        return 0.5 * t * t;\n    t--;\n    return -0.5 * (t * (t - 2) - 1);\n}\nfunction quadIn(t) {\n    return t * t;\n}\nfunction quadOut(t) {\n    return -t * (t - 2.0);\n}\nfunction quartInOut(t) {\n    return t < 0.5\n        ? +8.0 * Math.pow(t, 4.0)\n        : -8.0 * Math.pow(t - 1.0, 4.0) + 1.0;\n}\nfunction quartIn(t) {\n    return Math.pow(t, 4.0);\n}\nfunction quartOut(t) {\n    return Math.pow(t - 1.0, 3.0) * (1.0 - t) + 1.0;\n}\nfunction quintInOut(t) {\n    if ((t *= 2) < 1)\n        return 0.5 * t * t * t * t * t;\n    return 0.5 * ((t -= 2) * t * t * t * t + 2);\n}\nfunction quintIn(t) {\n    return t * t * t * t * t;\n}\nfunction quintOut(t) {\n    return --t * t * t * t * t + 1;\n}\nfunction sineInOut(t) {\n    return -0.5 * (Math.cos(Math.PI * t) - 1);\n}\nfunction sineIn(t) {\n    const v = Math.cos(t * Math.PI * 0.5);\n    if (Math.abs(v) < 1e-14)\n        return 1;\n    else\n        return 1 - v;\n}\nfunction sineOut(t) {\n    return Math.sin((t * Math.PI) / 2);\n}\n\nexport { backIn, backInOut, backOut, bounceIn, bounceInOut, bounceOut, circIn, circInOut, circOut, cubicIn, cubicInOut, cubicOut, elasticIn, elasticInOut, elasticOut, expoIn, expoInOut, expoOut, quadIn, quadInOut, quadOut, quartIn, quartInOut, quartOut, quintIn, quintInOut, quintOut, sineIn, sineInOut, sineOut };\n","import { writable } from '../store/index.mjs';\nimport { now, loop, assign } from '../internal/index.mjs';\nimport { linear } from '../easing/index.mjs';\n\nfunction is_date(obj) {\n    return Object.prototype.toString.call(obj) === '[object Date]';\n}\n\nfunction tick_spring(ctx, last_value, current_value, target_value) {\n    if (typeof current_value === 'number' || is_date(current_value)) {\n        // @ts-ignore\n        const delta = target_value - current_value;\n        // @ts-ignore\n        const velocity = (current_value - last_value) / (ctx.dt || 1 / 60); // guard div by 0\n        const spring = ctx.opts.stiffness * delta;\n        const damper = ctx.opts.damping * velocity;\n        const acceleration = (spring - damper) * ctx.inv_mass;\n        const d = (velocity + acceleration) * ctx.dt;\n        if (Math.abs(d) < ctx.opts.precision && Math.abs(delta) < ctx.opts.precision) {\n            return target_value; // settled\n        }\n        else {\n            ctx.settled = false; // signal loop to keep ticking\n            // @ts-ignore\n            return is_date(current_value) ?\n                new Date(current_value.getTime() + d) : current_value + d;\n        }\n    }\n    else if (Array.isArray(current_value)) {\n        // @ts-ignore\n        return current_value.map((_, i) => tick_spring(ctx, last_value[i], current_value[i], target_value[i]));\n    }\n    else if (typeof current_value === 'object') {\n        const next_value = {};\n        for (const k in current_value) {\n            // @ts-ignore\n            next_value[k] = tick_spring(ctx, last_value[k], current_value[k], target_value[k]);\n        }\n        // @ts-ignore\n        return next_value;\n    }\n    else {\n        throw new Error(`Cannot spring ${typeof current_value} values`);\n    }\n}\nfunction spring(value, opts = {}) {\n    const store = writable(value);\n    const { stiffness = 0.15, damping = 0.8, precision = 0.01 } = opts;\n    let last_time;\n    let task;\n    let current_token;\n    let last_value = value;\n    let target_value = value;\n    let inv_mass = 1;\n    let inv_mass_recovery_rate = 0;\n    let cancel_task = false;\n    function set(new_value, opts = {}) {\n        target_value = new_value;\n        const token = current_token = {};\n        if (value == null || opts.hard || (spring.stiffness >= 1 && spring.damping >= 1)) {\n            cancel_task = true; // cancel any running animation\n            last_time = now();\n            last_value = new_value;\n            store.set(value = target_value);\n            return Promise.resolve();\n        }\n        else if (opts.soft) {\n            const rate = opts.soft === true ? .5 : +opts.soft;\n            inv_mass_recovery_rate = 1 / (rate * 60);\n            inv_mass = 0; // infinite mass, unaffected by spring forces\n        }\n        if (!task) {\n            last_time = now();\n            cancel_task = false;\n            task = loop(now => {\n                if (cancel_task) {\n                    cancel_task = false;\n                    task = null;\n                    return false;\n                }\n                inv_mass = Math.min(inv_mass + inv_mass_recovery_rate, 1);\n                const ctx = {\n                    inv_mass,\n                    opts: spring,\n                    settled: true,\n                    dt: (now - last_time) * 60 / 1000\n                };\n                const next_value = tick_spring(ctx, last_value, value, target_value);\n                last_time = now;\n                last_value = value;\n                store.set(value = next_value);\n                if (ctx.settled) {\n                    task = null;\n                }\n                return !ctx.settled;\n            });\n        }\n        return new Promise(fulfil => {\n            task.promise.then(() => {\n                if (token === current_token)\n                    fulfil();\n            });\n        });\n    }\n    const spring = {\n        set,\n        update: (fn, opts) => set(fn(target_value, value), opts),\n        subscribe: store.subscribe,\n        stiffness,\n        damping,\n        precision\n    };\n    return spring;\n}\n\nfunction get_interpolator(a, b) {\n    if (a === b || a !== a)\n        return () => a;\n    const type = typeof a;\n    if (type !== typeof b || Array.isArray(a) !== Array.isArray(b)) {\n        throw new Error('Cannot interpolate values of different type');\n    }\n    if (Array.isArray(a)) {\n        const arr = b.map((bi, i) => {\n            return get_interpolator(a[i], bi);\n        });\n        return t => arr.map(fn => fn(t));\n    }\n    if (type === 'object') {\n        if (!a || !b)\n            throw new Error('Object cannot be null');\n        if (is_date(a) && is_date(b)) {\n            a = a.getTime();\n            b = b.getTime();\n            const delta = b - a;\n            return t => new Date(a + t * delta);\n        }\n        const keys = Object.keys(b);\n        const interpolators = {};\n        keys.forEach(key => {\n            interpolators[key] = get_interpolator(a[key], b[key]);\n        });\n        return t => {\n            const result = {};\n            keys.forEach(key => {\n                result[key] = interpolators[key](t);\n            });\n            return result;\n        };\n    }\n    if (type === 'number') {\n        const delta = b - a;\n        return t => a + t * delta;\n    }\n    throw new Error(`Cannot interpolate ${type} values`);\n}\nfunction tweened(value, defaults = {}) {\n    const store = writable(value);\n    let task;\n    let target_value = value;\n    function set(new_value, opts) {\n        if (value == null) {\n            store.set(value = new_value);\n            return Promise.resolve();\n        }\n        target_value = new_value;\n        let previous_task = task;\n        let started = false;\n        let { delay = 0, duration = 400, easing = linear, interpolate = get_interpolator } = assign(assign({}, defaults), opts);\n        if (duration === 0) {\n            if (previous_task) {\n                previous_task.abort();\n                previous_task = null;\n            }\n            store.set(value = target_value);\n            return Promise.resolve();\n        }\n        const start = now() + delay;\n        let fn;\n        task = loop(now => {\n            if (now < start)\n                return true;\n            if (!started) {\n                fn = interpolate(value, new_value);\n                if (typeof duration === 'function')\n                    duration = duration(value, new_value);\n                started = true;\n            }\n            if (previous_task) {\n                previous_task.abort();\n                previous_task = null;\n            }\n            const elapsed = now - start;\n            if (elapsed > duration) {\n                store.set(value = new_value);\n                return false;\n            }\n            // @ts-ignore\n            store.set(value = fn(easing(elapsed / duration)));\n            return true;\n        });\n        return task.promise;\n    }\n    return {\n        set,\n        update: (fn, opts) => set(fn(target_value, value), opts),\n        subscribe: store.subscribe\n    };\n}\n\nexport { spring, tweened };\n","import { writable } from 'svelte/store'\nimport { tweened } from 'svelte/motion'\nimport { cubicOut } from 'svelte/easing'\nimport { interpolate } from 'd3-interpolate'\nimport { transitionGeometry } from '../../../../utils/geometryUtils/index.js'\nimport { isUndefined } from '../../../../utils/equals.js'\n\n/**\n * Returns either a Svelte store, or a Svelte 'tweened' store,\n * depending on whether the user specified transition options.\n * The way the tweened store is set up depends on the type of aesthetic,\n * and which options the user has chosen.\n *\n * @param {String} aestheticName The name of the aesthetic a store is created for.\n * @param {*} aestheticValue The initial value of the store.\n * @param {Number|Object} transitionOptions A number indicating the transtion duration, or an Object\n * with aesthetic names as keys, and Numbers OR Objects as values.\n * @returns {writable|tweened}\n */\nexport function createTransitionable (aestheticName, aestheticValue, transitionOptions) {\n  if (isUndefined(transitionOptions) || isUndefined(aestheticValue)) {\n    return writable(aestheticValue)\n  }\n\n  if (transitionOptions.constructor === Number) {\n    const options = createOptionsFromDuration(aestheticName, transitionOptions)\n    return tweened(aestheticValue, options)\n  }\n\n  if (transitionOptions.constructor === Object) {\n    if (!(aestheticName in transitionOptions)) return writable(aestheticValue)\n\n    const aestheticTransition = transitionOptions[aestheticName]\n\n    if (aestheticTransition && aestheticTransition.constructor === Number) {\n      const options = createOptionsFromDuration(aestheticName, aestheticTransition)\n      return tweened(aestheticValue, options)\n    }\n\n    if (aestheticTransition && aestheticTransition.constructor === Object) {\n      const options = createOptionsFromOptions(aestheticName, aestheticTransition)\n      return tweened(aestheticValue, options)\n    }\n  }\n\n  throw new Error(`Invalid transition for ${aestheticName}`)\n}\n\nfunction createOptionsFromDuration (aestheticName, duration) {\n  if (aestheticName === 'geometry') {\n    return { duration, easing: cubicOut, interpolate: transitionGeometry }\n  } else {\n    return { duration, easing: cubicOut, interpolate }\n  }\n}\n\nexport function transitionsEqual (a, b) {\n  if (a === undefined || b === undefined) return a === b\n\n  if (a.constructor !== Object) return a === b\n\n  return transitionObjectsEqual(a, b)\n}\n\nfunction transitionObjectsEqual (a, b) {\n  if (b.constructor !== Object) return false\n\n  if (numberOfKeys(a) !== numberOfKeys(b)) return false\n\n  for (const aesthetic in a) {\n    const aestheticA = a[aesthetic]\n    const aestheticB = b[aesthetic]\n    if (aestheticA.constructor !== Object) return aestheticA === aestheticB\n    if (!aestheticTransitionObjectsEqual(aestheticA, aestheticB)) return false\n  }\n\n  return true\n}\n\nfunction aestheticTransitionObjectsEqual (a, b) {\n  if (b.constructor !== Object) return false\n\n  if (numberOfKeys(a) !== numberOfKeys(b)) return false\n\n  for (const key in a) {\n    if (a[key] !== b[key]) return false\n  }\n\n  return true\n}\n\nfunction numberOfKeys (obj) {\n  return Object.keys(obj).length\n}\n\nfunction createOptionsFromOptions (aestheticName, transitionOptions) {\n  if (aestheticName === 'geometry') {\n    const defaultOptions = {\n      delay: 0,\n      duration: 400,\n      easing: cubicOut,\n      interpolate: transitionGeometry\n    }\n\n    return Object.assign(defaultOptions, transitionOptions)\n  } else {\n    const defaultOptions = {\n      delay: 0,\n      duration: 400,\n      easing: cubicOut,\n      interpolate\n    }\n\n    return Object.assign(defaultOptions, transitionOptions)\n  }\n}\n","import { writable } from 'svelte/store'\nimport { tweened } from 'svelte/motion'\nimport { cubicOut } from 'svelte/easing'\nimport { interpolate } from 'd3-interpolate'\nimport { transitionGeometries } from '../../../../utils/geometryUtils/index.js'\nimport { isUndefined } from '../../../../utils/equals.js'\n\n/**\n * Like createTransitionable, returns either a Svelte store, or a Svelte 'tweened' store,\n * depending on whether the user specified transition options.\n * But instead of for a single Mark, the store is created for an entire layer.\n *\n * @param {String} aestheticName The name of the aesthetic a store is created for.\n * @param {*} aestheticValue The initial value of the store.\n * @param {Number|Object} transitionOptions A number indicating the transtion duration, or an Object\n * with aesthetic names as keys, and Numbers OR Objects as values.\n * @returns {writable|tweened}\n */\nexport function createTransitionableLayer (aestheticName, aestheticValue, transitionOptions) {\n  if (isUndefined(transitionOptions) || isUndefined(aestheticValue)) {\n    return writable(aestheticValue)\n  }\n\n  if (transitionOptions.constructor === Number) {\n    const options = createOptionsFromDuration(aestheticName, transitionOptions)\n    return tweened(aestheticValue, options)\n  }\n\n  if (transitionOptions.constructor === Object) {\n    if (!(aestheticName in transitionOptions)) return writable(aestheticValue)\n\n    const aestheticTransition = transitionOptions[aestheticName]\n\n    if (aestheticTransition && aestheticTransition.constructor === Number) {\n      const options = createOptionsFromDuration(aestheticName, aestheticTransition)\n      return tweened(aestheticValue, options)\n    }\n\n    if (aestheticTransition && aestheticTransition.constructor === Object) {\n      const options = createOptionsFromOptions(aestheticName, aestheticTransition)\n      return tweened(aestheticValue, options)\n    }\n  }\n\n  throw new Error(`Invalid transition for ${aestheticName}`)\n}\n\nfunction createOptionsFromDuration (aestheticName, duration) {\n  if (aestheticName === 'geometry') {\n    return { duration, easing: cubicOut, interpolate: transitionGeometries }\n  } else {\n    return { duration, easing: cubicOut, interpolate: interpolateLayer }\n  }\n}\n\nfunction createOptionsFromOptions (aestheticName, transitionOptions) {\n  if (aestheticName === 'geometry') {\n    return Object.assign({ interpolate: transitionGeometries }, transitionOptions)\n  } else {\n    return Object.assign({ interpolate: interpolateLayer }, transitionOptions)\n  }\n}\n\nfunction interpolateLayer (a, b) {\n  const aWithoutObsoleteKeys = {}\n\n  for (const key in a) {\n    if (key in b) {\n      aWithoutObsoleteKeys[key] = a[key]\n    }\n  }\n\n  return interpolate(aWithoutObsoleteKeys, b)\n}\n","export default function (...args) {\n  for (const arg of args) {\n    if (arg !== undefined) return true\n  }\n\n  return false\n}\n","export default function parseRenderSettings (renderSettings) {\n  const defaultRenderSettings = {\n    simplify: false,\n    simplificationThreshold: 1,\n    interpolate: true,\n    interpolationThreshold: 5,\n    decimals: 2\n  }\n\n  const parsedRenderSettings = Object.assign(defaultRenderSettings, renderSettings)\n\n  return parsedRenderSettings\n}\n","import { geoPath } from 'd3-geo'\n\nconst geoPathGenerator = geoPath()\n\nexport default function (geometry) {\n  return geoPathGenerator(geometry)\n}\n","export default function textAnchorPoint (anchorPoint) {\n// For setting the anchor point on a SVG text element\n  switch (anchorPoint) {\n    case 'center':\n      return { textAnchor: 'middle', dominantBaseline: 'middle' }\n    case 'lb':\n      return { textAnchor: 'start', dominantBaseline: 'alphabetic' }\n    case 'lt':\n      return { textAnchor: 'start', dominantBaseline: 'hanging' }\n    case 'rt':\n      return { textAnchor: 'end', dominantBaseline: 'hanging' }\n    case 'rb':\n      return { textAnchor: 'end', dominantBaseline: 'alphabetic' }\n    case 'l':\n      return { textAnchor: 'start', dominantBaseline: 'middle' }\n    case 'r':\n      return { textAnchor: 'end', dominantBaseline: 'middle' }\n    case 'b':\n      return { textAnchor: 'middle', dominantBaseline: 'alphabetic' }\n    case 't':\n      return { textAnchor: 'middle', dominantBaseline: 'hanging' }\n    default: {\n      return { textAnchor: 'middle', dominantBaseline: 'middle' }\n    }\n  }\n}\n","<script context=\"module\">\n  let idCounter = 0\n  function getId () {\n    return 'mark' + idCounter++\n  }\n</script>\n\n<script>\n  import { beforeUpdate, afterUpdate, onMount, onDestroy } from 'svelte'\n\n  import * as detectIt from '../../../utils/detect.js'\n  import * as GraphicContext from '../../Core/Graphic/GraphicContext'\n  import * as SectionContext from '../../Core/Section/SectionContext'\n  import * as InteractionManagerContext from '../../Core/Section/InteractionManagerContext'\n  \n  import validateAesthetics from './validateAesthetics.js'\n  import { markPixelGeometryFuncs } from './pixelGeometryFuncs.js'\n  import { markRepresentAsPolygonFuncs } from './representAsPolygonFuncs.js'\n  import { createDataNecessaryForIndexingMark } from './createDataNecessaryForIndexing.js'\n  import { createTransitionable, transitionsEqual } from '../utils/transitions'\n  import any from '../utils/any.js'\n  import parseRenderSettings from '../utils/parseRenderSettings.js'\n\n  import generatePath from '../utils/generatePath.js'\n\n  import textAnchorPoint from '../utils/textAnchorPoint.js'\n\n  const markId = getId()\n\n  let initPhase = true\n  const initDone = () => !initPhase\n\n  export let type\n  \n  // Aesthetics: positioning\n  export let x = undefined\n  export let y = undefined\n  export let x1 = undefined\n  export let x2 = undefined\n  export let y1 = undefined\n  export let y2 = undefined\n  export let geometry = undefined\n  export let shape = undefined\n  export let size = undefined\n  export let independentAxis = undefined\n\n  // Aesthetics: other\n  export let radius = undefined\n  export let fill = undefined\n  export let stroke = undefined\n  export let strokeWidth = undefined\n  export let strokeOpacity = undefined\n  export let fillOpacity = undefined\n  export let opacity = undefined\n\n  // Aesthetics: text-specific\n  export let text = undefined\n  export let fontFamily = undefined\n  export let fontSize = undefined\n  export let fontWeight = undefined\n  export let rotation = undefined\n  export let anchorPoint = undefined\n\n  // Transitions\n  export let transition = undefined\n\n  // Mouse interactions\n  export let onClick = undefined\n  export let onMousedown = undefined\n  export let onMouseup = undefined\n  export let onMouseover = undefined\n  export let onMouseout = undefined\n  export let onMousedrag = undefined\n\n  // Touch interactions\n  export let onTouchdown = undefined\n  export let onTouchup = undefined\n  export let onTouchover = undefined\n  export let onTouchout = undefined\n  export let onTouchdrag = undefined\n\n  // Select interactions\n  export let onSelect = undefined\n  export let onDeselect = undefined\n\n  // Other\n  export let renderSettings = undefined\n  export let blockReindexing = false\n  export let _asPolygon = true\n  export let clip = true\n\n  // Validate aesthetics every time input changes\n  let aesthetics = validateAesthetics(\n    type,\n    {\n      x,\n      y,\n      x1,\n      x2,\n      y1,\n      y2,\n      geometry,\n      shape,\n      size,\n      independentAxis,\n      radius,\n      fill,\n      stroke,\n      strokeWidth,\n      strokeOpacity,\n      fillOpacity,\n      opacity,\n      text,\n      fontFamily,\n      fontSize,\n      fontWeight,\n      rotation,\n      anchorPoint\n    }\n  )\n  $: {\n    if (initDone()) {\n      aesthetics = validateAesthetics(\n        type,\n        {\n          x,\n          y,\n          x1,\n          x2,\n          y1,\n          y2,\n          geometry,\n          shape,\n          size,\n          independentAxis,\n          radius,\n          fill,\n          stroke,\n          strokeWidth,\n          strokeOpacity,\n          fillOpacity,\n          opacity,\n          text,\n          fontFamily,\n          fontSize,\n          fontWeight,\n          rotation,\n          anchorPoint\n        }\n      )\n    }\n  }\n\n  // Create 'positioning' aesthetics object\n  let positioningAesthetics = { x, y, x1, x2, y1, y2, geometry, shape, size, independentAxis }\n  $: {\n    if (initDone()) {\n      positioningAesthetics = { x, y, x1, x2, y1, y2, geometry, shape, size, independentAxis }\n    }\n  }\n\n  // Select appriopriate geometry conversion functions\n  let createPixelGeometry = markPixelGeometryFuncs[type]\n  let representAsPolygon = markRepresentAsPolygonFuncs[type]\n\n  $: {\n    if (initDone()) {\n      createPixelGeometry = markPixelGeometryFuncs[type]\n      representAsPolygon = markRepresentAsPolygonFuncs[type]\n    }\n  }\n\n  // Check if mark must be represented as polygon\n  let asPolygon = _asPolygon === true && markRepresentAsPolygonFuncs[type] !== undefined\n  $: {\n    if (initDone()) {\n      asPolygon = _asPolygon === true && markRepresentAsPolygonFuncs[type] !== undefined\n    }\n  }\n\n  // Contexts\n  const graphicContext = GraphicContext.subscribe()\n  const sectionContext = SectionContext.subscribe()\n  const interactionManagerContext = InteractionManagerContext.subscribe()\n\n  // Initiate geometries\n  let pixelGeometry\n  let screenGeometry\n\n  updatePixelGeometry()\n  updateScreenGeometry()\n\n  // Initiate transitionables\n  let tr_screenGeometry = createTransitionable('geometry', screenGeometry, transition)\n  let tr_radius = createTransitionable('radius', aesthetics.radius, transition)\n  let tr_fill = createTransitionable('fill', aesthetics.fill, transition)\n  let tr_stroke = createTransitionable('stroke', aesthetics.stroke, transition)\n  let tr_strokeWidth = createTransitionable('strokeWidth', aesthetics.strokeWidth, transition)\n  let tr_fillOpacity = createTransitionable('fillOpacity', aesthetics.fillOpacity, transition)\n  let tr_strokeOpacity = createTransitionable('strokeOpacity', aesthetics.strokeOpacity, transition)\n  let tr_opacity = createTransitionable('opacity', aesthetics.opacity, transition)\n  \n  // text transtitionables\n  let tr_fontSize = createTransitionable('fontSize', aesthetics.fontSize, transition)\n  let tr_fontWeight = createTransitionable('fontWeight', aesthetics.fontWeight, transition)\n  let tr_rotation = createTransitionable('rotation', aesthetics.rotation, transition)\n\n  // Handle changes to geometry\n  $: {\n    if (initDone()) {\n      scheduleUpdatePixelGeometry(\n        positioningAesthetics,\n        $sectionContext,\n        parseRenderSettings(renderSettings)\n      )\n    }\n  }\n\n  // Handle radius and strokeWidth changes if Point or Line is not represented as Polygon\n  $: {\n    if (initDone()) {\n      if (!asPolygon) {\n        tr_radius.set(aesthetics.radius)\n        tr_strokeWidth.set(aesthetics.strokeWidth)\n      }\n\n      if (asPolygon) {\n        scheduleUpdateScreenGeometry()\n      }\n    }\n  }\n\n  // Handle other changes\n  $: { if (initDone()) tr_fill.set(aesthetics.fill) }\n  $: { if (initDone()) tr_stroke.set(aesthetics.stroke) }\n  $: { if (initDone()) tr_strokeWidth.set(aesthetics.strokeWidth) }\n  $: { if (initDone()) tr_fillOpacity.set(aesthetics.fillOpacity) }\n  $: { if (initDone()) tr_strokeOpacity.set(aesthetics.strokeOpacity) }\n  $: { if (initDone()) tr_opacity.set(aesthetics.opacity) }\n  \n  // text aes changes\n  $: { if (initDone()) tr_fontSize.set(aesthetics.fontSize) }\n  $: { if (initDone()) tr_fontWeight.set(aesthetics.fontWeight) }\n  $: { if (initDone()) tr_rotation.set(aesthetics.rotation) }\n\n  // non-transitionable aesthetics that need additional calculation\n  let rotateTransform = `rotate(${$tr_rotation}, ${$tr_screenGeometry.coordinates[0]}, ${$tr_screenGeometry.coordinates[1]})`\n  let parsedTextAnchorPoint = textAnchorPoint(aesthetics.anchorPoint)\n\n  let previousTransition\n\n  let pixelGeometryRecalculationNecessary = false\n  let screenGeometryRecalculationNecessary = false\n\n  $: {\n    if (initDone()) {\n      if (pixelGeometryRecalculationNecessary) updatePixelGeometry()\n\n      if (screenGeometryRecalculationNecessary) {\n        updateScreenGeometry()\n        tr_screenGeometry.set(screenGeometry)\n  \n        updateInteractionManagerIfNecessary()\n      }\n\n      pixelGeometryRecalculationNecessary = false\n      screenGeometryRecalculationNecessary = false\n    }\n  }\n\n  $: { if (initDone()) rotateTransform = `rotate(${$tr_rotation}, ${$tr_screenGeometry.coordinates[0]}, ${$tr_screenGeometry.coordinates[1]})` };\n  $: { if (initDone()) parsedTextAnchorPoint = textAnchorPoint(aesthetics.anchorPoint) }\n\n  // Update transitionables when transition settings change\n  beforeUpdate(() => {\n    if (!transitionsEqual(previousTransition, transition)) {\n      previousTransition = transition\n      tr_screenGeometry = createTransitionable('geometry', $tr_screenGeometry, transition)\n      tr_radius = createTransitionable('radius', $tr_radius, transition)\n      tr_fill = createTransitionable('fill', $tr_fill, transition)\n      tr_stroke = createTransitionable('stroke', $tr_stroke, transition)\n      tr_strokeWidth = createTransitionable('strokeWidth', $tr_strokeWidth, transition)\n      tr_fillOpacity = createTransitionable('fillOpacity', $tr_fillOpacity, transition)\n      tr_strokeOpacity = createTransitionable('strokeOpacity', $tr_strokeOpacity, transition)\n      tr_opacity = createTransitionable('opacity', $tr_opacity, transition)\n\n      tr_fontSize = createTransitionable('fontSize', $tr_fontSize, transition)\n      tr_fontWeight = createTransitionable('fontWeight', $tr_fontWeight, transition)\n      tr_rotation = createTransitionable('rotation', $tr_rotation, transition)\n    }\n  })\n\n  afterUpdate(() => {\n    initPhase = false\n  })\n\n  // Interactivity\n  $: isInteractiveMouse = detectIt.primaryInput === 'mouse' && any(onClick, onMousedown, onMouseup, onMouseover, onMouseout, onMousedrag)\n  $: isInteractiveTouch = detectIt.primaryInput === 'touch' && any(onTouchdown, onTouchup, onTouchover, onTouchout, onTouchdrag)\n\n  $: isSelectable = onSelect !== undefined || onDeselect !== undefined\n\n  onMount(() => {\n    updateInteractionManagerIfNecessary()\n  })\n\n  onDestroy(() => {\n    removeMarkFromSpatialIndexIfNecessary()\n  })\n\n  // Helpers\n  function scheduleUpdatePixelGeometry () {\n    pixelGeometryRecalculationNecessary = true\n    screenGeometryRecalculationNecessary = true\n  }\n\n  function updatePixelGeometry () {\n    pixelGeometry = createPixelGeometry(\n      positioningAesthetics,\n      $sectionContext,\n      parseRenderSettings(renderSettings)\n    )\n  }\n\n  function scheduleUpdateScreenGeometry () {\n    screenGeometryRecalculationNecessary = true\n  }\n\n  function updateScreenGeometry () {\n    if (asPolygon) {\n      screenGeometry = representAsPolygon(pixelGeometry, aesthetics)\n    } else {\n      screenGeometry = pixelGeometry\n    }\n  }\n\n  function updateInteractionManagerIfNecessary () {\n    if (initPhase || !(blockReindexing || $sectionContext.blockReindexing)) {\n      removeMarkFromSpatialIndexIfNecessary()\n\n      if (isInteractiveMouse) {\n        const markInterface = $interactionManagerContext.mouse().marks()\n\n        markInterface.loadMark(type, createDataNecessaryForIndexing())\n\n        if (onClick) markInterface.addMarkInteraction('click', markId, onClick)\n        if (onMousedown) markInterface.addMarkInteraction('mousedown', markId, onMousedown)\n        if (onMouseup) markInterface.addMarkInteraction('mouseup', markId, onMouseup)\n        if (onMouseout) markInterface.addMarkInteraction('mouseout', markId, onMouseout)\n        if (onMouseover) markInterface.addMarkInteraction('mouseover', markId, onMouseover)\n        if (onMousedrag) markInterface.addMarkInteraction('mousedrag', markId, onMousedrag)\n      }\n\n      if (isInteractiveTouch) {\n        const markInterface = $interactionManagerContext.touch().marks()\n\n        markInterface.loadMark(type, createDataNecessaryForIndexing())\n\n        if (onTouchdown) markInterface.addMarkInteraction('touchdown', markId, onTouchdown)\n        if (onTouchup) markInterface.addMarkInteraction('touchup', markId, onTouchup)\n        if (onTouchover) markInterface.addMarkInteraction('touchover', markId, onTouchover)\n        if (onTouchout) markInterface.addMarkInteraction('touchout', markId, onTouchout)\n        if (onTouchdrag) markInterface.addMarkInteraction('touchdrag', markId, onTouchdrag)\n      }\n    }\n\n    removeMarkFromSelectIfNecessary()\n  \n    if (isSelectable) {\n      const selectManager = $interactionManagerContext.select()\n\n      selectManager.loadMark(\n        type, createDataNecessaryForIndexing(), { onSelect, onDeselect }\n      )\n    }\n  }\n\n  function removeMarkFromSpatialIndexIfNecessary () {\n    if (detectIt.primaryInput === 'mouse') {\n      const markMouseInterface = $interactionManagerContext.mouse().marks()\n\n      if (markMouseInterface.markIsLoaded(markId)) {\n        markMouseInterface.removeAllMarkInteractions(markId)\n        markMouseInterface.removeMark(markId)\n      }\n    }\n\n    if (detectIt.primaryInput === 'touch') {\n      const markTouchInterface = $interactionManagerContext.touch().marks()\n\n      if (markTouchInterface.markIsLoaded(markId)) {\n        markTouchInterface.removeAllMarkInteractions(markId)\n        markTouchInterface.removeMark(markId)\n      }\n    }\n  }\n\n  function removeMarkFromSelectIfNecessary () {\n    const selectManager = $interactionManagerContext.select()\n\n    if (selectManager.markIsLoaded(markId)) {\n      selectManager.removeMark(markId)\n    }\n  }\n\n  function createDataNecessaryForIndexing () {\n    return createDataNecessaryForIndexingMark(\n      type, markId, { screenGeometry, pixelGeometry }, aesthetics\n    )\n  }\n\n  $: renderPolygon = !['Point', 'Line', 'Label'].includes(type) || asPolygon\n  $: renderCircle = type === 'Point' && !asPolygon\n  $: renderLine = type === 'Line' && !asPolygon\n  $: renderLabel = type === 'Label'\n</script>\n\n{#if $graphicContext.output() === 'svg'}\n\n  {#if renderPolygon}\n\n    <path\n      clip-path={clip ? `url(#clip-${$sectionContext.sectionId})` : 'none'}\n      class={type.toLowerCase()}\n      d={generatePath($tr_screenGeometry)}\n      fill={$tr_fill}\n      stroke={$tr_stroke}\n      stroke-width={$tr_strokeWidth}\n      fill-opacity={$tr_fillOpacity}\n      stroke-opacity={$tr_strokeOpacity}\n      opacity={$tr_opacity}\n    />\n\n  {/if}\n\n  {#if renderCircle}\n\n    <circle\n      clip-path={clip ? `url(#clip-${$sectionContext.sectionId})` : 'none'}\n      class=\"point\"\n      cx={$tr_screenGeometry.coordinates[0]}\n      cy={$tr_screenGeometry.coordinates[1]}\n      r={$tr_radius}\n      fill={$tr_fill}\n      stroke={$tr_stroke}\n      stroke-width={$tr_strokeWidth}\n      fill-opacity={$tr_fillOpacity}\n      stroke-opacity={$tr_strokeOpacity}\n      opacity={$tr_opacity}\n    />\n\n  {/if}\n\n  {#if renderLine}\n\n    <path\n      clip-path={clip ? `url(#clip-${$sectionContext.sectionId})` : 'none'}\n      class=\"line\"\n      d={generatePath($tr_screenGeometry)}\n      fill=\"none\"\n      stroke-width={$tr_strokeWidth}\n      stroke={$tr_stroke}\n      opacity={$tr_opacity}\n    />\n  \n  {/if}\n\n  {#if renderLabel}\n\n    <g \n      clip-path={clip ? `url(#clip-${$sectionContext.sectionId})` : 'none'}\n      class=\"label-group\" \n    >\n\n      <text\n        class=\"label\"\n        x={$tr_screenGeometry.coordinates[0]}\n        y={$tr_screenGeometry.coordinates[1]}\n        fill={$tr_fill}\n        stroke={$tr_stroke}\n        stroke-width={$tr_strokeWidth}\n        fill-opacity={$tr_fillOpacity}\n        stroke-opacity={$tr_strokeOpacity}\n        opacity={$tr_opacity}\n        transform={rotateTransform}\n        font-family={fontFamily}\n        font-size={$tr_fontSize + 'px'}\n        font-weight={$tr_fontWeight}\n        text-anchor={parsedTextAnchorPoint.textAnchor}\n        dominant-baseline={parsedTextAnchorPoint.dominantBaseline}\n      >\n        {aesthetics.text}\n      </text>\n\n    </g>\n\n  {/if}\n\n{/if}\n","export function createDataNecessaryForIndexingMark (type, markId, geometryTypes, aesthetics) {\n  const markData = { markId }\n  let attributes\n\n  if (type === 'Point') {\n    attributes = {\n      pixelGeometry: geometryTypes.pixelGeometry,\n      radius: aesthetics.radius\n    }\n  }\n\n  if (type === 'Label') {\n    attributes = {\n      pixelGeometry: geometryTypes.pixelGeometry,\n      radius: aesthetics.fontSize\n    }\n  }\n\n  if (type === 'Rectangle') {\n    attributes = { screenGeometry: geometryTypes.screenGeometry }\n  }\n\n  if (type === 'Polygon') {\n    attributes = { screenGeometry: geometryTypes.screenGeometry }\n  }\n\n  if (type === 'Line') {\n    attributes = {\n      pixelGeometry: geometryTypes.pixelGeometry,\n      strokeWidth: aesthetics.strokeWidth\n    }\n  }\n\n  if (type === 'Symbol') {\n    attributes = { screenGeometry: geometryTypes.screenGeometry }\n  }\n\n  if (type === 'Area') {\n    attributes = { screenGeometry: geometryTypes.screenGeometry }\n  }\n\n  markData.attributes = attributes\n\n  return markData\n}\n\nexport function createDataNecessaryForIndexingLayer (\n  type, layerId, keyArray, geometryObjects, aestheticsObjects\n) {\n  const layerData = { layerId, keyArray }\n  let layerAttributes\n\n  if (type === 'Point') {\n    layerAttributes = {\n      pixelGeometryObject: geometryObjects.pixelGeometryObject,\n      radiusObject: aestheticsObjects.radiusObject\n    }\n  }\n\n  if (type === 'Label') {\n    layerAttributes = {\n      pixelGeometryObject: geometryObjects.pixelGeometryObject,\n      radiusObject: aestheticsObjects.fontSizeObject\n    }\n  }\n\n  if (type === 'Rectangle') {\n    layerAttributes = { screenGeometryObject: geometryObjects.screenGeometryObject }\n  }\n\n  if (type === 'Polygon') {\n    layerAttributes = { screenGeometryObject: geometryObjects.screenGeometryObject }\n  }\n\n  if (type === 'Line') {\n    layerAttributes = {\n      pixelGeometryObject: geometryObjects.pixelGeometryObject,\n      strokeWidthObject: aestheticsObjects.strokeWidthObject\n    }\n  }\n\n  if (type === 'Symbol') {\n    layerAttributes = { screenGeometryObject: geometryObjects.screenGeometryObject }\n  }\n\n  if (type === 'Area') {\n    layerAttributes = { screenGeometryObject: geometryObjects.screenGeometryObject }\n  }\n\n  layerData.layerAttributes = layerAttributes\n\n  return layerData\n}\n","<script>\n  import Mark from '../Mark/Mark.svelte'\n\n  // Aesthetics: positioning\n  export let x = undefined\n  export let y = undefined\n  export let geometry = undefined\n\n  // Aesthetics: other\n  export let radius = undefined\n  export let fill = undefined\n  export let stroke = undefined\n  export let strokeWidth = undefined\n  export let strokeOpacity = undefined\n  export let fillOpacity = undefined\n  export let opacity = undefined\n\n  // Transitions\n  export let transition = undefined\n\n  // Mouse interactions\n  export let onClick = undefined\n  export let onMousedown = undefined\n  export let onMouseup = undefined\n  export let onMouseover = undefined\n  export let onMouseout = undefined\n  export let onMousedrag = undefined\n\n  // Touch interactions\n  export let onTouchdown = undefined\n  export let onTouchup = undefined\n  export let onTouchover = undefined\n  export let onTouchout = undefined\n  export let onTouchdrag = undefined\n\n  // Select interactions\n  export let onSelect = undefined\n  export let onDeselect = undefined\n\n  // Other\n  export let renderSettings = undefined\n  export let blockReindexing = false\n  export let clip = true\n</script>\n\n<Mark\n  type=\"Point\"\n  {x} {y} {geometry} {radius} \n  {fill} {stroke} {strokeWidth}\n  {strokeOpacity} {fillOpacity} {opacity}\n  {transition} \n  {onClick} {onMousedown} {onMouseup} {onMouseover} {onMouseout} {onMousedrag}\n  {onTouchdown} {onTouchup} {onTouchover} {onTouchout} {onTouchdrag}\n  {onSelect} {onDeselect}\n  {renderSettings} {blockReindexing} {clip}\n  _asPolygon={false}\n/>","<script>\n  import Mark from '../Mark/Mark.svelte'\n\n  // Aesthetics: positioning\n  export let x = undefined\n  export let y = undefined\n  export let geometry = undefined\n\n  // Aesthetics: other\n  export let strokeWidth = undefined\n  export let stroke = undefined\n  export let opacity = undefined\n\n  // Transitions\n  export let transition = undefined\n\n  // Mouse interactions\n  export let onClick = undefined\n  export let onMousedown = undefined\n  export let onMouseup = undefined\n  export let onMouseover = undefined\n  export let onMouseout = undefined\n  export let onMousedrag = undefined\n\n  // Touch interactions\n  export let onTouchdown = undefined\n  export let onTouchup = undefined\n  export let onTouchover = undefined\n  export let onTouchout = undefined\n  export let onTouchdrag = undefined\n\n  // Select interactions\n  export let onSelect = undefined\n  export let onDeselect = undefined\n\n  // Other\n  export let renderSettings = undefined\n  export let blockReindexing = false\n  export let clip = true\n</script>\n\n<Mark \n  type=\"Line\"\n  {x} {y} {geometry}\n  {strokeWidth} {stroke} {opacity}\n  {transition} \n  {onClick} {onMousedown} {onMouseup} {onMouseover} {onMouseout} {onMousedrag}\n  {onTouchdown} {onTouchup} {onTouchover} {onTouchout} {onTouchdrag}\n  {onSelect} {onDeselect}\n  {renderSettings} {blockReindexing} {clip}\n  _asPolygon={false}\n/>","<script>\n  import Mark from '../Mark/Mark.svelte'\n\n  // Aesthetics: positioning\n  export let x = undefined\n  export let y = undefined\n  export let geometry = undefined\n\n  // Aesthetics: other\n  export let fill = undefined\n  export let stroke = undefined\n  export let strokeWidth = undefined\n  export let strokeOpacity = undefined\n  export let fillOpacity = undefined\n  export let opacity = undefined\n  export let text = undefined\n  export let fontFamily = undefined\n  export let fontSize = undefined\n  export let fontWeight = undefined\n  export let rotation = undefined\n  export let anchorPoint = undefined\n\n  // Transitions\n  export let transition = undefined\n\n  // Mouse interactions\n  export let onClick = undefined\n  export let onMousedown = undefined\n  export let onMouseup = undefined\n  export let onMouseover = undefined\n  export let onMouseout = undefined\n  export let onMousedrag = undefined\n\n  // Touch interactions\n  export let onTouchdown = undefined\n  export let onTouchup = undefined\n  export let onTouchover = undefined\n  export let onTouchout = undefined\n  export let onTouchdrag = undefined\n\n  // Select interactions\n  export let onSelect = undefined\n  export let onDeselect = undefined\n\n  // Other\n  export let renderSettings = undefined\n  export let blockReindexing = false\n  export let clip = true\n</script>\n\n<Mark\n  type=\"Label\"\n  {x} {y} {geometry} \n  {fill} {stroke} {strokeWidth}\n  {strokeOpacity} {fillOpacity} {opacity}\n  {text}\n  {fontFamily} {fontSize} {fontWeight} {rotation} {anchorPoint}\n  {transition} \n  {onClick} {onMousedown} {onMouseup} {onMouseover} {onMouseout} {onMousedrag}\n  {onTouchdown} {onTouchup} {onTouchover} {onTouchout} {onTouchdrag}\n  {onSelect} {onDeselect}\n  {renderSettings} {blockReindexing} {clip}\n  _asPolygon={false}\n/>","import { isDefined } from '../../../utils/equals.js'\n/**\n * This function is only used when dealing with layers.\n * For layers, most 'aesthetic' props can be specified in two ways:\n *  - An Array of values is passed to the prop\n *  - A single value is passed to the prop\n * In both cases, we need to convert whatever was passed to an Object.\n * The keys will be whatever the user used as 'key' Array, and the values\n * are whatever the user used passed to the prop in question.\n * If the user passed an Array, the values of the Object correspond to the values in the Array.\n * If the user passed a single value, every value in the Object will be that value.\n * The object structure is necessary to do transitions later.\n *\n * @param {*} propValue Whatever was passed to the prop\n * @param {*} keyArray The array of indices to be used as keys\n * @returns {Object.<Number, *>} The 'prop Object'\n */\nexport function generatePropObject (propValue, keyArray) {\n  const propObj = {}\n\n  if (isDefined(propValue)) {\n    if (propValue.constructor === Array) {\n      for (let i = 0; i < keyArray.length; i++) {\n        const key = keyArray[i]\n        propObj[key] = propValue[i]\n      }\n    } else if (propValue.constructor === Function) {\n      for (let index = 0; index < keyArray.length; index++) {\n        const key = keyArray[index]\n        propObj[key] = propValue({ key, index })\n      }\n    } else {\n      for (let i = 0; i < keyArray.length; i++) {\n        const key = keyArray[i]\n        propObj[key] = propValue\n      }\n    }\n  }\n\n  return propObj\n}\n","<script context=\"module\">\n  let idCounter = 0\n  function getId () {\n    return 'layer' + idCounter++\n  }\n</script>\n\n<script>\n  import { beforeUpdate, afterUpdate, onMount, onDestroy, tick } from 'svelte'\n\n  import * as detectIt from '../../../utils/detect.js'\n  import * as GraphicContext from '../../Core/Graphic/GraphicContext'\n  import * as SectionContext from '../../Core/Section/SectionContext'\n  import * as InteractionManagerContext from '../../Core/Section/InteractionManagerContext'\n  \n  import validateAesthetics from './validateAesthetics.js'\n  import { layerPixelGeometryFuncs } from './pixelGeometryFuncs.js'\n  import { layerRepresentAsPolygonFuncs } from './representAsPolygonFuncs.js'\n  import { createTransitionableLayer, transitionsEqual } from '../utils/transitions'\n  import { generatePropObject } from '../utils/generatePropObject.js'\n  import { createDataNecessaryForIndexingLayer } from './createDataNecessaryForIndexing.js'\n  import generatePath from '../utils/generatePath.js'\n  import textAnchorPoint from '../utils/textAnchorPoint.js'\n  import any from '../utils/any.js'\n  import parseRenderSettings from '../utils/parseRenderSettings.js' \n\n  const layerId = getId()\n\n  let initPhase = true\n  const initDone = () => !initPhase\n\n  export let type\n\n  // Aesthetics: positioning\n  export let x = undefined\n  export let y = undefined\n  export let x1 = undefined\n  export let x2 = undefined\n  export let y1 = undefined\n  export let y2 = undefined\n  export let geometry = undefined\n  export let shape = undefined\n  export let size = undefined\n  export let independentAxis = undefined\n\n  // Aesthetics: other\n  export let radius = undefined\n  export let fill = undefined\n  export let stroke = undefined\n  export let strokeWidth = undefined\n  export let strokeOpacity = undefined\n  export let fillOpacity = undefined\n  export let opacity = undefined\n\n  // Aesthetics: text-specific\n  export let text = undefined\n  export let fontFamily = undefined\n  export let fontSize = undefined\n  export let fontWeight = undefined\n  export let rotation = undefined\n  export let anchorPoint = undefined\n\n  // Transitions\n  export let transition = undefined\n\n  // Mouse interactions\n  export let onClick = undefined\n  export let onMousedown = undefined\n  export let onMouseup = undefined\n  export let onMouseover = undefined\n  export let onMouseout = undefined\n  export let onMousedrag = undefined\n\n  // Touch interactions\n  export let onTouchdown = undefined\n  export let onTouchup = undefined\n  export let onTouchover = undefined\n  export let onTouchout = undefined\n  export let onTouchdrag = undefined\n\n  // Select interactions\n  export let onSelect = undefined\n  export let onDeselect = undefined\n\n  // Other\n  export let key = undefined\n  export let renderSettings = undefined\n  export let blockReindexing = false\n  export let _asPolygon = true\n  export let clip\n\n  // Validate aesthetics every time input changes\n  let aesthetics = validateAesthetics(\n    type,\n    {\n      x,\n      y,\n      x1,\n      x2,\n      y1,\n      y2,\n      geometry,\n      shape,\n      size,\n      independentAxis,\n      radius,\n      fill,\n      stroke,\n      strokeWidth,\n      strokeOpacity,\n      fillOpacity,\n      opacity,\n      text,\n      fontFamily,\n      fontSize,\n      fontWeight,\n      rotation,\n      anchorPoint\n    }\n  )\n  $: {\n    if (initDone()) {\n      aesthetics = validateAesthetics(\n        type,\n        {\n          x,\n          y,\n          x1,\n          x2,\n          y1,\n          y2,\n          geometry,\n          shape,\n          size,\n          independentAxis,\n          radius,\n          fill,\n          stroke,\n          strokeWidth,\n          strokeOpacity,\n          fillOpacity,\n          opacity,\n          text,\n          fontFamily,\n          fontSize,\n          fontWeight,\n          rotation,\n          anchorPoint\n        }\n      )\n    }\n  }\n\n  // Create 'positioning' aesthetics object\n  let positioningAesthetics = { x, y, x1, x2, y1, y2, geometry, shape, size, independentAxis }\n  $: {\n    if (initDone()) {\n      positioningAesthetics = { x, y, x1, x2, y1, y2, geometry, shape, size, independentAxis }\n    }\n  }\n\n  // Select appriopriate geometry conversion functions\n  let createPixelGeometryObject = layerPixelGeometryFuncs[type]\n  let representAsPolygonObject = layerRepresentAsPolygonFuncs[type]\n\n  $: {\n    if (initDone()) {\n      createPixelGeometryObject = layerPixelGeometryFuncs[type]\n      representAsPolygonObject = layerRepresentAsPolygonFuncs[type]\n    }\n  }\n\n  let asPolygon = _asPolygon === true && layerRepresentAsPolygonFuncs[type] !== undefined\n\n  $: {\n    if (initDone()) {\n      asPolygon = _asPolygon === true && layerRepresentAsPolygonFuncs[type] !== undefined\n    }\n  }\n\n  // Contexts\n  const graphicContext = GraphicContext.subscribe()\n  const sectionContext = SectionContext.subscribe()\n  const interactionManagerContext = InteractionManagerContext.subscribe()\n\n  // Initiate geometry objects and key array\n  let pixelGeometryObject\n  let screenGeometryObject\n\n  updatePixelGeometryObject()\n  \n  let keyArray = Object.keys(pixelGeometryObject)\n\n  // Generate other prop objects\n  let radiusObject = generatePropObject(aesthetics.radius, keyArray)\n  const fillObject = generatePropObject(aesthetics.fill, keyArray)\n  const strokeObject = generatePropObject(aesthetics.stroke, keyArray)\n  let strokeWidthObject = generatePropObject(aesthetics.strokeWidth, keyArray)\n  const strokeOpacityObject = generatePropObject(aesthetics.strokeOpacity, keyArray)\n  const fillOpacityObject = generatePropObject(aesthetics.fillOpacity, keyArray)\n  const opacityObject = generatePropObject(aesthetics.opacity, keyArray)\n  let textObject = generatePropObject(aesthetics.text, keyArray)\n  let fontFamilyObject = generatePropObject(aesthetics.fontFamily, keyArray)\n  const fontSizeObject = generatePropObject(aesthetics.fontSize, keyArray)\n  const fontWeightObject = generatePropObject(aesthetics.fontWeight, keyArray)\n  const rotationObject = generatePropObject(aesthetics.rotation, keyArray)\n  let anchorPointObject = generatePropObject(aesthetics.anchorPoint, keyArray)\n\n  // This uses the radiusObject/strokeWidthObject in some cases, so must be done after the prop objects\n  updateScreenGeometryObject()\n\n  // Initiate transitionables\n  let tr_screenGeometryObject = createTransitionableLayer('geometry', screenGeometryObject, transition)\n  let tr_radiusObject = createTransitionableLayer('radius', radiusObject, transition)\n  let tr_fillObject = createTransitionableLayer('fill', fillObject, transition)\n  let tr_strokeObject = createTransitionableLayer('stroke', strokeObject, transition)\n  let tr_strokeWidthObject = createTransitionableLayer('strokeWidth', strokeWidthObject, transition)\n  let tr_strokeOpacityObject = createTransitionableLayer('strokeOpacity', strokeOpacityObject, transition)\n  let tr_fillOpacityObject = createTransitionableLayer('fillOpacity', fillOpacityObject, transition)\n  let tr_opacityObject = createTransitionableLayer('opacity', opacityObject, transition)\n\n  // text transtitionables\n  let tr_fontSizeObject = createTransitionableLayer('fontSize', fontSizeObject, transition)\n  let tr_fontWeightObject = createTransitionableLayer('fontWeight', fontWeightObject, transition)\n  let tr_rotationObject = createTransitionableLayer('rotation', rotationObject, transition)\n\n  // Handle changes to geometry\n  $: {\n    if (initDone()) {\n      scheduleUpdatePixelGeometryObject(\n        positioningAesthetics,\n        key,\n        $sectionContext,\n        parseRenderSettings(renderSettings)\n      )\n    }\n  }\n\n  // Handle radius and strokeWidth changes if Points or Lines are not represented as Polygons\n  $: {\n    if (initDone()) {\n      if (!asPolygon) {\n        tr_radiusObject.set(generatePropObject(aesthetics.radius, keyArray))\n        tr_strokeWidthObject.set(generatePropObject(aesthetics.strokeWidth, keyArray))\n      }\n    }\n  }\n\n  // Handle other changes\n  $: { if (initDone()) tr_fillObject.set(generatePropObject(aesthetics.fill, keyArray)) }\n  $: { if (initDone()) tr_strokeObject.set(generatePropObject(aesthetics.stroke, keyArray)) }\n  $: { if (initDone()) tr_strokeOpacityObject.set(generatePropObject(aesthetics.strokeOpacity, keyArray)) }\n  $: { if (initDone()) tr_fillOpacityObject.set(generatePropObject(aesthetics.fillOpacity, keyArray)) }\n  $: { if (initDone()) tr_opacityObject.set(generatePropObject(aesthetics.opacity, keyArray)) }\n\n  // text aes changes\n  $: { if (initDone()) tr_fontSizeObject.set(generatePropObject(aesthetics.fontSize, keyArray)) }\n  $: { if (initDone()) tr_fontWeightObject.set(generatePropObject(aesthetics.fontWeight, keyArray)) }\n  $: { if (initDone()) tr_rotationObject.set(generatePropObject(aesthetics.rotation, keyArray)) }\n\n  // non-transitionable aesthetics\n  $: { if (initDone()) textObject = generatePropObject(aesthetics.text, keyArray) }\n  $: { if (initDone()) fontFamilyObject = generatePropObject(aesthetics.fontFamily, keyArray) }\n  $: { if (initDone()) anchorPointObject = generatePropObject(aesthetics.anchorPoint, keyArray) }\n  let previousTransition\n\n  let pixelGeometryObjectRecalculationNecessary = false\n  let screenGeometryObjectRecalculationNecessary = false\n\n  $: {\n    tick().then(() => {\n      if (pixelGeometryObjectRecalculationNecessary) {\n        updatePixelGeometryObject()\n        keyArray = Object.keys(pixelGeometryObject)\n\n        updateRadiusAndStrokeWidth()\n      }\n\n      if (screenGeometryObjectRecalculationNecessary) {\n        updateScreenGeometryObject()\n        updateScreenGeometryObjectTransitionable()\n\n        updateInteractionManagerIfNecessary()\n      }\n\n      pixelGeometryObjectRecalculationNecessary = false\n      screenGeometryObjectRecalculationNecessary = false\n    })\n  }\n\n  beforeUpdate(() => {\n    // Update transitionables\n    if (!transitionsEqual(previousTransition, transition) && initDone()) {\n      tr_screenGeometryObject = createTransitionableLayer('geometry', $tr_screenGeometryObject, transition)\n      tr_radiusObject = createTransitionableLayer('radius', $tr_radiusObject, transition)\n      tr_fillObject = createTransitionableLayer('fill', $tr_fillObject, transition)\n      tr_strokeObject = createTransitionableLayer('stroke', $tr_strokeObject, transition)\n      tr_strokeWidthObject = createTransitionableLayer('strokeWidth', $tr_strokeWidthObject, transition)\n      tr_strokeOpacityObject = createTransitionableLayer('strokeOpacity', $tr_strokeOpacityObject, transition)\n      tr_fillOpacityObject = createTransitionableLayer('fillOpacity', $tr_fillOpacityObject, transition)\n      tr_opacityObject = createTransitionableLayer('opacity', $tr_opacityObject, transition)\n\n      tr_fontSizeObject = createTransitionableLayer('fontSize', $tr_fontSizeObject, transition)\n      tr_fontWeightObject = createTransitionableLayer('fontWeight', $tr_fontWeightObject, transition)\n      tr_rotationObject = createTransitionableLayer('rotation', $tr_rotationObject, transition)\n    }\n\n    previousTransition = transition\n  })\n\n  afterUpdate(() => {\n    initPhase = false\n  })\n\n  // Interactivity\n  $: isInteractiveMouse = detectIt.primaryInput === 'mouse' && any(onClick, onMousedown, onMouseup, onMouseover, onMouseout, onMousedrag)\n  $: isInteractiveTouch = detectIt.primaryInput === 'touch' && any(onTouchdown, onTouchup, onTouchover, onTouchout, onTouchdrag)\n\n  $: isSelectable = onSelect !== undefined || onDeselect !== undefined\n\n  onMount(() => {\n    updateInteractionManagerIfNecessary()\n  })\n\n  onDestroy(() => {\n    removeLayerFromSpatialIndexIfNecessary()\n  })\n\n  // Helpers\n  function scheduleUpdatePixelGeometryObject () {\n    pixelGeometryObjectRecalculationNecessary = true\n    screenGeometryObjectRecalculationNecessary = true\n  }\n\n  function updatePixelGeometryObject () {\n    pixelGeometryObject = createPixelGeometryObject(\n      positioningAesthetics,\n      key,\n      $sectionContext,\n      parseRenderSettings(renderSettings)\n    )\n  }\n\n  function scheduleUpdateScreenGeometryObject () {\n    screenGeometryObjectRecalculationNecessary = true\n  }\n\n  function updateScreenGeometryObject () {\n    if (asPolygon) {\n      screenGeometryObject = representAsPolygonObject(pixelGeometryObject, { radiusObject, strokeWidthObject })\n    } else {\n      screenGeometryObject = pixelGeometryObject\n    }\n  }\n\n  function updateScreenGeometryObjectTransitionable () {\n    tr_screenGeometryObject.set(screenGeometryObject)\n  }\n\n  function updateRadiusAndStrokeWidth () {\n    radiusObject = generatePropObject(aesthetics.radius, keyArray)\n    strokeWidthObject = generatePropObject(aesthetics.strokeWidth, keyArray)\n  }\n\n  function updateInteractionManagerIfNecessary () {\n    if (initPhase || !(blockReindexing || $sectionContext.blockReindexing)) {\n      removeLayerFromSpatialIndexIfNecessary()\n\n      if (isInteractiveMouse) {\n        const markInterface = $interactionManagerContext.mouse().marks()\n  \n        markInterface.loadLayer(type, createDataNecessaryForIndexing())\n\n        if (onClick) markInterface.addLayerInteraction('click', layerId, onClick)\n        if (onMousedown) markInterface.addLayerInteraction('mousedown', layerId, onMousedown)\n        if (onMouseup) markInterface.addLayerInteraction('mouseup', layerId, onMouseup)\n        if (onMouseout) markInterface.addLayerInteraction('mouseout', layerId, onMouseout)\n        if (onMouseover) markInterface.addLayerInteraction('mouseover', layerId, onMouseover)\n        if (onMousedrag) markInterface.addLayerInteraction('mousedrag', layerId, onMousedrag)\n      }\n\n      if (isInteractiveTouch) {\n        const markInterface = $interactionManagerContext.touch().marks()\n\n        markInterface.loadLayer(type, createDataNecessaryForIndexing())\n\n        if (onTouchdown) markInterface.addLayerInteraction('touchdown', layerId, onTouchdown)\n        if (onTouchup) markInterface.addLayerInteraction('touchup', layerId, onTouchup)\n        if (onTouchover) markInterface.addLayerInteraction('touchover', layerId, onTouchover)\n        if (onTouchout) markInterface.addLayerInteraction('touchout', layerId, onTouchout)\n        if (onTouchdrag) markInterface.addLayerInteraction('touchdrag', layerId, onTouchdrag)\n      }\n    }\n\n    removeLayerFromSelectIfNecessary()\n  \n    if (isSelectable) {\n      const selectManager = $interactionManagerContext.select()\n\n      selectManager.loadLayer(\n        type, createDataNecessaryForIndexing(), { onSelect, onDeselect }\n      )\n    }\n  }\n\n  function removeLayerFromSpatialIndexIfNecessary () {\n    if (detectIt.primaryInput === 'mouse') {\n      const markMouseInterface = $interactionManagerContext.mouse().marks()\n\n      if (markMouseInterface.layerIsLoaded(layerId)) {\n        markMouseInterface.removeAllLayerInteractions(layerId)\n        markMouseInterface.removeLayer(layerId)\n      }\n    }\n\n    if (detectIt.primaryInput === 'touch') {\n      const markTouchInterface = $interactionManagerContext.touch().marks()\n\n      if (markTouchInterface.layerIsLoaded(layerId)) {\n        markTouchInterface.removeAllLayerInteractions(layerId)\n        markTouchInterface.removeLayer(layerId)\n      }\n    }\n  }\n\n  function removeLayerFromSelectIfNecessary () {\n    const selectManager = $interactionManagerContext.select()\n\n    if (selectManager.layerIsLoaded(layerId)) {\n      selectManager.removeLayer(layerId)\n    }\n  }\n\n  function createDataNecessaryForIndexing () {\n    return createDataNecessaryForIndexingLayer(\n      type, layerId, keyArray, { pixelGeometryObject, screenGeometryObject }, { radiusObject, strokeWidthObject }\n    )\n  }\n\n  $: renderPolygon = !['Point', 'Line', 'Label'].includes(type) || asPolygon\n  $: renderCircle = type === 'Point' && !asPolygon\n  $: renderLine = type === 'Line' && !asPolygon\n  $: renderLabel = type === 'Label'\n</script>\n\n{#if $graphicContext.output() === 'svg'}\n\n  {#if renderPolygon}\n\n    <g \n      clip-path={clip ? `url(#clip-${$sectionContext.sectionId})` : 'none'}\n      class={`${type.toLowerCase()}-layer`}\n    >\n\n      {#each Object.keys($tr_screenGeometryObject) as $key ($key)}\n\n        <path\n          class={type.toLowerCase()}\n          d={generatePath($tr_screenGeometryObject[$key])}\n          fill={$tr_fillObject[$key]}\n          stroke={$tr_strokeObject[$key]}\n          stroke-width={$tr_strokeWidthObject[$key]}\n          fill-opacity={$tr_fillOpacityObject[$key]}\n          stroke-opacity={$tr_strokeOpacityObject[$key]}\n          opacity={$tr_opacityObject[$key]}\n        />\n\n      {/each}\n\n    </g>\n\n  {/if}\n\n  {#if renderCircle}\n\n    <g\n      clip-path={clip ? `url(#clip-${$sectionContext.sectionId})` : 'none'}\n      class=\"point-layer\"\n    >\n\n      {#each Object.keys($tr_screenGeometryObject) as $key ($key)}\n\n        <circle\n          class=\"point\"\n          cx={$tr_screenGeometryObject[$key].coordinates[0]}\n          cy={$tr_screenGeometryObject[$key].coordinates[1]}\n          r={$tr_radiusObject[$key]}\n          fill={$tr_fillObject[$key]}\n          stroke={$tr_strokeObject[$key]}\n          stroke-width={$tr_strokeWidthObject[$key]}\n          fill-opacity={$tr_fillOpacityObject[$key]}\n          stroke-opacity={$tr_strokeOpacityObject[$key]}\n          opacity={$tr_opacityObject[$key]}\n        />\n\n      {/each}\n\n    </g>\n\n  {/if}\n\n  {#if renderLine}\n\n    <g \n      clip-path={clip ? `url(#clip-${$sectionContext.sectionId})` : 'none'}\n      class=\"line-layer\"\n    >\n\n      {#each Object.keys($tr_screenGeometryObject) as $key ($key)}\n\n        <path\n          class=\"line\"\n          d={generatePath($tr_screenGeometryObject[$key])}\n          fill=\"none\"\n          stroke-width={$tr_strokeWidthObject[$key]}\n          stroke={$tr_strokeObject[$key]}\n          style={`opacity: ${$tr_opacityObject[$key]}`}\n        />\n\n      {/each}\n\n    </g>\n\n  {/if}\n\n{/if}\n\n{#if renderLabel}\n\n  <g\n    clip-path={clip ? `url(#clip-${$sectionContext.sectionId})` : 'none'} \n    class=\"label-layer\"\n  >\n\n    {#each Object.keys($tr_screenGeometryObject) as $key ($key)}\n\n      <text \n        class=\"label\"\n        x={$tr_screenGeometryObject[$key].coordinates[0]}\n        y={$tr_screenGeometryObject[$key].coordinates[1]}\n        fill={$tr_fillObject[$key]}\n        stroke={$tr_strokeObject[$key]}\n        stroke-width={$tr_strokeWidthObject[$key]}\n        fill-opacity={$tr_fillOpacityObject[$key]}\n        stroke-opacity={$tr_strokeOpacityObject[$key]}\n        opacity={$tr_opacityObject[$key]}\n        transform={`\n          rotate(${$tr_rotationObject[$key]}, \n          ${$tr_screenGeometryObject[$key].coordinates[0]}, \n          ${$tr_screenGeometryObject[$key].coordinates[1]})\n        `}\n        font-family={fontFamilyObject[$key]}\n        font-size={$tr_fontSizeObject[$key] + 'px'}\n        font-weight={$tr_fontWeightObject[$key]}\n        text-anchor={textAnchorPoint(anchorPointObject[$key]).textAnchor}\n        dominant-baseline={textAnchorPoint(anchorPointObject[$key]).dominantBaseline}\n      >\n        {textObject[$key]}\n      </text>\n      \n    {/each}\n\n  </g>\n\n{/if}\n","<script>\n  import Layer from '../Mark/Layer.svelte'\n\n  // Aesthetics: positioning\n  export let x = undefined\n  export let y = undefined\n  export let geometry = undefined\n\n  // Aesthetics: other\n  export let strokeWidth = undefined\n  export let stroke = undefined\n  export let opacity = undefined\n\n  // Transitions\n  export let transition = undefined\n\n  // Mouse interactions\n  export let onClick = undefined\n  export let onMousedown = undefined\n  export let onMouseup = undefined\n  export let onMouseover = undefined\n  export let onMouseout = undefined\n  export let onMousedrag = undefined\n\n  // Touch interactions\n  export let onTouchdown = undefined\n  export let onTouchup = undefined\n  export let onTouchover = undefined\n  export let onTouchout = undefined\n  export let onTouchdrag = undefined\n\n  // Select interactions\n  export let onSelect = undefined\n  export let onDeselect = undefined\n\n  // Other\n  export let key = undefined\n  export let renderSettings = undefined\n  export let blockReindexing = false\n  export let clip = true\n</script>\n\n<Layer \n  type=\"Line\"\n  {x} {y} {geometry}\n  {strokeWidth} {stroke} {opacity}\n  {transition} \n  {onClick} {onMousedown} {onMouseup} {onMouseover} {onMouseout} {onMousedrag}\n  {onTouchdown} {onTouchup} {onTouchover} {onTouchout} {onTouchdrag}\n  {onSelect} {onDeselect}\n  {key} {renderSettings} {blockReindexing} {clip}\n  _asPolygon={false}\n/>","<script>\n  import Layer from '../Mark/Layer.svelte'\n\n  // Aesthetics: positioning\n  export let x = undefined\n  export let y = undefined\n  export let geometry = undefined\n\n  // Aesthetics: other\n  export let fill = undefined\n  export let stroke = undefined\n  export let strokeWidth = undefined\n  export let strokeOpacity = undefined\n  export let fillOpacity = undefined\n  export let opacity = undefined\n  export let text = undefined\n  export let fontFamily = undefined\n  export let fontSize = undefined\n  export let fontWeight = undefined\n  export let rotation = undefined\n  export let anchorPoint = undefined\n\n  // Transitions\n  export let transition = undefined\n\n  // Mouse interactions\n  export let onClick = undefined\n  export let onMousedown = undefined\n  export let onMouseup = undefined\n  export let onMouseover = undefined\n  export let onMouseout = undefined\n  export let onMousedrag = undefined\n\n  // Touch interactions\n  export let onTouchdown = undefined\n  export let onTouchup = undefined\n  export let onTouchover = undefined\n  export let onTouchout = undefined\n  export let onTouchdrag = undefined\n\n  // Select interactions\n  export let onSelect = undefined\n  export let onDeselect = undefined\n\n  // Other\n  export let key = undefined\n  export let renderSettings = undefined\n  export let blockReindexing = false\n  export let clip = true\n</script>\n\n<Layer \n  type=\"Label\"\n  {x} {y} {geometry}\n  {fill} {stroke} {strokeWidth}\n  {strokeOpacity} {fillOpacity} {opacity}\n  {text}\n  {fontFamily} {fontSize} {fontWeight} {rotation} {anchorPoint}\n  {transition} \n  {onClick} {onMousedown} {onMouseup} {onMouseover} {onMouseout} {onMousedrag}\n  {onTouchdown} {onTouchup} {onTouchover} {onTouchout} {onTouchdrag}\n  {onSelect} {onDeselect}\n  {key} {renderSettings} {blockReindexing} {clip}\n  _asPolygon={false}\n/>","export function parseHJust (hjust, xOffset, bbox) {\n  const { minX: x1, maxX: x2 } = bbox\n\n  if (hjust === 'left') {\n    return x1 - xOffset\n  }\n\n  if (hjust === 'right') {\n    return x2 + xOffset\n  }\n\n  if (['center', 'centre'].includes(hjust)) {\n    return (x2 - x1) / 2 + x1 + xOffset\n  }\n\n  if (hjust.constructor === Number) {\n    return (x2 - x1) * hjust + x1\n  }\n}\n\nexport function parseVJust (vjust, yOffset, bbox) {\n  const { minY: y1, maxY: y2 } = bbox\n\n  if (vjust === 'top') {\n    return y1 - yOffset\n  }\n\n  if (vjust === 'bottom') {\n    return y2 + yOffset\n  }\n\n  if (['center', 'centre'].includes(vjust)) {\n    return (y2 - y1) / 2 + y1 + yOffset\n  }\n\n  if (vjust.constructor === Number) {\n    return (y2 - y1) * vjust + y1\n  }\n}\n","import generateArrayOfLength from '../../Marks/utils/generateArrayOfLength.js'\n\nexport function getTickPositions (tickValuesArray, scale, tickCount, tickExtra, zoomIdentity) {\n  let ticks\n\n  if (Array.isArray(tickValuesArray) && tickValuesArray.length > 0) {\n    ticks = tickValuesArray\n  } else if (isContinuous(scale)) {\n    ticks = getContinuousTicks(scale, tickCount, zoomIdentity)\n  } else if ('domain' in scale) {\n    ticks = scale.domain()\n  } else {\n    throw new Error(`Couldn't construct axis. Please provide 'tickValues' or a scale with\n      either a 'ticks' or a 'domain' method.`)\n  }\n\n  if (tickExtra && 'domain' in scale && ticks[0] !== scale.domain()[0]) {\n    ticks.unshift(scale.domain()[0])\n  }\n\n  return ticks\n}\n\nfunction isContinuous (scale) {\n  return 'ticks' in scale\n}\n\nfunction getContinuousTicks (scale, tickCount, zoomIdentity) {\n  if (zoomIdentity) {\n    const rescaledDomain = rescale(scale, zoomIdentity)\n    return scale.copy().domain(rescaledDomain).ticks(tickCount)\n  }\n\n  return scale.ticks(tickCount)\n}\n\n// https://github.com/d3/d3-zoom#transform_rescaleX\nfunction rescale (scale, { k, t }) {\n  const rescaledRange = scale.range().map(r => (r - t) / k)\n  const rescaledDomain = rescaledRange.map(scale.invert)\n  return rescaledDomain\n}\n\nexport function getTickCoordinatesXAxis (\n  ticks,\n  yAbsolute,\n  scaleX,\n  finalScaleY,\n  tickSize,\n  flip\n) {\n  const offset = flip ? -tickSize : tickSize\n  const bandOffset = scaleX.bandwidth ? scaleX.bandwidth() / 2 : 0\n\n  const yEndAbsolute = yAbsolute + offset\n\n  const yCoordsTick = [\n    finalScaleY.invert(yAbsolute),\n    finalScaleY.invert(yEndAbsolute)\n  ]\n\n  const x = ticks.map(t => scaleX(t) + bandOffset).map(t => [t, t])\n  const y = generateArrayOfLength(yCoordsTick, ticks.length)\n\n  return {\n    x: () => x,\n    y: () => y\n  }\n}\n\nexport function getTickCoordinatesYAxis (\n  ticks,\n  xAbsolute,\n  scaleY,\n  finalScaleX,\n  tickSize,\n  flip\n) {\n  const offset = flip ? tickSize : -tickSize\n  const bandOffset = scaleY.bandwidth ? scaleY.bandwidth() / 2 : 0\n\n  const xEndAbsolute = xAbsolute + offset\n\n  const xCoordsTick = [\n    finalScaleX.invert(xAbsolute),\n    finalScaleX.invert(xEndAbsolute)\n  ]\n\n  const x = generateArrayOfLength(xCoordsTick, ticks.length)\n  const y = ticks.map(t => scaleY(t) + bandOffset).map(t => [t, t])\n\n  return {\n    x: () => x,\n    y: () => y\n  }\n}\n\nexport function getFormat (labelFormat, scale, numberOfTicks) {\n  if (labelFormat) return labelFormat\n  if ('tickFormat' in scale) return scale.tickFormat(numberOfTicks)\n\n  return x => x\n}\n","export function getTickLabelCoordinatesXAxis (\n  tickCoordinates,\n  { finalScaleY },\n  labelOffset,\n  flip\n) {\n  const x = tickCoordinates.x().map(x => x[0])\n\n  const y = tickCoordinates.y().map(y => {\n    const yEnd = y[1]\n    const yEndAbsolute = finalScaleY(yEnd)\n\n    const yLabelAbsolute = flip\n      ? yEndAbsolute - labelOffset\n      : yEndAbsolute + labelOffset\n\n    return finalScaleY.invert(yLabelAbsolute)\n  })\n\n  return {\n    x: () => x,\n    y: () => y\n  }\n}\n\nexport function getTickLabelCoordinatesYAxis (\n  tickCoordinates,\n  { finalScaleX },\n  labelOffset,\n  flip\n) {\n  const x = tickCoordinates.x().map(x => {\n    const xEnd = x[1]\n    const xEndAbsolute = finalScaleX(xEnd)\n\n    const xLabelAbsolute = flip\n      ? xEndAbsolute + labelOffset\n      : xEndAbsolute - labelOffset\n\n    return finalScaleX.invert(xLabelAbsolute)\n  })\n\n  const y = tickCoordinates.y().map(y => y[0])\n\n  return {\n    x: () => x,\n    y: () => y\n  }\n}\n\n// from https://stackoverflow.com/a/21015393\nexport function getTextWidth (text, fontSize, fontFamily) {\n  let canvas\n  if (typeof document === 'undefined') {\n    // if we don't have document/canvas available\n    // assume ratio width to height is 0.8\n    const length = text.length\n    return length * 0.8 * fontSize\n  } else {\n    // re-use canvas object for better performance\n    canvas = getTextWidth.canvas || (getTextWidth.canvas = document.createElement('canvas'))\n    const context = canvas.getContext('2d')\n    context.font = fontSize + ' ' + fontFamily\n    const metrics = context.measureText(text)\n    return metrics.width\n  }\n}\n","import { parseHJust, parseVJust } from './just.js'\n\nexport function getTitleCoordinatesXAxis (\n  hjust,\n  xOffset,\n  vjust,\n  yOffset,\n  sectionContext,\n  flip,\n  axisHeight,\n  fontSize,\n  yAbsoluteAxis\n) {\n  const heightOffset = getHeightOffset(yOffset, flip, axisHeight, fontSize)\n\n  const xAbsolute = parseHJust(hjust, xOffset, sectionContext.paddedBbox)\n  const yAbsolute = vjust === 'axis'\n    ? yAbsoluteAxis + heightOffset\n    : parseVJust(vjust, yOffset, sectionContext.paddedBbox) + heightOffset\n\n  const { finalScaleX, finalScaleY } = sectionContext\n\n  const x = finalScaleX.invert(xAbsolute)\n  const y = finalScaleY.invert(yAbsolute)\n\n  return {\n    x: () => x,\n    y: () => y\n  }\n}\n\nfunction getHeightOffset (offset, flip, axisHeight, fontSize) {\n  if (offset === 'axis') {\n    return flip\n      ? -(axisHeight + 1) - fontSize\n      : axisHeight + 1\n  }\n\n  if (offset.constructor !== Number) {\n    throw new Error('yOffset must be a Number')\n  }\n\n  return offset\n}\n\nexport function getTitleCoordinatesYAxis (\n  hjust,\n  xOffset,\n  vjust,\n  yOffset,\n  sectionContext,\n  flip,\n  axisWidth,\n  fontSize,\n  xAbsoluteAxis\n) {\n  const widthOffset = getWidthOffset(xOffset, flip, axisWidth, fontSize)\n  const xAbsolute = hjust === 'axis'\n    ? xAbsoluteAxis + widthOffset\n    : parseHJust(hjust, xOffset, sectionContext.paddedBbox)\n  const yAbsolute = parseHJust(vjust, yOffset, sectionContext.paddedBbox)\n\n  const { finalScaleX, finalScaleY } = sectionContext\n\n  const x = finalScaleX.invert(xAbsolute)\n  const y = finalScaleY.invert(yAbsolute)\n\n  return {\n    x: () => x,\n    y: () => y\n  }\n}\n\nfunction getWidthOffset (offset, flip, axisWidth, fontSize) {\n  if (offset === 'axis') {\n    return flip\n      ? axisWidth + 5\n      : -axisWidth - 5\n  }\n\n  if (offset.constructor !== Number) {\n    throw new Error('xOffset must be a Number')\n  }\n\n  return offset\n}\n","<script>\n  import { Line, LineLayer, Label, LabelLayer } from '../../../index.js'\n  import * as SectionContext from '../../Core/Section/SectionContext'\n\n  import { parseVJust } from './just.js'\n  import { getBaseLineCoordinatesXAxis } from './baseLine.js'\n  import { getTickPositions, getTickCoordinatesXAxis, getFormat } from './ticks.js'\n  import { getTickLabelCoordinatesXAxis } from './tickLabels.js'\n  import { getTitleCoordinatesXAxis } from './title.js'\n\n  // global properties\n  export let flip = false\n  export let scale = undefined\n\n  // axis baseline\n  export let baseLine = true\n  export let baseLineColor = 'black'\n  export let baseLineOpacity = 1\n  export let baseLineWidth = 1\n\n  // axis positioning\n  export let vjust = 'bottom'\n  export let yOffset = 0\n\n  // tick marks\n  export let ticks = true\n  export let tickCount = 10\n  export let tickExtra = false\n  export let tickValues = undefined\n  export let tickSize = 5\n  export let tickWidth = 0.5\n  export let tickColor = 'black'\n  export let tickOpacity = 1\n\n  // tick labels\n  export let labelFormat = undefined\n  export let labelOffset = 2\n  export let labelRotate = 0\n  export let labelFont = 'Helvetica'\n  export let labelFontSize = 10\n  export let labelFontWeight = 'normal'\n  export let labelOpacity = 1\n  export let labelColor = 'black'\n\n  // axis title\n  export let titleHjust = 'center'\n  export let titleXOffset = 0\n  export let titleVjust = 'axis'\n  export let titleYOffset = 'axis'\n  export let title = ''\n  export let titleColor = 'black'\n  export let titleFont = 'Helvetica'\n  export let titleFontSize = '12'\n  export let titleFontWeight = 'normal'\n  export let titleOpacity = 1\n  export let titleRotation = 0\n  export let titleAnchorPoint = 't'\n\n  // other\n  export let transition = undefined\n  export let clip = false\n\n  // Contexts\n  const sectionContext = SectionContext.subscribe()\n\n  // Make sure not polar\n  $: {\n    if ($sectionContext.transformation === 'polar') {\n      throw new Error('Axes do\\'nt work with polar coordinates (for now)')\n    }\n  }\n\n  // Scale\n  $: scaleX = scale\n    ? scale.copy().range($sectionContext.rangeX)\n    : $sectionContext.scaleX\n  \n  // Absolute position (in pixels)\n  $: yAbsolute = parseVJust(vjust, yOffset, $sectionContext.paddedBbox)\n\n  // Baseline\n  $: baseLineCoordinates = getBaseLineCoordinatesXAxis(yAbsolute, $sectionContext)\n  \n  // Ticks\n  $: tickPositions = getTickPositions(\n    tickValues,\n    scaleX,\n    tickCount,\n    tickExtra,\n    $sectionContext.zoomIdentity \n      ? { t: $sectionContext.zoomIdentity.x, k: $sectionContext.zoomIdentity.kx }\n      : undefined\n  )\n  $: tickCoordinates = getTickCoordinatesXAxis(\n    tickPositions,\n    yAbsolute,\n    scaleX,\n    $sectionContext.finalScaleY,\n    tickSize,\n    flip\n  )\n\n  // Tick labels\n  $: format = getFormat(labelFormat, $sectionContext.scaleX, ticks.length)\n  $: tickLabelText = tickPositions.map(format)\n  $: tickLabelCoordinates = getTickLabelCoordinatesXAxis(tickCoordinates, $sectionContext, labelOffset, flip)\n  $: labelAnchorPoint = flip ? 'b' : 't'\n\n  // Title\n  $: axisHeight = baseLineWidth + tickSize + labelOffset + labelFontSize\n  $: titleCoordinates = getTitleCoordinatesXAxis(\n    titleHjust,\n    titleXOffset,\n    titleVjust,\n    titleYOffset,\n    $sectionContext,\n    flip,\n    axisHeight,\n    titleFontSize,\n    yAbsolute\n  )\n</script>\n\n<g class=\"x-axis\">\n    \n  {#if baseLine}\n    <Line \n      {...baseLineCoordinates}\n      strokeWidth={baseLineWidth}\n      opacity={baseLineOpacity}\n      stroke={baseLineColor}\n      {clip}\n    />\n  {/if}\n\n  {#if ticks}\n    <LineLayer \n      {...tickCoordinates}\n      strokeWidth={tickWidth}\n      opacity={tickOpacity}\n      stroke={tickColor}\n      {transition}\n      {clip}\n    />\n    \n    <LabelLayer\n      {...tickLabelCoordinates}\n      text={tickLabelText} \n      anchorPoint={labelAnchorPoint}\n      rotation={labelRotate}\n      fontFamily={labelFont}\n      fontSize={labelFontSize}\n      fontWeight={labelFontWeight}\n      opacity={labelOpacity}\n      fill={labelColor}\n      {transition}\n      {clip}\n    />\n  {/if}\n\n  {#if title.length > 0}\n    <Label \n      {...titleCoordinates}\n      text={title}\n      anchorPoint={titleAnchorPoint}\n      rotation={titleRotation}\n      fontFamily={titleFont}\n      fontSize={titleFontSize}\n      fontWeight={titleFontWeight}\n      opacity={titleOpacity}\n      fill={titleColor}\n      {clip}\n    />\n  {/if}\n\n</g>","export function getBaseLineCoordinatesXAxis (yAbsolute, sectionContext) {\n  const { paddedBbox, finalScaleX, finalScaleY } = sectionContext\n  const { minX: x1, maxX: x2 } = paddedBbox\n\n  const x = [x1, x2].map(finalScaleX.invert)\n  const y = [yAbsolute, yAbsolute].map(finalScaleY.invert)\n\n  return {\n    x: () => x,\n    y: () => y\n  }\n}\n\nexport function getBaseLineCoordinatesYAxis (xAbsolute, sectionContext) {\n  const { paddedBbox, finalScaleX, finalScaleY } = sectionContext\n  const { minY: y1, maxY: y2 } = paddedBbox\n\n  const x = [xAbsolute, xAbsolute].map(finalScaleX.invert)\n  const y = [y1, y2].map(finalScaleY.invert)\n\n  return {\n    x: () => x,\n    y: () => y\n  }\n}\n","<script>\n  import { Line, LineLayer, Label, LabelLayer } from '../../../index.js'\n  import * as SectionContext from '../../Core/Section/SectionContext'\n\n  import { parseHJust } from './just.js'\n  import { getBaseLineCoordinatesYAxis } from './baseLine.js'\n  import { getTickPositions, getTickCoordinatesYAxis, getFormat } from './ticks.js'\n  import { getTickLabelCoordinatesYAxis, getTextWidth } from './tickLabels.js'\n  import { getTitleCoordinatesYAxis } from './title.js'\n\n  // global properties\n  export let flip = false\n  export let scale = undefined\n\n  // axis baseline\n  export let baseLine = true\n  export let baseLineColor = 'black'\n  export let baseLineOpacity = 1\n  export let baseLineWidth = 1\n\n  // axis positioning\n  export let hjust = 'left'\n  export let xOffset = 0\n\n  // tick marks\n  export let ticks = true\n  export let tickCount = 10\n  export let tickExtra = false\n  export let tickValues = undefined\n  export let tickSize = 5\n  export let tickWidth = 0.5\n  export let tickColor = 'black'\n  export let tickOpacity = 1\n\n  // tick labels\n  export let labelFormat = undefined\n  export let labelOffset = 2\n  export let labelRotate = 0\n  export let labelFont = 'Helvetica'\n  export let labelFontSize = 10\n  export let labelFontWeight = 'normal'\n  export let labelOpacity = 1\n  export let labelColor = 'black'\n\n  // axis title\n  export let titleHjust = 'axis'\n  export let titleXOffset = 'axis'\n  export let titleVjust = 'center'\n  export let titleYOffset = 0\n  export let title = ''\n  export let titleColor = 'black'\n  export let titleFont = 'Helvetica'\n  export let titleFontSize = '12'\n  export let titleFontWeight = 'normal'\n  export let titleOpacity = 1\n  export let titleRotation = -90\n  export let titleAnchorPoint = 'center'\n\n  // other\n  export let transition = undefined\n  export let clip = false\n\n  // Contexts\n  const sectionContext = SectionContext.subscribe()\n  \n  // Make sure not polar\n  $: {\n    if ($sectionContext.transformation === 'polar') {\n      throw new Error('Axes do\\'nt work with polar coordinates (for now)')\n    }\n  }\n\n  // Scale\n  $: scaleY = scale\n    ? scale.copy().range($sectionContext.rangeY)\n    : $sectionContext.scaleY\n\n  // Absolute position (in pixels)\n  $: xAbsolute = parseHJust(hjust, xOffset, $sectionContext.paddedBbox)\n\n  // Baseline\n  $: baseLineCoordinates = getBaseLineCoordinatesYAxis(xAbsolute, $sectionContext)\n  \n  // Ticks\n  $: tickPositions = getTickPositions(\n    tickValues,\n    scaleY,\n    tickCount,\n    tickExtra,\n    $sectionContext.zoomIdentity\n      ? { t: $sectionContext.zoomIdentity.y, k: $sectionContext.zoomIdentity.ky }\n      : undefined\n  )\n  $: tickCoordinates = getTickCoordinatesYAxis(\n    tickPositions,\n    xAbsolute,\n    scaleY,\n    $sectionContext.finalScaleX,\n    tickSize,\n    flip\n  )\n\n  // Tick labels\n  $: format = getFormat(labelFormat, $sectionContext.scaleY, ticks.length)\n  $: tickLabelText = tickPositions.map(format)\n  $: tickLabelCoordinates = getTickLabelCoordinatesYAxis(tickCoordinates, $sectionContext, labelOffset, flip)\n  $: labelAnchorPoint = flip ? 'l' : 'r'\n  $: tickLabelWidth = getTextWidth(tickLabelText[tickLabelText.length - 1], labelFontSize, labelFont)\n\n  // Title\n  $: axisWidth = baseLineWidth + tickSize + labelOffset + tickLabelWidth\n  $: titleCoordinates = getTitleCoordinatesYAxis(\n    titleHjust,\n    titleXOffset,\n    titleVjust,\n    titleYOffset,\n    $sectionContext,\n    flip,\n    axisWidth,\n    titleFontSize,\n    xAbsolute\n  )\n</script>\n\n<g class=\"y-axis\">\n    \n  {#if baseLine}\n    <Line \n      {...baseLineCoordinates}\n      strokeWidth={baseLineWidth}\n      opacity={baseLineOpacity}\n      stroke={baseLineColor}\n      {clip}\n    />\n  {/if}\n\n  {#if ticks}\n    <LineLayer \n      {...tickCoordinates}\n      strokeWidth={tickWidth}\n      opacity={tickOpacity}\n      stroke={tickColor}\n      {transition}\n      {clip}\n    />\n    \n    <LabelLayer\n      {...tickLabelCoordinates}\n      text={tickLabelText} \n      anchorPoint={labelAnchorPoint}\n      rotation={labelRotate}\n      fontFamily={labelFont}\n      fontSize={labelFontSize}\n      fontWeight={labelFontWeight}\n      opacity={labelOpacity}\n      fill={labelColor}\n      {transition}\n      {clip}\n    />\n  {/if}\n\n  {#if title.length > 0}\n    <Label \n      {...titleCoordinates}\n      text={title}\n      anchorPoint={titleAnchorPoint}\n      rotation={titleRotation}\n      fontFamily={titleFont}\n      fontSize={titleFontSize}\n      fontWeight={titleFontWeight}\n      opacity={titleOpacity}\n      fill={titleColor}\n      {clip}\n    />\n  {/if}\n\n</g>","<script>\n  import { LineLayer } from '../../../index.js'\n  import * as SectionContext from '../../Core/Section/SectionContext'\n\n  import { getTickPositions } from '../Axes/ticks.js'\n  import { getCoordinatesXRaster } from './getCoordinates.js'\n  \n  export let scale = undefined\n  export let count = 10\n  export let extra = false\n  export let values = undefined\n  export let width = 0.25\n  export let color = 'black'\n  export let opacity = 1\n  export let transition = undefined\n\n  // Contexts\n  const sectionContext = SectionContext.subscribe()\n\n  // Make sure not polar\n  $: {\n    if ($sectionContext.transformation === 'polar') {\n      throw new Error('Rasters do\\'nt work with polar coordinates (for now)')\n    }\n  }\n\n  // Scale\n  $: scaleX = scale\n    ? scale.copy().range($sectionContext.rangeX)\n    : $sectionContext.scaleX\n\n  // Ticks\n  $: positions = getTickPositions(\n    values,\n    scaleX,\n    count,\n    extra,\n    $sectionContext.zoomIdentity \n      ? { t: $sectionContext.zoomIdentity.x, k: $sectionContext.zoomIdentity.kx }\n      : undefined\n  )\n\n  $: coordinates = getCoordinatesXRaster(\n    positions,\n    scaleX,\n    $sectionContext\n  )\n</script>\n\n<g class=\"x-grid-lines\">\n    \n  <LineLayer \n    {...coordinates}\n    strokeWidth={width}\n    opacity={opacity}\n    stroke={color}\n    {transition}\n  />\n\n</g>\n","import generateArrayOfLength from '../../Marks/utils/generateArrayOfLength.js'\n\nexport function getCoordinatesXRaster (positions, scaleX, sectionContext) {\n  const bandOffset = scaleX.bandwidth ? scaleX.bandwidth() / 2 : 0\n\n  const x = positions.map(p => scaleX(p) + bandOffset).map(p => [p, p])\n  const y = generateArrayOfLength(sectionContext.rangeY, positions.length)\n\n  return {\n    x: () => x,\n    y: () => y\n  }\n}\n\nexport function getCoordinatesYRaster (positions, scaleY, sectionContext) {\n  const bandOffset = scaleY.bandwidth ? scaleY.bandwidth() / 2 : 0\n\n  const x = generateArrayOfLength(sectionContext.rangeX, positions.length)\n  const y = positions.map(p => scaleY(p) + bandOffset).map(p => [p, p])\n\n  return {\n    x: () => x,\n    y: () => y\n  }\n}\n","<script>\n  import { LineLayer } from '../../../index.js'\n  import * as SectionContext from '../../Core/Section/SectionContext'\n\n  import { getTickPositions } from '../Axes/ticks.js'\n  import { getCoordinatesYRaster } from './getCoordinates.js'\n  \n  export let scale = undefined\n  export let count = 10\n  export let extra = false\n  export let values = undefined\n  export let width = 0.25\n  export let color = 'black'\n  export let opacity = 1\n  export let transition = undefined\n\n  // Contexts\n  const sectionContext = SectionContext.subscribe()\n\n  // Make sure not polar\n  $: {\n    if ($sectionContext.transformation === 'polar') {\n      throw new Error('Rasters do\\'nt work with polar coordinates (for now)')\n    }\n  }\n\n  // Scale\n  $: scaleY = scale\n    ? scale.copy().range($sectionContext.rangeY)\n    : $sectionContext.scaleY\n\n  // Ticks\n  $: positions = getTickPositions(\n    values,\n    scaleY,\n    count,\n    extra,\n    $sectionContext.zoomIdentity \n      ? { t: $sectionContext.zoomIdentity.y, k: $sectionContext.zoomIdentity.ky }\n      : undefined\n  )\n\n  $: coordinates = getCoordinatesYRaster(\n    positions,\n    scaleY,\n    $sectionContext\n  )\n</script>\n\n<g class=\"y-grid-lines\">\n    \n  <LineLayer \n    {...coordinates}\n    strokeWidth={width}\n    opacity={opacity}\n    stroke={color}\n    {transition}\n  />\n\n</g>\n","<script>\n    import {\n        Graphic,\n        XAxis,\n        YAxis,\n        XGridLines,\n        YGridLines,\n        Point,\n    } from '@snlab/florence'\n\n    let GRID_COLOR = '#80DDF2'\n\n    let LABELS_AMOUNT = 3\n    let N_FOR_LABEL = 80\n    let MAX = 100\n    let COLORS = [\n        '#FF0DC0',\n        '#F22E62',\n        '#25BCFF',\n        '#205459',\n        '#16a085',\n        '#27ae60',\n        '#8e44ad',\n        '#e74c3c',\n        '#d35400',\n        '#f39c12',\n        '#f1c40f',\n        '#2c3e50',\n    ]\n\n    // Note that error must be < max/2\n    let ERROR = 25\n\n    // distance of centers from origin\n    let RADIUS = MAX / 2 - ERROR\n\n    // Functions\n    const euclideanDistance = function (a, b) {\n        let x = a.x - b.x\n        let y = a.y - b.y\n\n        return Math.sqrt(x * x + y * y)\n    }\n    const generateData = function (nForLabel, centers) {\n        let data = []\n        centers.forEach(({ x, y }) => {\n            for (let j = 0; j < nForLabel; j++) {\n                const angle = Math.PI * 2 * Math.random()\n                const point = {\n                    x: x + ERROR * Math.cos(angle) * Math.random(),\n                    y: y + ERROR * Math.sin(angle) * Math.random(),\n                    label: -1,\n                }\n                data.push(point)\n            }\n        })\n        return data\n    }\n    const Mean = (includes) => {\n        const len = includes.length\n\n        if (len == 0)\n            return {\n                x: MAX / 2,\n                y: MAX / 2,\n            }\n\n        let x_sum = 0\n        let y_sum = 0\n\n        includes.forEach((p) => {\n            x_sum += p.x\n            y_sum += p.y\n        })\n\n        return {\n            x: x_sum / len,\n            y: y_sum / len,\n        }\n    }\n\n    // Initalizing Labels and Centers\n    let centers = []\n    let labels = []\n    for (let i = 0; i < LABELS_AMOUNT; i++) {\n        labels.push({\n            x: Math.random() * MAX,\n            y: Math.random() * MAX,\n            color: COLORS[i],\n        })\n\n        centers.push({\n            x: MAX / 2 + Math.cos((Math.PI / LABELS_AMOUNT) * 2 * i) * RADIUS,\n            y: MAX / 2 + Math.sin((Math.PI / LABELS_AMOUNT) * 2 * i) * RADIUS,\n        })\n    }\n\n    // Gen data\n    let data = []\n    data = generateData(N_FOR_LABEL, centers)\n\n    // Event Handler\n    // Recalculate means for observations assigned to each cluster.\n    function Update() {\n        labels.forEach((label, index) => {\n            Object.assign(label, Mean(data.filter((p) => p.label == index)))\n        })\n        labels = labels\n    }\n\n    // Assign each observation to the cluster with the nearest mean\n    function Assignment() {\n        data.forEach((p) => {\n            let minDis = euclideanDistance(p, labels[0])\n            let min = 0\n\n            labels.forEach((label, index) => {\n                const dis = euclideanDistance(p, label)\n                if (dis < minDis) {\n                    min = index\n                    minDis = dis\n                }\n            })\n            p.label = min\n        })\n\n        labels = labels\n    }\n</script>\n\n<main>\n    <a\n        class=\"title\"\n        href=\"https://en.wikipedia.org/wiki/K-means_clustering\"\n        target=\"_blank\"\n    >\n        <h1>k-means clustering</h1>\n        <h1>k-means clustering</h1>\n        <h1>k-means clustering</h1>\n    </a>\n\n    <div class=\"graph\">\n        <Graphic\n            width={500}\n            height={500}\n            scaleX={[-6, MAX + 6]}\n            scaleY={[-6, MAX + 6]}\n            flipY\n            padding={20}\n        >\n            {#each data as point}\n                <Point\n                    x={point.x}\n                    y={point.y}\n                    radius={2}\n                    fill={point.label == -1\n                        ? '#8B8B8B'\n                        : labels[point.label].color}\n                    opacity={0.9}\n                    transition={2000}\n                />\n            {/each}\n            {#each labels as label}\n                <Point\n                    x={label.x}\n                    y={label.y}\n                    radius={6}\n                    fill={label.color}\n                    transition={2000}\n                />\n                <Point\n                    x={label.x}\n                    y={label.y}\n                    radius={10}\n                    strokeWidth={1}\n                    stroke={label.color}\n                    strokeOpacity={0.5}\n                    fill={label.color}\n                    transition={2000}\n                />\n            {/each}\n            <XAxis\n                baseLineColor={GRID_COLOR}\n                tickColor={GRID_COLOR}\n                labelColor={GRID_COLOR}\n                labelOpacity={0}\n            />\n            <YAxis\n                baseLineColor={GRID_COLOR}\n                tickColor={GRID_COLOR}\n                labelColor={GRID_COLOR}\n                labelOpacity={0}\n            />\n            <XGridLines color={GRID_COLOR} opacity={0.3} />\n            <YGridLines color={GRID_COLOR} opacity={0.3} />\n        </Graphic>\n    </div>\n\n    <div class=\"controller\">\n        <button on:click={Update}>Update</button>\n        <button on:click={Assignment}>Assign</button>\n    </div>\n</main>\n\n<style>\n    .title {\n        grid-area: title;\n\n        display: flex;\n        align-items: center;\n        justify-content: center;\n    }\n    a:hover {\n        text-decoration: none;\n    }\n    h1:nth-child(1) {\n        color: #ef29f2;\n        animation: glitch-anim 5s infinite linear alternate-reverse;\n        margin-left: -2px;\n    }\n    h1:nth-child(2) {\n        color: #00fff9;\n        animation: glitch-anim2 1s infinite linear alternate-reverse;\n        margin-right: -2px;\n    }\n    h1:nth-child(3) {\n        color: #fff;\n    }\n    h1 {\n        position: absolute;\n\n        text-transform: uppercase;\n        font-size: 2rem;\n        font-weight: 400;\n    }\n\n    main {\n        background-color: rgba(0, 0, 0, 0.95);\n\n        width: 100vw;\n        height: 100vh;\n\n        text-align: center;\n        padding: 1em;\n        margin: 0;\n        padding: 0;\n\n        display: grid;\n        grid-template-columns: 1fr auto;\n        grid-template-rows: 60px 1fr;\n        grid-template-areas:\n            'title controller'\n            'graph controller';\n    }\n\n    .graph {\n        grid-area: graph;\n    }\n\n    .controller {\n        grid-area: controller;\n\n        height: fit-content;\n\n        display: flex;\n        flex-direction: column;\n        gap: 1rem;\n        align-items: center;\n        justify-content: center;\n    }\n    button {\n        --color: rgb(51, 70, 235);\n        background: var(--color);\n\n        outline: none;\n        border: none;\n        color: white;\n        padding: 0;\n\n        font-weight: 900;\n        text-transform: uppercase;\n        font-size: 0.8rem;\n\n        cursor: pointer;\n\n        clip-path: polygon(0 0, 100% 0%, 100% 100%, 15% 100%, 0 67%);\n        width: 120px;\n        height: 40px;\n    }\n\n    @media (min-width: 640px) {\n        main {\n            max-width: none;\n        }\n    }\n</style>\n","import App from './App.svelte';\n\nconst app = new App({\n\ttarget: document.body,\n\tprops: {\n\t\tname: 'world'\n\t}\n});\n\nexport default app;"],"names":["noop","identity","x","assign","tar","src","k","run","fn","blank_object","Object","create","run_all","fns","forEach","is_function","thing","safe_not_equal","a","b","subscribe","store","callbacks","unsub","unsubscribe","component_subscribe","component","callback","$$","on_destroy","push","get_slot_context","definition","ctx","$$scope","slice","update_slot","slot","slot_definition","dirty","get_slot_changes_fn","get_slot_context_fn","slot_changes","lets","undefined","merged","len","Math","max","length","i","get_slot_changes","slot_context","p","is_client","window","now","performance","Date","raf","cb","requestAnimationFrame","tasks","Set","run_tasks","task","c","delete","f","size","append","target","node","appendChild","insert","anchor","insertBefore","detach","parentNode","removeChild","destroy_each","iterations","detaching","d","element","name","document","createElement","svg_element","createElementNS","text","data","createTextNode","space","empty","listen","event","handler","options","addEventListener","removeEventListener","attr","attribute","value","removeAttribute","getAttribute","setAttribute","set_svg_attributes","attributes","key","set_data","wholeText","current_component","set_current_component","get_current_component","Error","beforeUpdate","before_update","onMount","on_mount","afterUpdate","after_update","onDestroy","setContext","context","set","getContext","get","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","Promise","resolve","update_scheduled","schedule_update","then","flush","add_render_callback","flushing","seen_callbacks","update","pop","has","add","clear","fragment","outroing","outros","group_outros","r","check_outros","transition_in","block","local","transition_out","o","destroy_block","lookup","update_keyed_each","old_blocks","get_key","dynamic","list","destroy","create_each_block","next","get_context","n","old_indexes","new_blocks","new_lookup","Map","deltas","child_ctx","abs","will_move","did_move","m","first","new_block","old_block","new_key","old_key","get_spread_update","levels","updates","to_null_out","accounted_for","get_spread_object","spread_props","create_component","mount_component","customElement","new_on_destroy","map","filter","destroy_component","init","instance","create_fragment","not_equal","props","parent_component","bound","on_disconnect","skip_bound","ready","ret","rest","fill","make_dirty","hydrate","nodes","Array","from","childNodes","children","l","intro","SvelteComponent","[object Object]","this","$destroy","type","index","indexOf","splice","$$props","obj","$$set","keys","w","screen","navigator","matchMedia","matches","passive","onTouchStartInWindow","supportsTouchEvents","hasTouch","maxTouchPoints","userAgent","isIPad","test","min","width","height","hasCoarsePrimaryPointer","hasAnyHoverOrAnyFinePointer","deviceType","primaryInput","subscriber_queue","writable","start","stop","subscribers","new_value","run_queue","s","invalidate","subscriber","GraphicContext","renderer","_rendererOptions","output","constructor","includes","JSON","stringify","validateRendererOptions","parsePadding","_padding","padding","Number","left","right","top","bottom","invalidPaddingError","applyPadding","range","offsetMin","offsetMax","console","warn","ensurePaddingSmallerThanRange","applyFlip","flip","applyZoom","translate","validateZoomFactor","NaN","delta","compare","lo","hi","mid","ascending","ascendingComparator","center","bisectRight","bisector","Adder","_partials","Float64Array","_n","j","y","e10","sqrt","e5","e2","tickIncrement","count","step","power","floor","log","LN10","error","pow","initRange","domain","arguments","factory","prototype","extend","parent","Color","darker","brighter","reI","reN","reP","reHex","reRgbInteger","RegExp","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","color_formatHex","rgb","formatHex","color_formatRgb","formatRgb","color","format","trim","toLowerCase","exec","parseInt","rgbn","Rgb","rgba","hsla","hasOwnProperty","g","rgbConvert","opacity","rgb_formatHex","hex","rgb_formatRgb","isNaN","round","toString","h","Hsl","hslConvert","hsl2rgb","m1","m2","copy","channels","displayable","formatHsl","gamma","nogamma","t","exponential","constant","linear","rgbGamma","end","colorRgb","genericArray","nb","na","setTime","reA","reB","source","am","bm","bs","bi","lastIndex","q","number","one","zero","join","string","date","ArrayBuffer","isView","DataView","isArray","valueOf","object","numberArray","unit","normalize","bimap","interpolate","d0","d1","r0","r1","polymap","reverse","bisect","clamp","unknown","transformer","transform","untransform","piecewise","input","interpolateValue","rescale","scale","invert","interpolateNumber","_","rangeRound","interpolateRound","u","continuous","formatDecimalParts","toExponential","coefficient","prefixExponent","re","formatSpecifier","specifier","match","FormatSpecifier","align","sign","symbol","comma","precision","exponent","%","toFixed","toLocaleString","replace","e","toPrecision","formatRounded","X","toUpperCase","locale","formatPrefix","prefixes","grouping","thousands","group","call","substring","currencyPrefix","currency","currencySuffix","decimal","numerals","formatNumerals","String","percent","minus","nan","newFormat","formatTypes","prefix","suffix","formatType","maybeSuffix","valuePrefix","valueSuffix","valueNegative","out","i1","i0","formatTrim","charCodeAt","Infinity","tickFormat","step0","step1","tickStep","precisionPrefix","precisionRound","precisionFixed","linearish","ticks","isFinite","nice","prestep","maxIter","ceil","apply","createScale","scaleLinear","newScale","lower","upper","flipped","isPointScale","isBandScale","createInvertMethod","createPolarTransformation","rangeX","rangeY","finalRangeX","finalRangeY","toTheta","PI","toRadius","fitX","fitY","coords","theta","radius","sin","cos","polarToCartesian","smallCoords","quadrant","getQuadrant","atan","cartesianToPolar","parseNeedsScaling","needsScaling","xNeedsScaling","yNeedsScaling","Boolean","createSectionContext","sectionData","zoomIdentity","kx","ky","ranges","coordinates","x1","x2","y1","y2","getRanges","finalRanges","sectionContext","flipX","flipY","getFinalRanges","scaleX","scaleY","scales","finalScales","bbox","getBbox","paddedBbox","getPaddedBbox","constructSectionContext","createScales","finalScaleX","finalScaleY","createFinalScales","transformation","getTotalTransformation","inverseTotalTransformation","getScaleTransformation","postScaleTransformation","scaleTransformation","point","inverseScaleTransformation","attachTransformations","minX","maxX","minY","maxY","formatLocale","EventTracker","eventManager","eventName","nativeEventName","useWindow","preventDefault","_eventManager","_eventName","_nativeEventName","_useWindow","_preventDefault","_numberOfActiveListeners","_callbacks","listenerId","_eventManagerHasBeenMounted","_attachNativeListenerIfNecessary","_removeNativeListenerIfNecessary","_mounted","_handleEvent","bind","_domNode","nativeEvent","screenCoordinates","_getScreenCoordinates","BaseEventManager","EXPOSED_EVENTS","managerType","_svgPoint","_trackers","_BROWSER_TYPE","_managerType","domNode","createSVGPoint","pointerEnabled","msPointerEnabled","setNativeEventName","_getNativeMouseEventName","_getNativeTouchEventName","attachAllListeners","str","charAt","MouseEventManager","super","exposedEventName","BROWSER_TYPE","sliceOffMouse","lastPart","capitalize","clientX","clientY","matrixTransform","getScreenCTM","inverse","WINDOW_EVENTS","PREVENT_DEFAULT","TouchEventManager","sliceOffTouch","touches","getTouches","_getScreenCoordinatesSingle","_getScreenCoordinatesMulti","touch","touchesInScreenCoordinates","EventManager","detectIt.primaryInput","_mouseEventManager","_touchEventManager","_forEachManager","manager","addRootNode","attachEventListeners","BaseInteractionManager","_id","_section","_markInteractionInterface","_sectionInteractionInterface","id","BaseInteractionInterface","interactionManager","InteractionHandlers","_interactionManager","_handlers","handlerName","interactionName","interactionNameToHandlerName","indexPoint","markData","pointAttributes","item","calculateBboxPoint","markType","markId","indexPointLayer","layerAttributes","keyArray","layerId","items","getPointAttributes","pixelGeometry","pixelGeometryObject","radiusObject","tau","streamGeometry","geometry","stream","streamGeometryType","streamObjectType","Feature","FeatureCollection","features","Sphere","sphere","Point","MultiPoint","LineString","streamLine","MultiLineString","Polygon","streamPolygon","MultiPolygon","GeometryCollection","geometries","closed","coordinate","lineStart","lineEnd","polygonStart","polygonEnd","x00","y00","x0","y0","areaSum","areaRingSum","areaStream","areaRingStart","areaRingEnd","result","area","areaPointFirst","areaPoint","boundsStream","bounds","X0","Y0","Z0","X1","Y1","Z1","X2","Y2","Z2","centroidStream","centroidPoint","centroidLineStart","centroidLineEnd","centroidRingStart","centroidRingEnd","centroid","centroidPointFirstLine","centroidPointLine","dx","dy","z","centroidPointFirstRing","centroidPointRing","PathContext","_context","_radius","pointRadius","_line","_point","closePath","moveTo","lineTo","arc","lengthRing","lengthSum","lengthStream","lengthPointFirst","lengthPoint","PathString","_string","circle","projection","projectionStream","contextStream","path","pathArea","measure","pathMeasure","pathBounds","pathCentroid","isInvalid","isDefined","isUndefined","calculateBboxGeometry","_circle","geoPath","isLinearRing","ring","isPolygon","isMultiPolygon","polygonArea","polygon","getRingArea","getPolygonArea","multiPolygon","totalArea","getMultiPolygonArea","total","getSignedRingArea","pointDistance","point1","point2","linearRingLength","linearRing","totalLength","calculateCentroid","calculateLinearRingCentroid","polygonCentroid","calculateMultiPolygonCentroid","isLineString","isMultiLineString","multiLineString","lineString","lineStringCentroid","calculateMultiLineStringCentroid","nPts","off","p1","p2","twicearea","pointIntersectsLineSegment","lineSegment","lineWidth","closestPoint","C","D","dot","lengthSquared","xx","yy","param","closestPointOnLineSegment","distanceClosestPointOnLineSegment","SPLITTER","ahi","alo","bhi","blo","ne","nf","bv","scalarScalar","eptr","fptr","ei","ea","fi","fa","_x","_bv","q0","q1","br","ar","ts","twoProduct","pq","twoSum","cofactor","generateSum","expr","determinant","orientation","pos","neg","matrix","args","posExpr","negExpr","funcName","code","Function","proc","robustSum","robustScale","robustSubtract","orientation3Exact","orientation4Exact","CACHED","det","tol","adx","bdx","cdx","ady","bdy","cdy","adz","bdz","cdz","bdxcdy","cdxbdy","cdxady","adxcdy","adxbdy","bdxady","slowOrient","procArgs","module","concat","exports","generateOrientationProc","vs","inside","lim","yi","yj","orient","yk","px","pointInPolygonCoordinates","pointInPolygon","pointInMultiPolygon","pointInRing","robustPointInPolygon","invalidInputError","getInput","ensureSameLength","roundPoint","decimals","zeroes","transformLinearRing","settings","simplify","transformedLinearRing","transformLinearRingUnsimplified","simplificationThreshold","lastPoint","transformLinearRingSimplified","transformSetOfLinearRings","linearRings","transformedLinearRings","transformXYArrays","transformXYArraysUnsimplified","transformXYArraysSimplified","transformFunctions","transformPoint","transformMultiPoint","multiPoint","transformLineString","transformMultiLineString","transformPolygon","transformMultiPolygon","polygons","transformedPolygons","transformGeometry","_transformation","functionName","getNumberOfInterpolatedPoints","to","toPolar","interpolationThreshold","fromScaledDown","toScaledDown","totalScaleFactor","totalScaleFactorX","totalScaleFactorY","getTotalScaleFactor","straightInYDimension","numberOfPointsNeeded","interval","aSq","bSq","asinh","getPolarLength","pointsSorted","getFunctionalForm","interpolatePoints","interpolator","interpolateLinearRing","transformations","interpolatedLinearRing","fromScaled","toScaled","interpolateLinearRingUnsimplified","interpolateSetOfLinearRings","interpolatedLinearRings","interpolateXYArrays","interpolateXYArraysUnsimplified","interpolateFunctions","interpolateLineString","interpolateMultiLineString","interpolatePolygon","interpolateMultiPolygon","polarGeometry","_transformations","_postScaleTransformation","define","earcut","holeIndices","dim","invSize","hasHoles","outerLen","outerNode","linkedList","triangles","prev","queue","steiner","getLeftmost","sort","compareX","eliminateHole","filterPoints","eliminateHoles","earcutLinked","clockwise","last","signedArea","insertNode","equals","removeNode","again","ear","pass","zOrder","prevZ","nextZ","tail","numMerges","pSize","qSize","inSize","sortLinked","indexCurve","isEarHashed","isEar","cureLocalIntersections","splitEarcut","pointInTriangle","minTX","minTY","maxTX","maxTY","minZ","maxZ","intersects","locallyInside","isValidDiagonal","splitPolygon","hole","hx","hy","qx","mx","my","tanMin","sectorContainsSector","findHoleBridge","leftmost","ax","ay","bx","by","cx","cy","py","intersectsPolygon","middleInside","q2","o1","o2","o3","o4","onSegment","num","a2","Node","b2","an","bp","sum","feature","topology","properties","arcs","points","array","line","stitchedArcs","fragmentByStart","fragmentByEnd","fragments","emptyIndex","p0","dp","ends","fg","unshift","gf","mergeArcs","objects","polygonsByArc","groups","extract","planarRingArea","neighbors","stitch","ki","getOrderDescending","indexArray","sortIntoOrder","order","getInsertionIndexDescending","arraySortedDescending","removeClosingPoint","closeRing","firstPoint","insertPointsLinearRing","inputLinearRing","numberOfAdditionalPoints","cloneLinearRing","insertPoints","insertPointsLineString","inputLineString","edgeLengths","edges","edge","getEdge","getEdgeLengths","orderedEdgeIds","longestEdgeId","edgeLength","newEdges","splitEdge","newEdgesLength","shift","insertOrderedId","clonedLinearRing","pointInBetween","orderedIds","valueIndex","newValue","idsWereInserted","currentArrayValue","isPolygonOrMultiPolygon","isLineStringOrMultiLineString","matchLinearRings","fromRings","toRings","fromAreas","toAreas","fromAreasOrderDescending","toAreasOrderDescending","pairs","fromIndex","fromOrder","bestOrder","polygonToPolygon","fromOuterRing","toOuterRing","fromOuterRingPrepared","toOuterRingPrepared","prepareLinearRings","neitherHasHoles","outerRingInterpolator","createInterpolatorNoHoles","holeInterpolators","holeInterpolator","createInterpolatorWithHoles","numberOfMatchableHoles","fromHoles","getHoles","toHoles","fromHolesSorted","fromHole","toHole","fromHolePrepared","toHolePrepared","createMatchableHoleInterpolators","differenceBetweenNumberOfHoles","createHoleImploders","createHoleExploders","createHoleInterpolators","fromRing","toRing","lengthDifference","toLinearRing","fromLinearRing","fromLength","bestOffset","sumOfSquares","spliced","offset","distance","rotatePointsLinearRing","numberOfHoles","holes","interpolators","smallRectangleAroundCentroid","makeSmallRectangleAroundPoint","preparedPolygon","preparedImplodePoint","epsilon","createTriangleIndexArcs","triangleIndices","createArcSlug","getPoint","vertices","createTopoPolygon","getTriangleArea","triangleIndexArcs","deviation","trianglesArea","flatten","dimensions","holeIndex","collapseTopology","numberOfPieces","triangleGeometries","mergeSmallestFeature","RangeError","smallest","neighborIndex","geoms","sourceArcs","neighbor","targetArcs","some","findNeighbor","cutTriangleInTwo","triangle","pointBetweenAB","createTriangleGeometry","cutPolygon","flattenedPolygon","numberOfTriangles","getNumberOfTriangles","arcIndices","slug","pointIndex","createTopology","areas","areasSorted","geometriesSorted","cutTriangles","areaCutTriangles","areaCutTriangle","cutTriangle","insertionIndex","sliceUpTriangles","outerRing","createGeometries","cutPolygons","numberOfDesiredAdditionalPolygons","wrongNumberOfPolygonsError","numberOfCutsPerPolygon","assignCuts","resultingPolygons","numberOfCuts","numberOfDesiredPolygons","polygonAreas","splitMultiPolygon","polygonCoordinates","createInterpolatorPolygons","fromPolygons","toPolygons","polygonInterpolators","fromPolygon","toPolygon","inputGeometries","inputGeometry","combineIntoMultiPolygon","polygonInterpolator","multiPolygonToPolygon","numberOfFromPolygons","lineStringtoLineString","preparedFromCoordinates","preparedToCoordinates","prepareCoordinates","coordinateInterpolator","createInterpolator","fromCoordinates","toCoordinates","normalTotalSquareDistance","getTotalSquaredDistancePositions","fromReversed","reversedTotalSquareDistance","reverseIfBetterMatching","totalSquaredDistance","movePointAlongLine","unitVector","movePoint","magnitude","getUnitVector","multiLineStringToLineString","numberOfFromLineStrings","cutLineString","createMultiLineStringInterpolator","createLineStringInterpolators","numberOfLineStrings","multiLineStringCoordinates","desiredSegmentSize","lastPointIndex","currentSegment","elapsedDistanceSinceLastCut","distanceAB","distanceIncludingCurrentSegment","cutCoordinates","calculateCutCoordinates","lastCut","pointsEqual","cuts","fromLineString","toLineString","preparedFromLineString","preparedToLineString","lineStringInterpolators","lineStringInterpolator","matchLineStrings","inputLengths","targetLengths","inputLengthOrderDescending","targetLengthOrderDescending","inputIndex","targetIndex","inputOrder","getInputOrder","splitLineStrings","lineStrings","numberOfDesiredLineStrings","numberOfCutsPerLineString","lengths","getLengths","resultingLineStrings","numberOfDesiredPieces","transshape","bothPolygons","bothLines","ensureValidInput","reverseInterpolator","polygonToMultiPolygon","multiPolygonToMultiPolygon","lineStringToMultiLineString","fromLineStrings","toLineStrings","multiLineStringToMultiLineString","transitionGeometry","fromGeometry","toGeometry","pointTransition","polygonTransition","lineStringTransition","transitionGeometries","fromLayer","toLayer","firstFromGeometry","getFirstGeometry","firstToGeometry","transitionLayer","polygonTypes","lineStringTypes","layer","interpolationMethod","interpolatorObject","getRectangleAttributes","screenGeometry","screenGeometryObject","getPolygonAttributes","indexLineString","lineStringCoords","lineAttributes","lineStringIndex","indexableSegments","createSegmentItem","indexMultiLineString","segment","segmentGeometry","createItemFromBbox","strokeWidth","halfStrokeWidth","newBbox","takeIntoAccountStrokeWidth","segmentIndex","createLineAttributes","strokeWidthObject","modifyForLayer","segments","segmentItem","getAreaAttributes","getSymbolAttributes","markIndexing","Rectangle","rectangleAttributes","polygonAttributes","Line","Label","Area","areaAttributes","Symbol","symbolAttributes","layerIndexing","MarkInteractionInterface","_indexableMarks","_indexableLayers","indexableMark","indexingFunction","layerType","layerData","indexableLayer","_getHandler","addMarkInteraction","hasMark","removeMarkInteraction","addLayerInteraction","hasLayer","removeLayerInteraction","SectionInteractionInterface","addInteraction","hasInteraction","removeInteraction","BaseInteractionHandler","_interactionName","getId","events","eventTracker","addListener","removeListener","exp","_maxEntries","_minEntries","leaf","all","_all","search","toBBox","collides","load","_build","_splitRoot","_insert","remove","_condense","compareMinX","compareMinY","toJSON","fromJSON","_chooseSubtree","_split","_adjustParentBBoxes","_chooseSplitAxis","_chooseSplitIndex","v","M","_allDistMargin","pointCollision","SpatialIndex","interactionHandler","getMark","getLayer","_rbush","RBush","_interactionHandler","_getMark","_getLayer","mark","multipleSegments","mouseCoordinates","searchArea","searchAreaFromCoordinates","indexQueryResults","_getHits","boundingBox","hits","indexQueryResult","collisionTest","collisionTests","indexableItem","MarkInteractionHandler","_spatialIndex","marks","_numberOfInteractions","_markCallbacks","_layerCallbacks","_addEventListenerIfNecessary","indexMark","_removeEventListenerIfNecessary","unindexMark","indexLayer","unindexLayer","_addEventListener","_removeEventListener","createMarkEvent","eventType","eventOptions","hit","hitBbox","extractBbox","hitSource","createEvent","createLayerEvent","createSectionEvent","nativeType","INTERESTING_NATIVE_KEYS","createSelectMarkEvent","createSelectLayerEvent","getLocalCoordinates","section","clampedX","clampedY","localX","localY","coordinatesAreInsideSection","hitIsMark","hitIsInLayer","getHitId","queryMouseCoordinates","localCoordinates","clickEvent","_previousMouseoverIds","_currentMouseoverIds","hitId","_fireCallback","mouseoverEvent","_previousMouseoverHits","_currentMouseoverHits","mouseoutEvent","mousedownEvent","mouseupEvent","_currentHits","_handleMousedown","_handleMousemove","_handleMouseup","dragType","mousedragEvent","SectionInteractionHandler","_callback","scrollLineHeight","stopPropagation","wheelEvent","wheelDelta","detail","deltaY","iframe","body","idoc","contentWindow","open","write","close","firstElementChild","offsetHeight","getScrollLineHeight","deltaMode","getDelta","_mouseCurrentlyOverSection","mousemoveEvent","MouseInteractionManager","MarkInteractionHandlers","SectionInteractionHandlers","numberOfTouches","touchdownEvent","touchupEvent","_previousHits","_handleTouchstart","_handleTouchmove","touchoverEvent","_handleTouchend","touchoutEvent","touchdragEvent","allCoordinatesAreInsideSection","screenCoordinatesArray","every","getDistance","coords1","coords2","touchmoveEvent","_fingerCurrentlyOverSection","_previousTouchDistance","sectionHeight","getCenter","touchDistance","relativeTouchDelta","pinchEvent","screenCenter","localCenter","TouchInteractionManager","bboxPoint","getLineAttributes","SelectManager","_selectableMarks","_selectableLayers","_previousSelection","_currentSelection","_selectPolygon","rectangle","queryBoundingBox","rectangleToRBushBbox","_fireSelectCallback","_fireDeselectCallback","startCoordinates","parseCoordinates","lastThreePointsPolygon","_getLastThreePointsPolygon","bboxToRBushBbox","_delta","getSelectPolygon","selectEvent","onSelect","deselectEvent","onDeselect","is2dArray","isXYObject","InteractionManager","_mouseInteractionManager","_touchInteractionManager","_selectManager","setId","linkEventManager","mouse","loadSection","slot_ctx","idCounter","graphicId","viewBox","preserveAspectRatio","onClick","onWheel","onMousedown","onMouseup","onMouseover","onMouseout","onMousemove","onPinch","onTouchdown","onTouchmove","onTouchup","onTouchover","onTouchout","backgroundColor","paddingColor","blockReindexing","clip","graphicContext","GraphicContext.init","SectionContext.init","eventManagerContext","EventManagerContext.init","interactionManagerContext","InteractionManagerContext.init","rootNode","EventManagerContext.update","InteractionManagerContext.update","numberWidth","numberHeight","originalViewBox","originalViewBoxArray","split","_rootNode","getElementById","GraphicContext.update","SectionContext.update","sectionId","$interactionManagerContext","$sectionContext","clipPropsPadding","getClipPropsPadding","clipPropsNoPadding","getClipPropsNoPadding","sectionInterface","removeAllInteractions","removeSectionInteractionsIfNecessary","select","selectRectangle","updateSelectRectangle","resetSelectRectangle","startSelectPolygon","pointCoordinates","addPointToSelectPolygon","moveSelectPolygon","resetSelectPolygon","keyProp","createPixelGeometryFromGeometry","renderSettings","geometryNeedsScaling","ensureValidGeometry","interpolationNecessary","createPixelGeometryObjectFromGeometry","getKeyArray","ensureValidCombination","onlyOne","invalidCoordinateValueError","wereSpecified","scaleCoordinate","coordinateName","scaledCoordinate","parentScale","throwErrorIfInvalidScaledCoordinate","createScaledGeometry","required","default","stroke","fillOpacity","strokeOpacity","fontFamily","fontSize","fontWeight","rotation","anchorPoint","shape","independentAxis","aesthetics","validateAesthetics","pointAesthetics","rectangleAesthetics","polygonAesthetics","lineAesthetics","labelAesthetics","symbolAesthetics","areaAesthetics","passedAesthetics","allowedAesthetics","aestheticName","aestheticValue","aestheticRequirements","aestheticNotAllowedError","aestheticRequiredError","ensureValidGeometryProps","getInputType","propNeedsScaling","prop","createPixelGeometry","geometryProps","inputType","createPixelGeometryFromXYArrays","geometryType","validateXYArrays","xNotClosed","yNotClosed","closeIfNecessary","rendervousInput","createRendervousInput","createPixelGeometryObjectFromXYArrays","cross","cross-sharp","diamond","triangle-up","triangle-down","triangle-right","triangle-left","star4","star5","star","star6","star8","pentagon","hexagon","heptagon","septagon","octagon","nonagon","decagon","representPointAsPolygon","circumference","steps","createSymbolGeometry","pointGeometry","createPoint","halfSize","createSquareGeometry","createSquare","geometryAlias","createSymbolFromGeometry","validateProps","normalized","coordinateProps","definedTypes","definedProps","entries","reduce","acc","definedKeys","arrayLength","values","val","idx","arr","augmentProps","indAx","indKey","indVal","depKey1","depVal1","depKey2","depVal2","depVal1Map","singleton","depVal2Map","none","scaleMap","scaleCoordinates","scaled","bottomPoints","topPoints","origin","createPixelGeometryObject","validateXYProps","xScaled","yScaled","xArray","yArray","recycle","applyRecyclingIfNecessary","totalTransformation","geometryObject","transformXYArraysIntoGeometryObject","createPixelGeometryObjectFromCoordinates","validateGeometryPropLayer","geometryArray","transformGeometryArrayIntoGeometryObject","coordinateNames","coordMap","getMissingCoordinateFromContext","invalidCoordinateError","_scaleCoordinates","coordinateValues","coordinatesThatNeedScaling","coordinatesThatArePrimitive","scaledCoordinates","coordinateValue","startsWith","generateArrayOfLength","createPropGetter","propObject","validatePropArrayLength","createPropObject","markPixelGeometryFuncs","Proxy","createPixelGeometryPoint","validateTypes","extracted","layerPixelGeometryFuncs","createPixelGeometryObjectPoint","whichCoordinatesNeedScaling","nonMissingCoordinates","getCoordinateValues","getMissingCoordinatesFromContext","atLeastOneArray","getNRectangles","whichCoordinatesArePrimitive","scaledGeometryArray","createScaledGeometryArray","pointGeometryObject","shapeGetter","sizeGetter","symbolGeometryObject","createSymbolGeometryObject","allowedProps","numAreas","augmentedAreas","indKey1","indVal1","indKey2","indVal2","indValMap","array of arrays","augmentAreas","normalizedAreas","numAreasAll","validateAreas","isSingleton","isNestedArray","xs","normalizeAreas","areaIndex","representLineAsPolygon","lineCoordinates","createOuterRing","coordinatesBottom","coordinatesTop","bottomPoint","topPoint","getCornerPointsStart","getCornerPointsEnd","getCornerPointsIndex","ringIsNotClosed","getNextSegment","getParallelPoints","getPreviousSegment","previousSegment","nextSegment","previousUnitVector","nextUnitVector","previousCornerPerpendicularPoints","nextCornerPerpendicularPoints","findIntersection","normalVector","vector","vector1","vector2","lambda1","v1","v2","deltaX","v1x","v2x","v1y","v2y","findLambda","markRepresentAsPolygonFuncs","layerRepresentAsPolygonFuncs","lines","cubicOut","is_date","get_interpolator","getTime","tweened","defaults","target_value","opts","previous_task","started","delay","duration","easing","abort","promise","fulfill","loop","elapsed","createTransitionable","transitionOptions","createOptionsFromDuration","aestheticTransition","defaultOptions","createOptionsFromOptions","transitionsEqual","numberOfKeys","aesthetic","aestheticA","aestheticB","aestheticTransitionObjectsEqual","transitionObjectsEqual","createTransitionableLayer","interpolateLayer","aWithoutObsoleteKeys","arg","parseRenderSettings","geoPathGenerator","textAnchorPoint","textAnchor","dominantBaseline","generatePath","initPhase","initDone","transition","onMousedrag","onTouchdrag","_asPolygon","positioningAesthetics","representAsPolygon","asPolygon","GraphicContext.subscribe","SectionContext.subscribe","InteractionManagerContext.subscribe","updatePixelGeometry","updateScreenGeometry","tr_screenGeometry","tr_radius","tr_fill","tr_stroke","tr_strokeWidth","tr_fillOpacity","tr_strokeOpacity","tr_opacity","tr_fontSize","tr_fontWeight","tr_rotation","previousTransition","rotateTransform","$tr_rotation","$tr_screenGeometry","parsedTextAnchorPoint","pixelGeometryRecalculationNecessary","screenGeometryRecalculationNecessary","updateInteractionManagerIfNecessary","removeMarkFromSpatialIndexIfNecessary","isInteractiveMouse","markInterface","loadMark","createDataNecessaryForIndexing","isInteractiveTouch","selectManager","markIsLoaded","removeMark","removeMarkFromSelectIfNecessary","isSelectable","markMouseInterface","removeAllMarkInteractions","markTouchInterface","geometryTypes","createDataNecessaryForIndexingMark","$tr_radius","$tr_fill","$tr_stroke","$tr_strokeWidth","$tr_fillOpacity","$tr_strokeOpacity","$tr_opacity","$tr_fontSize","$tr_fontWeight","any","renderPolygon","renderCircle","renderLine","renderLabel","generatePropObject","propValue","propObj","representAsPolygonObject","updatePixelGeometryObject","fillObject","strokeObject","strokeOpacityObject","fillOpacityObject","opacityObject","textObject","fontFamilyObject","fontSizeObject","fontWeightObject","rotationObject","anchorPointObject","updateScreenGeometryObject","tr_screenGeometryObject","tr_radiusObject","tr_fillObject","tr_strokeObject","tr_strokeWidthObject","tr_strokeOpacityObject","tr_fillOpacityObject","tr_opacityObject","tr_fontSizeObject","tr_fontWeightObject","tr_rotationObject","pixelGeometryObjectRecalculationNecessary","screenGeometryObjectRecalculationNecessary","removeLayerFromSpatialIndexIfNecessary","loadLayer","layerIsLoaded","removeLayer","removeLayerFromSelectIfNecessary","removeAllLayerInteractions","geometryObjects","aestheticsObjects","createDataNecessaryForIndexingLayer","$tr_screenGeometryObject","$tr_radiusObject","$tr_fillObject","$tr_strokeObject","$tr_strokeWidthObject","$tr_strokeOpacityObject","$tr_fillOpacityObject","$tr_opacityObject","$tr_fontSizeObject","$tr_fontWeightObject","$tr_rotationObject","parseHJust","hjust","xOffset","parseVJust","vjust","yOffset","getTickPositions","tickValuesArray","tickCount","tickExtra","isContinuous","rescaledDomain","rescaledRange","getContinuousTicks","getFormat","labelFormat","numberOfTicks","getTextWidth","canvas","font","measureText","getTitleCoordinatesXAxis","axisHeight","yAbsoluteAxis","heightOffset","getHeightOffset","xAbsolute","yAbsolute","getTitleCoordinatesYAxis","axisWidth","xAbsoluteAxis","widthOffset","getWidthOffset","baseLine","baseLineColor","baseLineOpacity","baseLineWidth","tickValues","tickSize","tickWidth","tickColor","tickOpacity","labelOffset","labelRotate","labelFont","labelFontSize","labelFontWeight","labelOpacity","labelColor","titleHjust","titleXOffset","titleVjust","titleYOffset","title","titleColor","titleFont","titleFontSize","titleFontWeight","titleOpacity","titleRotation","titleAnchorPoint","baseLineCoordinates","getBaseLineCoordinatesXAxis","tickPositions","tickCoordinates","bandOffset","bandwidth","yEndAbsolute","yCoordsTick","getTickCoordinatesXAxis","tickLabelText","tickLabelCoordinates","yEnd","yLabelAbsolute","getTickLabelCoordinatesXAxis","labelAnchorPoint","titleCoordinates","getBaseLineCoordinatesYAxis","xEndAbsolute","getTickCoordinatesYAxis","xEnd","xLabelAbsolute","getTickLabelCoordinatesYAxis","tickLabelWidth","extra","positions","getCoordinatesXRaster","getCoordinatesYRaster","label","GRID_COLOR","MAX","COLORS","RADIUS","euclideanDistance","centers","labels","random","nForLabel","angle","generateData","x_sum","y_sum","Mean","minDis","dis"],"mappings":"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"}