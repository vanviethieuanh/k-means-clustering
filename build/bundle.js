var app=function(){"use strict";function t(){}const e=t=>t;function n(t,e){for(const n in e)t[n]=e[n];return t}function o(t){return t()}function r(){return Object.create(null)}function i(t){t.forEach(o)}function a(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}function u(t,e,n){t.$$.on_destroy.push(c(e,n))}function l(t,e,o,r){return t[1]&&r?n(o.ctx.slice(),t[1](r(e))):o.ctx}function h(t,e,n,o,r,i,a){const s=function(t,e,n,o){if(t[2]&&o){const r=t[2](o(n));if(void 0===e.dirty)return r;if("object"==typeof r){const t=[],n=Math.max(e.dirty.length,r.length);for(let o=0;o<n;o+=1)t[o]=e.dirty[o]|r[o];return t}return e.dirty|r}return e.dirty}(e,o,r,i);if(s){const r=l(e,n,o,a);t.p(r,s)}}const d="undefined"!=typeof window;let f=d?()=>window.performance.now():()=>Date.now(),y=d?t=>requestAnimationFrame(t):t;const p=new Set;function g(t){p.forEach((e=>{e.c(t)||(p.delete(e),e.f())})),0!==p.size&&y(g)}function m(t,e){t.appendChild(e)}function x(t,e,n){t.insertBefore(e,n||null)}function v(t){t.parentNode.removeChild(t)}function k(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function b(t){return document.createElement(t)}function M(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function _(t){return document.createTextNode(t)}function w(){return _(" ")}function $(){return _("")}function S(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function T(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function I(t,e){for(const n in e)T(t,n,e[n])}function C(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function O(t,e){t.value=null==e?"":e}let N;function E(t){N=t}function P(){if(!N)throw new Error("Function called outside component initialization");return N}function L(t){P().$$.before_update.push(t)}function A(t){P().$$.on_mount.push(t)}function j(t){P().$$.after_update.push(t)}function W(t){P().$$.on_destroy.push(t)}function R(){const t=P();return(e,n)=>{const o=t.$$.callbacks[e];if(o){const r=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);o.slice().forEach((e=>{e.call(t,r)}))}}}function Y(t,e){P().$$.context.set(t,e)}function z(t){return P().$$.context.get(t)}const X=[],q=[],F=[],H=[],B=Promise.resolve();let G=!1;function D(){G||(G=!0,B.then(U))}function Z(t){F.push(t)}let V=!1;const K=new Set;function U(){if(!V){V=!0;do{for(let t=0;t<X.length;t+=1){const e=X[t];E(e),J(e.$$)}for(E(null),X.length=0;q.length;)q.pop()();for(let t=0;t<F.length;t+=1){const e=F[t];K.has(e)||(K.add(e),e())}F.length=0}while(X.length);for(;H.length;)H.pop()();G=!1,V=!1,K.clear()}}function J(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Z)}}const Q=new Set;let tt;function et(){tt={r:0,c:[],p:tt}}function nt(){tt.r||i(tt.c),tt=tt.p}function ot(t,e){t&&t.i&&(Q.delete(t),t.i(e))}function rt(t,e,n,o){if(t&&t.o){if(Q.has(t))return;Q.add(t),tt.c.push((()=>{Q.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}const it="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function at(t,e){t.d(1),e.delete(t.key)}function st(t,e,n,o,r,i,a,s,c,u,l,h){let d=t.length,f=i.length,y=d;const p={};for(;y--;)p[t[y].key]=y;const g=[],m=new Map,x=new Map;for(y=f;y--;){const t=h(r,i,y),s=n(t);let c=a.get(s);c?o&&c.p(t,e):(c=u(s,t),c.c()),m.set(s,g[y]=c),s in p&&x.set(s,Math.abs(y-p[s]))}const v=new Set,k=new Set;function b(t){ot(t,1),t.m(s,l),a.set(t.key,t),l=t.first,f--}for(;d&&f;){const e=g[f-1],n=t[d-1],o=e.key,r=n.key;e===n?(l=e.first,d--,f--):m.has(r)?!a.has(o)||v.has(o)?b(e):k.has(r)?d--:x.get(o)>x.get(r)?(k.add(o),b(e)):(v.add(r),d--):(c(n,a),d--)}for(;d--;){const e=t[d];m.has(e.key)||c(e,a)}for(;f;)b(g[f-1]);return g}function ct(t,e){const n={},o={},r={$$scope:1};let i=t.length;for(;i--;){const a=t[i],s=e[i];if(s){for(const t in a)t in s||(o[t]=1);for(const t in s)r[t]||(n[t]=s[t],r[t]=1);t[i]=s}else for(const t in a)r[t]=1}for(const t in o)t in n||(n[t]=void 0);return n}function ut(t){return"object"==typeof t&&null!==t?t:{}}function lt(t){t&&t.c()}function ht(t,e,n,r){const{fragment:s,on_mount:c,on_destroy:u,after_update:l}=t.$$;s&&s.m(e,n),r||Z((()=>{const e=c.map(o).filter(a);u?u.push(...e):i(e),t.$$.on_mount=[]})),l.forEach(Z)}function dt(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ft(e,n,o,a,s,c,u=[-1]){const l=N;E(e);const h=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:s,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:n.context||[]),callbacks:r(),dirty:u,skip_bound:!1};let d=!1;if(h.ctx=o?o(e,n.props||{},((t,n,...o)=>{const r=o.length?o[0]:n;return h.ctx&&s(h.ctx[t],h.ctx[t]=r)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](r),d&&function(t,e){-1===t.$$.dirty[0]&&(X.push(t),D(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n})):[],h.update(),d=!0,i(h.before_update),h.fragment=!!a&&a(h.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);h.fragment&&h.fragment.l(t),t.forEach(v)}else h.fragment&&h.fragment.c();n.intro&&ot(e.$$.fragment),ht(e,n.target,n.anchor,n.customElement),U()}E(l)}class yt{$destroy(){dt(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const pt=[];function gt(e,n=t){let o;const r=[];function i(t){if(s(e,t)&&(e=t,o)){const t=!pt.length;for(let t=0;t<r.length;t+=1){const n=r[t];n[1](),pt.push(n,e)}if(t){for(let t=0;t<pt.length;t+=2)pt[t][0](pt[t+1]);pt.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(a,s=t){const c=[a,s];return r.push(c),1===r.length&&(o=n(i)||t),a(e),()=>{const t=r.indexOf(c);-1!==t&&r.splice(t,1),0===r.length&&(o(),o=null)}}}}const mt=gt(["Try 'help' command"]),xt=t=>{mt.update((e=>e.length>100?[...e,t].slice(e.length-100):[...e,t]))},vt=()=>{mt.update((t=>[...t,1]))};function kt(t,e,n){const o=t.slice();return o[11]=e[n],o}function bt(t){let e,n,o=t[11]+"";return{c(){e=b("li"),n=_(o),T(e,"class","svelte-1w22tgn")},m(t,o){x(t,e,o),m(e,n)},p(t,e){4&e&&o!==(o=t[11]+"")&&C(n,o)},d(t){t&&v(e)}}}function Mt(e){let n;return{c(){n=b("br")},m(t,e){x(t,n,e)},p:t,d(t){t&&v(n)}}}function _t(t){let e;function n(t,e){return 1==t[11]?Mt:bt}let o=n(t),r=o(t);return{c(){r.c(),e=$()},m(t,n){r.m(t,n),x(t,e,n)},p(t,i){o===(o=n(t))&&r?r.p(t,i):(r.d(1),r=o(t),r&&(r.c(),r.m(e.parentNode,e)))},d(t){r.d(t),t&&v(e)}}}function wt(e){let n,o,r,a,s,c,u,l,h,d,f=e[2],y=[];for(let t=0;t<f.length;t+=1)y[t]=_t(kt(e,f,t));return{c(){n=b("div"),o=b("div"),r=b("ul");for(let t=0;t<y.length;t+=1)y[t].c();a=w(),s=b("div"),c=b("p"),c.textContent="USER>",u=w(),l=b("input"),T(r,"class","svelte-1w22tgn"),T(o,"class","logs svelte-1w22tgn"),T(c,"class","svelte-1w22tgn"),T(l,"class","svelte-1w22tgn"),T(s,"class","prompt svelte-1w22tgn"),T(n,"class","terminal svelte-1w22tgn")},m(t,i){x(t,n,i),m(n,o),m(o,r);for(let t=0;t<y.length;t+=1)y[t].m(r,null);e[4](r),m(n,a),m(n,s),m(s,c),m(s,u),m(s,l),O(l,e[0]),h||(d=[S(l,"input",e[5]),S(l,"keypress",e[3])],h=!0)},p(t,[e]){if(4&e){let n;for(f=t[2],n=0;n<f.length;n+=1){const o=kt(t,f,n);y[n]?y[n].p(o,e):(y[n]=_t(o),y[n].c(),y[n].m(r,null))}for(;n<y.length;n+=1)y[n].d(1);y.length=f.length}1&e&&l.value!==t[0]&&O(l,t[0])},i:t,o:t,d(t){t&&v(n),k(y,t),e[4](null),h=!1,i(d)}}}function $t(t,e,n){let o;u(t,mt,(t=>n(2,o=t)));const r=R();let i,a,s=[],c="help";L((()=>{a=i&&i.offsetHeight+i.scrollTop>i.scrollHeight-20})),j((()=>{a&&i.scrollTo(0,i.scrollHeight)}));const l={help:()=>{xt("==============K-MEANS CLUSTERING=============="),vt(),xt("help"),xt("Show this help"),vt(),xt("assign"),xt("Assign each observation to the cluster with the nearest mean."),vt(),xt("update"),xt("Recalculate means (centroids) for observations assigned to each cluster."),vt(),xt("fit"),xt("Repeat assign and update until the assignments no longer change."),vt(),xt("set --help"),xt("To show how to set variables"),vt(),xt("reset"),xt("Shuffle data again, it will recreate centers of data and random change position of labels"),vt(),xt("git be email web"),xt("Show about me"),vt(),xt("clear history"),xt("Same with terminal")},assign:()=>{r("assign")},update:()=>{r("update")},fit:()=>{r("fit")},reset:()=>{r("reset")},history:()=>{s.forEach((t=>{xt(t)}))},clear:()=>{mt.set([])},git:()=>{window.open("https://github.com/vanviethieuanh/k-means-clustering","_blank")},github:()=>{window.open("https://github.com/vanviethieuanh/k-means-clustering","_blank")},be:()=>{window.open("https://www.behance.net/vanviethieuanh","_blank")},behance:()=>{window.open("https://www.behance.net/vanviethieuanh","_blank")},web:()=>{window.open("https://vanviethieuanh.com/","_blank")},email:()=>{navigator.clipboard.writeText("vanviethieuanh@gmail.com"),xt("✉ Email copied to clipboard!")},mail:()=>{navigator.clipboard.writeText("vanviethieuanh@gmail.com"),xt("✉ Email copied to clipboard!")}};function h(){if(s.push(c),(t=>{xt(`USER>${t}`)})(c),"set"==c.slice(0,3)){const t=c.split(" ");return n(0,c=""),"--help"==t[1]?(xt("set label <n>"),xt("Set the amount of label (2≤n≤9)"),vt(),xt("set data <n>"),xt("Set the amount data for each label (n ≥ 10 , should be < 100 for better visualize)"),vt(),xt("set error <n>"),void xt("Set the error range for data from center point (5≤n≤50)")):"label"==t[1]&&t[2]&&!isNaN(t[2])&&t[2]<=9&&t[2]>=2?void r("setLabel",{num:parseInt(t[2])}):"data"==t[1]&&t[2]&&!isNaN(t[2])&&t[2]>=10?void r("setData",{num:parseInt(t[2])}):"error"==t[1]&&t[2]&&!isNaN(t[2])&&t[2]<=50&&t[2]>=5?void r("setError",{num:parseInt(t[2])}):void xt('Type "set --help" for more information')}l[c]?l[c]():xt(`Command not found: ${c}`),n(0,c="")}return[c,i,o,t=>{13===t.charCode&&h()},function(t){q[t?"unshift":"push"]((()=>{i=t,n(1,i)}))},function(){c=this.value,n(0,c)}]}class St extends yt{constructor(t){super(),ft(this,t,$t,wt,s,{})}}const Tt="undefined"!=typeof window?window:{screen:{},navigator:{}},It=Tt.matchMedia||(()=>({matches:!1})),Ct={get passive(){return!0}},Ot=()=>{};Tt.addEventListener&&Tt.addEventListener("p",Ot,Ct),Tt.removeEventListener&&Tt.removeEventListener("p",Ot,!1);const Nt="ontouchstart"in Tt,Et=Nt||"TouchEvent"in Tt&&It("(any-pointer: coarse)").matches,Pt=(Tt.navigator.maxTouchPoints||0)>0||Et,Lt=Tt.navigator.userAgent||"",At=It("(pointer: coarse)").matches&&/iPad|Macintosh/.test(Lt)&&Math.min(Tt.screen.width||0,Tt.screen.height||0)>=768,jt=(It("(pointer: coarse)").matches||!It("(pointer: fine)").matches&&Nt)&&!/Windows.*Firefox/.test(Lt),Wt=It("(any-pointer: fine)").matches||It("(any-hover: hover)").matches||At||!Nt,Rt=!Pt||!Wt&&jt?Pt?"touchOnly":"mouseOnly":"hybrid",Yt="mouseOnly"===Rt?"mouse":"touchOnly"===Rt||jt?"touch":"mouse";class zt{constructor({renderer:t}){t||(this._rendererOptions={output:"svg"}),t&&(!function(t){if(t.constructor!==Object||!("output"in t)||!["svg"].includes(t.output))throw new Error(`Invalid renderer options: ${JSON.stringify(t)}`)}(t),this._rendererOptions=t)}output(){return this._rendererOptions.output}}const Xt={};function qt(){return z(Xt)}function Ft(t){const e=void 0===t?0:t;if(e.constructor===Number)return{left:e,right:e,top:e,bottom:e};if(e.constructor===Object)return Object.assign(Ft(0),e);throw Ht}const Ht=new Error("Invalid padding specification");function Bt(t,e,n){return function(t,e,n){Math.abs(t[0]-t[1])<e+n&&console.warn("Padding cannot exceed width or height")}(t,e,n),t[0]<t[1]?[t[0]+e,t[1]-n]:[t[0]-n,t[1]+e]}function Gt(t,e){return e?[t[1],t[0]]:t}function Dt(t,e,n){return[t[0]*e+n,t[1]*e+n]}function Zt(t){if(t<0)throw new Error("Zoom factors have to be positive")}function Vt(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Kt(t){let e=t,n=t;function o(t,e,o,r){for(null==o&&(o=0),null==r&&(r=t.length);o<r;){const i=o+r>>>1;n(t[i],e)<0?o=i+1:r=i}return o}return 1===t.length&&(e=(e,n)=>t(e)-n,n=function(t){return(e,n)=>Vt(t(e),n)}(t)),{left:o,center:function(t,n,r,i){null==r&&(r=0),null==i&&(i=t.length);const a=o(t,n,r,i-1);return a>r&&e(t[a-1],n)>-e(t[a],n)?a-1:a},right:function(t,e,o,r){for(null==o&&(o=0),null==r&&(r=t.length);o<r;){const i=o+r>>>1;n(t[i],e)>0?r=i:o=i+1}return o}}}const Ut=Kt(Vt).right;Kt((function(t){return null===t?NaN:+t})).center;class Jt{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let n=0;for(let o=0;o<this._n&&o<32;o++){const r=e[o],i=t+r,a=Math.abs(t)<Math.abs(r)?t-(i-r):r-(i-t);a&&(e[n++]=a),t=i}return e[n]=t,this._n=n+1,this}valueOf(){const t=this._partials;let e,n,o,r=this._n,i=0;if(r>0){for(i=t[--r];r>0&&(e=i,n=t[--r],i=e+n,o=n-(i-e),!o););r>0&&(o<0&&t[r-1]<0||o>0&&t[r-1]>0)&&(n=2*o,e=i+n,n==e-i&&(i=e))}return i}}var Qt=Math.sqrt(50),te=Math.sqrt(10),ee=Math.sqrt(2);function ne(t,e,n){var o=(e-t)/Math.max(0,n),r=Math.floor(Math.log(o)/Math.LN10),i=o/Math.pow(10,r);return r>=0?(i>=Qt?10:i>=te?5:i>=ee?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(i>=Qt?10:i>=te?5:i>=ee?2:1)}function oe(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function re(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function ie(t,e){var n=Object.create(t.prototype);for(var o in e)n[o]=e[o];return n}function ae(){}var se=.7,ce=1/se,ue="\\s*([+-]?\\d+)\\s*",le="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",he="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",de=/^#([0-9a-f]{3,8})$/,fe=new RegExp("^rgb\\("+[ue,ue,ue]+"\\)$"),ye=new RegExp("^rgb\\("+[he,he,he]+"\\)$"),pe=new RegExp("^rgba\\("+[ue,ue,ue,le]+"\\)$"),ge=new RegExp("^rgba\\("+[he,he,he,le]+"\\)$"),me=new RegExp("^hsl\\("+[le,he,he]+"\\)$"),xe=new RegExp("^hsla\\("+[le,he,he,le]+"\\)$"),ve={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ke(){return this.rgb().formatHex()}function be(){return this.rgb().formatRgb()}function Me(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=de.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?_e(e):3===n?new Te(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?we(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?we(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=fe.exec(t))?new Te(e[1],e[2],e[3],1):(e=ye.exec(t))?new Te(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=pe.exec(t))?we(e[1],e[2],e[3],e[4]):(e=ge.exec(t))?we(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=me.exec(t))?Ne(e[1],e[2]/100,e[3]/100,1):(e=xe.exec(t))?Ne(e[1],e[2]/100,e[3]/100,e[4]):ve.hasOwnProperty(t)?_e(ve[t]):"transparent"===t?new Te(NaN,NaN,NaN,0):null}function _e(t){return new Te(t>>16&255,t>>8&255,255&t,1)}function we(t,e,n,o){return o<=0&&(t=e=n=NaN),new Te(t,e,n,o)}function $e(t){return t instanceof ae||(t=Me(t)),t?new Te((t=t.rgb()).r,t.g,t.b,t.opacity):new Te}function Se(t,e,n,o){return 1===arguments.length?$e(t):new Te(t,e,n,null==o?1:o)}function Te(t,e,n,o){this.r=+t,this.g=+e,this.b=+n,this.opacity=+o}function Ie(){return"#"+Oe(this.r)+Oe(this.g)+Oe(this.b)}function Ce(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Oe(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Ne(t,e,n,o){return o<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Pe(t,e,n,o)}function Ee(t){if(t instanceof Pe)return new Pe(t.h,t.s,t.l,t.opacity);if(t instanceof ae||(t=Me(t)),!t)return new Pe;if(t instanceof Pe)return t;var e=(t=t.rgb()).r/255,n=t.g/255,o=t.b/255,r=Math.min(e,n,o),i=Math.max(e,n,o),a=NaN,s=i-r,c=(i+r)/2;return s?(a=e===i?(n-o)/s+6*(n<o):n===i?(o-e)/s+2:(e-n)/s+4,s/=c<.5?i+r:2-i-r,a*=60):s=c>0&&c<1?0:a,new Pe(a,s,c,t.opacity)}function Pe(t,e,n,o){this.h=+t,this.s=+e,this.l=+n,this.opacity=+o}function Le(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}re(ae,Me,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:ke,formatHex:ke,formatHsl:function(){return Ee(this).formatHsl()},formatRgb:be,toString:be}),re(Te,Se,ie(ae,{brighter:function(t){return t=null==t?ce:Math.pow(ce,t),new Te(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?se:Math.pow(se,t),new Te(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ie,formatHex:Ie,formatRgb:Ce,toString:Ce})),re(Pe,(function(t,e,n,o){return 1===arguments.length?Ee(t):new Pe(t,e,n,null==o?1:o)}),ie(ae,{brighter:function(t){return t=null==t?ce:Math.pow(ce,t),new Pe(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?se:Math.pow(se,t),new Pe(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*e,r=2*n-o;return new Te(Le(t>=240?t-240:t+120,r,o),Le(t,r,o),Le(t<120?t+240:t-120,r,o),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var Ae=t=>()=>t;function je(t){return 1==(t=+t)?We:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(o){return Math.pow(t+o*e,n)}}(e,n,t):Ae(isNaN(e)?n:e)}}function We(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):Ae(isNaN(t)?e:t)}var Re=function t(e){var n=je(e);function o(t,e){var o=n((t=Se(t)).r,(e=Se(e)).r),r=n(t.g,e.g),i=n(t.b,e.b),a=We(t.opacity,e.opacity);return function(e){return t.r=o(e),t.g=r(e),t.b=i(e),t.opacity=a(e),t+""}}return o.gamma=t,o}(1);function Ye(t,e){e||(e=[]);var n,o=t?Math.min(e.length,t.length):0,r=e.slice();return function(i){for(n=0;n<o;++n)r[n]=t[n]*(1-i)+e[n]*i;return r}}function ze(t,e){var n,o=e?e.length:0,r=t?Math.min(o,t.length):0,i=new Array(r),a=new Array(o);for(n=0;n<r;++n)i[n]=De(t[n],e[n]);for(;n<o;++n)a[n]=e[n];return function(t){for(n=0;n<r;++n)a[n]=i[n](t);return a}}function Xe(t,e){var n=new Date;return t=+t,e=+e,function(o){return n.setTime(t*(1-o)+e*o),n}}function qe(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Fe(t,e){var n,o={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?o[n]=De(t[n],e[n]):r[n]=e[n];return function(t){for(n in o)r[n]=o[n](t);return r}}var He=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Be=new RegExp(He.source,"g");function Ge(t,e){var n,o,r,i=He.lastIndex=Be.lastIndex=0,a=-1,s=[],c=[];for(t+="",e+="";(n=He.exec(t))&&(o=Be.exec(e));)(r=o.index)>i&&(r=e.slice(i,r),s[a]?s[a]+=r:s[++a]=r),(n=n[0])===(o=o[0])?s[a]?s[a]+=o:s[++a]=o:(s[++a]=null,c.push({i:a,x:qe(n,o)})),i=Be.lastIndex;return i<e.length&&(r=e.slice(i),s[a]?s[a]+=r:s[++a]=r),s.length<2?c[0]?function(t){return function(e){return t(e)+""}}(c[0].x):function(t){return function(){return t}}(e):(e=c.length,function(t){for(var n,o=0;o<e;++o)s[(n=c[o]).i]=n.x(t);return s.join("")})}function De(t,e){var n,o,r=typeof e;return null==e||"boolean"===r?Ae(e):("number"===r?qe:"string"===r?(n=Me(e))?(e=n,Re):Ge:e instanceof Me?Re:e instanceof Date?Xe:(o=e,!ArrayBuffer.isView(o)||o instanceof DataView?Array.isArray(e)?ze:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Fe:qe:Ye))(t,e)}function Ze(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Ve(t){return+t}var Ke=[0,1];function Ue(t){return t}function Je(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function Qe(t,e,n){var o=t[0],r=t[1],i=e[0],a=e[1];return r<o?(o=Je(r,o),i=n(a,i)):(o=Je(o,r),i=n(i,a)),function(t){return i(o(t))}}function tn(t,e,n){var o=Math.min(t.length,e.length)-1,r=new Array(o),i=new Array(o),a=-1;for(t[o]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<o;)r[a]=Je(t[a],t[a+1]),i[a]=n(e[a],e[a+1]);return function(e){var n=Ut(t,e,1,o)-1;return i[n](r[n](e))}}function en(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function nn(){var t,e,n,o,r,i,a=Ke,s=Ke,c=De,u=Ue;function l(){var t,e,n,c=Math.min(a.length,s.length);return u!==Ue&&(t=a[0],e=a[c-1],t>e&&(n=t,t=e,e=n),u=function(n){return Math.max(t,Math.min(e,n))}),o=c>2?tn:Qe,r=i=null,h}function h(e){return null==e||isNaN(e=+e)?n:(r||(r=o(a.map(t),s,c)))(t(u(e)))}return h.invert=function(n){return u(e((i||(i=o(s,a.map(t),qe)))(n)))},h.domain=function(t){return arguments.length?(a=Array.from(t,Ve),l()):a.slice()},h.range=function(t){return arguments.length?(s=Array.from(t),l()):s.slice()},h.rangeRound=function(t){return s=Array.from(t),c=Ze,l()},h.clamp=function(t){return arguments.length?(u=!!t||Ue,l()):u!==Ue},h.interpolate=function(t){return arguments.length?(c=t,l()):c},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,o){return t=n,e=o,l()}}function on(){return nn()(Ue,Ue)}function rn(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,o=t.slice(0,n);return[o.length>1?o[0]+o.slice(2):o,+t.slice(n+1)]}function an(t){return(t=rn(Math.abs(t)))?t[1]:NaN}var sn,cn=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function un(t){if(!(e=cn.exec(t)))throw new Error("invalid format: "+t);var e;return new ln({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function ln(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function hn(t,e){var n=rn(t,e);if(!n)return t+"";var o=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+o:o.length>r+1?o.slice(0,r+1)+"."+o.slice(r+1):o+new Array(r-o.length+2).join("0")}un.prototype=ln.prototype,ln.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var dn={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>hn(100*t,e),r:hn,s:function(t,e){var n=rn(t,e);if(!n)return t+"";var o=n[0],r=n[1],i=r-(sn=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,a=o.length;return i===a?o:i>a?o+new Array(i-a+1).join("0"):i>0?o.slice(0,i)+"."+o.slice(i):"0."+new Array(1-i).join("0")+rn(t,Math.max(0,e+i-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function fn(t){return t}var yn,pn,gn,mn=Array.prototype.map,xn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function vn(t){var e,n,o=void 0===t.grouping||void 0===t.thousands?fn:(e=mn.call(t.grouping,Number),n=t.thousands+"",function(t,o){for(var r=t.length,i=[],a=0,s=e[0],c=0;r>0&&s>0&&(c+s+1>o&&(s=Math.max(1,o-c)),i.push(t.substring(r-=s,r+s)),!((c+=s+1)>o));)s=e[a=(a+1)%e.length];return i.reverse().join(n)}),r=void 0===t.currency?"":t.currency[0]+"",i=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?fn:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(mn.call(t.numerals,String)),c=void 0===t.percent?"%":t.percent+"",u=void 0===t.minus?"−":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";function h(t){var e=(t=un(t)).fill,n=t.align,h=t.sign,d=t.symbol,f=t.zero,y=t.width,p=t.comma,g=t.precision,m=t.trim,x=t.type;"n"===x?(p=!0,x="g"):dn[x]||(void 0===g&&(g=12),m=!0,x="g"),(f||"0"===e&&"="===n)&&(f=!0,e="0",n="=");var v="$"===d?r:"#"===d&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",k="$"===d?i:/[%p]/.test(x)?c:"",b=dn[x],M=/[defgprs%]/.test(x);function _(t){var r,i,c,d=v,_=k;if("c"===x)_=b(t)+_,t="";else{var w=(t=+t)<0||1/t<0;if(t=isNaN(t)?l:b(Math.abs(t),g),m&&(t=function(t){t:for(var e,n=t.length,o=1,r=-1;o<n;++o)switch(t[o]){case".":r=e=o;break;case"0":0===r&&(r=o),e=o;break;default:if(!+t[o])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(e+1):t}(t)),w&&0==+t&&"+"!==h&&(w=!1),d=(w?"("===h?h:u:"-"===h||"("===h?"":h)+d,_=("s"===x?xn[8+sn/3]:"")+_+(w&&"("===h?")":""),M)for(r=-1,i=t.length;++r<i;)if(48>(c=t.charCodeAt(r))||c>57){_=(46===c?a+t.slice(r+1):t.slice(r))+_,t=t.slice(0,r);break}}p&&!f&&(t=o(t,1/0));var $=d.length+t.length+_.length,S=$<y?new Array(y-$+1).join(e):"";switch(p&&f&&(t=o(S+t,S.length?y-_.length:1/0),S=""),n){case"<":t=d+t+_+S;break;case"=":t=d+S+t+_;break;case"^":t=S.slice(0,$=S.length>>1)+d+t+_+S.slice($);break;default:t=S+d+t+_}return s(t)}return g=void 0===g?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),_.toString=function(){return t+""},_}return{format:h,formatPrefix:function(t,e){var n=h(((t=un(t)).type="f",t)),o=3*Math.max(-8,Math.min(8,Math.floor(an(e)/3))),r=Math.pow(10,-o),i=xn[8+o/3];return function(t){return n(r*t)+i}}}}function kn(t,e,n,o){var r,i=function(t,e,n){var o=Math.abs(e-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(o)/Math.LN10)),i=o/r;return i>=Qt?r*=10:i>=te?r*=5:i>=ee&&(r*=2),e<t?-r:r}(t,e,n);switch((o=un(null==o?",f":o)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=o.precision||isNaN(r=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(an(e)/3)))-an(Math.abs(t)))}(i,a))||(o.precision=r),gn(o,a);case"":case"e":case"g":case"p":case"r":null!=o.precision||isNaN(r=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,an(e)-an(t))+1}(i,Math.max(Math.abs(t),Math.abs(e))))||(o.precision=r-("e"===o.type));break;case"f":case"%":null!=o.precision||isNaN(r=function(t){return Math.max(0,-an(Math.abs(t)))}(i))||(o.precision=r-2*("%"===o.type))}return pn(o)}function bn(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){var o,r,i,a,s=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((o=e<t)&&(r=t,t=e,e=r),0===(a=ne(t,e,n))||!isFinite(a))return[];if(a>0){let n=Math.round(t/a),o=Math.round(e/a);for(n*a<t&&++n,o*a>e&&--o,i=new Array(r=o-n+1);++s<r;)i[s]=(n+s)*a}else{a=-a;let n=Math.round(t*a),o=Math.round(e*a);for(n/a<t&&++n,o/a>e&&--o,i=new Array(r=o-n+1);++s<r;)i[s]=(n+s)/a}return o&&i.reverse(),i}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var o=e();return kn(o[0],o[o.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var o,r,i=e(),a=0,s=i.length-1,c=i[a],u=i[s],l=10;for(u<c&&(r=c,c=u,u=r,r=a,a=s,s=r);l-- >0;){if((r=ne(c,u,n))===o)return i[a]=c,i[s]=u,e(i);if(r>0)c=Math.floor(c/r)*r,u=Math.ceil(u/r)*r;else{if(!(r<0))break;c=Math.ceil(c*r)/r,u=Math.floor(u*r)/r}o=r}return t},t}function Mn(){var t=on();return t.copy=function(){return en(t,Mn())},oe.apply(t,arguments),bn(t)}function _n(t,e){if(t){if(t.constructor===Array)return Mn().domain(t).range(e);const n=t.copy().range(e);return n.invert=function(t){if(t.invert)return t.invert;return function(e){const[n,o]=t.range(),r=Math.min(n,o),i=Math.max(n,o),a=o<n,s=t.domain(),c=s.length-1;if(e<r+t.padding()*t.step())return s[0];if(e>i-t.padding()*t.step())return s[c];let u;return function(t){return!("paddingInner"in t)}(t)&&(u=Math.round((e-r-t.padding()*t.step())/t.step())),function(t){return"paddingInner"in t}(t)&&(u=Math.round((e-r-t.padding()*t.step())/t.step()),u>c&&(u=c)),s[a?c-u:u]}}(n),n}if(!t)return Mn().domain(e).range(e)}function wn({rangeX:t,rangeY:e},{finalRangeX:n,finalRangeY:o}){const r=Mn().domain(t).range([0,2*Math.PI]),i=Mn().domain(e).range([0,1]),a=Mn().domain([-1,1]).range(n),s=Mn().domain([-1,1]).range(o),c=function([t,e]){const n=function(t,e){const n=e*Math.sin(t),o=e*Math.cos(t);return[n,o]}(r(t),i(e));return[a(n[0]),s(n[1])]};return c.invert=function([t,e]){const n=[a.invert(t),s.invert(e)],[o,c]=function(t,e){const n=function(t,e){if(t>=0&&e>=0)return 1;if(t<0&&e>=0)return 2;if(t<0&&e<0)return 3;if(t>=0&&e<0)return 4}(t,e),o=Math.sqrt(e**2+t**2);let r=Math.atan(t/e);2===n&&(r+=2*Math.PI);3===n&&(r+=Math.PI);4===n&&(r+=Math.PI);return[r,o]}(...n);return[r.invert(o),i.invert(c)]},c}function $n(t){return void 0===t?{xNeedsScaling:!0,yNeedsScaling:!0}:t.constructor===Boolean?{xNeedsScaling:t,yNeedsScaling:t}:t.constructor===Object?t:void 0}function Sn(t){var e;t.zoomIdentity=(e=t.zoomIdentity,Object.assign({x:0,y:0,kx:1,ky:1},e));const n=Ft(t.padding),o=function({coordinates:t}){return{rangeX:[t.x1,t.x2],rangeY:[t.y1,t.y2]}}(t),r=function(t,e,n){const{flipX:o,flipY:r,zoomIdentity:i}=t,{rangeX:a,rangeY:s}=e,{left:c,right:u,top:l,bottom:h}=n;let d=Gt(a,o);d=Bt(d,c,u),i&&(Zt(i.kx),d=Dt(d,i.kx,i.x));let f=Gt(s,r);return f=Bt(f,l,h),i&&(Zt(i.ky),f=Dt(f,i.ky,i.y)),{finalRangeX:d,finalRangeY:f}}(t,o,n),i=function({scaleX:t,scaleY:e,padding:n,...o},r,i,a,s,c){return{...o,padding:r,...i,...a,...s,...c,bbox:Tn(i),paddedBbox:In(i,r)}}(t,n,o,r,function({scaleX:t,scaleY:e},{rangeX:n,rangeY:o}){return{scaleX:_n(t,n),scaleY:_n(e,o)}}(t,o),function({rangeX:t,rangeY:e},{finalRangeX:n,finalRangeY:o}){return{finalScaleX:Mn().domain(t).range(n),finalScaleY:Mn().domain(e).range(o)}}(o,r));return function(t){const{transformation:e,rangeX:n,rangeY:o,finalRangeX:r,finalRangeY:i,scaleX:a,scaleY:s,finalScaleX:c,finalScaleY:u}=t;if("polar"!==e&&(t.getTotalTransformation=t=>{const{xNeedsScaling:e,yNeedsScaling:n}=$n(t);return([t,o])=>[c(e?a(t):t),u(n?s(o):o)]},t.inverseTotalTransformation=([t,e])=>[a.invert(c.invert(t)),s.invert(u.invert(e))]),"polar"===e){const e=t=>{const{xNeedsScaling:e,yNeedsScaling:n}=$n(t);return([t,o])=>[e?a(t):t,n?s(o):o]},c=wn({rangeX:n,rangeY:o},{finalRangeX:r,finalRangeY:i});t.getScaleTransformation=e,t.postScaleTransformation=c,t.getTotalTransformation=t=>{const n=e(t);return t=>c(n(t))};const u=([t,e])=>[a.invert(t),s.invert(e)];t.inverseTotalTransformation=t=>u(c.invert(t))}}(i),i}function Tn({rangeX:t,rangeY:e}){return{minX:Math.min(...t),maxX:Math.max(...t),minY:Math.min(...e),maxY:Math.max(...e)}}function In({rangeX:t,rangeY:e},{left:n,right:o,top:r,bottom:i}){return{minX:Math.min(...t)+n,maxX:Math.max(...t)-o,minY:Math.min(...e)+r,maxY:Math.max(...e)-i}}yn=vn({thousands:",",grouping:[3],currency:["$",""]}),pn=yn.format,gn=yn.formatPrefix;const Cn={};function On(){return z(Cn)}const Nn={};const En={};function Pn(){return z(En)}let Ln;class An{constructor(t,{eventName:e,nativeEventName:n,useWindow:o,preventDefault:r}){this._eventManager=t,this._eventName=e,this._nativeEventName=n,this._useWindow=o,this._preventDefault=r,this._numberOfActiveListeners=0,this._callbacks={}}setNativeEventName(t){this._nativeEventName=t}addListener(t,e){this._callbacks[t]=e,this._eventManagerHasBeenMounted()&&this._attachNativeListenerIfNecessary()}attachAllListeners(){for(const t in this._callbacks)this._attachNativeListenerIfNecessary()}removeListener(t){delete this._callbacks[t],this._eventManagerHasBeenMounted()&&this._removeNativeListenerIfNecessary()}_eventManagerHasBeenMounted(){return this._eventManager._mounted}_attachNativeListenerIfNecessary(){if(0===this._numberOfActiveListeners){Ln=this._handleEvent.bind(this);const t=this._nativeEventName;this._useWindow&&window.addEventListener(t,Ln),this._useWindow||this._eventManager._domNode.addEventListener(t,Ln)}this._numberOfActiveListeners++}_removeNativeListenerIfNecessary(){if(this._numberOfActiveListeners--,0===this._numberOfActiveListeners){const t=this._nativeEventName;this._useWindow&&window.removeEventListener(t,Ln),this._useWindow||this._eventManager._domNode.removeEventListener(t,Ln)}}_handleEvent(t){this._preventDefault&&t.preventDefault();const e=this._getScreenCoordinates(t);t.eventName=this._eventName;for(const n in this._callbacks)this._callbacks[n](e,t)}_getScreenCoordinates(t){return this._eventManager._getScreenCoordinates(t)}}class jn{constructor(t,e){this._domNode=void 0,this._svgPoint=void 0,this._mounted=!1,this._trackers={},this._BROWSER_TYPE=void 0,this._managerType=e;for(const e of t)this._trackers[e.eventName]=new An(this,e)}addRootNode(t){this._domNode=t,this._svgPoint=this._domNode.createSVGPoint(),this._BROWSER_TYPE=window.navigator.pointerEnabled?"IE11 / MSEdge":window.navigator.msPointerEnabled?"IE10 / WP8":"other",this._mounted=!0}attachEventListeners(){if(!1===this._mounted)throw new Error("root node must be added first");for(const t in this._trackers)"mouse"===this._managerType&&this._trackers[t].setNativeEventName(this._getNativeMouseEventName(t,this._BROWSER_TYPE)),"touch"===this._managerType&&this._trackers[t].setNativeEventName(this._getNativeTouchEventName(t,this._BROWSER_TYPE)),this._trackers[t].attachAllListeners()}eventTracker(t){return this._trackers[t]}}var Wn=t=>t.charAt(0).toUpperCase()+t.slice(1);class Rn extends jn{constructor(){super(Xn,"mouse")}_getNativeMouseEventName(t,e){if("click"===t)return"click";if("wheel"===t)return"wheel";if("IE11 / MSEdge"===e){return"pointer"+qn(t)}if("IE10 / WP8"===e){const e=qn(t);return"MSPointer"+Wn(e)}return"other"===e?t:void 0}_getScreenCoordinates(t){return this._svgPoint.x=t.clientX,this._svgPoint.y=t.clientY,this._svgPoint.matrixTransform(this._domNode.getScreenCTM().inverse())}}const Yn=["mousemove","mouseup"],zn=["mousedown"],Xn=["mousedown","mouseup","mousemove","mouseout","click","wheel"].map((t=>({eventName:t,nativeEventName:void 0,useWindow:Yn.includes(t),preventDefault:zn.includes(t)}))),qn=t=>t.slice(5,t.length);class Fn extends jn{constructor(){super(Hn,"touch")}_getNativeTouchEventName(t,e){if("IE11 / MSEdge"===e){return"pointer"+Bn(t)}if("IE10 / WP8"===e){const e=Bn(t);return"MSPointer"+Wn(e)}if("other"===e)return t}_getScreenCoordinates(t){const e=function(t){return t.touches}(t);return 1===e.length?this._getScreenCoordinatesSingle(e[0]):e.length>1?this._getScreenCoordinatesMulti(e):void 0}_getScreenCoordinatesSingle(t){return this._svgPoint.x=t.clientX,this._svgPoint.y=t.clientY,this._svgPoint.matrixTransform(this._domNode.getScreenCTM().inverse())}_getScreenCoordinatesMulti(t){const e=[];for(const n of t)e.push(this._getScreenCoordinatesSingle(n));return e}}const Hn=["touchstart","touchend","touchmove","touchcancel"].map((t=>({eventName:t,nativeEventName:void 0,useWindow:!1,preventDefault:!0}))),Bn=t=>t.slice(5,t.length);class Gn{constructor(){"mouse"===Yt&&(this._mouseEventManager=new Rn),"touch"===Yt&&(this._touchEventManager=new Fn)}addRootNode(t){this._forEachManager((e=>{e.addRootNode(t)}))}attachEventListeners(){this._forEachManager((t=>{t.attachEventListeners()}))}mouse(){return this._mouseEventManager}touch(){return this._touchEventManager}_forEachManager(t){this._mouseEventManager&&t(this._mouseEventManager),this._touchEventManager&&t(this._touchEventManager)}}class Dn{constructor(){this._id=void 0,this._eventManager=void 0,this._section=void 0,this._markInteractionInterface=void 0,this._sectionInteractionInterface=void 0}setId(t){this._id=t}linkEventManager(t){this._eventManager=t}loadSection(t){this._section=t}marks(){return this._markInteractionInterface}section(){return this._sectionInteractionInterface}}class Zn{constructor(t,e){this._interactionManager=t,this._handlers={};for(const t in e)this._handlers[t]=new e[t](this._interactionManager)}_getHandler(t){const e=Vn(t);return this._handlers[e]}}const Vn=t=>Wn(t)+"Handler";function Kn(t){const e=t.attributes,n=Jn(e);return n.attributes=e,n.markType="Point",n.markId=t.markId,n}function Un({layerAttributes:t,keyArray:e,layerId:n}){const o=[];for(let r=0;r<e.length;r++){const i=e[r],a=Qn(t,i),s=Jn(a);s.key=i,s.index=r,s.attributes=a,s.markType="Point",s.layerId=n,o.push(s)}return o}function Jn(t){const e=t.pixelGeometry.coordinates[0],n=t.pixelGeometry.coordinates[1];return{minX:e-t.radius,maxX:e+t.radius,minY:n-t.radius,maxY:n+t.radius}}function Qn(t,e){return{pixelGeometry:t.pixelGeometryObject[e],radius:t.radiusObject[e]}}var to=2*Math.PI,eo=Math.abs,no=Math.sqrt;function oo(){}function ro(t,e){t&&ao.hasOwnProperty(t.type)&&ao[t.type](t,e)}var io={Feature:function(t,e){ro(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,o=-1,r=n.length;++o<r;)ro(n[o].geometry,e)}},ao={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,o=-1,r=n.length;++o<r;)t=n[o],e.point(t[0],t[1],t[2])},LineString:function(t,e){so(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,o=-1,r=n.length;++o<r;)so(n[o],e,0)},Polygon:function(t,e){co(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,o=-1,r=n.length;++o<r;)co(n[o],e)},GeometryCollection:function(t,e){for(var n=t.geometries,o=-1,r=n.length;++o<r;)ro(n[o],e)}};function so(t,e,n){var o,r=-1,i=t.length-n;for(e.lineStart();++r<i;)o=t[r],e.point(o[0],o[1],o[2]);e.lineEnd()}function co(t,e){var n=-1,o=t.length;for(e.polygonStart();++n<o;)so(t[n],e,1);e.polygonEnd()}function uo(t,e){t&&io.hasOwnProperty(t.type)?io[t.type](t,e):ro(t,e)}var lo,ho,fo,yo,po=t=>t,go=new Jt,mo=new Jt,xo={point:oo,lineStart:oo,lineEnd:oo,polygonStart:function(){xo.lineStart=vo,xo.lineEnd=Mo},polygonEnd:function(){xo.lineStart=xo.lineEnd=xo.point=oo,go.add(eo(mo)),mo=new Jt},result:function(){var t=go/2;return go=new Jt,t}};function vo(){xo.point=ko}function ko(t,e){xo.point=bo,lo=fo=t,ho=yo=e}function bo(t,e){mo.add(yo*t-fo*e),fo=t,yo=e}function Mo(){bo(lo,ho)}var _o=1/0,wo=_o,$o=-_o,So=$o,To={point:function(t,e){t<_o&&(_o=t);t>$o&&($o=t);e<wo&&(wo=e);e>So&&(So=e)},lineStart:oo,lineEnd:oo,polygonStart:oo,polygonEnd:oo,result:function(){var t=[[_o,wo],[$o,So]];return $o=So=-(wo=_o=1/0),t}};var Io,Co,Oo,No,Eo=0,Po=0,Lo=0,Ao=0,jo=0,Wo=0,Ro=0,Yo=0,zo=0,Xo={point:qo,lineStart:Fo,lineEnd:Go,polygonStart:function(){Xo.lineStart=Do,Xo.lineEnd=Zo},polygonEnd:function(){Xo.point=qo,Xo.lineStart=Fo,Xo.lineEnd=Go},result:function(){var t=zo?[Ro/zo,Yo/zo]:Wo?[Ao/Wo,jo/Wo]:Lo?[Eo/Lo,Po/Lo]:[NaN,NaN];return Eo=Po=Lo=Ao=jo=Wo=Ro=Yo=zo=0,t}};function qo(t,e){Eo+=t,Po+=e,++Lo}function Fo(){Xo.point=Ho}function Ho(t,e){Xo.point=Bo,qo(Oo=t,No=e)}function Bo(t,e){var n=t-Oo,o=e-No,r=no(n*n+o*o);Ao+=r*(Oo+t)/2,jo+=r*(No+e)/2,Wo+=r,qo(Oo=t,No=e)}function Go(){Xo.point=qo}function Do(){Xo.point=Vo}function Zo(){Ko(Io,Co)}function Vo(t,e){Xo.point=Ko,qo(Io=Oo=t,Co=No=e)}function Ko(t,e){var n=t-Oo,o=e-No,r=no(n*n+o*o);Ao+=r*(Oo+t)/2,jo+=r*(No+e)/2,Wo+=r,Ro+=(r=No*t-Oo*e)*(Oo+t),Yo+=r*(No+e),zo+=3*r,qo(Oo=t,No=e)}function Uo(t){this._context=t}Uo.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,to)}},result:oo};var Jo,Qo,tr,er,nr,or=new Jt,rr={point:oo,lineStart:function(){rr.point=ir},lineEnd:function(){Jo&&ar(Qo,tr),rr.point=oo},polygonStart:function(){Jo=!0},polygonEnd:function(){Jo=null},result:function(){var t=+or;return or=new Jt,t}};function ir(t,e){rr.point=ar,Qo=er=t,tr=nr=e}function ar(t,e){er-=t,nr-=e,or.add(no(er*er+nr*nr)),er=t,nr=e}function sr(){this._string=[]}function cr(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function ur(t,e){var n,o,r=4.5;function i(t){return t&&("function"==typeof r&&o.pointRadius(+r.apply(this,arguments)),uo(t,n(o))),o.result()}return i.area=function(t){return uo(t,n(xo)),xo.result()},i.measure=function(t){return uo(t,n(rr)),rr.result()},i.bounds=function(t){return uo(t,n(To)),To.result()},i.centroid=function(t){return uo(t,n(Xo)),Xo.result()},i.projection=function(e){return arguments.length?(n=null==e?(t=null,po):(t=e).stream,i):t},i.context=function(t){return arguments.length?(o=null==t?(e=null,new sr):new Uo(e=t),"function"!=typeof r&&o.pointRadius(r),i):e},i.pointRadius=function(t){return arguments.length?(r="function"==typeof t?t:(o.pointRadius(+t),+t),i):r},i.projection(t).context(e)}function lr(t){return null==t||t.constructor===Number&&!isFinite(t)}function hr(t){return void 0!==t}function dr(t){return void 0===t}function fr(t){const e=yr.bounds(t);return{x:[e[0][0],e[1][0]],y:[e[0][1],e[1][1]]}}sr.prototype={_radius:4.5,_circle:cr(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=cr(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};const yr=ur();function pr(t){return t.constructor===Array}function gr(t){return t.constructor===Object&&"Polygon"===t.type}function mr(t){return t.constructor===Object&&"MultiPolygon"===t.type}function xr(t){if(pr(t))return vr(t);if(gr(t))return kr(t);if(mr(t))return function(t){let e=0;for(let n=0;n<t.coordinates.length;n++)e+=kr(t.coordinates[n]);return e}(t);throw new Error("Invalid input")}function vr(t){return Math.abs(function(t){let e=0;for(let n=0,o=t.length;n<o;n++){e+=t[n][0]*t[n===t.length-1?0:n+1][1]*.5,e-=t[n===t.length-1?0:n+1][0]*t[n][1]*.5}return e}(t))}function kr(t){let e=vr(t.coordinates[0]);for(let n=1;n<t.coordinates.length;n++){e-=vr(t.coordinates[n])}return e}function br(t,e){return Math.sqrt((t[0]-e[0])**2+(t[1]-e[1])**2)}function Mr(t){let e=0;for(let n=0;n<t.length-1;n++){e+=br(t[n],t[n+1])}return e}function _r(t){return pr(t)?wr(t):gr(t)?wr(t.coordinates[0]):mr(t)?function(t){let e=0,n=0,o=0;for(let r=0;r<t.coordinates.length;r++){const i=t.coordinates[r],a=wr(i[0]),s=xr(i[0]);e+=a[0]*s,n+=a[1]*s,o+=s}return[e/o,n/o]}(t):function(t){return t.constructor===Object&&"LineString"===t.type}(t)?wr(t.coordinates):function(t){return t.constructor===Object&&"MultiLineString"===t.type}(t)?function(t){let e=0,n=0,o=0;for(let r=0;r<t.coordinates.length;r++){const i=t.coordinates[r],a=wr(i),s=Mr(i);e+=a[0]*s,n+=a[1]*s,o+=s}return[e/o,n/o]}(t):void 0}function wr(t){const e=t.length,n=t[0];let o,r,i,a=0,s=0,c=0;for(let u=0,l=e-1;u<e;l=u++)o=t[u],r=t[l],i=(o[0]-n[0])*(r[1]-n[1])-(r[0]-n[0])*(o[1]-n[1]),a+=i,s+=(o[0]+r[0]-2*n[0])*i,c+=(o[1]+r[1]-2*n[1])*i;return i=3*a,[s/i+n[0],c/i+n[1]]}function $r(t,e,n){return function(t,e){const n=function(t,e){const n=t[0],o=t[1],r=e[0][0],i=e[0][1],a=e[1][0],s=e[1][1],c=a-r,u=s-i,l=(n-r)*c+(o-i)*u,h=c*c+u*u;let d,f,y=-1;0!==h&&(y=l/h);y<0?(d=r,f=i):y>1?(d=a,f=s):(d=r+y*c,f=i+y*u);return[d,f]}(t,e);return br(t,n)}(t,e)<n/2}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function Sr(t){var e={exports:{}};return t(e,e.exports),e.exports}var Tr=function(t,e,n){var o=t*e,r=Ir*t,i=r-(r-t),a=t-i,s=Ir*e,c=s-(s-e),u=e-c,l=a*u-(o-i*c-a*c-i*u);if(n)return n[0]=l,n[1]=o,n;return[l,o]},Ir=+(Math.pow(2,27)+1);var Cr=function(t,e){var n=0|t.length,o=0|e.length;if(1===n&&1===o)return function(t,e){var n=t+e,o=n-t,r=t-(n-o)+(e-o);if(r)return[r,n];return[n]}(t[0],e[0]);var r,i,a=new Array(n+o),s=0,c=0,u=0,l=Math.abs,h=t[c],d=l(h),f=e[u],y=l(f);d<y?(i=h,(c+=1)<n&&(h=t[c],d=l(h))):(i=f,(u+=1)<o&&(f=e[u],y=l(f)));c<n&&d<y||u>=o?(r=h,(c+=1)<n&&(h=t[c],d=l(h))):(r=f,(u+=1)<o&&(f=e[u],y=l(f)));var p,g,m=r+i,x=m-r,v=i-x,k=v,b=m;for(;c<n&&u<o;)d<y?(r=h,(c+=1)<n&&(h=t[c],d=l(h))):(r=f,(u+=1)<o&&(f=e[u],y=l(f))),(v=(i=k)-(x=(m=r+i)-r))&&(a[s++]=v),k=b-((p=b+m)-(g=p-b))+(m-g),b=p;for(;c<n;)(v=(i=k)-(x=(m=(r=h)+i)-r))&&(a[s++]=v),k=b-((p=b+m)-(g=p-b))+(m-g),b=p,(c+=1)<n&&(h=t[c]);for(;u<o;)(v=(i=k)-(x=(m=(r=f)+i)-r))&&(a[s++]=v),k=b-((p=b+m)-(g=p-b))+(m-g),b=p,(u+=1)<o&&(f=e[u]);k&&(a[s++]=k);b&&(a[s++]=b);s||(a[s++]=0);return a.length=s,a};var Or=function(t,e,n){var o=t+e,r=o-t,i=e-r,a=t-(o-r);if(n)return n[0]=a+i,n[1]=o,n;return[a+i,o]};var Nr=function(t,e){var n=t.length;if(1===n){var o=Tr(t[0],e);return o[0]?o:[o[1]]}var r=new Array(2*n),i=[.1,.1],a=[.1,.1],s=0;Tr(t[0],e,i),i[0]&&(r[s++]=i[0]);for(var c=1;c<n;++c){Tr(t[c],e,a);var u=i[1];Or(u,a[0],i),i[0]&&(r[s++]=i[0]);var l=a[1],h=i[1],d=l+h,f=h-(d-l);i[1]=d,f&&(r[s++]=f)}i[1]&&(r[s++]=i[1]);0===s&&(r[s++]=0);return r.length=s,r};var Er=function(t,e){var n=0|t.length,o=0|e.length;if(1===n&&1===o)return function(t,e){var n=t+e,o=n-t,r=t-(n-o)+(e-o);if(r)return[r,n];return[n]}(t[0],-e[0]);var r,i,a=new Array(n+o),s=0,c=0,u=0,l=Math.abs,h=t[c],d=l(h),f=-e[u],y=l(f);d<y?(i=h,(c+=1)<n&&(h=t[c],d=l(h))):(i=f,(u+=1)<o&&(f=-e[u],y=l(f)));c<n&&d<y||u>=o?(r=h,(c+=1)<n&&(h=t[c],d=l(h))):(r=f,(u+=1)<o&&(f=-e[u],y=l(f)));var p,g,m=r+i,x=m-r,v=i-x,k=v,b=m;for(;c<n&&u<o;)d<y?(r=h,(c+=1)<n&&(h=t[c],d=l(h))):(r=f,(u+=1)<o&&(f=-e[u],y=l(f))),(v=(i=k)-(x=(m=r+i)-r))&&(a[s++]=v),k=b-((p=b+m)-(g=p-b))+(m-g),b=p;for(;c<n;)(v=(i=k)-(x=(m=(r=h)+i)-r))&&(a[s++]=v),k=b-((p=b+m)-(g=p-b))+(m-g),b=p,(c+=1)<n&&(h=t[c]);for(;u<o;)(v=(i=k)-(x=(m=(r=f)+i)-r))&&(a[s++]=v),k=b-((p=b+m)-(g=p-b))+(m-g),b=p,(u+=1)<o&&(f=-e[u]);k&&(a[s++]=k);b&&(a[s++]=b);s||(a[s++]=0);return a.length=s,a};var Pr=Sr((function(t){function e(t,e){for(var n=new Array(t.length-1),o=1;o<t.length;++o)for(var r=n[o-1]=new Array(t.length-1),i=0,a=0;i<t.length;++i)i!==e&&(r[a++]=t[o][i]);return n}function n(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",n(t.slice(0,e)),",",n(t.slice(e)),")"].join("")}function o(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var r=[],i=0;i<t.length;++i)r.push(["scale(",n(o(e(t,i))),",",(a=i,1&a?"-":""),t[0][i],")"].join(""));return r;var a}function r(t){for(var r=[],i=[],a=function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var o=0;o<t;++o)e[n][o]=["m",o,"[",t-n-1,"]"].join("")}return e}(t),s=[],c=0;c<t;++c)0==(1&c)?r.push.apply(r,o(e(a,c))):i.push.apply(i,o(e(a,c))),s.push("m"+c);var u=n(r),l=n(i),h="orientation"+t+"Exact",d=["function ",h,"(",s.join(),"){var p=",u,",n=",l,",d=sub(p,n);return d[d.length-1];};return ",h].join("");return new Function("sum","prod","scale","sub",d)(Cr,Tr,Nr,Er)}var i=r(3),a=r(4),s=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var o,r=(t[1]-n[1])*(e[0]-n[0]),a=(t[0]-n[0])*(e[1]-n[1]),s=r-a;if(r>0){if(a<=0)return s;o=r+a}else{if(!(r<0))return s;if(a>=0)return s;o=-(r+a)}var c=33306690738754716e-32*o;return s>=c||s<=-c?s:i(t,e,n)},function(t,e,n,o){var r=t[0]-o[0],i=e[0]-o[0],s=n[0]-o[0],c=t[1]-o[1],u=e[1]-o[1],l=n[1]-o[1],h=t[2]-o[2],d=e[2]-o[2],f=n[2]-o[2],y=i*l,p=s*u,g=s*c,m=r*l,x=r*u,v=i*c,k=h*(y-p)+d*(g-m)+f*(x-v),b=7771561172376103e-31*((Math.abs(y)+Math.abs(p))*Math.abs(h)+(Math.abs(g)+Math.abs(m))*Math.abs(d)+(Math.abs(x)+Math.abs(v))*Math.abs(f));return k>b||-k>b?k:a(t,e,n,o)}];function c(t){var e=s[t.length];return e||(e=s[t.length]=r(t.length)),e.apply(void 0,t)}!function(){for(;s.length<=5;)s.push(r(s.length));for(var e=[],n=["slow"],o=0;o<=5;++o)e.push("a"+o),n.push("o"+o);var i=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(o=2;o<=5;++o)i.push("case ",o,":return o",o,"(",e.slice(0,o).join(),");");i.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(i.join(""));var a=Function.apply(void 0,n);for(t.exports=a.apply(void 0,[c].concat(s)),o=0;o<=5;++o)t.exports[o]=s[o]}()})),Lr=function(t,e){for(var n=e[0],o=e[1],r=t.length,i=1,a=r,s=0,c=r-1;s<a;c=s++){var u=t[s],l=t[c],h=u[1],d=l[1];if(d<h){if(d<o&&o<h){if(0===(p=Pr(u,l,e)))return 0;i^=0<p|0}else if(o===h){var f=(y=t[(s+1)%r])[1];if(h<f){if(0===(p=Pr(u,l,e)))return 0;i^=0<p|0}}}else if(h<d){if(h<o&&o<d){if(0===(p=Pr(u,l,e)))return 0;i^=p<0|0}else if(o===h){var y=t[(s+1)%r];if((f=y[1])<h){var p;if(0===(p=Pr(u,l,e)))return 0;i^=p<0|0}}}else if(o===h){var g=Math.min(u[0],l[0]),m=Math.max(u[0],l[0]);if(0===s){for(;c>0;){var x=(c+r-1)%r;if((b=t[x])[1]!==o)break;var v=b[0];g=Math.min(g,v),m=Math.max(m,v),c=x}if(0===c)return g<=n&&n<=m?0:1;a=c+1}for(var k=t[(c+r-1)%r][1];s+1<a;){var b;if((b=t[s+1])[1]!==o)break;v=b[0];g=Math.min(g,v),m=Math.max(m,v),s+=1}if(g<=n&&n<=m)return 0;var M=t[(s+1)%r][1];n<g&&k<o!=M<o&&(i^=1)}}return 2*i-1};function Ar(t,e){switch(e.type){case"Polygon":return function(t,e){const n=e.coordinates;return jr(t,n)}(t,e);case"MultiPolygon":return function(t,e){const n=e.coordinates;for(let e=0;e<n.length;e++){if(jr(t,n[e]))return!0}return!1}(t,e)}}function jr(t,e){if(!Wr(t,e[0]))return!1;for(let n=1;n<e.length;n++){if(Wr(t,e[n]))return!1}return!0}function Wr(t,e){return-1===Lr(e,t)}const Rr=new Error("Invalid input");function Yr(t){if("coordinates"in t)return"geojson";if("x"in t&&"y"in t)return"Point"!==t.type&&function(t,e){if(void 0!==t&&void 0!==e&&t.constructor===Array&&e.constructor===Array&&t.length===e.length&&t.length>1)return;throw Rr}(t.x,t.y),"xy";throw Rr}function zr([t,e],n){const o=10**n;return[Math.round(t*o)/o,Math.round(e*o)/o]}function Xr(t,e){return Math.sqrt((t[0]-e[0])**2+(t[1]-e[1])**2)}function qr(t,e,n){return!n.simplify||t.length<3?function(t,e){const n=[];for(let o=0;o<t.length;o++)n.push(e(t[o]));return n}(t,e):!0===n.simplify?function(t,e,n=1){const o=[e(t[0])];let r,i=o[0];for(let a=1;a<t.length-1;a++){r=e(t[a]);Xr(i,r)>=n&&(o.push(r),i=r)}const a=e(t[t.length-1]);return o.push(a),o}(t,e,n.simplificationThreshold):void 0}function Fr(t,e,n){const o=[];for(let r=0;r<t.length;r++)o.push(qr(t[r],e,n));return o}function Hr({x:t,y:e},n,o){return!o.simplify||t.length<3?function(t,e,n){const o=[];for(let r=0;r<t.length;r++)o.push(n([t[r],e[r]]));return o}(t,e,n):!0===o.simplify?function(t,e,n,o=1){const r=[n([t[0],e[0]])];let i,a=r[0];for(let s=1;s<t.length-1;s++){i=n([t[s],e[s]]);Xr(a,i)>=o&&(r.push(i),a=i)}const s=t.length-1,c=n([t[s],e[s]]);return r.push(c),r}(t,e,n,o.simplificationThreshold):void 0}const Br={transformPoint:function(t,e){const n=Yr(t);if("geojson"===n)return{type:"Point",coordinates:e(t.coordinates)};if("xy"===n)return{type:"Point",coordinates:e([t.x,t.y])}},transformMultiPoint:function(t,e){const n=Yr(t);if("geojson"===n)return{type:"MultiPoint",coordinates:qr(t.coordinates,e,{})};if("xy"===n)return{type:"MultiPoint",coordinates:Hr(t,e,{})}},transformLineString:function(t,e,n){const o=Yr(t);if("geojson"===o)return{type:"LineString",coordinates:qr(t.coordinates,e,n)};if("xy"===o)return{type:"LineString",coordinates:Hr(t,e,n)}},transformMultiLineString:function(t,e,n){const o=Yr(t);if("geojson"===o)return{type:"MultiLineString",coordinates:Fr(t.coordinates,e,n)};if("xy"===o)return{type:"MultiLineString",coordinates:[Hr(t,e,n)]}},transformPolygon:function(t,e,n){const o=Yr(t);if("geojson"===o)return{type:"Polygon",coordinates:Fr(t.coordinates,e,n)};if("xy"===o)return{type:"Polygon",coordinates:[Hr(t,e,n)]}},transformMultiPolygon:function(t,e,n){const o=Yr(t);if("geojson"===o){const o=t.coordinates,r=[];for(let t=0;t<o.length;t++)r.push(Fr(o[t],e,n));return{type:"MultiPolygon",coordinates:r}}if("xy"===o)return{type:"MultiPolygon",coordinates:[[Hr(t,e,n)]]}}};function Gr(t,e,n={}){const o="transform"+t.type,r=n.decimals?t=>zr(e(t),n.decimals):e;return Br[o](t,r,n)}function Dr(t,e,n,o,{interpolationThreshold:r=1}){const i=n(t),a=n(e),s=function({finalRangeX:t,finalRangeY:e}){const n=Math.abs(t[0]-t[1])/2,o=Math.abs(e[0]-e[1])/2;return Math.max(n,o)}(o);if(function(t,e,n){return Math.abs(t[0]-e[0])*n<1}(i,a,s))return 0;const c=function({a:t,b:e,interval:n}){const[o,r]=n;if(0===t)return(r-o)*e;const i=t**2,a=e**2;return(i*Math.asinh((t*r+e)/t)+(t*r+e)*Math.sqrt(i*r**2+2*t*e*r+a+i)-i*Math.asinh((t*o+e)/t)+(-t*o-e)*Math.sqrt(i*o**2+2*t*e*o+a+i))/(2*t)}(function(t,e){const n=t[0]<e[0]?[t,e]:[e,t],[[o,r],[i,a]]=n,s=(a-r)/(i-o);return{a:s,b:r-o*s,interval:[o,i]}}(i,a))*s/r;return Math.floor(c)}function Zr(t,e,n,o,r){const i=function(t,e){const n=e[0]-t[0],o=e[1]-t[1];return e=>[t[0]+e*n,t[1]+e*o]}(e,n);for(let e=0;e<r;e++){const n=(e+1)/(r+1);t.push(o(i(n)))}}function Vr(t,e,n,o){if(!o.simplify||t.length<3)return function(t,e,n,o){const r=[],{scaleTransformation:i,postScaleTransformation:a,toPolar:s}=n;for(let n=0;n<t.length-1;n++){const c=t[n],u=t[n+1],l=i(c),h=i(u);r.push(a(l));const d=Dr(l,h,s,e,o);d>0&&Zr(r,l,h,a,d)}const c=t[t.length-1];return r.push(a(i(c))),r}(t,e,n,o);o.simplify}function Kr(t,e,n,o){const r=[];for(let i=0;i<t.length;i++)r.push(Vr(t[i],e,n,o));return r}function Ur({x:t,y:e},n,o,r){if(!r.simplify||t.length<3)return function(t,e,n,o,r){const i=[],{scaleTransformation:a,postScaleTransformation:s,toPolar:c}=o;for(let o=0;o<t.length-1;o++){const u=[t[o],e[o]],l=[t[o+1],e[o+1]],h=a(u),d=a(l);i.push(s(h));const f=Dr(h,d,c,n,r);f>0&&Zr(i,h,d,s,f)}const u=t.length-1,l=[t[u],e[u]];return i.push(s(a(l))),i}(t,e,n,o,r);r.simplify}const Jr={interpolateLineString:function(t,e,n,o){const r=Yr(t);if("geojson"===r)return{type:"LineString",coordinates:Vr(t.coordinates,e,n,o)};if("xy"===r)return{type:"LineString",coordinates:Ur(t,e,n,o)}},interpolateMultiLineString:function(t,e,n,o){const r=Yr(t);if("geojson"===r)return{type:"MultiLineString",coordinates:Kr(t.coordinates,e,n,o)};if("xy"===r)return{type:"MultiLineString",coordinates:[Ur(t,e,n,o)]}},interpolatePolygon:function(t,e,n,o){const r=Yr(t);if("geojson"===r)return{type:"Polygon",coordinates:Kr(t.coordinates,e,n,o)};if("xy"===r)return{type:"Polygon",coordinates:[Ur(t,e,n,o)]}},interpolateMultiPolygon:function(t,e,n,o){const r=Yr(t);if("geojson"===r){const r=t.coordinates,i=[];for(let t=0;t<r.length;t++)i.push(Kr(r[t],e,n,o));return{type:"MultiPolygon",coordinates:i}}if("xy"===r)return{type:"MultiPolygon",coordinates:[[Ur(t,e,n,o)]]}}};function Qr(t,e,n,o={}){const r="interpolate"+t.type,{scaleTransformation:i,postScaleTransformation:a}=n,s=void 0!==o.decimals?t=>zr(a(t),o.decimals):a,c=Mn().domain(e.rangeX).range([0,2*Math.PI]),u=Mn().domain(e.rangeY).range([0,1]),l={scaleTransformation:i,postScaleTransformation:s,toPolar:([t,e])=>[c(t),u(e)]};return Jr[r](t,e,l,o)}function ti(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function ei(t,e){var n=Object.create(t.prototype);for(var o in e)n[o]=e[o];return n}function ni(){}var oi=.7,ri=1/oi,ii="\\s*([+-]?\\d+)\\s*",ai="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",si="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ci=/^#([0-9a-f]{3,8})$/,ui=new RegExp("^rgb\\("+[ii,ii,ii]+"\\)$"),li=new RegExp("^rgb\\("+[si,si,si]+"\\)$"),hi=new RegExp("^rgba\\("+[ii,ii,ii,ai]+"\\)$"),di=new RegExp("^rgba\\("+[si,si,si,ai]+"\\)$"),fi=new RegExp("^hsl\\("+[ai,si,si]+"\\)$"),yi=new RegExp("^hsla\\("+[ai,si,si,ai]+"\\)$"),pi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function gi(){return this.rgb().formatHex()}function mi(){return this.rgb().formatRgb()}function xi(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ci.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?vi(e):3===n?new _i(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?ki(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?ki(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=ui.exec(t))?new _i(e[1],e[2],e[3],1):(e=li.exec(t))?new _i(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=hi.exec(t))?ki(e[1],e[2],e[3],e[4]):(e=di.exec(t))?ki(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=fi.exec(t))?Ti(e[1],e[2]/100,e[3]/100,1):(e=yi.exec(t))?Ti(e[1],e[2]/100,e[3]/100,e[4]):pi.hasOwnProperty(t)?vi(pi[t]):"transparent"===t?new _i(NaN,NaN,NaN,0):null}function vi(t){return new _i(t>>16&255,t>>8&255,255&t,1)}function ki(t,e,n,o){return o<=0&&(t=e=n=NaN),new _i(t,e,n,o)}function bi(t){return t instanceof ni||(t=xi(t)),t?new _i((t=t.rgb()).r,t.g,t.b,t.opacity):new _i}function Mi(t,e,n,o){return 1===arguments.length?bi(t):new _i(t,e,n,null==o?1:o)}function _i(t,e,n,o){this.r=+t,this.g=+e,this.b=+n,this.opacity=+o}function wi(){return"#"+Si(this.r)+Si(this.g)+Si(this.b)}function $i(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Si(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Ti(t,e,n,o){return o<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ci(t,e,n,o)}function Ii(t){if(t instanceof Ci)return new Ci(t.h,t.s,t.l,t.opacity);if(t instanceof ni||(t=xi(t)),!t)return new Ci;if(t instanceof Ci)return t;var e=(t=t.rgb()).r/255,n=t.g/255,o=t.b/255,r=Math.min(e,n,o),i=Math.max(e,n,o),a=NaN,s=i-r,c=(i+r)/2;return s?(a=e===i?(n-o)/s+6*(n<o):n===i?(o-e)/s+2:(e-n)/s+4,s/=c<.5?i+r:2-i-r,a*=60):s=c>0&&c<1?0:a,new Ci(a,s,c,t.opacity)}function Ci(t,e,n,o){this.h=+t,this.s=+e,this.l=+n,this.opacity=+o}function Oi(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Ni(t){return function(){return t}}function Ei(t){return 1==(t=+t)?Pi:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(o){return Math.pow(t+o*e,n)}}(e,n,t):Ni(isNaN(e)?n:e)}}function Pi(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):Ni(isNaN(t)?e:t)}ti(ni,xi,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:gi,formatHex:gi,formatHsl:function(){return Ii(this).formatHsl()},formatRgb:mi,toString:mi}),ti(_i,Mi,ei(ni,{brighter:function(t){return t=null==t?ri:Math.pow(ri,t),new _i(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?oi:Math.pow(oi,t),new _i(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:wi,formatHex:wi,formatRgb:$i,toString:$i})),ti(Ci,(function(t,e,n,o){return 1===arguments.length?Ii(t):new Ci(t,e,n,null==o?1:o)}),ei(ni,{brighter:function(t){return t=null==t?ri:Math.pow(ri,t),new Ci(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?oi:Math.pow(oi,t),new Ci(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*e,r=2*n-o;return new _i(Oi(t>=240?t-240:t+120,r,o),Oi(t,r,o),Oi(t<120?t+240:t-120,r,o),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var Li=function t(e){var n=Ei(e);function o(t,e){var o=n((t=Mi(t)).r,(e=Mi(e)).r),r=n(t.g,e.g),i=n(t.b,e.b),a=Pi(t.opacity,e.opacity);return function(e){return t.r=o(e),t.g=r(e),t.b=i(e),t.opacity=a(e),t+""}}return o.gamma=t,o}(1);function Ai(t,e){e||(e=[]);var n,o=t?Math.min(e.length,t.length):0,r=e.slice();return function(i){for(n=0;n<o;++n)r[n]=t[n]*(1-i)+e[n]*i;return r}}function ji(t,e){var n,o=e?e.length:0,r=t?Math.min(o,t.length):0,i=new Array(r),a=new Array(o);for(n=0;n<r;++n)i[n]=Fi(t[n],e[n]);for(;n<o;++n)a[n]=e[n];return function(t){for(n=0;n<r;++n)a[n]=i[n](t);return a}}function Wi(t,e){var n=new Date;return t=+t,e=+e,function(o){return n.setTime(t*(1-o)+e*o),n}}function Ri(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Yi(t,e){var n,o={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?o[n]=Fi(t[n],e[n]):r[n]=e[n];return function(t){for(n in o)r[n]=o[n](t);return r}}var zi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Xi=new RegExp(zi.source,"g");function qi(t,e){var n,o,r,i=zi.lastIndex=Xi.lastIndex=0,a=-1,s=[],c=[];for(t+="",e+="";(n=zi.exec(t))&&(o=Xi.exec(e));)(r=o.index)>i&&(r=e.slice(i,r),s[a]?s[a]+=r:s[++a]=r),(n=n[0])===(o=o[0])?s[a]?s[a]+=o:s[++a]=o:(s[++a]=null,c.push({i:a,x:Ri(n,o)})),i=Xi.lastIndex;return i<e.length&&(r=e.slice(i),s[a]?s[a]+=r:s[++a]=r),s.length<2?c[0]?function(t){return function(e){return t(e)+""}}(c[0].x):function(t){return function(){return t}}(e):(e=c.length,function(t){for(var n,o=0;o<e;++o)s[(n=c[o]).i]=n.x(t);return s.join("")})}function Fi(t,e){var n,o,r=typeof e;return null==e||"boolean"===r?Ni(e):("number"===r?Ri:"string"===r?(n=xi(e))?(e=n,Li):qi:e instanceof xi?Li:e instanceof Date?Wi:(o=e,!ArrayBuffer.isView(o)||o instanceof DataView?Array.isArray(e)?ji:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Yi:Ri:Ai))(t,e)}var Hi=Gi,Bi=Gi;function Gi(t,e,n){n=n||2;var o,r,i,a,s,c,u,l=e&&e.length,h=l?e[0]*n:t.length,d=Di(t,0,h,n,!0),f=[];if(!d||d.next===d.prev)return f;if(l&&(d=function(t,e,n,o){var r,i,a,s=[];for(r=0,i=e.length;r<i;r++)(a=Di(t,e[r]*o,r<i-1?e[r+1]*o:t.length,o,!1))===a.next&&(a.steiner=!0),s.push(ra(a));for(s.sort(ta),r=0;r<s.length;r++)ea(s[r],n),n=Zi(n,n.next);return n}(t,e,d,n)),t.length>80*n){o=i=t[0],r=a=t[1];for(var y=n;y<h;y+=n)(s=t[y])<o&&(o=s),(c=t[y+1])<r&&(r=c),s>i&&(i=s),c>a&&(a=c);u=0!==(u=Math.max(i-o,a-r))?1/u:0}return Vi(d,f,n,o,r,u),f}function Di(t,e,n,o,r){var i,a;if(r===ma(t,e,n,o)>0)for(i=e;i<n;i+=o)a=ya(i,t[i],t[i+1],a);else for(i=n-o;i>=e;i-=o)a=ya(i,t[i],t[i+1],a);return a&&ca(a,a.next)&&(pa(a),a=a.next),a}function Zi(t,e){if(!t)return t;e||(e=t);var n,o=t;do{if(n=!1,o.steiner||!ca(o,o.next)&&0!==sa(o.prev,o,o.next))o=o.next;else{if(pa(o),(o=e=o.prev)===o.next)break;n=!0}}while(n||o!==e);return e}function Vi(t,e,n,o,r,i,a){if(t){!a&&i&&function(t,e,n,o){var r=t;do{null===r.z&&(r.z=oa(r.x,r.y,e,n,o)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,o,r,i,a,s,c,u=1;do{for(n=t,t=null,i=null,a=0;n;){for(a++,o=n,s=0,e=0;e<u&&(s++,o=o.nextZ);e++);for(c=u;s>0||c>0&&o;)0!==s&&(0===c||!o||n.z<=o.z)?(r=n,n=n.nextZ,s--):(r=o,o=o.nextZ,c--),i?i.nextZ=r:t=r,r.prevZ=i,i=r;n=o}i.nextZ=null,u*=2}while(a>1)}(r)}(t,o,r,i);for(var s,c,u=t;t.prev!==t.next;)if(s=t.prev,c=t.next,i?Ui(t,o,r,i):Ki(t))e.push(s.i/n),e.push(t.i/n),e.push(c.i/n),pa(t),t=c.next,u=c.next;else if((t=c)===u){a?1===a?Vi(t=Ji(Zi(t),e,n),e,n,o,r,i,2):2===a&&Qi(t,e,n,o,r,i):Vi(Zi(t),e,n,o,r,i,1);break}}}function Ki(t){var e=t.prev,n=t,o=t.next;if(sa(e,n,o)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(ia(e.x,e.y,n.x,n.y,o.x,o.y,r.x,r.y)&&sa(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function Ui(t,e,n,o){var r=t.prev,i=t,a=t.next;if(sa(r,i,a)>=0)return!1;for(var s=r.x<i.x?r.x<a.x?r.x:a.x:i.x<a.x?i.x:a.x,c=r.y<i.y?r.y<a.y?r.y:a.y:i.y<a.y?i.y:a.y,u=r.x>i.x?r.x>a.x?r.x:a.x:i.x>a.x?i.x:a.x,l=r.y>i.y?r.y>a.y?r.y:a.y:i.y>a.y?i.y:a.y,h=oa(s,c,e,n,o),d=oa(u,l,e,n,o),f=t.prevZ,y=t.nextZ;f&&f.z>=h&&y&&y.z<=d;){if(f!==t.prev&&f!==t.next&&ia(r.x,r.y,i.x,i.y,a.x,a.y,f.x,f.y)&&sa(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,y!==t.prev&&y!==t.next&&ia(r.x,r.y,i.x,i.y,a.x,a.y,y.x,y.y)&&sa(y.prev,y,y.next)>=0)return!1;y=y.nextZ}for(;f&&f.z>=h;){if(f!==t.prev&&f!==t.next&&ia(r.x,r.y,i.x,i.y,a.x,a.y,f.x,f.y)&&sa(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;y&&y.z<=d;){if(y!==t.prev&&y!==t.next&&ia(r.x,r.y,i.x,i.y,a.x,a.y,y.x,y.y)&&sa(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}function Ji(t,e,n){var o=t;do{var r=o.prev,i=o.next.next;!ca(r,i)&&ua(r,o,o.next,i)&&da(r,i)&&da(i,r)&&(e.push(r.i/n),e.push(o.i/n),e.push(i.i/n),pa(o),pa(o.next),o=t=i),o=o.next}while(o!==t);return Zi(o)}function Qi(t,e,n,o,r,i){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&aa(a,s)){var c=fa(a,s);return a=Zi(a,a.next),c=Zi(c,c.next),Vi(a,e,n,o,r,i),void Vi(c,e,n,o,r,i)}s=s.next}a=a.next}while(a!==t)}function ta(t,e){return t.x-e.x}function ea(t,e){if(e=function(t,e){var n,o=e,r=t.x,i=t.y,a=-1/0;do{if(i<=o.y&&i>=o.next.y&&o.next.y!==o.y){var s=o.x+(i-o.y)*(o.next.x-o.x)/(o.next.y-o.y);if(s<=r&&s>a){if(a=s,s===r){if(i===o.y)return o;if(i===o.next.y)return o.next}n=o.x<o.next.x?o:o.next}}o=o.next}while(o!==e);if(!n)return null;if(r===a)return n;var c,u=n,l=n.x,h=n.y,d=1/0;o=n;do{r>=o.x&&o.x>=l&&r!==o.x&&ia(i<h?r:a,i,l,h,i<h?a:r,i,o.x,o.y)&&(c=Math.abs(i-o.y)/(r-o.x),da(o,t)&&(c<d||c===d&&(o.x>n.x||o.x===n.x&&na(n,o)))&&(n=o,d=c)),o=o.next}while(o!==u);return n}(t,e)){var n=fa(e,t);Zi(e,e.next),Zi(n,n.next)}}function na(t,e){return sa(t.prev,t,e.prev)<0&&sa(e.next,t,t.next)<0}function oa(t,e,n,o,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-o)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function ra(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function ia(t,e,n,o,r,i,a,s){return(r-a)*(e-s)-(t-a)*(i-s)>=0&&(t-a)*(o-s)-(n-a)*(e-s)>=0&&(n-a)*(i-s)-(r-a)*(o-s)>=0}function aa(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&ua(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(da(t,e)&&da(e,t)&&function(t,e){var n=t,o=!1,r=(t.x+e.x)/2,i=(t.y+e.y)/2;do{n.y>i!=n.next.y>i&&n.next.y!==n.y&&r<(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&&(o=!o),n=n.next}while(n!==t);return o}(t,e)&&(sa(t.prev,t,e.prev)||sa(t,e.prev,e))||ca(t,e)&&sa(t.prev,t,t.next)>0&&sa(e.prev,e,e.next)>0)}function sa(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function ca(t,e){return t.x===e.x&&t.y===e.y}function ua(t,e,n,o){var r=ha(sa(t,e,n)),i=ha(sa(t,e,o)),a=ha(sa(n,o,t)),s=ha(sa(n,o,e));return r!==i&&a!==s||(!(0!==r||!la(t,n,e))||(!(0!==i||!la(t,o,e))||(!(0!==a||!la(n,t,o))||!(0!==s||!la(n,e,o)))))}function la(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function ha(t){return t>0?1:t<0?-1:0}function da(t,e){return sa(t.prev,t,t.next)<0?sa(t,e,t.next)>=0&&sa(t,t.prev,e)>=0:sa(t,e,t.prev)<0||sa(t,t.next,e)<0}function fa(t,e){var n=new ga(t.i,t.x,t.y),o=new ga(e.i,e.x,e.y),r=t.next,i=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,o.next=n,n.prev=o,i.next=o,o.prev=i,o}function ya(t,e,n,o){var r=new ga(t,e,n);return o?(r.next=o.next,r.prev=o,o.next.prev=r,o.next=r):(r.prev=r,r.next=r),r}function pa(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function ga(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ma(t,e,n,o){for(var r=0,i=e,a=n-o;i<n;i+=o)r+=(t[a]-t[i])*(t[i+1]+t[a+1]),a=i;return r}function xa(t){return t}function va(t,e){var n=e.id,o=e.bbox,r=null==e.properties?{}:e.properties,i=ka(t,e);return null==n&&null==o?{type:"Feature",properties:r,geometry:i}:null==o?{type:"Feature",id:n,properties:r,geometry:i}:{type:"Feature",id:n,bbox:o,properties:r,geometry:i}}function ka(t,e){var n=function(t){if(null==t)return xa;var e,n,o=t.scale[0],r=t.scale[1],i=t.translate[0],a=t.translate[1];return function(t,s){s||(e=n=0);var c=2,u=t.length,l=new Array(u);for(l[0]=(e+=t[0])*o+i,l[1]=(n+=t[1])*r+a;c<u;)l[c]=t[c],++c;return l}}(t.transform),o=t.arcs;function r(t,e){e.length&&e.pop();for(var r=o[t<0?~t:t],i=0,a=r.length;i<a;++i)e.push(n(r[i],i));t<0&&function(t,e){for(var n,o=t.length,r=o-e;r<--o;)n=t[r],t[r++]=t[o],t[o]=n}(e,a)}function i(t){return n(t)}function a(t){for(var e=[],n=0,o=t.length;n<o;++n)r(t[n],e);return e.length<2&&e.push(e[0]),e}function s(t){for(var e=a(t);e.length<4;)e.push(e[0]);return e}function c(t){return t.map(s)}return function t(e){var n,o=e.type;switch(o){case"GeometryCollection":return{type:o,geometries:e.geometries.map(t)};case"Point":n=i(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(i);break;case"LineString":n=a(e.arcs);break;case"MultiLineString":n=e.arcs.map(a);break;case"Polygon":n=c(e.arcs);break;case"MultiPolygon":n=e.arcs.map(c);break;default:return null}return{type:o,coordinates:n}}(e)}function ba(t,e){var n={},o={},r={},i=[],a=-1;function s(t,e){for(var o in t){var r=t[o];delete e[r.start],delete r.start,delete r.end,r.forEach((function(t){n[t<0?~t:t]=1})),i.push(r)}}return e.forEach((function(n,o){var r,i=t.arcs[n<0?~n:n];i.length<3&&!i[1][0]&&!i[1][1]&&(r=e[++a],e[a]=n,e[o]=r)})),e.forEach((function(e){var n,i,a=function(e){var n,o=t.arcs[e<0?~e:e],r=o[0];t.transform?(n=[0,0],o.forEach((function(t){n[0]+=t[0],n[1]+=t[1]}))):n=o[o.length-1];return e<0?[n,r]:[r,n]}(e),s=a[0],c=a[1];if(n=r[s])if(delete r[n.end],n.push(e),n.end=c,i=o[c]){delete o[i.start];var u=i===n?n:n.concat(i);o[u.start=n.start]=r[u.end=i.end]=u}else o[n.start]=r[n.end]=n;else if(n=o[c])if(delete o[n.start],n.unshift(e),n.start=s,i=r[s]){delete r[i.end];var l=i===n?n:i.concat(n);o[l.start=i.start]=r[l.end=n.end]=l}else o[n.start]=r[n.end]=n;else o[(n=[e]).start=s]=r[n.end=c]=n})),s(r,o),s(o,r),e.forEach((function(t){n[t<0?~t:t]||i.push([t])})),i}function Ma(t,e){var n={},o=[],r=[];function i(t){t.forEach((function(e){e.forEach((function(e){(n[e=e<0?~e:e]||(n[e]=[])).push(t)}))})),o.push(t)}function a(e){return function(t){for(var e,n=-1,o=t.length,r=t[o-1],i=0;++n<o;)e=r,r=t[n],i+=e[0]*r[1]-e[1]*r[0];return Math.abs(i)}(ka(t,{type:"Polygon",arcs:[e]}).coordinates[0])}return e.forEach((function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":i(e.arcs);break;case"MultiPolygon":e.arcs.forEach(i)}})),o.forEach((function(t){if(!t._){var e=[],o=[t];for(t._=1,r.push(e);t=o.pop();)e.push(t),t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].forEach((function(t){t._||(t._=1,o.push(t))}))}))}))}})),o.forEach((function(t){delete t._})),{type:"MultiPolygon",arcs:r.map((function(e){var o,r=[];if(e.forEach((function(t){t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].length<2&&r.push(t)}))}))})),(o=(r=ba(t,r)).length)>1)for(var i,s,c=1,u=a(r[0]);c<o;++c)(i=a(r[c]))>u&&(s=r[0],r[0]=r[c],r[c]=s,u=i);return r})).filter((function(t){return t.length>0}))}}function _a(t,e){return Math.sqrt((t[0]-e[0])**2+(t[1]-e[1])**2)}function wa(t){let e=0;for(let n=0;n<t.length-1;n++){e+=_a(t[n],t[n+1])}return e}function $a(t,e){const n=[];for(let o=0;o<t.length;o++)n.push(e(t[o],o));return n}function Sa(t){const e=$a(t,((t,e)=>e));return e.sort(((e,n)=>t[n]-t[e])),e}function Ta(t,e){return $a(e,(e=>t[e]))}function Ia(t,e){if(0===t.length)return 0;for(let n=t.length-1;n>=0;n--){if(e<=t[n])return n}return 0}function Ca(t){return t.pop(),t}function Oa(t){let e=t[0];return t.push(e),t}function Na(t,e){let n=La(t);return n=Ca(n),n=Pa(n,e,{ring:!0}),n=Oa(n),n}function Ea(t,e){return Pa(La(t),e,{ring:!1})}function Pa(t,e,{ring:n}){const o=function(t,e){const n=[],o=e?t.length:t.length-1;for(let e=0;e<o;e++){const o=Aa(t,e);n.push(_a(o[0],o[1]))}return n}(t,n);let r=Sa(o);for(let n=0;n<e;n++){const e=r[0],n=Aa(t,e),i=o[e],a=ja(n),s=i/2;r.shift(),t[e]=null,o[e]=null,r=Wa(r,o,e,s),t[e]=a[0][0],t.splice(e+1,0,a[1][0]),o[e]=s,o.splice(e+1,0,s)}return t}function La(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].slice(0));return e}function Aa(t,e){return[t[e],t[(e+1)%t.length]]}function ja(t){const e=Fi(t[0],t[1])(.5);return[[t[0],e],[e,t[1]]]}function Wa(t,e,n,o){let r=!1;for(let i=0;i<t.length;i++){const a=t[i];a>n&&(t[i]=t[i]+1);const s=e[a];if(null!==s&&o>=s){t.splice(i,0,n),t.splice(i+1,0,n+1),r=!0;break}}return r||(t.push(n),t.push(n+1)),t}function Ra(t){return t.constructor===Array}function Ya(t){return t.constructor===Object&&"Polygon"===t.type}function za(t){return t.constructor===Object&&"MultiPolygon"===t.type}function Xa(t){return Ya(t)||za(t)}function qa(t){return function(t){return t.constructor===Object&&"LineString"===t.type}(t)||function(t){return t.constructor===Object&&"MultiLineString"===t.type}(t)}function Fa(t){if(Ra(t))return Ha(t);if(Ya(t))return Ga(t);if(za(t))return function(t){let e=0;for(let n=0;n<t.coordinates.length;n++)e+=Ga(t.coordinates[n]);return e}(t);throw new Error("Invalid input")}function Ha(t){return Math.abs(Ba(t))}function Ba(t){let e=0;for(let n=0,o=t.length;n<o;n++){e+=t[n][0]*t[n===t.length-1?0:n+1][1]*.5,e-=t[n===t.length-1?0:n+1][0]*t[n][1]*.5}return e}function Ga(t){let e=Ha(t.coordinates[0]);for(let n=1;n<t.coordinates.length;n++){e-=Ha(t.coordinates[n])}return e}function Da(t,e){return t.length>9?$a(t,((t,e)=>e)):function(t,e){const n=$a(t,Fa),o=$a(e,Fa),r=Sa(n),i=Sa(o),a={};for(let t=0;t<i.length;t++){const e=r[t];a[i[t]]=e}const s=[];for(let t=0;t<e.length;t++)s.push(a[t]);return s}(t,e)}function Za(t){return Ra(t)?Va(t):Ya(t)?Va(t.coordinates[0]):za(t)?function(t){let e=0,n=0,o=0;for(let r=0;r<t.coordinates.length;r++){const i=t.coordinates[r],a=Va(i[0]),s=Fa(i[0]);e+=a[0]*s,n+=a[1]*s,o+=s}return[e/o,n/o]}(t):void 0}function Va(t){const e=t.length,n=t[0];let o,r,i,a=0,s=0,c=0;for(let u=0,l=e-1;u<e;l=u++)o=t[u],r=t[l],i=(o[0]-n[0])*(r[1]-n[1])-(r[0]-n[0])*(o[1]-n[1]),a+=i,s+=(o[0]+r[0]-2*n[0])*i,c+=(o[1]+r[1]-2*n[1])*i;return i=3*a,[s/i+n[0],c/i+n[1]]}function Ka(t,e){const n=t.coordinates[0],o=e.coordinates[0],[r,i]=Ua(n,o);if(function(t,e){return 1===t.coordinates.length&&1===e.coordinates.length}(t,e))return function(t,e,n,o){const r=Fi(n,o);return function(n){if(0===n)return t;if(1===n)return e;return{type:"Polygon",coordinates:[r(n)]}}}(t,e,r,i);return function(t,e,n,o,r){const i=Fi(n,o);return function(n){if(0===n)return t;if(1===n)return e;return{type:"Polygon",coordinates:[i(n),...$a(r,(t=>t(n)))]}}}(t,e,r,i,function(t,e){let n=[];const o=Math.min(t.coordinates.length,e.coordinates.length)-1;o>0&&(n=n.concat(function(t,e,n){const o=[],r=Ja(t,n),i=Ja(e,n),a=$a(Da(r,i),(t=>r[t]));for(let t=0;t<n;t++){const e=a[t],n=i[t],[r,s]=Ua(e,n),c=Fi(r,s);o.push(c)}return o}(t,e,o)));const r=t.coordinates.length-e.coordinates.length;r>0&&(n=n.concat(Qa(t,r)));r<0&&(n=n.concat(function(t,e){return $a(Qa(t,e),(t=>e=>t(1-e)))}(e,-r)));return n}(t,e))}function Ua(t,e){const n=t.length-e.length;n>0&&(e=Na(e,n)),n<0&&(t=Na(t,-n));return[function(t,e){let n=La(t);n=Ca(n);const o=n.length;let r,i,a,s=1/0;for(let t=0;t<o;t++)i=0,e.forEach(((e,r)=>{const a=_a(n[(t+r)%o],e);i+=a*a})),i<s&&(s=i,r=t);return r&&(a=n.splice(0,r),n.splice(n.length,0,...a)),n=Oa(n),n}(t,e),e]}function Ja(t,e){const n=[];for(let o=1;o<=e;o++)n.push(t.coordinates[o]);return n}function Qa(t,e){const n=[];for(let o=t.coordinates.length-e;o<t.coordinates.length;o++){const e=t.coordinates[o],r=ts(Za(e)),[i,a]=Ua(e,r);n.push(Fi(i,a))}return n}function ts([t,e]){const n=1e-6,o=t-n,r=t+n,i=e-n,a=e+n;return[[o,i],[o,a],[r,a],[r,i],[o,i]]}function es(t,e){const n=t[e],o=t[e+1],r=t[e+2];return[[n,o],[o,r],[r,n]]}function ns(t){return t[0]<t[1]?t.join(","):t[1]+","+t[0]}function os(t,e){return[t[2*e],t[2*e+1]]}function rs(t,e){return{type:"Polygon",area:t,arcs:[e]}}function is(t,e){return Math.abs(Fa($a(e,(e=>os(t,e[0])))))}Gi.deviation=function(t,e,n,o){var r=e&&e.length,i=r?e[0]*n:t.length,a=Math.abs(ma(t,0,i,n));if(r)for(var s=0,c=e.length;s<c;s++){var u=e[s]*n,l=s<c-1?e[s+1]*n:t.length;a-=Math.abs(ma(t,u,l,n))}var h=0;for(s=0;s<o.length;s+=3){var d=o[s]*n,f=o[s+1]*n,y=o[s+2]*n;h+=Math.abs((t[d]-t[y])*(t[f+1]-t[d+1])-(t[d]-t[f])*(t[y+1]-t[d+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},Gi.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},o=0,r=0;r<t.length;r++){for(var i=0;i<t[r].length;i++)for(var a=0;a<e;a++)n.vertices.push(t[r][i][a]);r>0&&(o+=t[r-1].length,n.holes.push(o))}return n},Hi.default=Bi;const as=Kt((t=>t.area)).left;function ss(t,e){const n=t.objects.triangles.geometries;for(;n.length>e;)o();if(e>n.length)throw new RangeError("Can't collapse topology into "+e+" pieces.");return $a(function(t,e){return"string"==typeof e&&(e=t.objects[e]),"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map((function(e){return va(t,e)}))}:va(t,e)}(t,t.objects.triangles).features,(t=>t.geometry));function o(){const e=n[0],o=function(t){const e=t[0].arcs[0].map((t=>t<0?~t:t));let n;for(let o=1;o<t.length;o++){const r=t[o].arcs[0].map((t=>t<0?~t:t));if(e.some((t=>r.includes(t)))){n=o;break}}return n}(n),r=n[o],i=Ma(t,[e,r]);i.area=e.area+r.area,i.type="Polygon",i.arcs=i.arcs[0],n.splice(o,1),n.shift(),n.splice(as(n,i.area),0,i)}}function cs(t){const e=t.coordinates[0][0],n=t.coordinates[0][1],o=t.coordinates[0][2],r=Fi(e,n)(.5);return[us([e,r,o,e]),us([n,o,r,n])]}function us(t){return{type:"Polygon",coordinates:[t]}}function ls(t,e){if(e<2)throw new Error("Cannot cut polygon in less than 2 pieces");const n=Hi.flatten(t.coordinates),o=Hi(n.vertices,n.holes,2),r=function(t){return t.length/3}(o);if(r>=e){return ss(function(t,e){const n={},o={type:"Topology",objects:{triangles:{type:"GeometryCollection",geometries:[]}},arcs:[]};for(let r=0;r<e.length;r+=3){const i=[],a=es(e,r);a.forEach((e=>{const r=ns(e),a=$a(e,(e=>os(t,e)));r in n?i.push(~n[r]):(i.push(n[r]=o.arcs.length),o.arcs.push(a))}));const s=rs(is(t,a),i);o.objects.triangles.geometries.push(s)}return o.objects.triangles.geometries.sort(((t,e)=>t.area-e.area)),o}(n.vertices,o),e)}if(r<e){return function(t,e){const n=$a(t,Fa),o=Sa(n),r=Ta(n,o),i=Ta(t,o);for(;i.length<e;){r.shift();const t=cs(i.shift()),e=$a(t,Fa);for(let n=0;n<t.length;n++){const o=e[n],a=t[n],s=Ia(r,o);r.splice(s,0,o),i.splice(s,0,a)}}return i}(function(t,e){const n=[];for(let o=0;o<e.length;o+=3){const r=es(e,o);let i=$a(r,(e=>os(t,e[0])));i.push(os(t,r[0][0])),Ba(i)<0&&(i=i.reverse()),n.push({type:"Polygon",coordinates:[i]})}return n}(n.vertices,o),e)}}function hs(t,e){if(e<1)throw ds;const n=fs($a(t,Fa),e);let o=[];for(let e=0;e<t.length;e++){const r=t[e],i=n[e];if(0===i&&o.push(r),i>0){const t=i+1;o=o.concat(ls(r,t))}}return o}const ds=new Error("Number of desired additional polygons must be larger than 0");function fs(t,e){const n=[];let o=function(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}(t);for(let r=0;r<t.length;r++){const i=t[r],a=Math.round(i/o*e);n.push(a),o-=i,e-=a}return n}function ys(t){const e=[];for(const n of t.coordinates){const t={type:"Polygon",coordinates:void 0};t.coordinates=n,e.push(t)}return e}function ps(t,e,n,o){const r=Da($a(n,(t=>t.coordinates[0])),$a(o,(t=>t.coordinates[0])));n=$a(r,(t=>n[t]));const i=[];for(let t=0;t<n.length;t++){const e=n[t],r=o[t];i.push(Ka(e,r))}return function(n){return 0===n?t:1===n?e:function(t){const e={type:"MultiPolygon",coordinates:[]};for(const n of t)if("Polygon"===n.type&&e.coordinates.push(n.coordinates),"MultiPolygon"===n.type)for(const t of n.coordinates)e.coordinates.push(t);return e}($a(i,(t=>t(n))))}}function gs(t,e){const n=ys(t);let o=[e];const r=n.length;return r-1>0&&(o=ls(e,r)),ps(t,e,n,o)}function ms(t,e){const[n,o]=xs(t.coordinates,e.coordinates);return function(t,e,n,o){const r=Fi(n,o);return function(n){return 0===n?t:1===n?e:{type:"LineString",coordinates:r(n)}}}(t,e,n,o)}function xs(t,e){const n=t.length-e.length;let o=t,r=e;return n>0&&(r=Ea(e,n)),n<0&&(o=Ea(t,-n)),o=function(t,e){const n=vs(t,e),o=La(t).reverse(),r=vs(o,e);return n<=r?t:o}(o,r),[o,r]}function vs(t,e){let n=0;for(let o=0;o<t.length;o++)n+=_a(t[o],e[o]);return n}function ks(t,e,n){return function(t,e,n){return[t[0]+e[0]*n,t[1]+e[1]*n]}(t,function(t,e){const n=_a(t,e),o=e[0]-t[0],r=e[1]-t[1];return[o/n,r/n]}(t,e),n)}function bs(t,e){const n=t.coordinates.length,o=Ms(e.coordinates,n);return Ss(t,e,$s(t.coordinates,o))}function Ms(t,e){const n=[],o=wa(t)/e,r=t.length-1;let i=[],a=0;for(let e=0;e<r;e++){const r=t[e];i.push(r);const s=t[e+1],c=_a(r,s),u=a+c;if(u<o&&(a+=c),u>=o){const t=_s(r,s,a,o,Math.floor(u/o));i=i.concat(t),n.push(i);const e=t[t.length-1];i=ws(e,s)?[]:[e],a=_a(e,s)}}return n}function _s(t,e,n,o,r){const i=[];for(let a=1;a<=r;a++)i.push(ks(t,e,o*a-n));return i}function ws(t,e){return t[0]===e[0]&&t[1]===e[1]}function $s(t,e){const n=[];for(let o=0;o<t.length;o++){const r=t[o],i=e[o],[a,s]=xs(r,i),c=Fi(a,s);n.push(c)}return n}function Ss(t,e,n){return function(o){return 0===o?t:1===o?e:{type:"MultiLineString",coordinates:$a(n,(t=>t(o)))}}}function Ts(t,e){return function(t,e){const n=$a(t,wa),o=$a(e,wa),r=Sa(n),i=Sa(o),a={};for(let t=0;t<i.length;t++){const e=r[t],n=i[t];a[e]=n}const s=[];for(let t=0;t<e.length;t++)s.push(a[t]);return s}(t,e).map((e=>t[e]))}function Is(t,e){const n=fs(function(t){const e=[];for(let n=0;n<t.length;n++)e.push(wa(t[n]));return e}(t),e);let o=[];for(let e=0;e<n.length;e++){const r=t[e],i=n[e];if(0===i&&o.push(r),i>0){const t=i+1;o=o.concat(Ms(r,t))}}return o}function Cs(t,e){return function(t,e){if(function(t,e){return Xa(t)&&Xa(e)}(t,e)||function(t,e){return qa(t)&&qa(e)}(t,e))return;throw new Error("Invalid input")}(t,e),"Polygon"===t.type&&"Polygon"===e.type?Ka(t,e):"MultiPolygon"===t.type&&"Polygon"===e.type?gs(t,e):"Polygon"===t.type&&"MultiPolygon"===e.type?function(t,e){const n=gs(e,t);return function(t){return n(1-t)}}(t,e):"MultiPolygon"===t.type&&"MultiPolygon"===e.type?function(t,e){let n=ys(t),o=ys(e);const r=n.length-o.length;return r>0&&(o=hs(o,r)),r<0&&(n=hs(n,-r)),ps(t,e,n,o)}(t,e):"LineString"===t.type&&"LineString"===e.type?ms(t,e):"MultiLineString"===t.type&&"LineString"===e.type?bs(t,e):"LineString"===t.type&&"MultiLineString"===e.type?function(t,e){const n=bs(e,t);return function(t){return n(1-t)}}(t,e):"MultiLineString"===t.type&&"MultiLineString"===e.type?function(t,e){let n=t.coordinates,o=e.coordinates;const r=n.length-o.length;return r>0&&(o=Is(o,r)),r<0&&(n=Is(n,-r)),n=Ts(n,o),Ss(t,e,$s(n,o))}(t,e):void 0}function Os(t,e){if(Es(t,e))return De(t,e);if(Ls(t,e))return Cs(t,e);if(js(t,e))return Cs(t,e);throw new Error("Invalid input")}function Ns(t,e){const n=Ws(t),o=Ws(e);if(Es(n,o))return Rs(t,e,De);if(Ls(n,o))return Rs(t,e,Cs);if(js(n,o))return Rs(t,e,Cs);throw new Error("Invalid input")}function Es(t,e){return"Point"===t.type&&"Point"===e.type}const Ps=["Polygon","MultiPolygon"];function Ls(t,e){return Ps.includes(t.type)&&Ps.includes(e.type)}const As=["LineString","MultiLineString"];function js(t,e){return As.includes(t.type)&&As.includes(e.type)}function Ws(t){return t[Object.keys(t)[0]]}function Rs(t,e,n){const o={};for(const r in e)o[r]=r in t?n(t[r],e[r]):()=>e[r];return function(n){if(0===n)return t;if(1===n)return e;const r={};for(const t in o)r[t]=o[t](n);return r}}function Ys(t){return{minX:t.x[0],maxX:t.x[1],minY:t.y[0],maxY:t.y[1]}}function zs(t,e){return{screenGeometry:t.screenGeometryObject[e]}}function Xs(t,e){return{screenGeometry:t.screenGeometryObject[e]}}function qs(t,e,n,o){const r=[];for(let i=0;i<t.length-1;i++){const a=Hs([t[i],t[i+1]],e,i);o&&(a.lineStringIndex=o),a.markId=n,r.push(a)}return r}function Fs(t,e,n){let o=[];for(let r=0;r<t.length;r++)o=o.concat(qs(t[r],e,n,r));return o}function Hs(t,e,n){const o={type:"LineString",coordinates:t};let r=Ys(fr(o));return r=function(t,e){const n=e/2,o={minX:t.minX-n,maxX:t.maxX+n,minY:t.minY-n,maxY:t.maxY+n};return Object.assign(t,o)}(r,e.strokeWidth),r.attributes={},r.attributes.strokeWidth=e.strokeWidth,r.attributes.segmentGeometry=o,r.markType="Line",r.segmentIndex=n,r}function Bs(t,e){return{pixelGeometry:t.pixelGeometryObject[e],strokeWidth:t.strokeWidthObject[e]}}function Gs(t,e,n,o){for(let r=0;r<t.length;r++){const i=t[r];delete i.markId,i.layerId=e,i.key=n,i.index=o}return t}function Ds(t,e){return{screenGeometry:t.screenGeometryObject[e]}}function Zs(t,e){return{screenGeometry:t.screenGeometryObject[e]}}const Vs={Point:Kn,Rectangle:function(t){const e=t.attributes,n=Ys(fr(e.screenGeometry));return n.attributes=e,n.markType="Rectangle",n.markId=t.markId,n},Polygon:function(t){const e=t.attributes,n=Ys(fr(e.screenGeometry));return n.attributes=e,n.markType="Polygon",n.markId=t.markId,n},Line:function(t){const e=t.attributes,n=t.markId,o=e.pixelGeometry,r=o.coordinates;return"LineString"===o.type?qs(r,e,n):"MultiLineString"===o.type?Fs(r,e,n):void 0},Label:Kn,Area:function(t){const e=t.attributes,n=Ys(fr(e.screenGeometry));return n.attributes=e,n.markType="Area",n.markId=t.markId,n},Symbol:function(t){const e=t.attributes,n=Ys(fr(e.screenGeometry));return n.attributes=e,n.markType="Symbol",n.markId=t.markId,n}},Ks={Point:Un,Rectangle:function({layerAttributes:t,keyArray:e,layerId:n}){const o=[];for(let r=0;r<e.length;r++){const i=e[r],a=zs(t,i),s=Ys(fr(a.screenGeometry));s.key=i,s.index=r,s.attributes=a,s.markType="Rectangle",s.layerId=n,o.push(s)}return o},Polygon:function({layerAttributes:t,keyArray:e,layerId:n}){const o=[];for(let r=0;r<e.length;r++){const i=e[r],a=Xs(t,i),s=Ys(fr(a.screenGeometry));s.key=i,s.index=r,s.attributes=a,s.markType="Polygon",s.layerId=n,o.push(s)}return o},Line:function({layerAttributes:t,keyArray:e,layerId:n}){let o=[];for(let r=0;r<e.length;r++){const i=e[r],a=Bs(t,i),s=a.pixelGeometry,c=s.coordinates;if("LineString"===s.type){let t=qs(c,a,i);t=Gs(t,n,i,r),o=o.concat(t)}if("MultiLineString"===s.type){let t=Fs(c,a,i);t=Gs(t,n,i,r),o=o.concat(t)}}return o},Label:Un,Area:function({layerAttributes:t,keyArray:e,layerId:n}){const o=[];for(let r=0;r<e.length;r++){const i=e[r],a=Ds(t,i),s=Ys(fr(a.screenGeometry));s.key=i,s.index=r,s.attributes=a,s.markType="Area",s.layerId=n,o.push(s)}return o},Symbol:function({layerAttributes:t,keyArray:e,layerId:n}){const o=[];for(let r=0;r<e.length;r++){const i=e[r],a=Zs(t,i),s=Ys(fr(a.screenGeometry));s.key=i,s.index=r,s.attributes=a,s.markType="Symbol",s.layerId=n,o.push(s)}return o}};class Us extends Zn{constructor(t,e){super(t,e),this._indexableMarks={},this._indexableLayers={}}loadMark(t,e){const n=(0,Vs[t])(e),o=e.markId;this._indexableMarks[o]=n}markIsLoaded(t){return t in this._indexableMarks}removeMark(t){delete this._indexableMarks[t]}loadLayer(t,e){const n=(0,Ks[t])(e),o=e.layerId;this._indexableLayers[o]=n}layerIsLoaded(t){return t in this._indexableLayers}removeLayer(t){delete this._indexableLayers[t]}addMarkInteraction(t,e,n){this._getHandler(t).addMarkInteraction(e,n)}removeAllMarkInteractions(t){for(const e in this._handlers){const n=this._handlers[e];n.hasMark(t)&&n.removeMarkInteraction(t)}}addLayerInteraction(t,e,n){this._getHandler(t).addLayerInteraction(e,n)}removeAllLayerInteractions(t){for(const e in this._handlers){const n=this._handlers[e];n.hasLayer(t)&&n.removeLayerInteraction(t)}}}class Js extends Zn{addInteraction(t,e){this._getHandler(t).addInteraction(e)}removeAllInteractions(){for(const t in this._handlers){const e=this._handlers[t];e.hasInteraction()&&e.removeInteraction()}}}class Qs{constructor(t,{eventName:e,interactionName:n}){this._interactionManager=t,this._eventName=e,this._interactionName=n}interactionManager(){return this._interactionManager}eventManager(){return this._interactionManager._eventManager}section(){return this._interactionManager._section}id(){return this._interactionManager._id}_addEventListener(){const t=this._handleEvent.bind(this),e=this.eventManager(),n=this.getId(),o=tc(this._eventName)?this._eventName:[this._eventName];for(const r of o)e.eventTracker(r).addListener(n,t)}_removeEventListener(){const t=this.eventManager(),e=this.getId(),n=tc(this._eventName)?this._eventName:[this._eventName];for(const o of n)t.eventTracker(o).removeListener(e)}}function tc(t){return t.constructor===Array}var ec=Sr((function(t,e){t.exports=function(){function t(t,o,r,i,a){!function t(n,o,r,i,a){for(;i>r;){if(i-r>600){var s=i-r+1,c=o-r+1,u=Math.log(s),l=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*l*(s-l)/s)*(c-s/2<0?-1:1);t(n,o,Math.max(r,Math.floor(o-c*l/s+h)),Math.min(i,Math.floor(o+(s-c)*l/s+h)),a)}var d=n[o],f=r,y=i;for(e(n,r,o),a(n[i],d)>0&&e(n,r,i);f<y;){for(e(n,f,y),f++,y--;a(n[f],d)<0;)f++;for(;a(n[y],d)>0;)y--}0===a(n[r],d)?e(n,r,y):e(n,++y,i),y<=o&&(r=y+1),o<=y&&(i=y-1)}}(t,o,r||0,i||t.length-1,a||n)}function e(t,e,n){var o=t[e];t[e]=t[n],t[n]=o}function n(t,e){return t<e?-1:t>e?1:0}var o=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function r(t,e,n){if(!n)return e.indexOf(t);for(var o=0;o<e.length;o++)if(n(t,e[o]))return o;return-1}function i(t,e){a(t,0,t.children.length,e,t)}function a(t,e,n,o,r){r||(r=y(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var i=e;i<n;i++){var a=t.children[i];s(r,t.leaf?o(a):a)}return r}function s(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function c(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function l(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function f(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function y(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function p(e,n,o,r,i){for(var a=[n,o];a.length;)if(!((o=a.pop())-(n=a.pop())<=r)){var s=n+Math.ceil((o-n)/r/2)*r;t(e,s,n,o,i),a.push(n,s,s,o)}}return o.prototype.all=function(){return this._all(this.data,[])},o.prototype.search=function(t){var e=this.data,n=[];if(!f(t,e))return n;for(var o=this.toBBox,r=[];e;){for(var i=0;i<e.children.length;i++){var a=e.children[i],s=e.leaf?o(a):a;f(t,s)&&(e.leaf?n.push(a):d(t,s)?this._all(a,n):r.push(a))}e=r.pop()}return n},o.prototype.collides=function(t){var e=this.data;if(!f(t,e))return!1;for(var n=[];e;){for(var o=0;o<e.children.length;o++){var r=e.children[o],i=e.leaf?this.toBBox(r):r;if(f(t,i)){if(e.leaf||d(t,i))return!0;n.push(r)}}e=n.pop()}return!1},o.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var o=this.data;this.data=n,n=o}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},o.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},o.prototype.clear=function(){return this.data=y([]),this},o.prototype.remove=function(t,e){if(!t)return this;for(var n,o,i,a=this.data,s=this.toBBox(t),c=[],u=[];a||c.length;){if(a||(a=c.pop(),o=c[c.length-1],n=u.pop(),i=!0),a.leaf){var l=r(t,a.children,e);if(-1!==l)return a.children.splice(l,1),c.push(a),this._condense(c),this}i||a.leaf||!d(a,s)?o?(n++,a=o.children[n],i=!1):a=null:(c.push(a),u.push(n),n=0,o=a,a=a.children[0])}return this},o.prototype.toBBox=function(t){return t},o.prototype.compareMinX=function(t,e){return t.minX-e.minX},o.prototype.compareMinY=function(t,e){return t.minY-e.minY},o.prototype.toJSON=function(){return this.data},o.prototype.fromJSON=function(t){return this.data=t,this},o.prototype._all=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},o.prototype._build=function(t,e,n,o){var r,a=n-e+1,s=this._maxEntries;if(a<=s)return i(r=y(t.slice(e,n+1)),this.toBBox),r;o||(o=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,o-1))),(r=y([])).leaf=!1,r.height=o;var c=Math.ceil(a/s),u=c*Math.ceil(Math.sqrt(s));p(t,e,n,u,this.compareMinX);for(var l=e;l<=n;l+=u){var h=Math.min(l+u-1,n);p(t,l,h,c,this.compareMinY);for(var d=l;d<=h;d+=c){var f=Math.min(d+c-1,h);r.children.push(this._build(t,d,f,o-1))}}return i(r,this.toBBox),r},o.prototype._chooseSubtree=function(t,e,n,o){for(;o.push(e),!e.leaf&&o.length-1!==n;){for(var r=1/0,i=1/0,a=void 0,s=0;s<e.children.length;s++){var c=e.children[s],u=l(c),h=(d=t,f=c,(Math.max(f.maxX,d.maxX)-Math.min(f.minX,d.minX))*(Math.max(f.maxY,d.maxY)-Math.min(f.minY,d.minY))-u);h<i?(i=h,r=u<r?u:r,a=c):h===i&&u<r&&(r=u,a=c)}e=a||e.children[0]}var d,f;return e},o.prototype._insert=function(t,e,n){var o=n?t:this.toBBox(t),r=[],i=this._chooseSubtree(o,this.data,e,r);for(i.children.push(t),s(i,o);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(o,r,e)},o.prototype._split=function(t,e){var n=t[e],o=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,o);var a=this._chooseSplitIndex(n,r,o),s=y(n.children.splice(a,n.children.length-a));s.height=n.height,s.leaf=n.leaf,i(n,this.toBBox),i(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},o.prototype._splitRoot=function(t,e){this.data=y([t,e]),this.data.height=t.height+1,this.data.leaf=!1,i(this.data,this.toBBox)},o.prototype._chooseSplitIndex=function(t,e,n){for(var o,r,i,s,c,u,h,d=1/0,f=1/0,y=e;y<=n-e;y++){var p=a(t,0,y,this.toBBox),g=a(t,y,n,this.toBBox),m=(r=p,i=g,s=void 0,c=void 0,u=void 0,h=void 0,s=Math.max(r.minX,i.minX),c=Math.max(r.minY,i.minY),u=Math.min(r.maxX,i.maxX),h=Math.min(r.maxY,i.maxY),Math.max(0,u-s)*Math.max(0,h-c)),x=l(p)+l(g);m<d?(d=m,o=y,f=x<f?x:f):m===d&&x<f&&(f=x,o=y)}return o||n-e},o.prototype._chooseSplitAxis=function(t,e,n){var o=t.leaf?this.compareMinX:c,r=t.leaf?this.compareMinY:u;this._allDistMargin(t,e,n,o)<this._allDistMargin(t,e,n,r)&&t.children.sort(o)},o.prototype._allDistMargin=function(t,e,n,o){t.children.sort(o);for(var r=this.toBBox,i=a(t,0,e,r),c=a(t,n-e,n,r),u=h(i)+h(c),l=e;l<n-e;l++){var d=t.children[l];s(i,t.leaf?r(d):d),u+=h(i)}for(var f=n-e-1;f>=e;f--){var y=t.children[f];s(c,t.leaf?r(y):y),u+=h(c)}return u},o.prototype._adjustParentBBoxes=function(t,e,n){for(var o=n;o>=0;o--)s(e[o],t)},o.prototype._condense=function(t){for(var e=t.length-1,n=void 0;e>=0;e--)0===t[e].children.length?e>0?(n=t[e-1].children).splice(n.indexOf(t[e]),1):this.clear():i(t[e],this.toBBox)},o}()}));function nc(t,e){return br([t.x,t.y],e.pixelGeometry.coordinates)<e.radius}var oc={Point:nc,Rectangle:function(t,e){return Ar([t.x,t.y],e.screenGeometry)},Polygon:function(t,e){return Ar([t.x,t.y],e.screenGeometry)},Line:function(t,e){return $r([t.x,t.y],e.segmentGeometry.coordinates,e.strokeWidth)},Label:nc,Symbol:function(t,e){return Ar([t.x,t.y],e.screenGeometry)},Area:function(t,e){return Ar([t.x,t.y],e.screenGeometry)}};class rc{constructor(t,e,n){this._rbush=new ec,this._interactionHandler=t,this._getMark=e.bind(t),this._getLayer=n.bind(t)}indexLayer(t){const e=this._getLayer(t);this._rbush.load(e)}unindexLayer(t){const e=this._getLayer(t);for(let t=0;t<e.length;t++){const n=e[t];this._rbush.remove(n)}}indexMark(t){const e=this._getMark(t);ic(e)?this._rbush.load(e):this._rbush.insert(e)}unindexMark(t){const e=this._getMark(t);if(ic(e))for(let t=0;t<e.length;t++){const n=e[t];this._rbush.remove(n)}else this._rbush.remove(e)}queryMouseCoordinates(t,e){const n=function(t,e=3){return{minX:t.x-e,maxX:t.x+e,minY:t.y-e,maxY:t.y+e}}(t,e),o=this._rbush.search(n);return this._getHits(t,o)}queryBoundingBox(t){return this._rbush.search(t)}_getHits(t,e){const n=[];for(let o=0;o<e.length;o++){const r=e[o];(0,oc[r.markType])(t,r.attributes)&&n.push(r)}return n}}function ic(t){return t.constructor===Array}class ac extends Qs{constructor(t,e){super(t,e);this._spatialIndex=new rc(this,(function(t){return this._interactionManager.marks()._indexableMarks[t]}),(function(t){return this._interactionManager.marks()._indexableLayers[t]})),this._numberOfInteractions=0,this._markCallbacks={},this._layerCallbacks={}}addMarkInteraction(t,e){this._addEventListenerIfNecessary(),this._numberOfInteractions++,this._markCallbacks[t]=e,this._spatialIndex.indexMark(t)}hasMark(t){return t in this._markCallbacks}removeMarkInteraction(t){this._removeEventListenerIfNecessary(),delete this._markCallbacks[t],this._numberOfInteractions--,this._spatialIndex.unindexMark(t)}addLayerInteraction(t,e){t in this._layerCallbacks||(this._addEventListenerIfNecessary(),this._numberOfInteractions++,this._layerCallbacks[t]=e,this._spatialIndex.indexLayer(t))}hasLayer(t){return t in this._layerCallbacks}removeLayerInteraction(t){t in this._layerCallbacks&&(this._numberOfInteractions--,delete this._layerCallbacks[t],this._removeEventListenerIfNecessary(),this._spatialIndex.unindexLayer(t))}_addEventListenerIfNecessary(){0===this._numberOfInteractions&&this._addEventListener()}_removeEventListenerIfNecessary(){0===this._numberOfInteractions&&this._removeEventListener()}getId(){return`${this.id()}-mark-${this._interactionName}`}}function sc(t,e,n,o){return e.markType=n.markType,e.hitBbox=lc(n),e.hitSource="mark",hc(t,e,o)}function cc(t,e,n,o){return e.markType=n.markType,e.hitBbox=lc(n),e.key=n.key,e.index=n.index,e.hitSource="layer",hc(t,e,o)}function uc(t,e,n){return e.hitSource="section",hc(t,e,n)}function lc(t){return{minX:t.minX,maxX:t.maxX,minY:t.minY,maxY:t.maxY}}function hc(t,e,n){const o=e;o.type=t,o.nativeType=n.type;for(const t of dc)o[t]=n[t];return o}const dc=["altKey","ctrlKey","shiftKey","clientX","clientY","pageX","pageY","screenX","screenY","timeStamp"];function fc(t,e){return{type:t,markType:e.markType,hitSource:"mark"}}function yc(t,e){return{type:t,markType:e.markType,key:e.key,index:e.index,hitSource:"layer"}}function pc(t,e){const n=e._section,o=n.inverseTotalTransformation,{minX:r,maxX:i,minY:a,maxY:s}=n.paddedBbox,c=gc(t.x,r,i),u=gc(t.y,a,s),[l,h]=o([c,u]);return{x:l,y:h}}function gc(t,e,n){return Math.max(e,Math.min(t,n))}function mc(t,e){const n=e.bbox;return t.x>=n.minX&&t.x<=n.maxX&&t.y>=n.minY&&t.y<=n.maxY}function xc(t){return"markId"in t}function vc(t){return"layerId"in t}function kc(t){return xc(t)?t.markId:vc(t)?t.layerId+"-"+t.key:void 0}var bc=Object.freeze({__proto__:null,ClickHandler:class extends ac{constructor(t){super(t,{interactionName:"click",eventName:"click"})}_handleEvent(t,e){if(!mc(t,this.section()))return;const n=this._spatialIndex.queryMouseCoordinates(t),o=pc(t,this.interactionManager());for(let r=0;r<n.length;r++){const i=n[r];if(xc(i)){const n=sc("click",{screenCoordinates:t,localCoordinates:o},i,e);this._markCallbacks[i.markId](n)}if(vc(i)){const n=cc("click",{screenCoordinates:t,localCoordinates:o},i,e);this._layerCallbacks[i.layerId](n)}}}},MouseoverHandler:class extends ac{constructor(t){super(t,{interactionName:"mouseover",eventName:"mousemove"}),this._previousMouseoverIds={},this._currentMouseoverIds={}}_handleEvent(t,e){const n=this._spatialIndex.queryMouseCoordinates(t);for(let o=0;o<n.length;o++){const r=n[o],i=kc(r);this._currentMouseoverIds[i]=!0,i in this._previousMouseoverIds||this._fireCallback(r,t,e)}this._previousMouseoverIds=this._currentMouseoverIds,this._currentMouseoverIds={}}_fireCallback(t,e,n){const o=pc(e,this.interactionManager());if(xc(t)){const r=sc("mouseover",{screenCoordinates:e,localCoordinates:o},t,n);this._markCallbacks[t.markId](r)}if(vc(t)){const r=cc("mouseover",{screenCoordinates:e,localCoordinates:o},t,n);this._layerCallbacks[t.layerId](r)}}},MouseoutHandler:class extends ac{constructor(t){super(t,{interactionName:"mouseout",eventName:"mousemove"}),this._previousMouseoverHits={},this._currentMouseoverHits={}}_handleEvent(t,e){const n=this._spatialIndex.queryMouseCoordinates(t);for(let t=0;t<n.length;t++){const e=n[t],o=kc(e);this._currentMouseoverHits[o]=e}for(const n in this._previousMouseoverHits)if(!(n in this._currentMouseoverHits)){const o=this._previousMouseoverHits[n];this._fireCallback(o,t,e)}this._previousMouseoverHits=this._currentMouseoverHits,this._currentMouseoverHits={}}_fireCallback(t,e,n){const o=pc(e,this.interactionManager());if(xc(t)){const r=sc("mouseout",{screenCoordinates:e,localCoordinates:o},t,n);this._markCallbacks[t.markId](r)}if(vc(t)){const r=cc("mouseout",{screenCoordinates:e,localCoordinates:o},t,n);this._layerCallbacks[t.layerId](r)}}},MousedownHandler:class extends ac{constructor(t){super(t,{interactionName:"mousedown",eventName:"mousedown"})}_handleEvent(t,e){if(!mc(t,this.section()))return;const n=this._spatialIndex.queryMouseCoordinates(t),o=pc(t,this.interactionManager());for(let r=0;r<n.length;r++){const i=n[r];if(xc(i)){const n=sc("mousedown",{screenCoordinates:t,localCoordinates:o},i,e);this._markCallbacks[i.markId](n)}if(vc(i)){const n=cc("mousedown",{screenCoordinates:t,localCoordinates:o},i,e);this._layerCallbacks[i.layerId](n)}}}},MouseupHandler:class extends ac{constructor(t){super(t,{interactionName:"mouseup",eventName:"mouseup"})}_handleEvent(t,e){if(!mc(t,this.section()))return;const n=this._spatialIndex.queryMouseCoordinates(t),o=pc(t,this.interactionManager());for(let r=0;r<n.length;r++){const i=n[r];if(xc(i)){const n=sc("mouseup",{screenCoordinates:t,localCoordinates:o},i,e);this._markCallbacks[i.markId](n)}if(vc(i)){const n=cc("mouseup",{screenCoordinates:t,localCoordinates:o},i,e);this._layerCallbacks[i.layerId](n)}}}},MousedragHandler:class extends ac{constructor(t){super(t,{interactionName:"mousedrag",eventName:["mousedown","mousemove","mouseup"]}),this._currentHits={}}_handleEvent(t,e){"mousedown"===e.eventName&&this._handleMousedown(t,e),"mousemove"===e.eventName&&this._handleMousemove(t,e),"mouseup"===e.eventName&&this._handleMouseup(t,e)}_handleMousedown(t,e){if(!mc(t,this.section()))return;const n=this._spatialIndex.queryMouseCoordinates(t);for(let o=0;o<n.length;o++){const r=n[o],i=kc(r);this._currentHits[i]=r,this._fireCallback(r,t,e,"start")}}_handleMousemove(t,e){if(mc(t,this.section()))for(const n in this._currentHits){const o=this._currentHits[n];this._fireCallback(o,t,e,"drag")}}_handleMouseup(t,e){for(const n in this._currentHits){const o=this._currentHits[n];this._fireCallback(o,t,e,"end")}this._currentHits={}}_fireCallback(t,e,n,o){const r=pc(e,this.interactionManager());if(xc(t)){const i=sc("mousedrag",{screenCoordinates:e,localCoordinates:r,dragType:o},t,n);this._markCallbacks[t.markId](i)}if(vc(t)){const i=cc("mousedrag",{screenCoordinates:e,localCoordinates:r,dragType:o},t,n);this._layerCallbacks[t.layerId](i)}}}});class Mc extends Qs{constructor(t,e){super(t,e),this._callback=void 0}addInteraction(t){this._addEventListener(),this._callback=t}hasInteraction(){return void 0!==this._callback}removeInteraction(){this._callback&&(this._callback=void 0,this._removeEventListener())}getId(){return`${this.id()}-section-${this._interactionName}`}}let _c;var wc=Object.freeze({__proto__:null,WheelHandler:class extends Mc{constructor(t){super(t,{interactionName:"wheel",eventName:"wheel"})}_handleEvent(t,e){e.preventDefault(),e.stopPropagation();const n=this.interactionManager();if(mc(t,this.section())){const o=uc("wheel",{screenCoordinates:t,localCoordinates:pc(t,n),delta:function(t){let e;"wheelDelta"in t&&0!==t.wheelDelta&&(e=-t.wheelDelta);"detail"in t&&0!==t.detail&&(e=-t.detail);"deltaY"in t&&0!==t.deltaY&&(e=-t.deltaY);_c||(_c=function(){var t,e=document.createElement("iframe");e.src="#",document.body.appendChild(e);var n=e.contentWindow.document;return n.open(),n.write("<!DOCTYPE html><html><head></head><body><span>a</span></body></html>"),n.close(),t=n.body.firstElementChild.offsetHeight,document.body.removeChild(e),t}());return e*(t.deltaMode?_c:1)/500}(e)},e);this._callback(o)}}},ClickHandler:class extends Mc{constructor(t){super(t,{interactionName:"click",eventName:"click"})}_handleEvent(t,e){const n=this.interactionManager();if(mc(t,this.section())){const o=uc("click",{screenCoordinates:t,localCoordinates:pc(t,n)},e);this._callback(o)}}},MousedownHandler:class extends Mc{constructor(t){super(t,{interactionName:"mousedown",eventName:"mousedown"})}_handleEvent(t,e){const n=this.interactionManager();if(mc(t,this.section())){const o=uc("mousedown",{screenCoordinates:t,localCoordinates:pc(t,n)},e);this._callback(o)}}},MouseupHandler:class extends Mc{constructor(t){super(t,{interactionName:"mouseup",eventName:"mouseup"})}_handleEvent(t,e){const n=this.interactionManager();if(mc(t,this.section())){const o=uc("mouseup",{screenCoordinates:t,localCoordinates:pc(t,n)},e);this._callback(o)}}},MouseoverHandler:class extends Mc{constructor(t){super(t,{interactionName:"mouseover",eventName:"mousemove"}),this._mouseCurrentlyOverSection=!1}_handleEvent(t,e){const n=this.interactionManager();if(mc(t,this.section())){if(!this._mouseCurrentlyOverSection){const o=uc("mouseover",{screenCoordinates:t,localCoordinates:pc(t,n)},e);this._callback(o),this._mouseCurrentlyOverSection=!0}}else this._mouseCurrentlyOverSection&&(this._mouseCurrentlyOverSection=!1)}},MouseoutHandler:class extends Mc{constructor(t){super(t,{interactionName:"mouseout",eventName:"mousemove"}),this._mouseCurrentlyOverSection=!1}_handleEvent(t,e){const n=this.interactionManager();if(mc(t,this.section()))this._mouseCurrentlyOverSection||(this._mouseCurrentlyOverSection=!0);else if(this._mouseCurrentlyOverSection){const o=uc("mouseout",{screenCoordinates:t,localCoordinates:pc(t,n)},e);this._callback(o),this._mouseCurrentlyOverSection=!1}}},MousemoveHandler:class extends Mc{constructor(t){super(t,{interactionName:"mouseover",eventName:"mousemove"})}_handleEvent(t,e){const n=this.interactionManager();if(mc(t,this.section())){const o=uc("mousemove",{screenCoordinates:t,localCoordinates:pc(t,n)},e);this._callback(o)}}}});class $c extends Dn{constructor(){super(),this._markInteractionInterface=new Us(this,bc),this._sectionInteractionInterface=new Js(this,wc)}}function Sc(t){return t.constructor===Object?1:t.length}var Tc=Object.freeze({__proto__:null,TouchdownHandler:class extends ac{constructor(t){super(t,{interactionName:"touchdown",eventName:"touchstart"})}_handleEvent(t,e){if(1!==Sc(t))return;const n=this._spatialIndex.queryMouseCoordinates(t),o=pc(t,this.interactionManager());for(let r=0;r<n.length;r++){const i=n[r];if(xc(i)){const n=sc("touchdown",{screenCoordinates:t,localCoordinates:o},i,e);this._markCallbacks[i.markId](n)}if(vc(i)){const n=cc("touchdown",{screenCoordinates:t,localCoordinates:o},i,e);this._layerCallbacks[i.layerId](n)}}}},TouchupHandler:class extends ac{constructor(t){super(t,{interactionName:"touchup",eventName:["touchend","touchcancel"]})}_handleEvent(t,e){if(1!==Sc(t))return;const n=this._spatialIndex.queryMouseCoordinates(t),o=pc(t,this.interactionManager());for(let r=0;r<n.length;r++){const i=n[r];if(xc(i)){const n=sc("touchup",{screenCoordinates:t,localCoordinates:o},i,e);this._markCallbacks[i.markId](n)}if(vc(i)){const n=cc("touchup",{screenCoordinates:t,localCoordinates:o},i,e);this._layerCallbacks[i.layerId](n)}}}},TouchoverHandler:class extends ac{constructor(t){super(t,{interactionName:"touchover",eventName:["touchstart","touchmove"]}),this._previousHits={},this._currentHits={}}_handleEvent(t,e){1===Sc(t)&&("touchstart"===e.eventName&&this._handleTouchstart(t,e),"touchmove"===e.eventName&&this._handleTouchmove(t,e))}_handleTouchstart(t,e){if(!mc(t,this.section()))return;const n=this._spatialIndex.queryMouseCoordinates(t);for(let t=0;t<n.length;t++){const e=kc(n[t]);this._previousHits[e]=!0}}_handleTouchmove(t,e){if(!mc(t,this.section()))return;const n=this._spatialIndex.queryMouseCoordinates(t);for(let o=0;o<n.length;o++){const r=n[o],i=kc(r);this._currentHits[i]=!0,i in this._previousHits||this._fireCallback(r,t,e)}this._previousHits=this._currentHits,this._currentHits={}}_fireCallback(t,e,n){const o=pc(e,this.interactionManager());if(xc(t)){const r=sc("touchover",{screenCoordinates:e,localCoordinates:o},t,n);this._markCallbacks[t.markId](r)}if(vc(t)){const r=cc("touchover",{screenCoordinates:e,localCoordinates:o},t,n);this._layerCallbacks[t.layerId](r)}}},TouchoutHandler:class extends ac{constructor(t){super(t,{interactionName:"touchout",eventName:["touchstart","touchmove","touchend"]}),this._previousHits={},this._currentHits={}}_handleEvent(t,e){1===Sc(t)&&("touchstart"===e.eventName&&this._handleTouchstart(t,e),"touchmove"===e.eventName&&this._handleTouchmove(t,e),"touchend"===e.eventName&&this._handleTouchend())}_handleTouchstart(t,e){if(!mc(t,this.section()))return;const n=this._spatialIndex.queryMouseCoordinates(t);for(let t=0;t<n.length;t++){const e=n[t],o=kc(e);this._previousHits[o]=e}}_handleTouchmove(t,e){if(!mc(t,this.section()))return;const n=this._spatialIndex.queryMouseCoordinates(t);for(let t=0;t<n.length;t++){const e=n[t],o=kc(e);this._currentHits[o]=e}for(const n in this._previousHits)if(!(n in this._currentHits)){const o=this._previousHits[n];this._fireCallback(o,t,e)}this._previousHits=this._currentHits,this._currentHits={}}_handleTouchend(){this._previousHits={},this._currentHits={}}_fireCallback(t,e,n){const o=pc(e,this.interactionManager());if(xc(t)){const r=sc("touchout",{screenCoordinates:e,localCoordinates:o},t,n);this._markCallbacks[t.markId](r)}if(vc(t)){const r=cc("touchout",{screenCoordinates:e,localCoordinates:o},t,n);this._layerCallbacks[t.layerId](r)}}},TouchdragHandler:class extends ac{constructor(t){super(t,{interactionName:"touchdrag",eventName:["touchstart","touchmove","touchend"]}),this._currentHits={}}_handleEvent(t,e){1===Sc(t)&&("touchstart"===e.eventName&&this._handleTouchstart(t,e),"touchmove"===e.eventName&&this._handleTouchmove(t,e),"touchend"===e.eventName&&this._handleTouchend(t,e))}_handleTouchstart(t,e){if(!mc(t,this.section()))return;const n=this._spatialIndex.queryMouseCoordinates(t);for(let o=0;o<n.length;o++){const r=n[o],i=kc(r);this._currentHits[i]=r,this._fireCallback(r,t,e,"start")}}_handleTouchmove(t,e){if(mc(t,this.section()))for(const n in this._currentHits){const o=this._currentHits[n];this._fireCallback(o,t,e,"drag")}}_handleTouchend(t,e){for(const n in this._currentHits){const o=this._currentHits[n];this._fireCallback(o,t,e,"end")}this._currentHits={}}_fireCallback(t,e,n,o){const r=pc(e,this.interactionManager());if(xc(t)){const i=sc("touchdrag",{screenCoordinates:e,localCoordinates:r,dragType:o},t,n);this._markCallbacks[t.markId](i)}if(vc(t)){const i=cc("touchdrag",{screenCoordinates:e,localCoordinates:r,dragType:o},t,n);this._layerCallbacks[t.layerId](i)}}}});function Ic(t,e){return t.every((t=>mc(t,e)))}function Cc(t){const[e,n]=t;return Math.sqrt((n.x-e.x)**2+(n.y-e.y)**2)}var Oc=Object.freeze({__proto__:null,TouchdownHandler:class extends Mc{constructor(t){super(t,{interactionName:"touchdown",eventName:"touchstart"})}_handleEvent(t,e){if(1!==Sc(t))return;const n=this.interactionManager();if(mc(t,this.section())){const o=uc("touchdown",{screenCoordinates:t,localCoordinates:pc(t,n)},e);this._callback(o)}}},TouchmoveHandler:class extends Mc{constructor(t){super(t,{interactionName:"touchmove",eventName:"touchmove"})}_handleEvent(t,e){if(1!==Sc(t))return;const n=this.interactionManager();if(mc(t,this.section())){const o=uc("touchmove",{screenCoordinates:t,localCoordinates:pc(t,n)},e);this._callback(o)}}},TouchupHandler:class extends Mc{constructor(t){super(t,{interactionName:"touchup",eventName:["touchend","touchcancel"]})}_handleEvent(t,e){if(1!==Sc(t))return;const n=this.interactionManager();if(mc(t,this.section())){const o=uc("touchup",{screenCoordinates:t,localCoordinates:pc(t,n)},e);this._callback(o)}}},TouchoverHandler:class extends Mc{constructor(t){super(t,{interactionName:"touchover",eventName:["touchstart","touchmove"]}),this._fingerCurrentlyOverSection=!1}_handleEvent(t,e){1===Sc(t)&&("touchstart"===e.eventName&&this._handleTouchstart(t,e),"touchmove"===e.eventName&&this._handleTouchmove(t,e))}_handleTouchstart(t,e){mc(t,this.section())&&(this._fingerCurrentlyOverSection=!0)}_handleTouchmove(t,e){const n=this.interactionManager();if(mc(t,this.section())){if(!this._fingerCurrentlyOverSection){const o=uc("touchover",{screenCoordinates:t,localCoordinates:pc(t,n)},e);this._callback(o),this._fingerCurrentlyOverSection=!0}}else this._fingerCurrentlyOverSection&&(this._fingerCurrentlyOverSection=!1)}},TouchoutHandler:class extends Mc{constructor(t){super(t,{interactionName:"touchout",eventName:["touchstart","touchmove","touchend"]}),this._fingerCurrentlyOverSection=!1}_handleEvent(t,e){1===Sc(t)&&("touchstart"===e.eventName&&this._handleTouchstart(t,e),"touchmove"===e.eventName&&this._handleTouchmove(t,e),"touchend"===e.eventName&&this._handleTouchend())}_handleTouchstart(t,e){mc(t,this.section())&&(this._fingerCurrentlyOverSection=!0)}_handleTouchmove(t,e){const n=this.interactionManager();if(mc(t,this.section()))this._fingerCurrentlyOverSection||(this._fingerCurrentlyOverSection=!0);else if(this._fingerCurrentlyOverSection){const o=uc("touchout",{screenCoordinates:t,localCoordinates:pc(t,n)},e);this._callback(o),this._fingerCurrentlyOverSection=!1}}_handleTouchend(){this._fingerCurrentlyOverSection=!1}},PinchHandler:class extends Mc{constructor(t){super(t,{interactionName:"pinch",eventName:["touchstart","touchmove","touchend"]}),this._previousTouchDistance=void 0}_handleEvent(t,e){"touchstart"===e.type&&this._handleTouchstart(t,e),"touchmove"===e.type&&this._handleTouchmove(t,e),"touchend"===e.type&&this._handleTouchend(t,e)}_handleTouchstart(t,e){if(2!==Sc(t))return;Ic(t,this.section())&&(this._previousTouchDistance=Cc(t))}_handleTouchmove(t,e){if(2!==Sc(t))return;if(void 0===this._previousTouchDistance)return;const n=this.section();if(Ic(t,n)){const o=n.maxY-n.minY,r=function(t){const[e,n]=t;return{x:(n.x+e.x)/2,y:(n.y+e.y)/2}}(t),i=Cc(t),a=(this._previousTouchDistance-i)/o;this._previousTouchDistance=i,this._fireCallback(t,e,a,r)}}_handleTouchend(t,e){this._previousTouchDistance=void 0}_fireCallback(t,e,n,o){const r=uc("pinch",{screenCenter:o,localCenter:pc(o,this.interactionManager()),screenCoordinates:t,localCoordinates:t.map((t=>pc(t,this.interactionManager()))),delta:n},e);this._callback(r)}}});class Nc extends Dn{constructor(){super(),this._markInteractionInterface=new Us(this,Tc),this._sectionInteractionInterface=new Js(this,Oc)}}function Ec(t){return{x:[t[0],t[0]],y:[t[1],t[1]]}}function Pc(t){const e=t.attributes,n=Ys(Ec(e.pixelGeometry.coordinates));return n.attributes=e,n.markType="Point",n.markId=t.markId,n}function Lc({layerAttributes:t,keyArray:e,layerId:n}){const o=[];for(let r=0;r<e.length;r++){const i=e[r],a=Ac(t,i),s=Ys(Ec(a.pixelGeometry.coordinates));s.key=i,s.index=r,s.attributes=a,s.markType="Point",s.layerId=n,o.push(s)}return o}function Ac(t,e){return{pixelGeometry:t.pixelGeometryObject[e],radius:t.radiusObject[e]}}function jc(t,e){return{screenGeometry:t.screenGeometryObject[e]}}function Wc(t,e){return{screenGeometry:t.screenGeometryObject[e]}}function Rc(t,e){return{screenGeometry:t.pixelGeometryObject[e]}}function Yc(t,e){return{screenGeometry:t.screenGeometryObject[e]}}const zc={Point:Pc,Rectangle:function(t){const e=t.attributes,n=Ys(Ec(_r(e.screenGeometry)));return n.attributes=e,n.markType="Rectangle",n.markId=t.markId,n},Polygon:function(t){const e=t.attributes,n=Ys(Ec(_r(e.screenGeometry)));return n.attributes=e,n.markType="Polygon",n.markId=t.markId,n},Line:function(t){const e=t.attributes,n=Ys(Ec(_r(e.pixelGeometry)));return n.attributes=e,n.markType="Line",n.markId=t.markId,n},Label:Pc,Area:function(t){const e=t.attributes,n=Ys(Ec(_r(e.screenGeometry)));return n.attributes=e,n.markType="Area",n.markId=t.markId,n}},Xc={Point:Lc,Rectangle:function({layerAttributes:t,keyArray:e,layerId:n}){const o=[];for(let r=0;r<e.length;r++){const i=e[r],a=jc(t,i),s=Ys(Ec(_r(a.screenGeometry)));s.key=i,s.index=r,s.attributes=a,s.markType="Rectangle",s.layerId=n,o.push(s)}return o},Polygon:function({layerAttributes:t,keyArray:e,layerId:n}){const o=[];for(let r=0;r<e.length;r++){const i=e[r],a=Wc(t,i),s=Ys(Ec(_r(a.screenGeometry)));s.key=i,s.index=r,s.attributes=a,s.markType="Polygon",s.layerId=n,o.push(s)}return o},Line:function({layerAttributes:t,keyArray:e,layerId:n}){const o=[];for(let r=0;r<e.length;r++){const i=e[r],a=Rc(t,i),s=Ys(Ec(_r(a.screenGeometry)));s.key=i,s.index=r,s.attributes=a,s.markType="Line",s.layerId=n,o.push(s)}return o},Label:Lc,Area:function({layerAttributes:t,keyArray:e,layerId:n}){const o=[];for(let r=0;r<e.length;r++){const i=e[r],a=Yc(t,i),s=Ys(Ec(_r(a.screenGeometry)));s.key=i,s.index=r,s.attributes=a,s.markType="Area",s.layerId=n,o.push(s)}return o}};class qc{constructor(){this._selectableMarks={},this._selectableLayers={},this._markCallbacks={},this._layerCallbacks={},this._previousSelection={},this._currentSelection={};this._spatialIndex=new rc(this,(function(t){return this._selectableMarks[t]}),(function(t){return this._selectableLayers[t]})),this._selectPolygon={start:void 0,points:[]}}loadMark(t,e,n){const o=(0,zc[t])(e),r=e.markId;this._selectableMarks[r]=o,this._markCallbacks[r]=n,this._spatialIndex.indexMark(r)}markIsLoaded(t){return t in this._selectableMarks}removeMark(t){this._spatialIndex.unindexMark(t),delete this._selectableMarks[t],delete this._markCallbacks[t]}loadLayer(t,e,n){const o=(0,Xc[t])(e),r=e.layerId;this._selectableLayers[r]=o,this._layerCallbacks[r]=n,this._spatialIndex.indexLayer(r)}layerIsLoaded(t){return t in this._selectableLayers}removeLayer(t){this._spatialIndex.unindexLayer(t),delete this._selectableLayers[t],delete this._layerCallbacks[t]}selectRectangle(t){const e=this._spatialIndex.queryBoundingBox(Fc(t));for(let t=0;t<e.length;t++){const n=e[t],o=kc(n);this._currentSelection[o]=n,this._fireSelectCallback(n)}}updateSelectRectangle(t){this._previousSelection=this._currentSelection,this._currentSelection={};const e=this._spatialIndex.queryBoundingBox(Fc(t));for(let t=0;t<e.length;t++){const n=e[t],o=kc(n);this._currentSelection[o]=n,o in this._previousSelection||this._fireSelectCallback(n)}for(const t in this._previousSelection)if(!(t in this._currentSelection)){const e=this._previousSelection[t];this._fireDeselectCallback(e)}}resetSelectRectangle(){for(const t in this._currentSelection){const e=this._currentSelection[t];this._fireDeselectCallback(e)}this._previousSelection={},this._currentSelection={}}startSelectPolygon(t){this._selectPolygon.start=Hc(t)}addPointToSelectPolygon(t){if(this._selectPolygon.points.push(Hc(t)),this._selectPolygon.points.length>1){const t=this._getLastThreePointsPolygon(),e=fr(t),n=this._spatialIndex.queryBoundingBox(Bc(e));for(let e=0;e<n.length;e++){const o=n[e];if(Ar([o.minX,o.minY],t)){const t=kc(o);t in this._currentSelection?(this._fireDeselectCallback(o),delete this._currentSelection[t]):(this._fireSelectCallback(o),this._currentSelection[t]=o)}}}}moveSelectPolygon(t){this._previousSelection=this._currentSelection,this._currentSelection={};const e=Hc(t),n=this._selectPolygon.start,o=this._selectPolygon.points;this._selectPolygon.start=[n[0]+e[0],n[1]+e[1]],this._selectPolygon.points=o.map((t=>[t[0]+e[0],t[1]+e[1]]));const r=this.getSelectPolygon(),i=fr(r),a=this._spatialIndex.queryBoundingBox(Bc(i));for(let t=0;t<a.length;t++){const e=a[t];if(Ar([e.minX,e.minY],r)){const t=kc(e);this._currentSelection[t]=e,t in this._previousSelection||this._fireSelectCallback(e)}}for(const t in this._previousSelection)if(!(t in this._currentSelection)){const e=this._previousSelection[t];this._fireDeselectCallback(e)}}getSelectPolygon(){if(this._selectPolygon.start)return{type:"Polygon",coordinates:[[this._selectPolygon.start,...this._selectPolygon.points,this._selectPolygon.start]]}}resetSelectPolygon(){for(const t in this._currentSelection){const e=this._currentSelection[t];this._fireDeselectCallback(e)}this._selectPolygon={start:void 0,points:[]},this._currentSelection={}}_fireSelectCallback(t){if(xc(t)){const e=fc("select",t),n=this._markCallbacks[t.markId].onSelect;n&&n(e)}if(vc(t)){const e=yc("select",t),n=this._layerCallbacks[t.layerId].onSelect;n&&n(e)}}_fireDeselectCallback(t){if(xc(t)){const e=fc("deselect",t),n=this._markCallbacks[t.markId].onDeselect;n&&n(e)}if(vc(t)){const e=yc("deselect",t),n=this._layerCallbacks[t.layerId].onDeselect;n&&n(e)}}_getLastThreePointsPolygon(){const t=this._selectPolygon.points,e=t.length-1,n=this._selectPolygon.start;return{type:"Polygon",coordinates:[[n,t[e-1],t[e],n]]}}}function Fc(t){return{minX:Math.min(t.x1,t.x2),maxX:Math.max(t.x1,t.x2),minY:Math.min(t.y1,t.y2),maxY:Math.max(t.y1,t.y2)}}function Hc(t){if(function(t){return t.constructor===Array&&2===t.length&&t.every((t=>t&&t.constructor===Number))}(t))return t;if(function(t){return"x"in t&&"y"in t&&t.x.constructor===Number&&t.y.constructor===Number}(t))return[t.x,t.y];throw new Error(`Invalid input: ${t}`)}function Bc(t){return{minX:Math.min(...t.x),maxX:Math.max(...t.x),minY:Math.min(...t.y),maxY:Math.max(...t.y)}}class Gc{constructor(){"mouse"===Yt&&(this._mouseInteractionManager=new $c),"touch"===Yt&&(this._touchInteractionManager=new Nc),this._selectManager=new qc}setId(t){this._forEachManager((e=>{e.setId(t)}))}linkEventManager(t){this._mouseInteractionManager&&this._mouseInteractionManager.linkEventManager(t.mouse()),this._touchInteractionManager&&this._touchInteractionManager.linkEventManager(t.touch())}loadSection(t){this._forEachManager((e=>{e.loadSection(t)}))}mouse(){return this._mouseInteractionManager}touch(){return this._touchInteractionManager}select(){return this._selectManager}_forEachManager(t){this._mouseInteractionManager&&t(this._mouseInteractionManager),this._touchInteractionManager&&t(this._touchInteractionManager)}}function Dc(t){let e,o,r=[t[8]],i={};for(let t=0;t<r.length;t+=1)i=n(i,r[t]);return{c(){e=M("clipPath"),o=M("rect"),I(o,i),T(e,"id",`clip-${t[10]}`)},m(t,n){x(t,e,n),m(e,o)},p(t,e){I(o,i=ct(r,[256&e[0]&&t[8]]))},d(t){t&&v(e)}}}function Zc(t){let e,o=[{class:"content-background"},t[8],{fill:t[4]}],r={};for(let t=0;t<o.length;t+=1)r=n(r,o[t]);return{c(){e=M("rect"),I(e,r)},m(t,n){x(t,e,n)},p(t,n){I(e,r=ct(o,[{class:"content-background"},256&n[0]&&t[8],16&n[0]&&{fill:t[4]}]))},d(t){t&&v(e)}}}function Vc(t){let e,o,r=[{class:"padding-background"},{mask:o=`url(#${t[10]}-mask-padding-bg)`},t[9],{fill:t[5]}],i={};for(let t=0;t<r.length;t+=1)i=n(i,r[t]);return{c(){e=M("rect"),I(e,i)},m(t,n){x(t,e,n)},p(t,n){I(e,i=ct(r,[{class:"padding-background"},{mask:o},512&n[0]&&t[9],32&n[0]&&{fill:t[5]}]))},d(t){t&&v(e)}}}function Kc(t){let e,o,r,i,a,s,c,u,d=t[6]&&Dc(t),f=[t[9],{fill:"white"}],y={};for(let t=0;t<f.length;t+=1)y=n(y,f[t]);let p=[t[8],{fill:"black"}],g={};for(let t=0;t<p.length;t+=1)g=n(g,p[t]);let k=t[4]&&Zc(t),b=t[5]&&Vc(t);const _=t[50].default,w=function(t,e,n,o){if(t){const r=l(t,e,n,o);return t[0](r)}}(_,t,t[49],null);return{c(){e=M("svg"),d&&d.c(),o=M("defs"),r=M("mask"),i=M("rect"),a=M("rect"),k&&k.c(),s=$(),b&&b.c(),c=$(),w&&w.c(),I(i,y),I(a,g),T(r,"id",`${t[10]}-mask-padding-bg`),T(e,"id",t[10]),T(e,"width",t[1]),T(e,"height",t[2]),T(e,"viewBox",t[0]),T(e,"preserveAspectRatio",t[3])},m(n,l){x(n,e,l),d&&d.m(e,null),m(e,o),m(o,r),m(r,i),m(r,a),k&&k.m(e,null),m(e,s),b&&b.m(e,null),m(e,c),w&&w.m(e,null),t[51](e),u=!0},p(t,n){t[6]?d?d.p(t,n):(d=Dc(t),d.c(),d.m(e,o)):d&&(d.d(1),d=null),I(i,y=ct(f,[512&n[0]&&t[9],{fill:"white"}])),I(a,g=ct(p,[256&n[0]&&t[8],{fill:"black"}])),t[4]?k?k.p(t,n):(k=Zc(t),k.c(),k.m(e,s)):k&&(k.d(1),k=null),t[5]?b?b.p(t,n):(b=Vc(t),b.c(),b.m(e,c)):b&&(b.d(1),b=null),w&&w.p&&262144&n[1]&&h(w,_,t,t[49],n,null,null),(!u||2&n[0])&&T(e,"width",t[1]),(!u||4&n[0])&&T(e,"height",t[2]),(!u||1&n[0])&&T(e,"viewBox",t[0]),(!u||8&n[0])&&T(e,"preserveAspectRatio",t[3])},i(t){u||(ot(w,t),u=!0)},o(t){rt(w,t),u=!1},d(n){n&&v(e),d&&d.d(),k&&k.d(),b&&b.d(),w&&w.d(n),t[51](null)}}}let Uc=0;function Jc(t,e,n){let o,r,i,a,s,{$$slots:c={},$$scope:l}=e;const h="gr"+Uc++;let{width:d=500}=e,{height:f=500}=e,{viewBox:y}=e,{preserveAspectRatio:p="xMidYMid meet"}=e,{scaleX:g}=e,{scaleY:m}=e,{flipX:x=!1}=e,{flipY:v=!1}=e,{padding:k=0}=e,{zoomIdentity:b}=e,{onClick:M}=e,{onWheel:_}=e,{onMousedown:w}=e,{onMouseup:$}=e,{onMouseover:S}=e,{onMouseout:T}=e,{onMousemove:I}=e,{onPinch:C}=e,{onTouchdown:O}=e,{onTouchmove:N}=e,{onTouchup:E}=e,{onTouchover:P}=e,{onTouchout:L}=e,{backgroundColor:j}=e,{paddingColor:W}=e,{transformation:R}=e,{blockReindexing:z=!1}=e,{clip:X=!0}=e,{renderer:F}=e;const H=function(){const t=gt();return Y(Xt,t),t}(),B=function(){const t=gt();return Y(Cn,t),t}();u(t,B,(t=>n(48,s=t)));const G=function(){const t=gt();return Y(Nn,t),t}(),D=function(){const t=gt();return Y(En,t),t}();let Z;u(t,D,(t=>n(47,a=t)));const V=new Gn;!function(t,e){t.set(e)}(G,V);const K=new Gc;K.setId(h),K.linkEventManager(V),function(t,e){t.set(e)}(D,K);let U=d,J=f;const Q=y;let tt;return void 0!==Q&&(tt=Q.split(" ")),A((()=>{let t=Z||document.getElementById(h);V.addRootNode(t),V.attachEventListeners()})),t.$$set=t=>{"width"in t&&n(1,d=t.width),"height"in t&&n(2,f=t.height),"viewBox"in t&&n(0,y=t.viewBox),"preserveAspectRatio"in t&&n(3,p=t.preserveAspectRatio),"scaleX"in t&&n(13,g=t.scaleX),"scaleY"in t&&n(14,m=t.scaleY),"flipX"in t&&n(15,x=t.flipX),"flipY"in t&&n(16,v=t.flipY),"padding"in t&&n(17,k=t.padding),"zoomIdentity"in t&&n(18,b=t.zoomIdentity),"onClick"in t&&n(19,M=t.onClick),"onWheel"in t&&n(20,_=t.onWheel),"onMousedown"in t&&n(21,w=t.onMousedown),"onMouseup"in t&&n(22,$=t.onMouseup),"onMouseover"in t&&n(23,S=t.onMouseover),"onMouseout"in t&&n(24,T=t.onMouseout),"onMousemove"in t&&n(25,I=t.onMousemove),"onPinch"in t&&n(26,C=t.onPinch),"onTouchdown"in t&&n(27,O=t.onTouchdown),"onTouchmove"in t&&n(28,N=t.onTouchmove),"onTouchup"in t&&n(29,E=t.onTouchup),"onTouchover"in t&&n(30,P=t.onTouchover),"onTouchout"in t&&n(31,L=t.onTouchout),"backgroundColor"in t&&n(4,j=t.backgroundColor),"paddingColor"in t&&n(5,W=t.paddingColor),"transformation"in t&&n(32,R=t.transformation),"blockReindexing"in t&&n(33,z=t.blockReindexing),"clip"in t&&n(6,X=t.clip),"renderer"in t&&n(34,F=t.renderer),"$$scope"in t&&n(49,l=t.$$scope)},t.$$.update=()=>{if(8&t.$$.dirty[1]&&function(t,e){t.set(new zt(e))}(H,{renderer:F}),6&t.$$.dirty[0]|16384&t.$$.dirty[1]&&(d.constructor===Number&&f.constructor===Number?(n(43,U=d),n(44,J=f)):void 0!==Q?(n(43,U=Number(tt[2])),n(44,J=Number(tt[3]))):void 0===Q&&(n(43,U=100),n(44,J=100))),12288&t.$$.dirty[1]&&n(46,o={x1:0,y1:0,x2:U,y2:J}),516096&t.$$.dirty[0]|229382&t.$$.dirty[1]){!function(t,e){t.set(Sn(e))}(B,{sectionId:h,coordinates:o,scaleX:g,scaleY:m,padding:k,flipX:x,flipY:v,blockReindexing:z,transformation:R,zoomIdentity:b}),a.loadSection(s)}131072&t.$$.dirty[0]|32768&t.$$.dirty[1]&&n(8,r=function({x1:t,x2:e,y1:n,y2:o},r){const{left:i,right:a,top:s,bottom:c}=Ft(r);return{x:Math.min(t,e)+i,y:Math.min(n,o)+s,width:Math.abs(t-e)-(i+a),height:Math.abs(n-o)-(s+c)}}(o,k)),32768&t.$$.dirty[1]&&n(9,i=function({x1:t,x2:e,y1:n,y2:o}){return{x:Math.min(t,e),y:Math.min(n,o),width:Math.abs(t-e),height:Math.abs(n-o)}}(o)),12288&t.$$.dirty[1]&&void 0===Q&&n(0,y=`0 0 ${U} ${J}`),2113404928&t.$$.dirty[0]|1&t.$$.dirty[1]&&function(){if("mouse"===Yt){const t=a.mouse().section();t.removeAllInteractions(),_&&t.addInteraction("wheel",_),M&&t.addInteraction("click",M),w&&t.addInteraction("mousedown",w),$&&t.addInteraction("mouseup",$),S&&t.addInteraction("mouseover",S),T&&t.addInteraction("mouseout",T),I&&t.addInteraction("mousemove",I)}if("touch"===Yt){const t=a.touch().section();t.removeAllInteractions(),O&&t.addInteraction("touchdown",O),N&&t.addInteraction("touchmove",N),E&&t.addInteraction("touchup",E),P&&t.addInteraction("touchover",P),L&&t.addInteraction("touchout",L),C&&t.addInteraction("pinch",C)}}()},[y,d,f,p,j,W,X,Z,r,i,h,B,D,g,m,x,v,k,b,M,_,w,$,S,T,I,C,O,N,E,P,L,R,z,F,function(t){a.select().selectRectangle(t)},function(t){a.select().updateSelectRectangle(t)},function(){a.select().resetSelectRectangle()},function(t){a.select().startSelectPolygon(t)},function(t){a.select().addPointToSelectPolygon(t)},function(t){a.select().moveSelectPolygon(t)},function(){return a.select().getSelectPolygon()},function(){a.select().resetSelectPolygon()},U,J,tt,o,a,s,l,c,function(t){q[t?"unshift":"push"]((()=>{Z=t,n(7,Z)}))}]}class Qc extends yt{constructor(t){super(),ft(this,t,Jc,Kc,s,{width:1,height:2,viewBox:0,preserveAspectRatio:3,scaleX:13,scaleY:14,flipX:15,flipY:16,padding:17,zoomIdentity:18,onClick:19,onWheel:20,onMousedown:21,onMouseup:22,onMouseover:23,onMouseout:24,onMousemove:25,onPinch:26,onTouchdown:27,onTouchmove:28,onTouchup:29,onTouchover:30,onTouchout:31,backgroundColor:4,paddingColor:5,transformation:32,blockReindexing:33,clip:6,renderer:34,selectRectangle:35,updateSelectRectangle:36,resetSelectRectangle:37,startSelectPolygon:38,addPointToSelectPolygon:39,moveSelectPolygon:40,getSelectPolygon:41,resetSelectPolygon:42},[-1,-1])}get selectRectangle(){return this.$$.ctx[35]}get updateSelectRectangle(){return this.$$.ctx[36]}get resetSelectRectangle(){return this.$$.ctx[37]}get startSelectPolygon(){return this.$$.ctx[38]}get addPointToSelectPolygon(){return this.$$.ctx[39]}get moveSelectPolygon(){return this.$$.ctx[40]}get getSelectPolygon(){return this.$$.ctx[41]}get resetSelectPolygon(){return this.$$.ctx[42]}}function tu(t,e){if(t){if(t.constructor!==Array)throw new Error("'key' must be Array");if(t.length!==e)throw new Error("'key' must be of same length as positioning props");if(t.some((t=>t.constructor!==String)))throw new Error("Keys can only be Strings");return t}return new Array(e).fill(0).map(((t,e)=>e.toString()))}function eu(t,e,n,o){!function(t){if(hr(t)&&t.constructor===Object&&"type"in t&&"coordinates"in t)return;throw new Error("Invalid geometry")}(t);const r="polar"===e.transformation&&!0===n.interpolate;if(r){const r=e.getScaleTransformation(o);return Qr(t,e,{scaleTransformation:r,postScaleTransformation:e.postScaleTransformation},n)}if(!r){return Gr(t,e.getTotalTransformation(o),n)}}function nu(t,e,n,o,r){const i=tu(e,t.length),a={};for(let e=0;e<i.length;e++){a[i[e]]=eu(t[e],n,o,r)}return a}const ou=JSON.stringify;function ru(t){if(iu(t.x1,t.x2))throw new Error(`Rectangle: invalid combination of 'x1' and 'x2': ${ou(t.x1)}, ${ou(t.x2)}. Either provide both or none.`);if(iu(t.y1,t.y2))throw new Error(`Rectangle: invalid combination of 'y1' and 'y2': ${ou(t.y1)}, ${ou(t.y2)}. Either provide both or none.`)}function iu(t,e){return dr(t)?hr(e):dr(e)}const au=(t,e)=>new Error(`Rectangle: invalid coordinate value for '${e}': ${ou(t)}`);function su(t,e){return hr(t)&&hr(e)}function cu(t,e,n){if(t.constructor===Function)return t(n);{const o=(["x1","x2"].includes(e)?n.scaleX:n.scaleY)(t);return function(t,e,n){const o=["x1","x2"].includes(n)?"scaleX":"scaleY";if(lr(e))throw new Error(`Scale '${o}' received '${ou(t)}' and returned '${ou(e)}`)}(t,o,e),o}}function uu(t){return{type:"Polygon",coordinates:[[[t.x1,t.y1],[t.x2,t.y1],[t.x2,t.y2],[t.x1,t.y2],[t.x1,t.y1]]]}}var lu={x:{required:!1},y:{required:!1},geometry:{required:!1},radius:{required:!1,default:3},fill:{required:!1,default:"black"},stroke:{required:!1,default:"none"},strokeWidth:{required:!1,default:0},fillOpacity:{required:!1},strokeOpacity:{required:!1},opacity:{required:!1,default:1}},hu={x1:{required:!1},x2:{required:!1},y1:{required:!1},y2:{required:!1},fill:{required:!1,default:"black"},stroke:{required:!1,default:"none"},strokeWidth:{required:!1,default:0},fillOpacity:{required:!1},strokeOpacity:{required:!1},opacity:{required:!1,default:1}},du={x:{required:!1},y:{required:!1},geometry:{required:!1},fill:{required:!1,default:"black"},stroke:{required:!1,default:"none"},strokeWidth:{required:!1,default:0},fillOpacity:{required:!1},strokeOpacity:{required:!1},opacity:{required:!1,default:1}},fu={x:{required:!1},y:{required:!1},geometry:{required:!1},strokeWidth:{required:!1,default:3},stroke:{required:!1,default:"black"},opacity:{required:!1,default:1}},yu={x:{required:!1},y:{required:!1},geometry:{required:!1},fill:{required:!1,default:"black"},stroke:{required:!1,default:"none"},strokeWidth:{required:!1,default:0},fillOpacity:{required:!1},strokeOpacity:{required:!1},opacity:{required:!1,default:1},text:{required:!1},fontFamily:{required:!1,default:"Helvetica"},fontSize:{required:!1,default:16},fontWeight:{required:!1,default:"normal"},rotation:{required:!1,default:0},anchorPoint:{required:!1,default:"center"}},pu={x:{required:!1},y:{required:!1},geometry:{required:!1},shape:{required:!1},size:{required:!1},fill:{required:!1,default:"black"},stroke:{required:!1,default:"none"},strokeWidth:{required:!1,default:0},fillOpacity:{required:!1},strokeOpacity:{required:!1},opacity:{required:!1,default:1}},gu={x1:{required:!1},x2:{required:!1},y1:{required:!1},y2:{required:!1},independentAxis:{required:!1},fill:{required:!1,default:"black"},stroke:{required:!1,default:"none"},strokeWidth:{required:!1,default:0},strokeOpacity:{required:!1},fillOpacity:{required:!1},opacity:{required:!1,default:1}};function mu(t,e){return"Point"===t?xu(e,lu):"Rectangle"===t?xu(e,hu):"Polygon"===t?xu(e,du):"Line"===t?xu(e,fu):"Label"===t?xu(e,yu):"Symbol"===t?xu(e,pu):"Area"===t?xu(e,gu):void 0}function xu(t,e){const n={};for(const o in t){const r=t[o],i=e[o];if(hr(r)){if(!(o in e))throw vu(o);n[o]=r}if(dr(r)&&o in e){if(i.required)throw ku(o);hr(i.default)?n[o]=i.default:n[o]=r}}return n}const vu=t=>new Error(`Aesthetic '${t}' not allowed`),ku=t=>new Error(`Required aesthetic '${t}' is missing`);function bu({x:t,y:e,geometry:n},o){if(!(hr(t)&&hr(e)&&dr(n)||dr(t)&&dr(e)&&hr(n)))throw new Error(`${o}: Invalid combination of 'x', 'y', and 'geometry' props`)}function Mu({x:t,y:e,geometry:n}){return dr(n)?"xy":hr(n)?"geometry":void 0}function _u(t){return t.constructor!==Function}function wu(t,e,n){bu(t);const o=Mu(t);if("xy"===o){const o=_u(t.x),r=_u(t.y);return Gr({type:"Point",x:o?t.x:t.x(e),y:r?t.y:t.y(e)},e.getTotalTransformation({xNeedsScaling:o,yNeedsScaling:r}),n)}if("geometry"===o){const o=_u(t.geometry);return Gr(o?t.geometry:t.geometry(e),e.getTotalTransformation(o),n)}}function $u({x:t,y:e},n,o,r,i){Su(t,e),"Polygon"===r&&function(t,e){const n=t[0]!==t[t.length-1],o=e[0]!==e[e.length-1];(n||o)&&(t.push(t[0]),e.push(e[0]))}(t,e);const a=function(t,e,n){return{type:n,x:t,y:e}}(t,e,r),s="polar"===n.transformation&&!0===o.interpolate;if(s){const t=n.getScaleTransformation(i);return Qr(a,n,{scaleTransformation:t,postScaleTransformation:n.postScaleTransformation},o)}if(!s){return Gr(a,n.getTotalTransformation(i),o)}}function Su(t,e){if(t.constructor!==Array)throw new Error("'x' prop must be Array or function that returns array");if(e.constructor!==Array)throw new Error("'y' prop must be Array or function that returns array");if(t.length!==e.length)throw new Error("Arrays passed to 'x' and 'y' must have the same length")}function Tu({x:t,y:e},n,o,r,i,a){Su(t,e);const s=tu(n,t.length),c={};for(let n=0;n<s.length;n++){c[s[n]]=$u({x:t[n],y:e[n]},o,r,i,a)}return c}var Iu={cross:[[-.5,-1],[.5,-1],[.5,-.5],[1,-.5],[1,.5],[.5,.5],[.5,1],[-.5,1],[-.5,.5],[-1,.5],[-1,-.5],[-.5,-.5],[-.5,-1],[-.5,-1]],"cross-sharp":[[0,-1],[.2,-.2],[1,0],[.2,.2],[0,1],[-.2,.2],[-1,0],[-.2,-.2],[0,-1]],diamond:[[0,-1],[1,0],[0,1],[-1,0],[0,-1],[0,-1]],"triangle-up":[[0,-1],[1,1],[-1,1],[0,-1],[0,-1]],"triangle-down":[[1,-1],[0,1],[-1,-1],[1,-1],[1,-1]],"triangle-right":[[-1,-1],[1,0],[-1,1],[-1,-1],[-1,-1]],"triangle-left":[[1,-1],[-1,0],[1,1],[1,-1],[1,-1]],star4:[[0,.71],[1,1],[.71,0],[1,-1],[0,-.71],[-1,-1],[-.71,0],[-1,1],[0,.71],[0,.71]],star5:[[0,.5],[.6,.8],[.5,.1],[1,-.3],[.3,-.4],[0,-1],[-.3,-.4],[-1,-.3],[-.5,.1],[-.6,.8],[0,.5],[0,.5]],star:[[0,.5],[.6,.8],[.5,.1],[1,-.3],[.3,-.4],[0,-1],[-.3,-.4],[-1,-.3],[-.5,.1],[-.6,.8],[0,.5],[0,.5]],star6:[[0,.58],[.5,1],[.43,.29],[1,0],[.43,-.29],[.5,-1],[0,-.58],[-.5,-1],[-.43,-.29],[-1,0],[-.43,.29],[-.5,1],[0,.58]],star8:[[0,.54],[.41,1],[.38,.38],[1,.41],[.54,0],[1,-.41],[.38,-.38],[.41,-1],[0,-.54],[-.41,-1],[-.38,-.38],[-1,-.41],[-.54,0],[-1,.41],[-.38,.38],[-.41,1],[0,.54]],pentagon:[[-1,-.24],[0,-1],[1,-.24],[.62,1],[-.62,1],[-1,-.24],[-1,-.24]],hexagon:[[-1,0],[-.57,-1],[.57,-1],[1,0],[.57,1],[-.57,1],[-1,0],[-1,0]],heptagon:[[-1,.29],[-.8,-.6],[0,-1],[.8,-.6],[1,.29],[.45,1],[-.45,1],[-1,.29],[-1,.29]],septagon:[[-1,.29],[-.8,-.6],[0,-1],[.8,-.6],[1,.29],[.45,1],[-.45,1],[-1,.29],[-1,.29]],octagon:[[-1,-.41],[-.41,-1],[.41,-1],[1,-.41],[1,.41],[.41,1],[-.41,1],[-1,.41],[-1,-.41],[-1,-.41]],nonagon:[[.35,-1],[.88,-.55],[1,.15],[.65,.76],[0,1],[-.65,.76],[-1,.15],[-.88,-.55],[-.35,-1],[.35,-1],[.35,-1]],decagon:[[-1,0],[-.81,-.62],[-.31,-1],[.31,-1],[.81,-.62],[1,0],[.81,.62],[.31,1],[-.31,1],[-.81,.62],[-1,0],[-1,0]]};function Cu(t,{radius:e}){const n=t.coordinates[0],o=t.coordinates[1],r=2*Math.PI*e,i=Math.max(Math.ceil(r),9),a={type:"Polygon",coordinates:[[]]};for(let t=0;t<i;t++)a.coordinates[0].push([n+e*Math.cos(Math.PI*t/i*2-Math.PI/2),o+e*Math.sin(Math.PI*t/i*2-Math.PI/2)]);return a.coordinates[0].push(a.coordinates[0][0]),a}function Ou(t,e){const[n,o]=t.coordinates,r=e.shape||"circle",i=e.size||8;if("circle"===r)return function(t,e,n){return Cu({type:"Point",coordinates:[t,e]},{radius:n/2})}(n,o,i);if("square"===r)return function(t,e,n){const o=n/2;return uu({x1:t-o,x2:t+o,y1:e-o,y2:e+o})}(n,o,i);if(r in Iu){return Nu(n,o,{type:"Polygon",coordinates:[Iu[r]]},i)}return Nu(n,o,r,i)}function Nu(t,e,n,o){const r=o/2;return Gr(n,(n=>[n[0]*r+t,n[1]*r+e]))}function Eu(t){const{independentAxis:e,...n}=t,o=["singleton","array"],r=Object.entries(n).filter((([t,e])=>o.includes(e.type))).reduce(((t,[e,o])=>(t[e]=n[e],t)),{}),i=Object.keys(r);if(!["x1","y1"].every((t=>i.includes(t))))throw new Error("At least x1 and y1 must be provided");if("singleton"===r.x1.type&&"singleton"===r.y1.type)throw new Error("At least x1 or y1 must be passed an array");if(e&&"x"!==e){if("y"!==e)throw new Error('independentAxis must be passed "x" or "y" or left blank');if("singleton"===r.y1.type||"array"===r.y1.type&&r.y1.arrayLength<2)throw new Error('y1 must be passed an array of at least length 2 when independentAxis is "y"');if(i.includes("y2"))throw new Error('independentAxis must be "x" when x1, y1 and y2 are specified')}else{if("singleton"===r.x1.type||"array"===r.x1.type&&r.x1.arrayLength<2)throw new Error('x1 must be passed an array of at least length 2 when independentAxis is "x" or undefined');if(i.includes("x2"))throw new Error('independentAxis must be "y" when x1, y1 and x2 are specified')}if(!Object.values(r).filter((t=>"array"===t.type)).map((t=>t.value.length)).every(((t,e,n)=>t===n[0])))throw new Error("Arrays given must be of equal length");return t}function Pu({independentAxis:t,x1:e,y1:n,x2:o,y2:r}){const i=t&&"x"!==t?"y":"x",[a,s]="x"===i?["x1",e]:["y1",n],[c,u]="x"===i?["y1",n]:["x1",e],[l,h]="x"===i?["y2",r]:["x2",o],d=s.arrayLength,f={singleton:{value:Array(d).fill(u.value),type:"array",arrayLength:d},array:u},y={singleton:{value:Array(d).fill(h.value),type:"array",arrayLength:d},none:{value:Array(d).fill(0),type:"array",arrayLength:d},array:h};return{independentAxis:i,[a]:s,[c]:f[u.type],[l]:y[h.type]}}const Lu={x1:"scaleX",y1:"scaleY",x2:"scaleX",y2:"scaleY"};function Au({independentAxis:t,...e},n){return{independentAxis:t,...Object.entries(e).reduce(((t,[e,o])=>{if(o.scaled)t[e]=o.value;else{const r=n[Lu[e]];t[e]=o.value.map((t=>r(t)))}return t}),{})}}function ju({x1:t,y1:e,x2:n,y2:o,independentAxis:r}){let i,a;"x"===r?(i=o.map(((e,n)=>[t[n],e])),a=e.map(((e,n)=>[t[n],e])).reverse()):(i=n.map(((t,n)=>[t,e[n]])),a=t.map(((t,n)=>[t,e[n]])).reverse());const s=[i[0]];return{type:"Polygon",coordinates:[i.concat(a,s)]}}function Wu(t,e,n,o){bu(t);const r=Mu(t);return"xy"===r?function({x:t,y:e},n,o,r){!function(t,e){if(![Array,Function].includes(t.constructor))throw new Error("'x' prop must be Array or Function");if(![Array,Function].includes(e.constructor))throw new Error("'y' prop must be Array or Function")}(t,e);const i=_u(t),a=_u(e),s=i?t:t(o),c=a?e:e(o),{xArray:u,yArray:l}=function(t,e){if(t.constructor!==Array&&e.constructor!==Array)throw new Error("Invalid input: cannot recycle all geometry props");return{xArray:t.constructor===Array?t:Ru(t,e.length),yArray:e.constructor===Array?e:Ru(e,t.length)}}(s,c);Su(u,l);const h=tu(n,u.length),d=o.getTotalTransformation({xNeedsScaling:i,yNeedsScaling:a});return function(t,e,n,o){const r={};for(let i=0;i<n.length;i++){r[n[i]]={type:"Point",coordinates:o([t[i],e[i]])}}return r}(u,l,h,d)}(t,e,n):"geometry"===r?function(t,e,n,o){!function(t){if(![Array,Function].includes(t.constructor))throw new Error("'geometry' prop must be Array or Function")}(t.geometry);const r=_u(t.geometry),i=r?t.geometry:t.geometry(n),a=tu(e,i.length),s=n.getTotalTransformation(r);return function(t,e,n){const o={};for(let r=0;r<e.length;r++){o[e[r]]={type:"Point",coordinates:n(t[r].coordinates)}}return o}(i,a,s)}(t,e,n):void 0}function Ru(t,e){return new Array(e).fill(t)}function Yu(t,e){return new Array(e).fill(t)}const zu=["x1","x2","y1","y2"];const Xu={x1:"minX",x2:"maxX",y1:"minY",y2:"maxY"};function qu(t,e){return e.paddedBbox[Xu[t]]}const Fu=new Error("RectangleLayer: invalid coordinate specification");function Hu(t,e,n,o,r){const i={};for(const a in t){const s=t[a];let c;const u=a.startsWith("x")?e.scaleX:e.scaleY;o[a]&&(c=Yu(s,r)),o[a]||(c=s),i[a]=n[a]?c.map(u):c}return i}function Bu(t,e){if(void 0===t)return()=>{};if(t.constructor===Function)return t;const n=function(t,e){const n=e.length,o={};if(t.constructor===Array){!function(t,e){if(t.length!==e)throw new Error("If provided as Arrays, all positioning props must be the same length")}(t,n);for(let r=0;r<n;r++){o[e[r]]=t[r]}}else for(let r=0;r<n;r++){o[e[r]]=t}return o}(t,e);return t=>n[t]}const Gu=new Proxy({Point:wu,Rectangle:function(t,e,n){return eu(uu(function(t,e){ru(t),function(t){for(const e in t){const n=t[e];if(hr(n)){if(lr(n))throw au(n,e);if(![Number,String,Date,Function].includes(n.constructor))throw au(n,e)}}}(t);const{x1:n,x2:o,y1:r,y2:i}=t,a={};su(n,o)?(a.x1=cu(n,"x1",e),a.x2=cu(o,"x2",e)):(a.x1=e.rangeX[0],a.x2=e.rangeX[1]);su(r,i)?(a.y1=cu(r,"y1",e),a.y2=cu(i,"y2",e)):(a.y1=e.rangeY[0],a.y2=e.rangeY[1]);return a}(t,e)),e,n,!1)},Polygon:function(t,e,n){bu(t);const o=Mu(t);if("xy"===o){const o=_u(t.x),r=_u(t.y);return $u({x:o?t.x:t.x(e),y:r?t.y:t.y(e)},e,n,"Polygon",{xNeedsScaling:o,yNeedsScaling:r})}if("geometry"===o){const o=_u(t.geometry);return eu(o?t.geometry:t.geometry(e),e,n,o)}},Line:function(t,e,n){bu(t);const o=Mu(t);if("xy"===o){const o=_u(t.x),r=_u(t.y);return $u({x:o?t.x:t.x(e),y:r?t.y:t.y(e)},e,n,"LineString",{xNeedsScaling:o,yNeedsScaling:r})}if("geometry"===o){const o=_u(t.geometry);return eu(o?t.geometry:t.geometry(e),e,n,o)}},Label:wu,Symbol:function(t,e,n){return Ou(wu(t,e,n),t)},Area:function(t,e,n){return eu(ju(Au(Pu(Eu(function({independentAxis:t,...e},n){const o=Object.entries(e).reduce(((t,[e,o])=>{const r="function"==typeof o?o(n):o;return t[e]={type:void 0===r?"none":Array.isArray(r)?"array":"singleton",...Array.isArray(r)&&{arrayLength:r.length},value:r,scaled:"function"==typeof o},t}),{});return o.independentAxis=t&&t.toLowerCase(),o}((({x1:t,y1:e,x2:n,y2:o,independentAxis:r})=>({x1:t,y1:e,x2:n,y2:o,independentAxis:r}))(t),e))),e)),e,n,!1)}},{get:(t,e)=>{if(e in t)return t[e];throw new Error(`Invalid Mark type: '${e}'`)}}),Du=new Proxy({Point:Wu,Rectangle:function(t,e,n,o){const{scaledCoordinates:r,length:i}=function(t,e){ru(t);const n=function(t){const e={};for(const n of zu){const o=t[n];e[n]=hr(o)&&o.constructor!==Function}return e}(t),o=function(t,e){const n={};for(const o in t){const r=t[o];r.constructor===Function?n[o]=r(e):n[o]=r}return n}(function(t,e){const n={};for(const o of zu){const r=t[o];n[o]=dr(r)?qu(o,e):r}return n}(t,e),e),r=function(t){let e,n=!1;for(const o in t){const r=t[o];if(r.constructor===Array&&(n=!0,e=e||r.length,e!==r.length))throw Fu}if(!n)throw Fu;return e}(o),i=function(t){const e={};for(const n in t){const o=t[n];e[n]=o.constructor!==Array}return e}(o);return{scaledCoordinates:Hu(o,e,n,i,r),length:r}}(t,n);return nu(function(t,e){const n=[];for(let o=0;o<e;o++)n.push(uu({x1:t.x1[o],x2:t.x2[o],y1:t.y1[o],y2:t.y2[o]}));return n}(r,i),e,n,o,!1)},Polygon:function(t,e,n,o){bu(t);const r=Mu(t);if("xy"===r){const r=_u(t.x),i=_u(t.y);return Tu({x:r?t.x:t.x(n),y:i?t.y:t.y(n)},e,n,o,"Polygon",{xNeedsScaling:r,yNeedsScaling:i})}if("geometry"===r){const r=_u(t.geometry);return nu(r?t.geometry:t.geometry(n),e,n,o,r)}},Line:function(t,e,n,o){bu(t);const r=Mu(t);if("xy"===r){const r=_u(t.x),i=_u(t.y);return Tu({x:r?t.x:t.x(n),y:i?t.y:t.y(n)},e,n,o,"LineString",{xNeedsScaling:r,yNeedsScaling:i})}if("geometry"===r){const r=_u(t.geometry);return nu(r?t.geometry:t.geometry(n),e,n,o,r)}},Label:Wu,Symbol:function(t,e,n,o){return function(t,e){const n=Object.keys(t),o=Bu(e.shape,n),r=Bu(e.size,n),i={};for(const e in t){const n=o(e),a=r(e);i[e]=Ou(t[e],{shape:n,size:a})}return i}(Wu(t,e,n),t)},Area:function(t,e,n,o){const r=(({x1:t,y1:e,x2:n,y2:o,independentAxis:r})=>({x1:t,y1:e,x2:n,y2:o,independentAxis:r}))(t),{numAreas:i,independentAxis:a,...s}=function({numAreas:t,independentAxis:e,x1:n,y1:o,x2:r,y2:i}){const a=e&&"x"!==e?"y":"x",[s,c]="x"===a?["x1",n]:["y1",o],[u,l]="x"===a?["x2",r]:["y2",i],[h,d]="x"===a?["y1",o]:["x1",n],[f,y]="x"===a?["y2",i]:["x2",r],p={array:{value:Array(t).fill(c.value),type:"array of arrays",numAreas:t,scaled:c.scaled},"array of arrays":c};return{numAreas:t,independentAxis:a,[s]:p[c.type],[u]:l,[h]:d,[f]:y}}(function(t){const{independentAxis:e,...n}=t,{x1:o,x2:r,y1:i,y2:a}=n;Object.values(n).forEach((t=>{if("singleton"===t.type)throw new Error("Props passed to the AreaLayer must be either an array or an array of arrays")}));const s=e&&"x"!==e?"y":"x",[c,u]="x"===s?["y1",i]:["x1",o],[l,h]="x"===s?["y2",a]:["x2",r];if("array"===u.type||"array"===h.type)throw new Error(`${c} and ${l} must be passed an array of arrays when independentAxis is "${s}"`);const d=Object.values(n).filter((t=>"array of arrays"===t.type)).map((t=>t.numAreas));if(!d.every(((t,e,n)=>t===n[0])))throw new Error("Number of areas declared per prop must be equal");return{numAreas:d[0],independentAxis:e,...t}}(function({independentAxis:t,...e},n){const o=Object.entries(e).reduce(((t,[e,o])=>{const r="function"==typeof o?o(n):o,i=t=>void 0===t,a=t=>!i(t)&&!Array.isArray(t),s=t=>!i(t)&&!a(t)&&t.every((t=>Array.isArray(t)));return t[e]={type:i(r)?"none":a(r)?"singleton":s(r)?"array of arrays":"array",...s(r)&&{numAreas:r.length},value:r,scaled:"function"==typeof o},t}),{});return o.independentAxis=t&&t.toLowerCase(),o}(r,n)));return nu([...Array(i).keys()].map((t=>Object.entries(s).reduce(((e,[n,o])=>{const r="array of arrays"===o.type;return e[n]={type:r?"array":"none",value:r?o.value[t]:o.value,...r&&{arrayLength:o.value[t].length},scaled:o.scaled},e.independentAxis=a,e}),{}))).map((t=>ju(Au(Pu(Eu(t)),n)))),e,n,o,!1)}},{get:(t,e)=>{if(e in t)return t[e];throw new Error(`Invalid Layer type: '${e}'`)}});function Zu(t,{strokeWidth:e}){const n=t.coordinates;if("LineString"===t.type){return{type:"Polygon",coordinates:[Vu(n,e)]}}if("MultiLineString"===t.type){const t=[];for(let o=0;o<n.length;o++)t.push([Vu(n[o],e)]);return{type:"MultiPolygon",coordinates:t}}}function Vu(t,e){const n=t.length,o=n-1,r=e/2,i=new Array(n),a=new Array(n);for(let e=0;e<n;e++){if(0===e){const[e,n]=Ku(t,r);i[0]=e,a[o]=n}if(e===o){const[e,n]=Uu(t,r);i[o]=e,a[0]=n}if(e>0&&e<o){const[n,s]=Ju(t,e,r);i[e]=n,a[o-e]=s}}const s=i.concat(a);return function(t){const e=t[0],n=t[t.length-1];return!(e[0]===n[0]&&e[1]===n[1])}(s)&&s.push(s[0]),s}function Ku(t,e){const n=tl(0,t);return ol(n,n[0],e)}function Uu(t,e){const n=Qu(t.length-1,t);return ol(n,n[1],e)}function Ju(t,e,n){const o=Qu(e,t),r=tl(e,t),i=el(o),a=el(r);if(i[0]===a[0]&&i[1]===a[1]){return ol(o,o[1],n)}{const t=ol(o,o[0],n),e=ol(r,r[1],n);return[rl(t[0],i,e[0],a),rl(t[1],i,e[1],a)]}}const Qu=(t,e)=>[e[t-1],e[t]],tl=(t,e)=>[e[t],e[t+1]];function el(t){const[e,n]=t,o=br(e,n);return[(n[0]-e[0])/o,(n[1]-e[1])/o]}function nl(t,e,n){return[t[0]+e[0]*n,t[1]+e[1]*n]}function ol(t,e,n){const o=el(t),r=[-(i=o)[1],i[0]];var i;return[nl(e,r,n),nl(e,r,-n)]}function rl(t,e,n,o){const r=function(t,e,n,o){const r=t[0]-n[0],i=t[1]-n[1],a=e[0],s=o[0],c=e[1],u=o[1];return(s*i-r*u)/(a*u-s*c)}(t,e,n,o);return[t[0]+e[0]*r,t[1]+e[1]*r]}const il={Point:Cu,Line:Zu},al={Point:function(t,{radiusObject:e}){const n={};for(const o in t)n[o]=Cu(t[o],{radius:e[o]});return n},Line:function(t,{strokeWidthObject:e}){const n={};for(const o in t)n[o]=Zu(t[o],{strokeWidth:e[o]});return n}};function sl(t){const e=t-1;return e*e*e+1}function cl(t){return"[object Date]"===Object.prototype.toString.call(t)}function ul(t,e){if(t===e||t!=t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const n=e.map(((e,n)=>ul(t[n],e)));return t=>n.map((e=>e(t)))}if("object"===n){if(!t||!e)throw new Error("Object cannot be null");if(cl(t)&&cl(e)){t=t.getTime();const n=(e=e.getTime())-t;return e=>new Date(t+e*n)}const n=Object.keys(e),o={};return n.forEach((n=>{o[n]=ul(t[n],e[n])})),t=>{const e={};return n.forEach((n=>{e[n]=o[n](t)})),e}}if("number"===n){const n=e-t;return e=>t+e*n}throw new Error(`Cannot interpolate ${n} values`)}function ll(t,o={}){const r=gt(t);let i,a=t;function s(s,c){if(null==t)return r.set(t=s),Promise.resolve();a=s;let u=i,l=!1,{delay:h=0,duration:d=400,easing:m=e,interpolate:x=ul}=n(n({},o),c);if(0===d)return u&&(u.abort(),u=null),r.set(t=a),Promise.resolve();const v=f()+h;let k;return i=function(t){let e;return 0===p.size&&y(g),{promise:new Promise((n=>{p.add(e={c:t,f:n})})),abort(){p.delete(e)}}}((e=>{if(e<v)return!0;l||(k=x(t,s),"function"==typeof d&&(d=d(t,s)),l=!0),u&&(u.abort(),u=null);const n=e-v;return n>d?(r.set(t=s),!1):(r.set(t=k(m(n/d))),!0)})),i.promise}return{set:s,update:(e,n)=>s(e(a,t),n),subscribe:r.subscribe}}function hl(t,e,n){if(dr(n)||dr(e))return gt(e);if(n.constructor===Number){return ll(e,dl(t,n))}if(n.constructor===Object){if(!(t in n))return gt(e);const o=n[t];if(o&&o.constructor===Number){return ll(e,dl(t,o))}if(o&&o.constructor===Object){return ll(e,function(t,e){if("geometry"===t){const t={delay:0,duration:400,easing:sl,interpolate:Os};return Object.assign(t,e)}{const t={delay:0,duration:400,easing:sl,interpolate:De};return Object.assign(t,e)}}(t,o))}}throw new Error(`Invalid transition for ${t}`)}function dl(t,e){return"geometry"===t?{duration:e,easing:sl,interpolate:Os}:{duration:e,easing:sl,interpolate:De}}function fl(t,e){return void 0===t||void 0===e||t.constructor!==Object?t===e:function(t,e){if(e.constructor!==Object)return!1;if(pl(t)!==pl(e))return!1;for(const n in t){const o=t[n],r=e[n];if(o.constructor!==Object)return o===r;if(!yl(o,r))return!1}return!0}(t,e)}function yl(t,e){if(e.constructor!==Object)return!1;if(pl(t)!==pl(e))return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function pl(t){return Object.keys(t).length}function gl(t,e,n){if(dr(n)||dr(e))return gt(e);if(n.constructor===Number){return ll(e,ml(t,n))}if(n.constructor===Object){if(!(t in n))return gt(e);const o=n[t];if(o&&o.constructor===Number){return ll(e,ml(t,o))}if(o&&o.constructor===Object){return ll(e,function(t,e){return"geometry"===t?Object.assign({interpolate:Ns},e):Object.assign({interpolate:xl},e)}(t,o))}}throw new Error(`Invalid transition for ${t}`)}function ml(t,e){return"geometry"===t?{duration:e,easing:sl,interpolate:Ns}:{duration:e,easing:sl,interpolate:xl}}function xl(t,e){const n={};for(const o in t)o in e&&(n[o]=t[o]);return De(n,e)}function vl(...t){for(const e of t)if(void 0!==e)return!0;return!1}function kl(t){return Object.assign({simplify:!1,simplificationThreshold:1,interpolate:!0,interpolationThreshold:5,decimals:2},t)}const bl=ur();function Ml(t){return bl(t)}function _l(t){switch(t){case"center":return{textAnchor:"middle",dominantBaseline:"middle"};case"lb":return{textAnchor:"start",dominantBaseline:"alphabetic"};case"lt":return{textAnchor:"start",dominantBaseline:"hanging"};case"rt":return{textAnchor:"end",dominantBaseline:"hanging"};case"rb":return{textAnchor:"end",dominantBaseline:"alphabetic"};case"l":return{textAnchor:"start",dominantBaseline:"middle"};case"r":return{textAnchor:"end",dominantBaseline:"middle"};case"b":return{textAnchor:"middle",dominantBaseline:"alphabetic"};case"t":return{textAnchor:"middle",dominantBaseline:"hanging"};default:return{textAnchor:"middle",dominantBaseline:"middle"}}}function wl(t){let e,n,o,r,i=t[28]&&$l(t),a=t[29]&&Sl(t),s=t[30]&&Tl(t),c=t[31]&&Il(t);return{c(){i&&i.c(),e=w(),a&&a.c(),n=w(),s&&s.c(),o=w(),c&&c.c(),r=$()},m(t,u){i&&i.m(t,u),x(t,e,u),a&&a.m(t,u),x(t,n,u),s&&s.m(t,u),x(t,o,u),c&&c.m(t,u),x(t,r,u)},p(t,u){t[28]?i?i.p(t,u):(i=$l(t),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),t[29]?a?a.p(t,u):(a=Sl(t),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),t[30]?s?s.p(t,u):(s=Tl(t),s.c(),s.m(o.parentNode,o)):s&&(s.d(1),s=null),t[31]?c?c.p(t,u):(c=Il(t),c.c(),c.m(r.parentNode,r)):c&&(c.d(1),c=null)},d(t){i&&i.d(t),t&&v(e),a&&a.d(t),t&&v(n),s&&s.d(t),t&&v(o),c&&c.d(t),t&&v(r)}}}function $l(t){let e,n,o,r;return{c(){e=M("path"),T(e,"clip-path",n=t[2]?`url(#clip-${t[15].sectionId})`:"none"),T(e,"class",o=t[0].toLowerCase()),T(e,"d",r=Ml(t[16])),T(e,"fill",t[20]),T(e,"stroke",t[21]),T(e,"stroke-width",t[22]),T(e,"fill-opacity",t[23]),T(e,"stroke-opacity",t[24]),T(e,"opacity",t[25])},m(t,n){x(t,e,n)},p(t,i){32772&i[0]&&n!==(n=t[2]?`url(#clip-${t[15].sectionId})`:"none")&&T(e,"clip-path",n),1&i[0]&&o!==(o=t[0].toLowerCase())&&T(e,"class",o),65536&i[0]&&r!==(r=Ml(t[16]))&&T(e,"d",r),1048576&i[0]&&T(e,"fill",t[20]),2097152&i[0]&&T(e,"stroke",t[21]),4194304&i[0]&&T(e,"stroke-width",t[22]),8388608&i[0]&&T(e,"fill-opacity",t[23]),16777216&i[0]&&T(e,"stroke-opacity",t[24]),33554432&i[0]&&T(e,"opacity",t[25])},d(t){t&&v(e)}}}function Sl(t){let e,n,o,r;return{c(){e=M("circle"),T(e,"clip-path",n=t[2]?`url(#clip-${t[15].sectionId})`:"none"),T(e,"class","point"),T(e,"cx",o=t[16].coordinates[0]),T(e,"cy",r=t[16].coordinates[1]),T(e,"r",t[19]),T(e,"fill",t[20]),T(e,"stroke",t[21]),T(e,"stroke-width",t[22]),T(e,"fill-opacity",t[23]),T(e,"stroke-opacity",t[24]),T(e,"opacity",t[25])},m(t,n){x(t,e,n)},p(t,i){32772&i[0]&&n!==(n=t[2]?`url(#clip-${t[15].sectionId})`:"none")&&T(e,"clip-path",n),65536&i[0]&&o!==(o=t[16].coordinates[0])&&T(e,"cx",o),65536&i[0]&&r!==(r=t[16].coordinates[1])&&T(e,"cy",r),524288&i[0]&&T(e,"r",t[19]),1048576&i[0]&&T(e,"fill",t[20]),2097152&i[0]&&T(e,"stroke",t[21]),4194304&i[0]&&T(e,"stroke-width",t[22]),8388608&i[0]&&T(e,"fill-opacity",t[23]),16777216&i[0]&&T(e,"stroke-opacity",t[24]),33554432&i[0]&&T(e,"opacity",t[25])},d(t){t&&v(e)}}}function Tl(t){let e,n,o;return{c(){e=M("path"),T(e,"clip-path",n=t[2]?`url(#clip-${t[15].sectionId})`:"none"),T(e,"class","line"),T(e,"d",o=Ml(t[16])),T(e,"fill","none"),T(e,"stroke-width",t[22]),T(e,"stroke",t[21]),T(e,"opacity",t[25])},m(t,n){x(t,e,n)},p(t,r){32772&r[0]&&n!==(n=t[2]?`url(#clip-${t[15].sectionId})`:"none")&&T(e,"clip-path",n),65536&r[0]&&o!==(o=Ml(t[16]))&&T(e,"d",o),4194304&r[0]&&T(e,"stroke-width",t[22]),2097152&r[0]&&T(e,"stroke",t[21]),33554432&r[0]&&T(e,"opacity",t[25])},d(t){t&&v(e)}}}function Il(t){let e,n,o,r,i,a,s,c,u,l=t[3].text+"";return{c(){e=M("g"),n=M("text"),o=_(l),T(n,"class","label"),T(n,"x",r=t[16].coordinates[0]),T(n,"y",i=t[16].coordinates[1]),T(n,"fill",t[20]),T(n,"stroke",t[21]),T(n,"stroke-width",t[22]),T(n,"fill-opacity",t[23]),T(n,"stroke-opacity",t[24]),T(n,"opacity",t[25]),T(n,"transform",t[17]),T(n,"font-family",t[1]),T(n,"font-size",a=t[26]+"px"),T(n,"font-weight",t[27]),T(n,"text-anchor",s=t[18].textAnchor),T(n,"dominant-baseline",c=t[18].dominantBaseline),T(e,"clip-path",u=t[2]?`url(#clip-${t[15].sectionId})`:"none"),T(e,"class","label-group")},m(t,r){x(t,e,r),m(e,n),m(n,o)},p(t,h){8&h[0]&&l!==(l=t[3].text+"")&&C(o,l),65536&h[0]&&r!==(r=t[16].coordinates[0])&&T(n,"x",r),65536&h[0]&&i!==(i=t[16].coordinates[1])&&T(n,"y",i),1048576&h[0]&&T(n,"fill",t[20]),2097152&h[0]&&T(n,"stroke",t[21]),4194304&h[0]&&T(n,"stroke-width",t[22]),8388608&h[0]&&T(n,"fill-opacity",t[23]),16777216&h[0]&&T(n,"stroke-opacity",t[24]),33554432&h[0]&&T(n,"opacity",t[25]),131072&h[0]&&T(n,"transform",t[17]),2&h[0]&&T(n,"font-family",t[1]),67108864&h[0]&&a!==(a=t[26]+"px")&&T(n,"font-size",a),134217728&h[0]&&T(n,"font-weight",t[27]),262144&h[0]&&s!==(s=t[18].textAnchor)&&T(n,"text-anchor",s),262144&h[0]&&c!==(c=t[18].dominantBaseline)&&T(n,"dominant-baseline",c),32772&h[0]&&u!==(u=t[2]?`url(#clip-${t[15].sectionId})`:"none")&&T(e,"clip-path",u)},d(t){t&&v(e)}}}function Cl(e){let n,o="svg"===e[32].output(),r=o&&wl(e);return{c(){r&&r.c(),n=$()},m(t,e){r&&r.m(t,e),x(t,n,e)},p(t,e){2&e[1]&&(o="svg"===t[32].output()),o?r?r.p(t,e):(r=wl(t),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i:t,o:t,d(t){r&&r.d(t),t&&v(n)}}}let Ol=0;function Nl(e,n,o){let r,i,a,s,l,h,d,f,y,p,g,m,x,v,k,b,M,_,w,$,S,T=t,I=()=>(T(),T=c(de,(t=>o(80,y=t))),de),C=t,O=()=>(C(),C=c(ne,(t=>o(16,p=t))),ne),N=t,E=()=>(N(),N=c(oe,(t=>o(19,g=t))),oe),P=t,R=()=>(P(),P=c(re,(t=>o(20,m=t))),re),Y=t,z=()=>(Y(),Y=c(ie,(t=>o(21,x=t))),ie),X=t,q=()=>(X(),X=c(ae,(t=>o(22,v=t))),ae),F=t,H=()=>(F(),F=c(se,(t=>o(23,k=t))),se),B=t,G=()=>(B(),B=c(ce,(t=>o(24,b=t))),ce),D=t,Z=()=>(D(),D=c(ue,(t=>o(25,M=t))),ue),V=t,K=()=>(V(),V=c(le,(t=>o(26,_=t))),le),U=t,J=()=>(U(),U=c(he,(t=>o(27,w=t))),he);e.$$.on_destroy.push((()=>T())),e.$$.on_destroy.push((()=>C())),e.$$.on_destroy.push((()=>N())),e.$$.on_destroy.push((()=>P())),e.$$.on_destroy.push((()=>Y())),e.$$.on_destroy.push((()=>X())),e.$$.on_destroy.push((()=>F())),e.$$.on_destroy.push((()=>B())),e.$$.on_destroy.push((()=>D())),e.$$.on_destroy.push((()=>V())),e.$$.on_destroy.push((()=>U()));const Q="mark"+Ol++;let tt=!0;const et=()=>!tt;let{type:nt}=n,{x:ot}=n,{y:rt}=n,{x1:it}=n,{x2:at}=n,{y1:st}=n,{y2:ct}=n,{geometry:ut}=n,{shape:lt}=n,{size:ht}=n,{independentAxis:dt}=n,{radius:ft}=n,{fill:yt}=n,{stroke:pt}=n,{strokeWidth:gt}=n,{strokeOpacity:mt}=n,{fillOpacity:xt}=n,{opacity:vt}=n,{text:kt}=n,{fontFamily:bt}=n,{fontSize:Mt}=n,{fontWeight:_t}=n,{rotation:wt}=n,{anchorPoint:$t}=n,{transition:St}=n,{onClick:Tt}=n,{onMousedown:It}=n,{onMouseup:Ct}=n,{onMouseover:Ot}=n,{onMouseout:Nt}=n,{onMousedrag:Et}=n,{onTouchdown:Pt}=n,{onTouchup:Lt}=n,{onTouchover:At}=n,{onTouchout:jt}=n,{onTouchdrag:Wt}=n,{onSelect:Rt}=n,{onDeselect:zt}=n,{renderSettings:Xt}=n,{blockReindexing:Ft=!1}=n,{_asPolygon:Ht=!0}=n,{clip:Bt=!0}=n,Gt=mu(nt,{x:ot,y:rt,x1:it,x2:at,y1:st,y2:ct,geometry:ut,shape:lt,size:ht,independentAxis:dt,radius:ft,fill:yt,stroke:pt,strokeWidth:gt,strokeOpacity:mt,fillOpacity:xt,opacity:vt,text:kt,fontFamily:bt,fontSize:Mt,fontWeight:_t,rotation:wt,anchorPoint:$t}),Dt={x:ot,y:rt,x1:it,x2:at,y1:st,y2:ct,geometry:ut,shape:lt,size:ht,independentAxis:dt},Zt=Gu[nt],Vt=il[nt],Kt=!0===Ht&&void 0!==il[nt];const Ut=qt();u(e,Ut,(t=>o(32,S=t)));const Jt=On();u(e,Jt,(t=>o(15,f=t)));const Qt=Pn();let te,ee;u(e,Qt,(t=>o(89,$=t))),xe(),ve();let ne=hl("geometry",ee,St);O();let oe=hl("radius",Gt.radius,St);E();let re=hl("fill",Gt.fill,St);R();let ie=hl("stroke",Gt.stroke,St);z();let ae=hl("strokeWidth",Gt.strokeWidth,St);q();let se=hl("fillOpacity",Gt.fillOpacity,St);H();let ce=hl("strokeOpacity",Gt.strokeOpacity,St);G();let ue=hl("opacity",Gt.opacity,St);Z();let le=hl("fontSize",Gt.fontSize,St);K();let he=hl("fontWeight",Gt.fontWeight,St);J();let de=hl("rotation",Gt.rotation,St);I();let fe,ye=`rotate(${y}, ${p.coordinates[0]}, ${p.coordinates[1]})`,pe=_l(Gt.anchorPoint),ge=!1,me=!1;function xe(){te=Zt(Dt,f,kl(Xt))}function ve(){o(77,ee=Kt?Vt(te,Gt):te)}function ke(){if(tt||!Ft&&!f.blockReindexing){if(be(),r){const t=$.mouse().marks();t.loadMark(nt,Me()),Tt&&t.addMarkInteraction("click",Q,Tt),It&&t.addMarkInteraction("mousedown",Q,It),Ct&&t.addMarkInteraction("mouseup",Q,Ct),Nt&&t.addMarkInteraction("mouseout",Q,Nt),Ot&&t.addMarkInteraction("mouseover",Q,Ot),Et&&t.addMarkInteraction("mousedrag",Q,Et)}if(i){const t=$.touch().marks();t.loadMark(nt,Me()),Pt&&t.addMarkInteraction("touchdown",Q,Pt),Lt&&t.addMarkInteraction("touchup",Q,Lt),At&&t.addMarkInteraction("touchover",Q,At),jt&&t.addMarkInteraction("touchout",Q,jt),Wt&&t.addMarkInteraction("touchdrag",Q,Wt)}}if(function(){const t=$.select();t.markIsLoaded(Q)&&t.removeMark(Q)}(),a){$.select().loadMark(nt,Me(),{onSelect:Rt,onDeselect:zt})}}function be(){if("mouse"===Yt){const t=$.mouse().marks();t.markIsLoaded(Q)&&(t.removeAllMarkInteractions(Q),t.removeMark(Q))}if("touch"===Yt){const t=$.touch().marks();t.markIsLoaded(Q)&&(t.removeAllMarkInteractions(Q),t.removeMark(Q))}}function Me(){return function(t,e,n,o){const r={markId:e};let i;return"Point"===t&&(i={pixelGeometry:n.pixelGeometry,radius:o.radius}),"Label"===t&&(i={pixelGeometry:n.pixelGeometry,radius:o.fontSize}),"Rectangle"===t&&(i={screenGeometry:n.screenGeometry}),"Polygon"===t&&(i={screenGeometry:n.screenGeometry}),"Line"===t&&(i={pixelGeometry:n.pixelGeometry,strokeWidth:o.strokeWidth}),"Symbol"===t&&(i={screenGeometry:n.screenGeometry}),"Area"===t&&(i={screenGeometry:n.screenGeometry}),r.attributes=i,r}(nt,Q,{screenGeometry:ee,pixelGeometry:te},Gt)}return L((()=>{fl(fe,St)||(fe=St,O(o(4,ne=hl("geometry",p,St))),E(o(5,oe=hl("radius",g,St))),R(o(6,re=hl("fill",m,St))),z(o(7,ie=hl("stroke",x,St))),q(o(8,ae=hl("strokeWidth",v,St))),H(o(9,se=hl("fillOpacity",k,St))),G(o(10,ce=hl("strokeOpacity",b,St))),Z(o(11,ue=hl("opacity",M,St))),K(o(12,le=hl("fontSize",_,St))),J(o(13,he=hl("fontWeight",w,St))),I(o(14,de=hl("rotation",y,St))))})),j((()=>{tt=!1})),A((()=>{ke()})),W((()=>{be()})),e.$$set=t=>{"type"in t&&o(0,nt=t.type),"x"in t&&o(36,ot=t.x),"y"in t&&o(37,rt=t.y),"x1"in t&&o(38,it=t.x1),"x2"in t&&o(39,at=t.x2),"y1"in t&&o(40,st=t.y1),"y2"in t&&o(41,ct=t.y2),"geometry"in t&&o(42,ut=t.geometry),"shape"in t&&o(43,lt=t.shape),"size"in t&&o(44,ht=t.size),"independentAxis"in t&&o(45,dt=t.independentAxis),"radius"in t&&o(46,ft=t.radius),"fill"in t&&o(47,yt=t.fill),"stroke"in t&&o(48,pt=t.stroke),"strokeWidth"in t&&o(49,gt=t.strokeWidth),"strokeOpacity"in t&&o(50,mt=t.strokeOpacity),"fillOpacity"in t&&o(51,xt=t.fillOpacity),"opacity"in t&&o(52,vt=t.opacity),"text"in t&&o(53,kt=t.text),"fontFamily"in t&&o(1,bt=t.fontFamily),"fontSize"in t&&o(54,Mt=t.fontSize),"fontWeight"in t&&o(55,_t=t.fontWeight),"rotation"in t&&o(56,wt=t.rotation),"anchorPoint"in t&&o(57,$t=t.anchorPoint),"transition"in t&&o(58,St=t.transition),"onClick"in t&&o(59,Tt=t.onClick),"onMousedown"in t&&o(60,It=t.onMousedown),"onMouseup"in t&&o(61,Ct=t.onMouseup),"onMouseover"in t&&o(62,Ot=t.onMouseover),"onMouseout"in t&&o(63,Nt=t.onMouseout),"onMousedrag"in t&&o(64,Et=t.onMousedrag),"onTouchdown"in t&&o(65,Pt=t.onTouchdown),"onTouchup"in t&&o(66,Lt=t.onTouchup),"onTouchover"in t&&o(67,At=t.onTouchover),"onTouchout"in t&&o(68,jt=t.onTouchout),"onTouchdrag"in t&&o(69,Wt=t.onTouchdrag),"onSelect"in t&&o(70,Rt=t.onSelect),"onDeselect"in t&&o(71,zt=t.onDeselect),"renderSettings"in t&&o(72,Xt=t.renderSettings),"blockReindexing"in t&&o(73,Ft=t.blockReindexing),"_asPolygon"in t&&o(74,Ht=t._asPolygon),"clip"in t&&o(2,Bt=t.clip)},e.$$.update=()=>{3&e.$$.dirty[0]|134217696&e.$$.dirty[1]&&et()&&o(3,Gt=mu(nt,{x:ot,y:rt,x1:it,x2:at,y1:st,y2:ct,geometry:ut,shape:lt,size:ht,independentAxis:dt,radius:ft,fill:yt,stroke:pt,strokeWidth:gt,strokeOpacity:mt,fillOpacity:xt,opacity:vt,text:kt,fontFamily:bt,fontSize:Mt,fontWeight:_t,rotation:wt,anchorPoint:$t})),32736&e.$$.dirty[1]&&et()&&o(75,Dt={x:ot,y:rt,x1:it,x2:at,y1:st,y2:ct,geometry:ut,shape:lt,size:ht,independentAxis:dt}),1&e.$$.dirty[0]&&et()&&(Zt=Gu[nt],Vt=il[nt]),1&e.$$.dirty[0]|4096&e.$$.dirty[2]&&et()&&o(76,Kt=!0===Ht&&void 0!==il[nt]),32768&e.$$.dirty[0]|9216&e.$$.dirty[2]&&et()&&(kl(Xt),o(78,ge=!0),o(79,me=!0)),296&e.$$.dirty[0]|16384&e.$$.dirty[2]&&et()&&(Kt||(oe.set(Gt.radius),ae.set(Gt.strokeWidth)),Kt&&o(79,me=!0)),72&e.$$.dirty[0]&&et()&&re.set(Gt.fill),136&e.$$.dirty[0]&&et()&&ie.set(Gt.stroke),264&e.$$.dirty[0]&&et()&&ae.set(Gt.strokeWidth),520&e.$$.dirty[0]&&et()&&se.set(Gt.fillOpacity),1032&e.$$.dirty[0]&&et()&&ce.set(Gt.strokeOpacity),2056&e.$$.dirty[0]&&et()&&ue.set(Gt.opacity),4104&e.$$.dirty[0]&&et()&&le.set(Gt.fontSize),8200&e.$$.dirty[0]&&et()&&he.set(Gt.fontWeight),16392&e.$$.dirty[0]&&et()&&de.set(Gt.rotation),16&e.$$.dirty[0]|229376&e.$$.dirty[2]&&et()&&(ge&&xe(),me&&(ve(),ne.set(ee),ke()),o(78,ge=!1),o(79,me=!1)),65536&e.$$.dirty[0]|262144&e.$$.dirty[2]&&et()&&o(17,ye=`rotate(${y}, ${p.coordinates[0]}, ${p.coordinates[1]})`),8&e.$$.dirty[0]&&et()&&o(18,pe=_l(Gt.anchorPoint)),1879048192&e.$$.dirty[1]|7&e.$$.dirty[2]&&(r="mouse"===Yt&&vl(Tt,It,Ct,Ot,Nt,Et)),248&e.$$.dirty[2]&&(i="touch"===Yt&&vl(Pt,Lt,At,jt,Wt)),768&e.$$.dirty[2]&&(a=void 0!==Rt||void 0!==zt),1&e.$$.dirty[0]|16384&e.$$.dirty[2]&&o(28,s=!["Point","Line","Label"].includes(nt)||Kt),1&e.$$.dirty[0]|16384&e.$$.dirty[2]&&o(29,l="Point"===nt&&!Kt),1&e.$$.dirty[0]|16384&e.$$.dirty[2]&&o(30,h="Line"===nt&&!Kt),1&e.$$.dirty[0]&&o(31,d="Label"===nt)},[nt,bt,Bt,Gt,ne,oe,re,ie,ae,se,ce,ue,le,he,de,f,p,ye,pe,g,m,x,v,k,b,M,_,w,s,l,h,d,S,Ut,Jt,Qt,ot,rt,it,at,st,ct,ut,lt,ht,dt,ft,yt,pt,gt,mt,xt,vt,kt,Mt,_t,wt,$t,St,Tt,It,Ct,Ot,Nt,Et,Pt,Lt,At,jt,Wt,Rt,zt,Xt,Ft,Ht,Dt,Kt,ee,ge,me,y]}class El extends yt{constructor(t){super(),ft(this,t,Nl,Cl,s,{type:0,x:36,y:37,x1:38,x2:39,y1:40,y2:41,geometry:42,shape:43,size:44,independentAxis:45,radius:46,fill:47,stroke:48,strokeWidth:49,strokeOpacity:50,fillOpacity:51,opacity:52,text:53,fontFamily:1,fontSize:54,fontWeight:55,rotation:56,anchorPoint:57,transition:58,onClick:59,onMousedown:60,onMouseup:61,onMouseover:62,onMouseout:63,onMousedrag:64,onTouchdown:65,onTouchup:66,onTouchover:67,onTouchout:68,onTouchdrag:69,onSelect:70,onDeselect:71,renderSettings:72,blockReindexing:73,_asPolygon:74,clip:2},[-1,-1,-1,-1])}}function Pl(t){let e,n;return e=new El({props:{type:"Point",x:t[0],y:t[1],geometry:t[2],radius:t[3],fill:t[4],stroke:t[5],strokeWidth:t[6],strokeOpacity:t[7],fillOpacity:t[8],opacity:t[9],transition:t[10],onClick:t[11],onMousedown:t[12],onMouseup:t[13],onMouseover:t[14],onMouseout:t[15],onMousedrag:t[16],onTouchdown:t[17],onTouchup:t[18],onTouchover:t[19],onTouchout:t[20],onTouchdrag:t[21],onSelect:t[22],onDeselect:t[23],renderSettings:t[24],blockReindexing:t[25],clip:t[26],_asPolygon:!1}}),{c(){lt(e.$$.fragment)},m(t,o){ht(e,t,o),n=!0},p(t,[n]){const o={};1&n&&(o.x=t[0]),2&n&&(o.y=t[1]),4&n&&(o.geometry=t[2]),8&n&&(o.radius=t[3]),16&n&&(o.fill=t[4]),32&n&&(o.stroke=t[5]),64&n&&(o.strokeWidth=t[6]),128&n&&(o.strokeOpacity=t[7]),256&n&&(o.fillOpacity=t[8]),512&n&&(o.opacity=t[9]),1024&n&&(o.transition=t[10]),2048&n&&(o.onClick=t[11]),4096&n&&(o.onMousedown=t[12]),8192&n&&(o.onMouseup=t[13]),16384&n&&(o.onMouseover=t[14]),32768&n&&(o.onMouseout=t[15]),65536&n&&(o.onMousedrag=t[16]),131072&n&&(o.onTouchdown=t[17]),262144&n&&(o.onTouchup=t[18]),524288&n&&(o.onTouchover=t[19]),1048576&n&&(o.onTouchout=t[20]),2097152&n&&(o.onTouchdrag=t[21]),4194304&n&&(o.onSelect=t[22]),8388608&n&&(o.onDeselect=t[23]),16777216&n&&(o.renderSettings=t[24]),33554432&n&&(o.blockReindexing=t[25]),67108864&n&&(o.clip=t[26]),e.$set(o)},i(t){n||(ot(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){dt(e,t)}}}function Ll(t,e,n){let{x:o}=e,{y:r}=e,{geometry:i}=e,{radius:a}=e,{fill:s}=e,{stroke:c}=e,{strokeWidth:u}=e,{strokeOpacity:l}=e,{fillOpacity:h}=e,{opacity:d}=e,{transition:f}=e,{onClick:y}=e,{onMousedown:p}=e,{onMouseup:g}=e,{onMouseover:m}=e,{onMouseout:x}=e,{onMousedrag:v}=e,{onTouchdown:k}=e,{onTouchup:b}=e,{onTouchover:M}=e,{onTouchout:_}=e,{onTouchdrag:w}=e,{onSelect:$}=e,{onDeselect:S}=e,{renderSettings:T}=e,{blockReindexing:I=!1}=e,{clip:C=!0}=e;return t.$$set=t=>{"x"in t&&n(0,o=t.x),"y"in t&&n(1,r=t.y),"geometry"in t&&n(2,i=t.geometry),"radius"in t&&n(3,a=t.radius),"fill"in t&&n(4,s=t.fill),"stroke"in t&&n(5,c=t.stroke),"strokeWidth"in t&&n(6,u=t.strokeWidth),"strokeOpacity"in t&&n(7,l=t.strokeOpacity),"fillOpacity"in t&&n(8,h=t.fillOpacity),"opacity"in t&&n(9,d=t.opacity),"transition"in t&&n(10,f=t.transition),"onClick"in t&&n(11,y=t.onClick),"onMousedown"in t&&n(12,p=t.onMousedown),"onMouseup"in t&&n(13,g=t.onMouseup),"onMouseover"in t&&n(14,m=t.onMouseover),"onMouseout"in t&&n(15,x=t.onMouseout),"onMousedrag"in t&&n(16,v=t.onMousedrag),"onTouchdown"in t&&n(17,k=t.onTouchdown),"onTouchup"in t&&n(18,b=t.onTouchup),"onTouchover"in t&&n(19,M=t.onTouchover),"onTouchout"in t&&n(20,_=t.onTouchout),"onTouchdrag"in t&&n(21,w=t.onTouchdrag),"onSelect"in t&&n(22,$=t.onSelect),"onDeselect"in t&&n(23,S=t.onDeselect),"renderSettings"in t&&n(24,T=t.renderSettings),"blockReindexing"in t&&n(25,I=t.blockReindexing),"clip"in t&&n(26,C=t.clip)},[o,r,i,a,s,c,u,l,h,d,f,y,p,g,m,x,v,k,b,M,_,w,$,S,T,I,C]}class Al extends yt{constructor(t){super(),ft(this,t,Ll,Pl,s,{x:0,y:1,geometry:2,radius:3,fill:4,stroke:5,strokeWidth:6,strokeOpacity:7,fillOpacity:8,opacity:9,transition:10,onClick:11,onMousedown:12,onMouseup:13,onMouseover:14,onMouseout:15,onMousedrag:16,onTouchdown:17,onTouchup:18,onTouchover:19,onTouchout:20,onTouchdrag:21,onSelect:22,onDeselect:23,renderSettings:24,blockReindexing:25,clip:26})}}function jl(t){let e,n;return e=new El({props:{type:"Line",x:t[0],y:t[1],geometry:t[2],strokeWidth:t[3],stroke:t[4],opacity:t[5],transition:t[6],onClick:t[7],onMousedown:t[8],onMouseup:t[9],onMouseover:t[10],onMouseout:t[11],onMousedrag:t[12],onTouchdown:t[13],onTouchup:t[14],onTouchover:t[15],onTouchout:t[16],onTouchdrag:t[17],onSelect:t[18],onDeselect:t[19],renderSettings:t[20],blockReindexing:t[21],clip:t[22],_asPolygon:!1}}),{c(){lt(e.$$.fragment)},m(t,o){ht(e,t,o),n=!0},p(t,[n]){const o={};1&n&&(o.x=t[0]),2&n&&(o.y=t[1]),4&n&&(o.geometry=t[2]),8&n&&(o.strokeWidth=t[3]),16&n&&(o.stroke=t[4]),32&n&&(o.opacity=t[5]),64&n&&(o.transition=t[6]),128&n&&(o.onClick=t[7]),256&n&&(o.onMousedown=t[8]),512&n&&(o.onMouseup=t[9]),1024&n&&(o.onMouseover=t[10]),2048&n&&(o.onMouseout=t[11]),4096&n&&(o.onMousedrag=t[12]),8192&n&&(o.onTouchdown=t[13]),16384&n&&(o.onTouchup=t[14]),32768&n&&(o.onTouchover=t[15]),65536&n&&(o.onTouchout=t[16]),131072&n&&(o.onTouchdrag=t[17]),262144&n&&(o.onSelect=t[18]),524288&n&&(o.onDeselect=t[19]),1048576&n&&(o.renderSettings=t[20]),2097152&n&&(o.blockReindexing=t[21]),4194304&n&&(o.clip=t[22]),e.$set(o)},i(t){n||(ot(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){dt(e,t)}}}function Wl(t,e,n){let{x:o}=e,{y:r}=e,{geometry:i}=e,{strokeWidth:a}=e,{stroke:s}=e,{opacity:c}=e,{transition:u}=e,{onClick:l}=e,{onMousedown:h}=e,{onMouseup:d}=e,{onMouseover:f}=e,{onMouseout:y}=e,{onMousedrag:p}=e,{onTouchdown:g}=e,{onTouchup:m}=e,{onTouchover:x}=e,{onTouchout:v}=e,{onTouchdrag:k}=e,{onSelect:b}=e,{onDeselect:M}=e,{renderSettings:_}=e,{blockReindexing:w=!1}=e,{clip:$=!0}=e;return t.$$set=t=>{"x"in t&&n(0,o=t.x),"y"in t&&n(1,r=t.y),"geometry"in t&&n(2,i=t.geometry),"strokeWidth"in t&&n(3,a=t.strokeWidth),"stroke"in t&&n(4,s=t.stroke),"opacity"in t&&n(5,c=t.opacity),"transition"in t&&n(6,u=t.transition),"onClick"in t&&n(7,l=t.onClick),"onMousedown"in t&&n(8,h=t.onMousedown),"onMouseup"in t&&n(9,d=t.onMouseup),"onMouseover"in t&&n(10,f=t.onMouseover),"onMouseout"in t&&n(11,y=t.onMouseout),"onMousedrag"in t&&n(12,p=t.onMousedrag),"onTouchdown"in t&&n(13,g=t.onTouchdown),"onTouchup"in t&&n(14,m=t.onTouchup),"onTouchover"in t&&n(15,x=t.onTouchover),"onTouchout"in t&&n(16,v=t.onTouchout),"onTouchdrag"in t&&n(17,k=t.onTouchdrag),"onSelect"in t&&n(18,b=t.onSelect),"onDeselect"in t&&n(19,M=t.onDeselect),"renderSettings"in t&&n(20,_=t.renderSettings),"blockReindexing"in t&&n(21,w=t.blockReindexing),"clip"in t&&n(22,$=t.clip)},[o,r,i,a,s,c,u,l,h,d,f,y,p,g,m,x,v,k,b,M,_,w,$]}class Rl extends yt{constructor(t){super(),ft(this,t,Wl,jl,s,{x:0,y:1,geometry:2,strokeWidth:3,stroke:4,opacity:5,transition:6,onClick:7,onMousedown:8,onMouseup:9,onMouseover:10,onMouseout:11,onMousedrag:12,onTouchdown:13,onTouchup:14,onTouchover:15,onTouchout:16,onTouchdrag:17,onSelect:18,onDeselect:19,renderSettings:20,blockReindexing:21,clip:22})}}function Yl(t){let e,n;return e=new El({props:{type:"Label",x:t[0],y:t[1],geometry:t[2],fill:t[3],stroke:t[4],strokeWidth:t[5],strokeOpacity:t[6],fillOpacity:t[7],opacity:t[8],text:t[9],fontFamily:t[10],fontSize:t[11],fontWeight:t[12],rotation:t[13],anchorPoint:t[14],transition:t[15],onClick:t[16],onMousedown:t[17],onMouseup:t[18],onMouseover:t[19],onMouseout:t[20],onMousedrag:t[21],onTouchdown:t[22],onTouchup:t[23],onTouchover:t[24],onTouchout:t[25],onTouchdrag:t[26],onSelect:t[27],onDeselect:t[28],renderSettings:t[29],blockReindexing:t[30],clip:t[31],_asPolygon:!1}}),{c(){lt(e.$$.fragment)},m(t,o){ht(e,t,o),n=!0},p(t,n){const o={};1&n[0]&&(o.x=t[0]),2&n[0]&&(o.y=t[1]),4&n[0]&&(o.geometry=t[2]),8&n[0]&&(o.fill=t[3]),16&n[0]&&(o.stroke=t[4]),32&n[0]&&(o.strokeWidth=t[5]),64&n[0]&&(o.strokeOpacity=t[6]),128&n[0]&&(o.fillOpacity=t[7]),256&n[0]&&(o.opacity=t[8]),512&n[0]&&(o.text=t[9]),1024&n[0]&&(o.fontFamily=t[10]),2048&n[0]&&(o.fontSize=t[11]),4096&n[0]&&(o.fontWeight=t[12]),8192&n[0]&&(o.rotation=t[13]),16384&n[0]&&(o.anchorPoint=t[14]),32768&n[0]&&(o.transition=t[15]),65536&n[0]&&(o.onClick=t[16]),131072&n[0]&&(o.onMousedown=t[17]),262144&n[0]&&(o.onMouseup=t[18]),524288&n[0]&&(o.onMouseover=t[19]),1048576&n[0]&&(o.onMouseout=t[20]),2097152&n[0]&&(o.onMousedrag=t[21]),4194304&n[0]&&(o.onTouchdown=t[22]),8388608&n[0]&&(o.onTouchup=t[23]),16777216&n[0]&&(o.onTouchover=t[24]),33554432&n[0]&&(o.onTouchout=t[25]),67108864&n[0]&&(o.onTouchdrag=t[26]),134217728&n[0]&&(o.onSelect=t[27]),268435456&n[0]&&(o.onDeselect=t[28]),536870912&n[0]&&(o.renderSettings=t[29]),1073741824&n[0]&&(o.blockReindexing=t[30]),1&n[1]&&(o.clip=t[31]),e.$set(o)},i(t){n||(ot(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){dt(e,t)}}}function zl(t,e,n){let{x:o}=e,{y:r}=e,{geometry:i}=e,{fill:a}=e,{stroke:s}=e,{strokeWidth:c}=e,{strokeOpacity:u}=e,{fillOpacity:l}=e,{opacity:h}=e,{text:d}=e,{fontFamily:f}=e,{fontSize:y}=e,{fontWeight:p}=e,{rotation:g}=e,{anchorPoint:m}=e,{transition:x}=e,{onClick:v}=e,{onMousedown:k}=e,{onMouseup:b}=e,{onMouseover:M}=e,{onMouseout:_}=e,{onMousedrag:w}=e,{onTouchdown:$}=e,{onTouchup:S}=e,{onTouchover:T}=e,{onTouchout:I}=e,{onTouchdrag:C}=e,{onSelect:O}=e,{onDeselect:N}=e,{renderSettings:E}=e,{blockReindexing:P=!1}=e,{clip:L=!0}=e;return t.$$set=t=>{"x"in t&&n(0,o=t.x),"y"in t&&n(1,r=t.y),"geometry"in t&&n(2,i=t.geometry),"fill"in t&&n(3,a=t.fill),"stroke"in t&&n(4,s=t.stroke),"strokeWidth"in t&&n(5,c=t.strokeWidth),"strokeOpacity"in t&&n(6,u=t.strokeOpacity),"fillOpacity"in t&&n(7,l=t.fillOpacity),"opacity"in t&&n(8,h=t.opacity),"text"in t&&n(9,d=t.text),"fontFamily"in t&&n(10,f=t.fontFamily),"fontSize"in t&&n(11,y=t.fontSize),"fontWeight"in t&&n(12,p=t.fontWeight),"rotation"in t&&n(13,g=t.rotation),"anchorPoint"in t&&n(14,m=t.anchorPoint),"transition"in t&&n(15,x=t.transition),"onClick"in t&&n(16,v=t.onClick),"onMousedown"in t&&n(17,k=t.onMousedown),"onMouseup"in t&&n(18,b=t.onMouseup),"onMouseover"in t&&n(19,M=t.onMouseover),"onMouseout"in t&&n(20,_=t.onMouseout),"onMousedrag"in t&&n(21,w=t.onMousedrag),"onTouchdown"in t&&n(22,$=t.onTouchdown),"onTouchup"in t&&n(23,S=t.onTouchup),"onTouchover"in t&&n(24,T=t.onTouchover),"onTouchout"in t&&n(25,I=t.onTouchout),"onTouchdrag"in t&&n(26,C=t.onTouchdrag),"onSelect"in t&&n(27,O=t.onSelect),"onDeselect"in t&&n(28,N=t.onDeselect),"renderSettings"in t&&n(29,E=t.renderSettings),"blockReindexing"in t&&n(30,P=t.blockReindexing),"clip"in t&&n(31,L=t.clip)},[o,r,i,a,s,c,u,l,h,d,f,y,p,g,m,x,v,k,b,M,_,w,$,S,T,I,C,O,N,E,P,L]}class Xl extends yt{constructor(t){super(),ft(this,t,zl,Yl,s,{x:0,y:1,geometry:2,fill:3,stroke:4,strokeWidth:5,strokeOpacity:6,fillOpacity:7,opacity:8,text:9,fontFamily:10,fontSize:11,fontWeight:12,rotation:13,anchorPoint:14,transition:15,onClick:16,onMousedown:17,onMouseup:18,onMouseover:19,onMouseout:20,onMousedrag:21,onTouchdown:22,onTouchup:23,onTouchover:24,onTouchout:25,onTouchdrag:26,onSelect:27,onDeselect:28,renderSettings:29,blockReindexing:30,clip:31},[-1,-1])}}function ql(t,e){const n={};if(hr(t))if(t.constructor===Array)for(let o=0;o<e.length;o++){n[e[o]]=t[o]}else if(t.constructor===Function)for(let o=0;o<e.length;o++){const r=e[o];n[r]=t({key:r,index:o})}else for(let o=0;o<e.length;o++){n[e[o]]=t}return n}function Fl(t,e,n){const o=t.slice();return o[115]=e[n],o}function Hl(t,e,n){const o=t.slice();return o[115]=e[n],o}function Bl(t,e,n){const o=t.slice();return o[115]=e[n],o}function Gl(t,e,n){const o=t.slice();return o[115]=e[n],o}function Dl(t){let e,n,o,r=t[28]&&Zl(t),i=t[29]&&Kl(t),a=t[30]&&Jl(t);return{c(){r&&r.c(),e=w(),i&&i.c(),n=w(),a&&a.c(),o=$()},m(t,s){r&&r.m(t,s),x(t,e,s),i&&i.m(t,s),x(t,n,s),a&&a.m(t,s),x(t,o,s)},p(t,s){t[28]?r?r.p(t,s):(r=Zl(t),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),t[29]?i?i.p(t,s):(i=Kl(t),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null),t[30]?a?a.p(t,s):(a=Jl(t),a.c(),a.m(o.parentNode,o)):a&&(a.d(1),a=null)},d(t){r&&r.d(t),t&&v(e),i&&i.d(t),t&&v(n),a&&a.d(t),t&&v(o)}}}function Zl(t){let e,n,o,r=[],i=new Map,a=Object.keys(t[17]);const s=t=>t[115];for(let e=0;e<a.length;e+=1){let n=Gl(t,a,e),o=s(n);i.set(o,r[e]=Vl(o,n))}return{c(){e=M("g");for(let t=0;t<r.length;t+=1)r[t].c();T(e,"clip-path",n=t[1]?`url(#clip-${t[12].sectionId})`:"none"),T(e,"class",o=`${t[0].toLowerCase()}-layer`)},m(t,n){x(t,e,n);for(let t=0;t<r.length;t+=1)r[t].m(e,null)},p(t,c){33161217&c[0]&&(a=Object.keys(t[17]),r=st(r,c,s,1,t,a,i,e,at,Vl,null,Gl)),4098&c[0]&&n!==(n=t[1]?`url(#clip-${t[12].sectionId})`:"none")&&T(e,"clip-path",n),1&c[0]&&o!==(o=`${t[0].toLowerCase()}-layer`)&&T(e,"class",o)},d(t){t&&v(e);for(let t=0;t<r.length;t+=1)r[t].d()}}}function Vl(t,e){let n,o,r,i,a,s,c,u,l;return{key:t,first:null,c(){n=M("path"),T(n,"class",o=e[0].toLowerCase()),T(n,"d",r=Ml(e[17][e[115]])),T(n,"fill",i=e[19][e[115]]),T(n,"stroke",a=e[20][e[115]]),T(n,"stroke-width",s=e[21][e[115]]),T(n,"fill-opacity",c=e[23][e[115]]),T(n,"stroke-opacity",u=e[22][e[115]]),T(n,"opacity",l=e[24][e[115]]),this.first=n},m(t,e){x(t,n,e)},p(t,h){e=t,1&h[0]&&o!==(o=e[0].toLowerCase())&&T(n,"class",o),131072&h[0]&&r!==(r=Ml(e[17][e[115]]))&&T(n,"d",r),655360&h[0]&&i!==(i=e[19][e[115]])&&T(n,"fill",i),1179648&h[0]&&a!==(a=e[20][e[115]])&&T(n,"stroke",a),2228224&h[0]&&s!==(s=e[21][e[115]])&&T(n,"stroke-width",s),8519680&h[0]&&c!==(c=e[23][e[115]])&&T(n,"fill-opacity",c),4325376&h[0]&&u!==(u=e[22][e[115]])&&T(n,"stroke-opacity",u),16908288&h[0]&&l!==(l=e[24][e[115]])&&T(n,"opacity",l)},d(t){t&&v(n)}}}function Kl(t){let e,n,o=[],r=new Map,i=Object.keys(t[17]);const a=t=>t[115];for(let e=0;e<i.length;e+=1){let n=Bl(t,i,e),s=a(n);r.set(s,o[e]=Ul(s,n))}return{c(){e=M("g");for(let t=0;t<o.length;t+=1)o[t].c();T(e,"clip-path",n=t[1]?`url(#clip-${t[12].sectionId})`:"none"),T(e,"class","point-layer")},m(t,n){x(t,e,n);for(let t=0;t<o.length;t+=1)o[t].m(e,null)},p(t,s){33423360&s[0]&&(i=Object.keys(t[17]),o=st(o,s,a,1,t,i,r,e,at,Ul,null,Bl)),4098&s[0]&&n!==(n=t[1]?`url(#clip-${t[12].sectionId})`:"none")&&T(e,"clip-path",n)},d(t){t&&v(e);for(let t=0;t<o.length;t+=1)o[t].d()}}}function Ul(t,e){let n,o,r,i,a,s,c,u,l,h;return{key:t,first:null,c(){n=M("circle"),T(n,"class","point"),T(n,"cx",o=e[17][e[115]].coordinates[0]),T(n,"cy",r=e[17][e[115]].coordinates[1]),T(n,"r",i=e[18][e[115]]),T(n,"fill",a=e[19][e[115]]),T(n,"stroke",s=e[20][e[115]]),T(n,"stroke-width",c=e[21][e[115]]),T(n,"fill-opacity",u=e[23][e[115]]),T(n,"stroke-opacity",l=e[22][e[115]]),T(n,"opacity",h=e[24][e[115]]),this.first=n},m(t,e){x(t,n,e)},p(t,d){e=t,131072&d[0]&&o!==(o=e[17][e[115]].coordinates[0])&&T(n,"cx",o),131072&d[0]&&r!==(r=e[17][e[115]].coordinates[1])&&T(n,"cy",r),393216&d[0]&&i!==(i=e[18][e[115]])&&T(n,"r",i),655360&d[0]&&a!==(a=e[19][e[115]])&&T(n,"fill",a),1179648&d[0]&&s!==(s=e[20][e[115]])&&T(n,"stroke",s),2228224&d[0]&&c!==(c=e[21][e[115]])&&T(n,"stroke-width",c),8519680&d[0]&&u!==(u=e[23][e[115]])&&T(n,"fill-opacity",u),4325376&d[0]&&l!==(l=e[22][e[115]])&&T(n,"stroke-opacity",l),16908288&d[0]&&h!==(h=e[24][e[115]])&&T(n,"opacity",h)},d(t){t&&v(n)}}}function Jl(t){let e,n,o=[],r=new Map,i=Object.keys(t[17]);const a=t=>t[115];for(let e=0;e<i.length;e+=1){let n=Hl(t,i,e),s=a(n);r.set(s,o[e]=Ql(s,n))}return{c(){e=M("g");for(let t=0;t<o.length;t+=1)o[t].c();T(e,"clip-path",n=t[1]?`url(#clip-${t[12].sectionId})`:"none"),T(e,"class","line-layer")},m(t,n){x(t,e,n);for(let t=0;t<o.length;t+=1)o[t].m(e,null)},p(t,s){20054016&s[0]&&(i=Object.keys(t[17]),o=st(o,s,a,1,t,i,r,e,at,Ql,null,Hl)),4098&s[0]&&n!==(n=t[1]?`url(#clip-${t[12].sectionId})`:"none")&&T(e,"clip-path",n)},d(t){t&&v(e);for(let t=0;t<o.length;t+=1)o[t].d()}}}function Ql(t,e){let n,o,r,i,a;return{key:t,first:null,c(){n=M("path"),T(n,"class","line"),T(n,"d",o=Ml(e[17][e[115]])),T(n,"fill","none"),T(n,"stroke-width",r=e[21][e[115]]),T(n,"stroke",i=e[20][e[115]]),T(n,"style",a=`opacity: ${e[24][e[115]]}`),this.first=n},m(t,e){x(t,n,e)},p(t,s){e=t,131072&s[0]&&o!==(o=Ml(e[17][e[115]]))&&T(n,"d",o),2228224&s[0]&&r!==(r=e[21][e[115]])&&T(n,"stroke-width",r),1179648&s[0]&&i!==(i=e[20][e[115]])&&T(n,"stroke",i),16908288&s[0]&&a!==(a=`opacity: ${e[24][e[115]]}`)&&T(n,"style",a)},d(t){t&&v(n)}}}function th(t){let e,n,o=[],r=new Map,i=Object.keys(t[17]);const a=t=>t[115];for(let e=0;e<i.length;e+=1){let n=Fl(t,i,e),s=a(n);r.set(s,o[e]=eh(s,n))}return{c(){e=M("g");for(let t=0;t<o.length;t+=1)o[t].c();T(e,"clip-path",n=t[1]?`url(#clip-${t[12].sectionId})`:"none"),T(e,"class","label-layer")},m(t,n){x(t,e,n);for(let t=0;t<o.length;t+=1)o[t].m(e,null)},p(t,s){268099584&s[0]&&(i=Object.keys(t[17]),o=st(o,s,a,1,t,i,r,e,at,eh,null,Fl)),4098&s[0]&&n!==(n=t[1]?`url(#clip-${t[12].sectionId})`:"none")&&T(e,"clip-path",n)},d(t){t&&v(e);for(let t=0;t<o.length;t+=1)o[t].d()}}}function eh(t,e){let n,o,r,i,a,s,c,u,l,h,d,f,y,p,g,k,b=e[13][e[115]]+"";return{key:t,first:null,c(){n=M("text"),o=_(b),T(n,"class","label"),T(n,"x",r=e[17][e[115]].coordinates[0]),T(n,"y",i=e[17][e[115]].coordinates[1]),T(n,"fill",a=e[19][e[115]]),T(n,"stroke",s=e[20][e[115]]),T(n,"stroke-width",c=e[21][e[115]]),T(n,"fill-opacity",u=e[23][e[115]]),T(n,"stroke-opacity",l=e[22][e[115]]),T(n,"opacity",h=e[24][e[115]]),T(n,"transform",d=`\n          rotate(${e[27][e[115]]}, \n          ${e[17][e[115]].coordinates[0]}, \n          ${e[17][e[115]].coordinates[1]})\n        `),T(n,"font-family",f=e[14][e[115]]),T(n,"font-size",y=e[25][e[115]]+"px"),T(n,"font-weight",p=e[26][e[115]]),T(n,"text-anchor",g=_l(e[15][e[115]]).textAnchor),T(n,"dominant-baseline",k=_l(e[15][e[115]]).dominantBaseline),this.first=n},m(t,e){x(t,n,e),m(n,o)},p(t,m){e=t,139264&m[0]&&b!==(b=e[13][e[115]]+"")&&C(o,b),131072&m[0]&&r!==(r=e[17][e[115]].coordinates[0])&&T(n,"x",r),131072&m[0]&&i!==(i=e[17][e[115]].coordinates[1])&&T(n,"y",i),655360&m[0]&&a!==(a=e[19][e[115]])&&T(n,"fill",a),1179648&m[0]&&s!==(s=e[20][e[115]])&&T(n,"stroke",s),2228224&m[0]&&c!==(c=e[21][e[115]])&&T(n,"stroke-width",c),8519680&m[0]&&u!==(u=e[23][e[115]])&&T(n,"fill-opacity",u),4325376&m[0]&&l!==(l=e[22][e[115]])&&T(n,"stroke-opacity",l),16908288&m[0]&&h!==(h=e[24][e[115]])&&T(n,"opacity",h),134348800&m[0]&&d!==(d=`\n          rotate(${e[27][e[115]]}, \n          ${e[17][e[115]].coordinates[0]}, \n          ${e[17][e[115]].coordinates[1]})\n        `)&&T(n,"transform",d),147456&m[0]&&f!==(f=e[14][e[115]])&&T(n,"font-family",f),33685504&m[0]&&y!==(y=e[25][e[115]]+"px")&&T(n,"font-size",y),67239936&m[0]&&p!==(p=e[26][e[115]])&&T(n,"font-weight",p),163840&m[0]&&g!==(g=_l(e[15][e[115]]).textAnchor)&&T(n,"text-anchor",g),163840&m[0]&&k!==(k=_l(e[15][e[115]]).dominantBaseline)&&T(n,"dominant-baseline",k)},d(t){t&&v(n)}}}function nh(e){let n,o,r="svg"===e[32].output(),i=r&&Dl(e),a=e[31]&&th(e);return{c(){i&&i.c(),n=w(),a&&a.c(),o=$()},m(t,e){i&&i.m(t,e),x(t,n,e),a&&a.m(t,e),x(t,o,e)},p(t,e){2&e[1]&&(r="svg"===t[32].output()),r?i?i.p(t,e):(i=Dl(t),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null),t[31]?a?a.p(t,e):(a=th(t),a.c(),a.m(o.parentNode,o)):a&&(a.d(1),a=null)},i:t,o:t,d(t){i&&i.d(t),t&&v(n),a&&a.d(t),t&&v(o)}}}let oh=0;function rh(e,n,o){let r,i,a,s,l,h,d,f,y,p,g,m,x,v,k,b,M,_,w,$,S,T=t,I=()=>(T(),T=c(ve,(t=>o(17,y=t))),ve),C=t,O=()=>(C(),C=c(ke,(t=>o(18,p=t))),ke),N=t,E=()=>(N(),N=c(be,(t=>o(19,g=t))),be),P=t,R=()=>(P(),P=c(Me,(t=>o(20,m=t))),Me),Y=t,z=()=>(Y(),Y=c(_e,(t=>o(21,x=t))),_e),X=t,q=()=>(X(),X=c(we,(t=>o(22,v=t))),we),F=t,H=()=>(F(),F=c($e,(t=>o(23,k=t))),$e),G=t,Z=()=>(G(),G=c(Se,(t=>o(24,b=t))),Se),V=t,K=()=>(V(),V=c(Te,(t=>o(25,M=t))),Te),U=t,J=()=>(U(),U=c(Ie,(t=>o(26,_=t))),Ie),Q=t,tt=()=>(Q(),Q=c(Oe,(t=>o(27,w=t))),Oe);e.$$.on_destroy.push((()=>T())),e.$$.on_destroy.push((()=>C())),e.$$.on_destroy.push((()=>N())),e.$$.on_destroy.push((()=>P())),e.$$.on_destroy.push((()=>Y())),e.$$.on_destroy.push((()=>X())),e.$$.on_destroy.push((()=>F())),e.$$.on_destroy.push((()=>G())),e.$$.on_destroy.push((()=>V())),e.$$.on_destroy.push((()=>U())),e.$$.on_destroy.push((()=>Q()));const et="layer"+oh++;let nt=!0;const ot=()=>!nt;let{type:rt}=n,{x:it}=n,{y:at}=n,{x1:st}=n,{x2:ct}=n,{y1:ut}=n,{y2:lt}=n,{geometry:ht}=n,{shape:dt}=n,{size:ft}=n,{independentAxis:yt}=n,{radius:pt}=n,{fill:gt}=n,{stroke:mt}=n,{strokeWidth:xt}=n,{strokeOpacity:vt}=n,{fillOpacity:kt}=n,{opacity:bt}=n,{text:Mt}=n,{fontFamily:_t}=n,{fontSize:wt}=n,{fontWeight:$t}=n,{rotation:St}=n,{anchorPoint:Tt}=n,{transition:It}=n,{onClick:Ct}=n,{onMousedown:Ot}=n,{onMouseup:Nt}=n,{onMouseover:Et}=n,{onMouseout:Pt}=n,{onMousedrag:Lt}=n,{onTouchdown:At}=n,{onTouchup:jt}=n,{onTouchover:Wt}=n,{onTouchout:Rt}=n,{onTouchdrag:zt}=n,{onSelect:Xt}=n,{onDeselect:Ft}=n,{key:Ht}=n,{renderSettings:Bt}=n,{blockReindexing:Gt=!1}=n,{_asPolygon:Dt=!0}=n,{clip:Zt}=n,Vt=mu(rt,{x:it,y:at,x1:st,x2:ct,y1:ut,y2:lt,geometry:ht,shape:dt,size:ft,independentAxis:yt,radius:pt,fill:gt,stroke:mt,strokeWidth:xt,strokeOpacity:vt,fillOpacity:kt,opacity:bt,text:Mt,fontFamily:_t,fontSize:wt,fontWeight:$t,rotation:St,anchorPoint:Tt}),Kt={x:it,y:at,x1:st,x2:ct,y1:ut,y2:lt,geometry:ht,shape:dt,size:ft,independentAxis:yt},Ut=Du[rt],Jt=al[rt],Qt=!0===Dt&&void 0!==al[rt];const te=qt();u(e,te,(t=>o(32,S=t)));const ee=On();u(e,ee,(t=>o(12,f=t)));const ne=Pn();let oe,re;u(e,ne,(t=>o(94,$=t))),Pe();let ie=Object.keys(oe),ae=ql(Vt.radius,ie);const se=ql(Vt.fill,ie),ce=ql(Vt.stroke,ie);let ue=ql(Vt.strokeWidth,ie);const le=ql(Vt.strokeOpacity,ie),he=ql(Vt.fillOpacity,ie),de=ql(Vt.opacity,ie);let fe=ql(Vt.text,ie),ye=ql(Vt.fontFamily,ie);const pe=ql(Vt.fontSize,ie),ge=ql(Vt.fontWeight,ie),me=ql(Vt.rotation,ie);let xe=ql(Vt.anchorPoint,ie);Le();let ve=gl("geometry",re,It);I();let ke=gl("radius",ae,It);O();let be=gl("fill",se,It);E();let Me=gl("stroke",ce,It);R();let _e=gl("strokeWidth",ue,It);z();let we=gl("strokeOpacity",le,It);q();let $e=gl("fillOpacity",he,It);H();let Se=gl("opacity",de,It);Z();let Te=gl("fontSize",pe,It);K();let Ie=gl("fontWeight",ge,It);J();let Ce,Oe=gl("rotation",me,It);tt();let Ne=!1,Ee=!1;function Pe(){o(80,oe=Ut(Kt,Ht,f,kl(Bt)))}function Le(){re=Qt?Jt(oe,{radiusObject:ae,strokeWidthObject:ue}):oe}function Ae(){if(nt||!Gt&&!f.blockReindexing){if(je(),r){const t=$.mouse().marks();t.loadLayer(rt,We()),Ct&&t.addLayerInteraction("click",et,Ct),Ot&&t.addLayerInteraction("mousedown",et,Ot),Nt&&t.addLayerInteraction("mouseup",et,Nt),Pt&&t.addLayerInteraction("mouseout",et,Pt),Et&&t.addLayerInteraction("mouseover",et,Et),Lt&&t.addLayerInteraction("mousedrag",et,Lt)}if(i){const t=$.touch().marks();t.loadLayer(rt,We()),At&&t.addLayerInteraction("touchdown",et,At),jt&&t.addLayerInteraction("touchup",et,jt),Wt&&t.addLayerInteraction("touchover",et,Wt),Rt&&t.addLayerInteraction("touchout",et,Rt),zt&&t.addLayerInteraction("touchdrag",et,zt)}}if(function(){const t=$.select();t.layerIsLoaded(et)&&t.removeLayer(et)}(),a){$.select().loadLayer(rt,We(),{onSelect:Xt,onDeselect:Ft})}}function je(){if("mouse"===Yt){const t=$.mouse().marks();t.layerIsLoaded(et)&&(t.removeAllLayerInteractions(et),t.removeLayer(et))}if("touch"===Yt){const t=$.touch().marks();t.layerIsLoaded(et)&&(t.removeAllLayerInteractions(et),t.removeLayer(et))}}function We(){return function(t,e,n,o,r){const i={layerId:e,keyArray:n};let a;return"Point"===t&&(a={pixelGeometryObject:o.pixelGeometryObject,radiusObject:r.radiusObject}),"Label"===t&&(a={pixelGeometryObject:o.pixelGeometryObject,radiusObject:r.fontSizeObject}),"Rectangle"===t&&(a={screenGeometryObject:o.screenGeometryObject}),"Polygon"===t&&(a={screenGeometryObject:o.screenGeometryObject}),"Line"===t&&(a={pixelGeometryObject:o.pixelGeometryObject,strokeWidthObject:r.strokeWidthObject}),"Symbol"===t&&(a={screenGeometryObject:o.screenGeometryObject}),"Area"===t&&(a={screenGeometryObject:o.screenGeometryObject}),i.layerAttributes=a,i}(rt,et,ie,{pixelGeometryObject:oe,screenGeometryObject:re},{radiusObject:ae,strokeWidthObject:ue})}return L((()=>{!fl(Ce,It)&&ot()&&(I(o(16,ve=gl("geometry",y,It))),O(o(2,ke=gl("radius",p,It))),E(o(3,be=gl("fill",g,It))),R(o(4,Me=gl("stroke",m,It))),z(o(5,_e=gl("strokeWidth",x,It))),q(o(6,we=gl("strokeOpacity",v,It))),H(o(7,$e=gl("fillOpacity",k,It))),Z(o(8,Se=gl("opacity",b,It))),K(o(9,Te=gl("fontSize",M,It))),J(o(10,Ie=gl("fontWeight",_,It))),tt(o(11,Oe=gl("rotation",w,It)))),Ce=It})),j((()=>{nt=!1})),A((()=>{Ae()})),W((()=>{je()})),e.$$set=t=>{"type"in t&&o(0,rt=t.type),"x"in t&&o(36,it=t.x),"y"in t&&o(37,at=t.y),"x1"in t&&o(38,st=t.x1),"x2"in t&&o(39,ct=t.x2),"y1"in t&&o(40,ut=t.y1),"y2"in t&&o(41,lt=t.y2),"geometry"in t&&o(42,ht=t.geometry),"shape"in t&&o(43,dt=t.shape),"size"in t&&o(44,ft=t.size),"independentAxis"in t&&o(45,yt=t.independentAxis),"radius"in t&&o(46,pt=t.radius),"fill"in t&&o(47,gt=t.fill),"stroke"in t&&o(48,mt=t.stroke),"strokeWidth"in t&&o(49,xt=t.strokeWidth),"strokeOpacity"in t&&o(50,vt=t.strokeOpacity),"fillOpacity"in t&&o(51,kt=t.fillOpacity),"opacity"in t&&o(52,bt=t.opacity),"text"in t&&o(53,Mt=t.text),"fontFamily"in t&&o(54,_t=t.fontFamily),"fontSize"in t&&o(55,wt=t.fontSize),"fontWeight"in t&&o(56,$t=t.fontWeight),"rotation"in t&&o(57,St=t.rotation),"anchorPoint"in t&&o(58,Tt=t.anchorPoint),"transition"in t&&o(59,It=t.transition),"onClick"in t&&o(60,Ct=t.onClick),"onMousedown"in t&&o(61,Ot=t.onMousedown),"onMouseup"in t&&o(62,Nt=t.onMouseup),"onMouseover"in t&&o(63,Et=t.onMouseover),"onMouseout"in t&&o(64,Pt=t.onMouseout),"onMousedrag"in t&&o(65,Lt=t.onMousedrag),"onTouchdown"in t&&o(66,At=t.onTouchdown),"onTouchup"in t&&o(67,jt=t.onTouchup),"onTouchover"in t&&o(68,Wt=t.onTouchover),"onTouchout"in t&&o(69,Rt=t.onTouchout),"onTouchdrag"in t&&o(70,zt=t.onTouchdrag),"onSelect"in t&&o(71,Xt=t.onSelect),"onDeselect"in t&&o(72,Ft=t.onDeselect),"key"in t&&o(73,Ht=t.key),"renderSettings"in t&&o(74,Bt=t.renderSettings),"blockReindexing"in t&&o(75,Gt=t.blockReindexing),"_asPolygon"in t&&o(76,Dt=t._asPolygon),"clip"in t&&o(1,Zt=t.clip)},e.$$.update=()=>{1&e.$$.dirty[0]|268435424&e.$$.dirty[1]&&ot()&&o(77,Vt=mu(rt,{x:it,y:at,x1:st,x2:ct,y1:ut,y2:lt,geometry:ht,shape:dt,size:ft,independentAxis:yt,radius:pt,fill:gt,stroke:mt,strokeWidth:xt,strokeOpacity:vt,fillOpacity:kt,opacity:bt,text:Mt,fontFamily:_t,fontSize:wt,fontWeight:$t,rotation:St,anchorPoint:Tt})),32736&e.$$.dirty[1]&&ot()&&o(78,Kt={x:it,y:at,x1:st,x2:ct,y1:ut,y2:lt,geometry:ht,shape:dt,size:ft,independentAxis:yt}),1&e.$$.dirty[0]&&ot()&&(Ut=Du[rt],Jt=al[rt]),1&e.$$.dirty[0]|16384&e.$$.dirty[2]&&ot()&&o(79,Qt=!0===Dt&&void 0!==al[rt]),4096&e.$$.dirty[0]|71680&e.$$.dirty[2]&&ot()&&(kl(Bt),o(82,Ne=!0),o(83,Ee=!0)),3407872&e.$$.dirty[2]&&(D(),B).then((()=>{Ne&&(Pe(),o(81,ie=Object.keys(oe)),ae=ql(Vt.radius,ie),ue=ql(Vt.strokeWidth,ie)),Ee&&(Le(),ve.set(re),Ae()),o(82,Ne=!1),o(83,Ee=!1)})),36&e.$$.dirty[0]|688128&e.$$.dirty[2]&&ot()&&(Qt||(ke.set(ql(Vt.radius,ie)),_e.set(ql(Vt.strokeWidth,ie)))),8&e.$$.dirty[0]|557056&e.$$.dirty[2]&&ot()&&be.set(ql(Vt.fill,ie)),16&e.$$.dirty[0]|557056&e.$$.dirty[2]&&ot()&&Me.set(ql(Vt.stroke,ie)),64&e.$$.dirty[0]|557056&e.$$.dirty[2]&&ot()&&we.set(ql(Vt.strokeOpacity,ie)),128&e.$$.dirty[0]|557056&e.$$.dirty[2]&&ot()&&$e.set(ql(Vt.fillOpacity,ie)),256&e.$$.dirty[0]|557056&e.$$.dirty[2]&&ot()&&Se.set(ql(Vt.opacity,ie)),512&e.$$.dirty[0]|557056&e.$$.dirty[2]&&ot()&&Te.set(ql(Vt.fontSize,ie)),1024&e.$$.dirty[0]|557056&e.$$.dirty[2]&&ot()&&Ie.set(ql(Vt.fontWeight,ie)),2048&e.$$.dirty[0]|557056&e.$$.dirty[2]&&ot()&&Oe.set(ql(Vt.rotation,ie)),557056&e.$$.dirty[2]&&ot()&&o(13,fe=ql(Vt.text,ie)),557056&e.$$.dirty[2]&&ot()&&o(14,ye=ql(Vt.fontFamily,ie)),557056&e.$$.dirty[2]&&ot()&&o(15,xe=ql(Vt.anchorPoint,ie)),1610612736&e.$$.dirty[1]|15&e.$$.dirty[2]&&(r="mouse"===Yt&&vl(Ct,Ot,Nt,Et,Pt,Lt)),496&e.$$.dirty[2]&&(i="touch"===Yt&&vl(At,jt,Wt,Rt,zt)),1536&e.$$.dirty[2]&&(a=void 0!==Xt||void 0!==Ft),1&e.$$.dirty[0]|131072&e.$$.dirty[2]&&o(28,s=!["Point","Line","Label"].includes(rt)||Qt),1&e.$$.dirty[0]|131072&e.$$.dirty[2]&&o(29,l="Point"===rt&&!Qt),1&e.$$.dirty[0]|131072&e.$$.dirty[2]&&o(30,h="Line"===rt&&!Qt),1&e.$$.dirty[0]&&o(31,d="Label"===rt)},[rt,Zt,ke,be,Me,_e,we,$e,Se,Te,Ie,Oe,f,fe,ye,xe,ve,y,p,g,m,x,v,k,b,M,_,w,s,l,h,d,S,te,ee,ne,it,at,st,ct,ut,lt,ht,dt,ft,yt,pt,gt,mt,xt,vt,kt,bt,Mt,_t,wt,$t,St,Tt,It,Ct,Ot,Nt,Et,Pt,Lt,At,jt,Wt,Rt,zt,Xt,Ft,Ht,Bt,Gt,Dt,Vt,Kt,Qt,oe,ie,Ne,Ee]}class ih extends yt{constructor(t){super(),ft(this,t,rh,nh,s,{type:0,x:36,y:37,x1:38,x2:39,y1:40,y2:41,geometry:42,shape:43,size:44,independentAxis:45,radius:46,fill:47,stroke:48,strokeWidth:49,strokeOpacity:50,fillOpacity:51,opacity:52,text:53,fontFamily:54,fontSize:55,fontWeight:56,rotation:57,anchorPoint:58,transition:59,onClick:60,onMousedown:61,onMouseup:62,onMouseover:63,onMouseout:64,onMousedrag:65,onTouchdown:66,onTouchup:67,onTouchover:68,onTouchout:69,onTouchdrag:70,onSelect:71,onDeselect:72,key:73,renderSettings:74,blockReindexing:75,_asPolygon:76,clip:1},[-1,-1,-1,-1])}}function ah(t){let e,n;return e=new ih({props:{type:"Line",x:t[0],y:t[1],geometry:t[2],strokeWidth:t[3],stroke:t[4],opacity:t[5],transition:t[6],onClick:t[7],onMousedown:t[8],onMouseup:t[9],onMouseover:t[10],onMouseout:t[11],onMousedrag:t[12],onTouchdown:t[13],onTouchup:t[14],onTouchover:t[15],onTouchout:t[16],onTouchdrag:t[17],onSelect:t[18],onDeselect:t[19],key:t[20],renderSettings:t[21],blockReindexing:t[22],clip:t[23],_asPolygon:!1}}),{c(){lt(e.$$.fragment)},m(t,o){ht(e,t,o),n=!0},p(t,[n]){const o={};1&n&&(o.x=t[0]),2&n&&(o.y=t[1]),4&n&&(o.geometry=t[2]),8&n&&(o.strokeWidth=t[3]),16&n&&(o.stroke=t[4]),32&n&&(o.opacity=t[5]),64&n&&(o.transition=t[6]),128&n&&(o.onClick=t[7]),256&n&&(o.onMousedown=t[8]),512&n&&(o.onMouseup=t[9]),1024&n&&(o.onMouseover=t[10]),2048&n&&(o.onMouseout=t[11]),4096&n&&(o.onMousedrag=t[12]),8192&n&&(o.onTouchdown=t[13]),16384&n&&(o.onTouchup=t[14]),32768&n&&(o.onTouchover=t[15]),65536&n&&(o.onTouchout=t[16]),131072&n&&(o.onTouchdrag=t[17]),262144&n&&(o.onSelect=t[18]),524288&n&&(o.onDeselect=t[19]),1048576&n&&(o.key=t[20]),2097152&n&&(o.renderSettings=t[21]),4194304&n&&(o.blockReindexing=t[22]),8388608&n&&(o.clip=t[23]),e.$set(o)},i(t){n||(ot(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){dt(e,t)}}}function sh(t,e,n){let{x:o}=e,{y:r}=e,{geometry:i}=e,{strokeWidth:a}=e,{stroke:s}=e,{opacity:c}=e,{transition:u}=e,{onClick:l}=e,{onMousedown:h}=e,{onMouseup:d}=e,{onMouseover:f}=e,{onMouseout:y}=e,{onMousedrag:p}=e,{onTouchdown:g}=e,{onTouchup:m}=e,{onTouchover:x}=e,{onTouchout:v}=e,{onTouchdrag:k}=e,{onSelect:b}=e,{onDeselect:M}=e,{key:_}=e,{renderSettings:w}=e,{blockReindexing:$=!1}=e,{clip:S=!0}=e;return t.$$set=t=>{"x"in t&&n(0,o=t.x),"y"in t&&n(1,r=t.y),"geometry"in t&&n(2,i=t.geometry),"strokeWidth"in t&&n(3,a=t.strokeWidth),"stroke"in t&&n(4,s=t.stroke),"opacity"in t&&n(5,c=t.opacity),"transition"in t&&n(6,u=t.transition),"onClick"in t&&n(7,l=t.onClick),"onMousedown"in t&&n(8,h=t.onMousedown),"onMouseup"in t&&n(9,d=t.onMouseup),"onMouseover"in t&&n(10,f=t.onMouseover),"onMouseout"in t&&n(11,y=t.onMouseout),"onMousedrag"in t&&n(12,p=t.onMousedrag),"onTouchdown"in t&&n(13,g=t.onTouchdown),"onTouchup"in t&&n(14,m=t.onTouchup),"onTouchover"in t&&n(15,x=t.onTouchover),"onTouchout"in t&&n(16,v=t.onTouchout),"onTouchdrag"in t&&n(17,k=t.onTouchdrag),"onSelect"in t&&n(18,b=t.onSelect),"onDeselect"in t&&n(19,M=t.onDeselect),"key"in t&&n(20,_=t.key),"renderSettings"in t&&n(21,w=t.renderSettings),"blockReindexing"in t&&n(22,$=t.blockReindexing),"clip"in t&&n(23,S=t.clip)},[o,r,i,a,s,c,u,l,h,d,f,y,p,g,m,x,v,k,b,M,_,w,$,S]}class ch extends yt{constructor(t){super(),ft(this,t,sh,ah,s,{x:0,y:1,geometry:2,strokeWidth:3,stroke:4,opacity:5,transition:6,onClick:7,onMousedown:8,onMouseup:9,onMouseover:10,onMouseout:11,onMousedrag:12,onTouchdown:13,onTouchup:14,onTouchover:15,onTouchout:16,onTouchdrag:17,onSelect:18,onDeselect:19,key:20,renderSettings:21,blockReindexing:22,clip:23})}}function uh(t){let e,n;return e=new ih({props:{type:"Label",x:t[0],y:t[1],geometry:t[2],fill:t[3],stroke:t[4],strokeWidth:t[5],strokeOpacity:t[6],fillOpacity:t[7],opacity:t[8],text:t[9],fontFamily:t[10],fontSize:t[11],fontWeight:t[12],rotation:t[13],anchorPoint:t[14],transition:t[15],onClick:t[16],onMousedown:t[17],onMouseup:t[18],onMouseover:t[19],onMouseout:t[20],onMousedrag:t[21],onTouchdown:t[22],onTouchup:t[23],onTouchover:t[24],onTouchout:t[25],onTouchdrag:t[26],onSelect:t[27],onDeselect:t[28],key:t[29],renderSettings:t[30],blockReindexing:t[31],clip:t[32],_asPolygon:!1}}),{c(){lt(e.$$.fragment)},m(t,o){ht(e,t,o),n=!0},p(t,n){const o={};1&n[0]&&(o.x=t[0]),2&n[0]&&(o.y=t[1]),4&n[0]&&(o.geometry=t[2]),8&n[0]&&(o.fill=t[3]),16&n[0]&&(o.stroke=t[4]),32&n[0]&&(o.strokeWidth=t[5]),64&n[0]&&(o.strokeOpacity=t[6]),128&n[0]&&(o.fillOpacity=t[7]),256&n[0]&&(o.opacity=t[8]),512&n[0]&&(o.text=t[9]),1024&n[0]&&(o.fontFamily=t[10]),2048&n[0]&&(o.fontSize=t[11]),4096&n[0]&&(o.fontWeight=t[12]),8192&n[0]&&(o.rotation=t[13]),16384&n[0]&&(o.anchorPoint=t[14]),32768&n[0]&&(o.transition=t[15]),65536&n[0]&&(o.onClick=t[16]),131072&n[0]&&(o.onMousedown=t[17]),262144&n[0]&&(o.onMouseup=t[18]),524288&n[0]&&(o.onMouseover=t[19]),1048576&n[0]&&(o.onMouseout=t[20]),2097152&n[0]&&(o.onMousedrag=t[21]),4194304&n[0]&&(o.onTouchdown=t[22]),8388608&n[0]&&(o.onTouchup=t[23]),16777216&n[0]&&(o.onTouchover=t[24]),33554432&n[0]&&(o.onTouchout=t[25]),67108864&n[0]&&(o.onTouchdrag=t[26]),134217728&n[0]&&(o.onSelect=t[27]),268435456&n[0]&&(o.onDeselect=t[28]),536870912&n[0]&&(o.key=t[29]),1073741824&n[0]&&(o.renderSettings=t[30]),1&n[1]&&(o.blockReindexing=t[31]),2&n[1]&&(o.clip=t[32]),e.$set(o)},i(t){n||(ot(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){dt(e,t)}}}function lh(t,e,n){let{x:o}=e,{y:r}=e,{geometry:i}=e,{fill:a}=e,{stroke:s}=e,{strokeWidth:c}=e,{strokeOpacity:u}=e,{fillOpacity:l}=e,{opacity:h}=e,{text:d}=e,{fontFamily:f}=e,{fontSize:y}=e,{fontWeight:p}=e,{rotation:g}=e,{anchorPoint:m}=e,{transition:x}=e,{onClick:v}=e,{onMousedown:k}=e,{onMouseup:b}=e,{onMouseover:M}=e,{onMouseout:_}=e,{onMousedrag:w}=e,{onTouchdown:$}=e,{onTouchup:S}=e,{onTouchover:T}=e,{onTouchout:I}=e,{onTouchdrag:C}=e,{onSelect:O}=e,{onDeselect:N}=e,{key:E}=e,{renderSettings:P}=e,{blockReindexing:L=!1}=e,{clip:A=!0}=e;return t.$$set=t=>{"x"in t&&n(0,o=t.x),"y"in t&&n(1,r=t.y),"geometry"in t&&n(2,i=t.geometry),"fill"in t&&n(3,a=t.fill),"stroke"in t&&n(4,s=t.stroke),"strokeWidth"in t&&n(5,c=t.strokeWidth),"strokeOpacity"in t&&n(6,u=t.strokeOpacity),"fillOpacity"in t&&n(7,l=t.fillOpacity),"opacity"in t&&n(8,h=t.opacity),"text"in t&&n(9,d=t.text),"fontFamily"in t&&n(10,f=t.fontFamily),"fontSize"in t&&n(11,y=t.fontSize),"fontWeight"in t&&n(12,p=t.fontWeight),"rotation"in t&&n(13,g=t.rotation),"anchorPoint"in t&&n(14,m=t.anchorPoint),"transition"in t&&n(15,x=t.transition),"onClick"in t&&n(16,v=t.onClick),"onMousedown"in t&&n(17,k=t.onMousedown),"onMouseup"in t&&n(18,b=t.onMouseup),"onMouseover"in t&&n(19,M=t.onMouseover),"onMouseout"in t&&n(20,_=t.onMouseout),"onMousedrag"in t&&n(21,w=t.onMousedrag),"onTouchdown"in t&&n(22,$=t.onTouchdown),"onTouchup"in t&&n(23,S=t.onTouchup),"onTouchover"in t&&n(24,T=t.onTouchover),"onTouchout"in t&&n(25,I=t.onTouchout),"onTouchdrag"in t&&n(26,C=t.onTouchdrag),"onSelect"in t&&n(27,O=t.onSelect),"onDeselect"in t&&n(28,N=t.onDeselect),"key"in t&&n(29,E=t.key),"renderSettings"in t&&n(30,P=t.renderSettings),"blockReindexing"in t&&n(31,L=t.blockReindexing),"clip"in t&&n(32,A=t.clip)},[o,r,i,a,s,c,u,l,h,d,f,y,p,g,m,x,v,k,b,M,_,w,$,S,T,I,C,O,N,E,P,L,A]}class hh extends yt{constructor(t){super(),ft(this,t,lh,uh,s,{x:0,y:1,geometry:2,fill:3,stroke:4,strokeWidth:5,strokeOpacity:6,fillOpacity:7,opacity:8,text:9,fontFamily:10,fontSize:11,fontWeight:12,rotation:13,anchorPoint:14,transition:15,onClick:16,onMousedown:17,onMouseup:18,onMouseover:19,onMouseout:20,onMousedrag:21,onTouchdown:22,onTouchup:23,onTouchover:24,onTouchout:25,onTouchdrag:26,onSelect:27,onDeselect:28,key:29,renderSettings:30,blockReindexing:31,clip:32},[-1,-1])}}function dh(t,e,n){const{minX:o,maxX:r}=n;return"left"===t?o-e:"right"===t?r+e:["center","centre"].includes(t)?(r-o)/2+o+e:t.constructor===Number?(r-o)*t+o:void 0}function fh(t,e,n){const{minY:o,maxY:r}=n;return"top"===t?o-e:"bottom"===t?r+e:["center","centre"].includes(t)?(r-o)/2+o+e:t.constructor===Number?(r-o)*t+o:void 0}function yh(t,e,n,o,r){let i;if(Array.isArray(t)&&t.length>0)i=t;else if(function(t){return"ticks"in t}(e))i=function(t,e,n){if(n){const o=function(t,{k:e,t:n}){const o=t.range().map((t=>(t-n)/e));return o.map(t.invert)}(t,n);return t.copy().domain(o).ticks(e)}return t.ticks(e)}(e,n,r);else{if(!("domain"in e))throw new Error("Couldn't construct axis. Please provide 'tickValues' or a scale with\n      either a 'ticks' or a 'domain' method.");i=e.domain()}return o&&"domain"in e&&i[0]!==e.domain()[0]&&i.unshift(e.domain()[0]),i}function ph(t,e,n){return t||("tickFormat"in e?e.tickFormat(n):t=>t)}function gh(t,e,n){let o;if("undefined"==typeof document){return.8*t.length*e}{o=gh.canvas||(gh.canvas=document.createElement("canvas"));const r=o.getContext("2d");r.font=e+" "+n;return r.measureText(t).width}}function mh(t,e,n,o,r,i,a,s,c){const u=function(t,e,n,o){if("axis"===t)return e?-(n+1)-o:n+1;if(t.constructor!==Number)throw new Error("yOffset must be a Number");return t}(o,i,a,s),l=dh(t,e,r.paddedBbox),h="axis"===n?c+u:fh(n,o,r.paddedBbox)+u,{finalScaleX:d,finalScaleY:f}=r,y=d.invert(l),p=f.invert(h);return{x:()=>y,y:()=>p}}function xh(t,e,n,o,r,i,a,s,c){const u=function(t,e,n,o){if("axis"===t)return e?n+5:-n-5;if(t.constructor!==Number)throw new Error("xOffset must be a Number");return t}(e,i,a),l="axis"===t?c+u:dh(t,e,r.paddedBbox),h=dh(n,o,r.paddedBbox),{finalScaleX:d,finalScaleY:f}=r,y=d.invert(l),p=f.invert(h);return{x:()=>y,y:()=>p}}function vh(t){let e,o;const r=[t[25],{strokeWidth:t[3]},{opacity:t[2]},{stroke:t[1]},{clip:t[23]}];let i={};for(let t=0;t<r.length;t+=1)i=n(i,r[t]);return e=new Rl({props:i}),{c(){lt(e.$$.fragment)},m(t,n){ht(e,t,n),o=!0},p(t,n){const o=41943054&n[0]?ct(r,[33554432&n[0]&&ut(t[25]),8&n[0]&&{strokeWidth:t[3]},4&n[0]&&{opacity:t[2]},2&n[0]&&{stroke:t[1]},8388608&n[0]&&{clip:t[23]}]):{};e.$set(o)},i(t){o||(ot(e.$$.fragment,t),o=!0)},o(t){rt(e.$$.fragment,t),o=!1},d(t){dt(e,t)}}}function kh(t){let e,o,r;const i=[t[24],{strokeWidth:t[5]},{opacity:t[7]},{stroke:t[6]},{transition:t[22]},{clip:t[23]}];let a={};for(let t=0;t<i.length;t+=1)a=n(a,i[t]);e=new ch({props:a});const s=[t[27],{text:t[26]},{anchorPoint:t[28]},{rotation:t[8]},{fontFamily:t[9]},{fontSize:t[10]},{fontWeight:t[11]},{opacity:t[12]},{fill:t[13]},{transition:t[22]},{clip:t[23]}];let c={};for(let t=0;t<s.length;t+=1)c=n(c,s[t]);return o=new hh({props:c}),{c(){lt(e.$$.fragment),lt(o.$$.fragment)},m(t,n){ht(e,t,n),ht(o,t,n),r=!0},p(t,n){const r=29360352&n[0]?ct(i,[16777216&n[0]&&ut(t[24]),32&n[0]&&{strokeWidth:t[5]},128&n[0]&&{opacity:t[7]},64&n[0]&&{stroke:t[6]},4194304&n[0]&&{transition:t[22]},8388608&n[0]&&{clip:t[23]}]):{};e.$set(r);const a=482361088&n[0]?ct(s,[134217728&n[0]&&ut(t[27]),67108864&n[0]&&{text:t[26]},268435456&n[0]&&{anchorPoint:t[28]},256&n[0]&&{rotation:t[8]},512&n[0]&&{fontFamily:t[9]},1024&n[0]&&{fontSize:t[10]},2048&n[0]&&{fontWeight:t[11]},4096&n[0]&&{opacity:t[12]},8192&n[0]&&{fill:t[13]},4194304&n[0]&&{transition:t[22]},8388608&n[0]&&{clip:t[23]}]):{};o.$set(a)},i(t){r||(ot(e.$$.fragment,t),ot(o.$$.fragment,t),r=!0)},o(t){rt(e.$$.fragment,t),rt(o.$$.fragment,t),r=!1},d(t){dt(e,t),dt(o,t)}}}function bh(t){let e,o;const r=[t[29],{text:t[14]},{anchorPoint:t[21]},{rotation:t[20]},{fontFamily:t[16]},{fontSize:t[17]},{fontWeight:t[18]},{opacity:t[19]},{fill:t[15]},{clip:t[23]}];let i={};for(let t=0;t<r.length;t+=1)i=n(i,r[t]);return e=new Xl({props:i}),{c(){lt(e.$$.fragment)},m(t,n){ht(e,t,n),o=!0},p(t,n){const o=549437440&n[0]?ct(r,[536870912&n[0]&&ut(t[29]),16384&n[0]&&{text:t[14]},2097152&n[0]&&{anchorPoint:t[21]},1048576&n[0]&&{rotation:t[20]},65536&n[0]&&{fontFamily:t[16]},131072&n[0]&&{fontSize:t[17]},262144&n[0]&&{fontWeight:t[18]},524288&n[0]&&{opacity:t[19]},32768&n[0]&&{fill:t[15]},8388608&n[0]&&{clip:t[23]}]):{};e.$set(o)},i(t){o||(ot(e.$$.fragment,t),o=!0)},o(t){rt(e.$$.fragment,t),o=!1},d(t){dt(e,t)}}}function Mh(t){let e,n,o,r,i=t[0]&&vh(t),a=t[4]&&kh(t),s=t[14].length>0&&bh(t);return{c(){e=M("g"),i&&i.c(),n=$(),a&&a.c(),o=$(),s&&s.c(),T(e,"class","x-axis")},m(t,c){x(t,e,c),i&&i.m(e,null),m(e,n),a&&a.m(e,null),m(e,o),s&&s.m(e,null),r=!0},p(t,r){t[0]?i?(i.p(t,r),1&r[0]&&ot(i,1)):(i=vh(t),i.c(),ot(i,1),i.m(e,n)):i&&(et(),rt(i,1,1,(()=>{i=null})),nt()),t[4]?a?(a.p(t,r),16&r[0]&&ot(a,1)):(a=kh(t),a.c(),ot(a,1),a.m(e,o)):a&&(et(),rt(a,1,1,(()=>{a=null})),nt()),t[14].length>0?s?(s.p(t,r),16384&r[0]&&ot(s,1)):(s=bh(t),s.c(),ot(s,1),s.m(e,null)):s&&(et(),rt(s,1,1,(()=>{s=null})),nt())},i(t){r||(ot(i),ot(a),ot(s),r=!0)},o(t){rt(i),rt(a),rt(s),r=!1},d(t){t&&v(e),i&&i.d(),a&&a.d(),s&&s.d()}}}function _h(t,e,n){let o,r,i,a,s,c,l,h,d,f,y,p,{flip:g=!1}=e,{scale:m}=e,{baseLine:x=!0}=e,{baseLineColor:v="black"}=e,{baseLineOpacity:k=1}=e,{baseLineWidth:b=1}=e,{vjust:M="bottom"}=e,{yOffset:_=0}=e,{ticks:w=!0}=e,{tickCount:$=10}=e,{tickExtra:S=!1}=e,{tickValues:T}=e,{tickSize:I=5}=e,{tickWidth:C=.5}=e,{tickColor:O="black"}=e,{tickOpacity:N=1}=e,{labelFormat:E}=e,{labelOffset:P=2}=e,{labelRotate:L=0}=e,{labelFont:A="Helvetica"}=e,{labelFontSize:j=10}=e,{labelFontWeight:W="normal"}=e,{labelOpacity:R=1}=e,{labelColor:Y="black"}=e,{titleHjust:z="center"}=e,{titleXOffset:X=0}=e,{titleVjust:q="axis"}=e,{titleYOffset:F="axis"}=e,{title:H=""}=e,{titleColor:B="black"}=e,{titleFont:G="Helvetica"}=e,{titleFontSize:D="12"}=e,{titleFontWeight:Z="normal"}=e,{titleOpacity:V=1}=e,{titleRotation:K=0}=e,{titleAnchorPoint:U="t"}=e,{transition:J}=e,{clip:Q=!1}=e;const tt=On();return u(t,tt,(t=>n(45,p=t))),t.$$set=t=>{"flip"in t&&n(31,g=t.flip),"scale"in t&&n(32,m=t.scale),"baseLine"in t&&n(0,x=t.baseLine),"baseLineColor"in t&&n(1,v=t.baseLineColor),"baseLineOpacity"in t&&n(2,k=t.baseLineOpacity),"baseLineWidth"in t&&n(3,b=t.baseLineWidth),"vjust"in t&&n(33,M=t.vjust),"yOffset"in t&&n(34,_=t.yOffset),"ticks"in t&&n(4,w=t.ticks),"tickCount"in t&&n(35,$=t.tickCount),"tickExtra"in t&&n(36,S=t.tickExtra),"tickValues"in t&&n(37,T=t.tickValues),"tickSize"in t&&n(38,I=t.tickSize),"tickWidth"in t&&n(5,C=t.tickWidth),"tickColor"in t&&n(6,O=t.tickColor),"tickOpacity"in t&&n(7,N=t.tickOpacity),"labelFormat"in t&&n(39,E=t.labelFormat),"labelOffset"in t&&n(40,P=t.labelOffset),"labelRotate"in t&&n(8,L=t.labelRotate),"labelFont"in t&&n(9,A=t.labelFont),"labelFontSize"in t&&n(10,j=t.labelFontSize),"labelFontWeight"in t&&n(11,W=t.labelFontWeight),"labelOpacity"in t&&n(12,R=t.labelOpacity),"labelColor"in t&&n(13,Y=t.labelColor),"titleHjust"in t&&n(41,z=t.titleHjust),"titleXOffset"in t&&n(42,X=t.titleXOffset),"titleVjust"in t&&n(43,q=t.titleVjust),"titleYOffset"in t&&n(44,F=t.titleYOffset),"title"in t&&n(14,H=t.title),"titleColor"in t&&n(15,B=t.titleColor),"titleFont"in t&&n(16,G=t.titleFont),"titleFontSize"in t&&n(17,D=t.titleFontSize),"titleFontWeight"in t&&n(18,Z=t.titleFontWeight),"titleOpacity"in t&&n(19,V=t.titleOpacity),"titleRotation"in t&&n(20,K=t.titleRotation),"titleAnchorPoint"in t&&n(21,U=t.titleAnchorPoint),"transition"in t&&n(22,J=t.transition),"clip"in t&&n(23,Q=t.clip)},t.$$.update=()=>{if(16384&t.$$.dirty[1]&&"polar"===p.transformation)throw new Error("Axes do'nt work with polar coordinates (for now)");16386&t.$$.dirty[1]&&n(46,o=m?m.copy().range(p.rangeX):p.scaleX),16396&t.$$.dirty[1]&&n(47,r=fh(M,_,p.paddedBbox)),81920&t.$$.dirty[1]&&n(25,i=function(t,e){const{paddedBbox:n,finalScaleX:o,finalScaleY:r}=e,{minX:i,maxX:a}=n,s=[i,a].map(o.invert),c=[t,t].map(r.invert);return{x:()=>s,y:()=>c}}(r,p)),49264&t.$$.dirty[1]&&n(48,a=yh(T,o,$,S,p.zoomIdentity?{t:p.zoomIdentity.x,k:p.zoomIdentity.kx}:void 0)),245889&t.$$.dirty[1]&&n(24,s=function(t,e,n,o,r,i){const a=i?-r:r,s=n.bandwidth?n.bandwidth()/2:0,c=e+a,u=[o.invert(e),o.invert(c)],l=t.map((t=>n(t)+s)).map((t=>[t,t])),h=Yu(u,t.length);return{x:()=>l,y:()=>h}}(a,r,o,p.finalScaleY,I,g)),16&t.$$.dirty[0]|16640&t.$$.dirty[1]&&n(49,c=ph(E,p.scaleX,w.length)),393216&t.$$.dirty[1]&&n(26,l=a.map(c)),16777216&t.$$.dirty[0]|16897&t.$$.dirty[1]&&n(27,h=function(t,{finalScaleY:e},n,o){const r=t.x().map((t=>t[0])),i=t.y().map((t=>{const r=t[1],i=e(r),a=o?i-n:i+n;return e.invert(a)}));return{x:()=>r,y:()=>i}}(s,p,P,g)),1&t.$$.dirty[1]&&n(28,d=g?"b":"t"),1032&t.$$.dirty[0]|640&t.$$.dirty[1]&&n(50,f=b+I+P+j),131072&t.$$.dirty[0]|621569&t.$$.dirty[1]&&n(29,y=mh(z,X,q,F,p,g,f,D,r))},[x,v,k,b,w,C,O,N,L,A,j,W,R,Y,H,B,G,D,Z,V,K,U,J,Q,s,i,l,h,d,y,tt,g,m,M,_,$,S,T,I,E,P,z,X,q,F,p,o,r,a,c,f]}class wh extends yt{constructor(t){super(),ft(this,t,_h,Mh,s,{flip:31,scale:32,baseLine:0,baseLineColor:1,baseLineOpacity:2,baseLineWidth:3,vjust:33,yOffset:34,ticks:4,tickCount:35,tickExtra:36,tickValues:37,tickSize:38,tickWidth:5,tickColor:6,tickOpacity:7,labelFormat:39,labelOffset:40,labelRotate:8,labelFont:9,labelFontSize:10,labelFontWeight:11,labelOpacity:12,labelColor:13,titleHjust:41,titleXOffset:42,titleVjust:43,titleYOffset:44,title:14,titleColor:15,titleFont:16,titleFontSize:17,titleFontWeight:18,titleOpacity:19,titleRotation:20,titleAnchorPoint:21,transition:22,clip:23},[-1,-1])}}function $h(t){let e,o;const r=[t[26],{strokeWidth:t[3]},{opacity:t[2]},{stroke:t[1]},{clip:t[23]}];let i={};for(let t=0;t<r.length;t+=1)i=n(i,r[t]);return e=new Rl({props:i}),{c(){lt(e.$$.fragment)},m(t,n){ht(e,t,n),o=!0},p(t,n){const o=75497486&n[0]?ct(r,[67108864&n[0]&&ut(t[26]),8&n[0]&&{strokeWidth:t[3]},4&n[0]&&{opacity:t[2]},2&n[0]&&{stroke:t[1]},8388608&n[0]&&{clip:t[23]}]):{};e.$set(o)},i(t){o||(ot(e.$$.fragment,t),o=!0)},o(t){rt(e.$$.fragment,t),o=!1},d(t){dt(e,t)}}}function Sh(t){let e,o,r;const i=[t[24],{strokeWidth:t[5]},{opacity:t[7]},{stroke:t[6]},{transition:t[22]},{clip:t[23]}];let a={};for(let t=0;t<i.length;t+=1)a=n(a,i[t]);e=new ch({props:a});const s=[t[27],{text:t[25]},{anchorPoint:t[28]},{rotation:t[8]},{fontFamily:t[9]},{fontSize:t[10]},{fontWeight:t[11]},{opacity:t[12]},{fill:t[13]},{transition:t[22]},{clip:t[23]}];let c={};for(let t=0;t<s.length;t+=1)c=n(c,s[t]);return o=new hh({props:c}),{c(){lt(e.$$.fragment),lt(o.$$.fragment)},m(t,n){ht(e,t,n),ht(o,t,n),r=!0},p(t,n){const r=29360352&n[0]?ct(i,[16777216&n[0]&&ut(t[24]),32&n[0]&&{strokeWidth:t[5]},128&n[0]&&{opacity:t[7]},64&n[0]&&{stroke:t[6]},4194304&n[0]&&{transition:t[22]},8388608&n[0]&&{clip:t[23]}]):{};e.$set(r);const a=448806656&n[0]?ct(s,[134217728&n[0]&&ut(t[27]),33554432&n[0]&&{text:t[25]},268435456&n[0]&&{anchorPoint:t[28]},256&n[0]&&{rotation:t[8]},512&n[0]&&{fontFamily:t[9]},1024&n[0]&&{fontSize:t[10]},2048&n[0]&&{fontWeight:t[11]},4096&n[0]&&{opacity:t[12]},8192&n[0]&&{fill:t[13]},4194304&n[0]&&{transition:t[22]},8388608&n[0]&&{clip:t[23]}]):{};o.$set(a)},i(t){r||(ot(e.$$.fragment,t),ot(o.$$.fragment,t),r=!0)},o(t){rt(e.$$.fragment,t),rt(o.$$.fragment,t),r=!1},d(t){dt(e,t),dt(o,t)}}}function Th(t){let e,o;const r=[t[29],{text:t[14]},{anchorPoint:t[21]},{rotation:t[20]},{fontFamily:t[16]},{fontSize:t[17]},{fontWeight:t[18]},{opacity:t[19]},{fill:t[15]},{clip:t[23]}];let i={};for(let t=0;t<r.length;t+=1)i=n(i,r[t]);return e=new Xl({props:i}),{c(){lt(e.$$.fragment)},m(t,n){ht(e,t,n),o=!0},p(t,n){const o=549437440&n[0]?ct(r,[536870912&n[0]&&ut(t[29]),16384&n[0]&&{text:t[14]},2097152&n[0]&&{anchorPoint:t[21]},1048576&n[0]&&{rotation:t[20]},65536&n[0]&&{fontFamily:t[16]},131072&n[0]&&{fontSize:t[17]},262144&n[0]&&{fontWeight:t[18]},524288&n[0]&&{opacity:t[19]},32768&n[0]&&{fill:t[15]},8388608&n[0]&&{clip:t[23]}]):{};e.$set(o)},i(t){o||(ot(e.$$.fragment,t),o=!0)},o(t){rt(e.$$.fragment,t),o=!1},d(t){dt(e,t)}}}function Ih(t){let e,n,o,r,i=t[0]&&$h(t),a=t[4]&&Sh(t),s=t[14].length>0&&Th(t);return{c(){e=M("g"),i&&i.c(),n=$(),a&&a.c(),o=$(),s&&s.c(),T(e,"class","y-axis")},m(t,c){x(t,e,c),i&&i.m(e,null),m(e,n),a&&a.m(e,null),m(e,o),s&&s.m(e,null),r=!0},p(t,r){t[0]?i?(i.p(t,r),1&r[0]&&ot(i,1)):(i=$h(t),i.c(),ot(i,1),i.m(e,n)):i&&(et(),rt(i,1,1,(()=>{i=null})),nt()),t[4]?a?(a.p(t,r),16&r[0]&&ot(a,1)):(a=Sh(t),a.c(),ot(a,1),a.m(e,o)):a&&(et(),rt(a,1,1,(()=>{a=null})),nt()),t[14].length>0?s?(s.p(t,r),16384&r[0]&&ot(s,1)):(s=Th(t),s.c(),ot(s,1),s.m(e,null)):s&&(et(),rt(s,1,1,(()=>{s=null})),nt())},i(t){r||(ot(i),ot(a),ot(s),r=!0)},o(t){rt(i),rt(a),rt(s),r=!1},d(t){t&&v(e),i&&i.d(),a&&a.d(),s&&s.d()}}}function Ch(t,e,n){let o,r,i,a,s,c,l,h,d,f,y,p,g,{flip:m=!1}=e,{scale:x}=e,{baseLine:v=!0}=e,{baseLineColor:k="black"}=e,{baseLineOpacity:b=1}=e,{baseLineWidth:M=1}=e,{hjust:_="left"}=e,{xOffset:w=0}=e,{ticks:$=!0}=e,{tickCount:S=10}=e,{tickExtra:T=!1}=e,{tickValues:I}=e,{tickSize:C=5}=e,{tickWidth:O=.5}=e,{tickColor:N="black"}=e,{tickOpacity:E=1}=e,{labelFormat:P}=e,{labelOffset:L=2}=e,{labelRotate:A=0}=e,{labelFont:j="Helvetica"}=e,{labelFontSize:W=10}=e,{labelFontWeight:R="normal"}=e,{labelOpacity:Y=1}=e,{labelColor:z="black"}=e,{titleHjust:X="axis"}=e,{titleXOffset:q="axis"}=e,{titleVjust:F="center"}=e,{titleYOffset:H=0}=e,{title:B=""}=e,{titleColor:G="black"}=e,{titleFont:D="Helvetica"}=e,{titleFontSize:Z="12"}=e,{titleFontWeight:V="normal"}=e,{titleOpacity:K=1}=e,{titleRotation:U=-90}=e,{titleAnchorPoint:J="center"}=e,{transition:Q}=e,{clip:tt=!1}=e;const et=On();return u(t,et,(t=>n(45,g=t))),t.$$set=t=>{"flip"in t&&n(31,m=t.flip),"scale"in t&&n(32,x=t.scale),"baseLine"in t&&n(0,v=t.baseLine),"baseLineColor"in t&&n(1,k=t.baseLineColor),"baseLineOpacity"in t&&n(2,b=t.baseLineOpacity),"baseLineWidth"in t&&n(3,M=t.baseLineWidth),"hjust"in t&&n(33,_=t.hjust),"xOffset"in t&&n(34,w=t.xOffset),"ticks"in t&&n(4,$=t.ticks),"tickCount"in t&&n(35,S=t.tickCount),"tickExtra"in t&&n(36,T=t.tickExtra),"tickValues"in t&&n(37,I=t.tickValues),"tickSize"in t&&n(38,C=t.tickSize),"tickWidth"in t&&n(5,O=t.tickWidth),"tickColor"in t&&n(6,N=t.tickColor),"tickOpacity"in t&&n(7,E=t.tickOpacity),"labelFormat"in t&&n(39,P=t.labelFormat),"labelOffset"in t&&n(40,L=t.labelOffset),"labelRotate"in t&&n(8,A=t.labelRotate),"labelFont"in t&&n(9,j=t.labelFont),"labelFontSize"in t&&n(10,W=t.labelFontSize),"labelFontWeight"in t&&n(11,R=t.labelFontWeight),"labelOpacity"in t&&n(12,Y=t.labelOpacity),"labelColor"in t&&n(13,z=t.labelColor),"titleHjust"in t&&n(41,X=t.titleHjust),"titleXOffset"in t&&n(42,q=t.titleXOffset),"titleVjust"in t&&n(43,F=t.titleVjust),"titleYOffset"in t&&n(44,H=t.titleYOffset),"title"in t&&n(14,B=t.title),"titleColor"in t&&n(15,G=t.titleColor),"titleFont"in t&&n(16,D=t.titleFont),"titleFontSize"in t&&n(17,Z=t.titleFontSize),"titleFontWeight"in t&&n(18,V=t.titleFontWeight),"titleOpacity"in t&&n(19,K=t.titleOpacity),"titleRotation"in t&&n(20,U=t.titleRotation),"titleAnchorPoint"in t&&n(21,J=t.titleAnchorPoint),"transition"in t&&n(22,Q=t.transition),"clip"in t&&n(23,tt=t.clip)},t.$$.update=()=>{if(16384&t.$$.dirty[1]&&"polar"===g.transformation)throw new Error("Axes do'nt work with polar coordinates (for now)");16386&t.$$.dirty[1]&&n(46,o=x?x.copy().range(g.rangeY):g.scaleY),16396&t.$$.dirty[1]&&n(47,r=dh(_,w,g.paddedBbox)),81920&t.$$.dirty[1]&&n(26,i=function(t,e){const{paddedBbox:n,finalScaleX:o,finalScaleY:r}=e,{minY:i,maxY:a}=n,s=[t,t].map(o.invert),c=[i,a].map(r.invert);return{x:()=>s,y:()=>c}}(r,g)),49264&t.$$.dirty[1]&&n(48,a=yh(I,o,S,T,g.zoomIdentity?{t:g.zoomIdentity.y,k:g.zoomIdentity.ky}:void 0)),245889&t.$$.dirty[1]&&n(24,s=function(t,e,n,o,r,i){const a=i?r:-r,s=n.bandwidth?n.bandwidth()/2:0,c=e+a,u=Yu([o.invert(e),o.invert(c)],t.length),l=t.map((t=>n(t)+s)).map((t=>[t,t]));return{x:()=>u,y:()=>l}}(a,r,o,g.finalScaleX,C,m)),16&t.$$.dirty[0]|16640&t.$$.dirty[1]&&n(49,c=ph(P,g.scaleY,$.length)),393216&t.$$.dirty[1]&&n(25,l=a.map(c)),16777216&t.$$.dirty[0]|16897&t.$$.dirty[1]&&n(27,h=function(t,{finalScaleX:e},n,o){const r=t.x().map((t=>{const r=t[1],i=e(r),a=o?i+n:i-n;return e.invert(a)})),i=t.y().map((t=>t[0]));return{x:()=>r,y:()=>i}}(s,g,L,m)),1&t.$$.dirty[1]&&n(28,d=m?"l":"r"),33555968&t.$$.dirty[0]&&n(50,f=gh(l[l.length-1],W,j)),8&t.$$.dirty[0]|524928&t.$$.dirty[1]&&n(51,y=M+C+L+f),131072&t.$$.dirty[0]|1145857&t.$$.dirty[1]&&n(29,p=xh(X,q,F,H,g,m,y,0,r))},[v,k,b,M,$,O,N,E,A,j,W,R,Y,z,B,G,D,Z,V,K,U,J,Q,tt,s,l,i,h,d,p,et,m,x,_,w,S,T,I,C,P,L,X,q,F,H,g,o,r,a,c,f,y]}class Oh extends yt{constructor(t){super(),ft(this,t,Ch,Ih,s,{flip:31,scale:32,baseLine:0,baseLineColor:1,baseLineOpacity:2,baseLineWidth:3,hjust:33,xOffset:34,ticks:4,tickCount:35,tickExtra:36,tickValues:37,tickSize:38,tickWidth:5,tickColor:6,tickOpacity:7,labelFormat:39,labelOffset:40,labelRotate:8,labelFont:9,labelFontSize:10,labelFontWeight:11,labelOpacity:12,labelColor:13,titleHjust:41,titleXOffset:42,titleVjust:43,titleYOffset:44,title:14,titleColor:15,titleFont:16,titleFontSize:17,titleFontWeight:18,titleOpacity:19,titleRotation:20,titleAnchorPoint:21,transition:22,clip:23},[-1,-1])}}function Nh(t){let e,o,r;const i=[t[4],{strokeWidth:t[0]},{opacity:t[2]},{stroke:t[1]},{transition:t[3]}];let a={};for(let t=0;t<i.length;t+=1)a=n(a,i[t]);return o=new ch({props:a}),{c(){e=M("g"),lt(o.$$.fragment),T(e,"class","x-grid-lines")},m(t,n){x(t,e,n),ht(o,e,null),r=!0},p(t,[e]){const n=31&e?ct(i,[16&e&&ut(t[4]),1&e&&{strokeWidth:t[0]},4&e&&{opacity:t[2]},2&e&&{stroke:t[1]},8&e&&{transition:t[3]}]):{};o.$set(n)},i(t){r||(ot(o.$$.fragment,t),r=!0)},o(t){rt(o.$$.fragment,t),r=!1},d(t){t&&v(e),dt(o)}}}function Eh(t,e,n){let o,r,i,a,{scale:s}=e,{count:c=10}=e,{extra:l=!1}=e,{values:h}=e,{width:d=.25}=e,{color:f="black"}=e,{opacity:y=1}=e,{transition:p}=e;const g=On();return u(t,g,(t=>n(10,a=t))),t.$$set=t=>{"scale"in t&&n(6,s=t.scale),"count"in t&&n(7,c=t.count),"extra"in t&&n(8,l=t.extra),"values"in t&&n(9,h=t.values),"width"in t&&n(0,d=t.width),"color"in t&&n(1,f=t.color),"opacity"in t&&n(2,y=t.opacity),"transition"in t&&n(3,p=t.transition)},t.$$.update=()=>{if(1024&t.$$.dirty&&"polar"===a.transformation)throw new Error("Rasters do'nt work with polar coordinates (for now)");1088&t.$$.dirty&&n(11,o=s?s.copy().range(a.rangeX):a.scaleX),3968&t.$$.dirty&&n(12,r=yh(h,o,c,l,a.zoomIdentity?{t:a.zoomIdentity.x,k:a.zoomIdentity.kx}:void 0)),7168&t.$$.dirty&&n(4,i=function(t,e,n){const o=e.bandwidth?e.bandwidth()/2:0,r=t.map((t=>e(t)+o)).map((t=>[t,t])),i=Yu(n.rangeY,t.length);return{x:()=>r,y:()=>i}}(r,o,a))},[d,f,y,p,i,g,s,c,l,h,a,o,r]}class Ph extends yt{constructor(t){super(),ft(this,t,Eh,Nh,s,{scale:6,count:7,extra:8,values:9,width:0,color:1,opacity:2,transition:3})}}function Lh(t){let e,o,r;const i=[t[4],{strokeWidth:t[0]},{opacity:t[2]},{stroke:t[1]},{transition:t[3]}];let a={};for(let t=0;t<i.length;t+=1)a=n(a,i[t]);return o=new ch({props:a}),{c(){e=M("g"),lt(o.$$.fragment),T(e,"class","y-grid-lines")},m(t,n){x(t,e,n),ht(o,e,null),r=!0},p(t,[e]){const n=31&e?ct(i,[16&e&&ut(t[4]),1&e&&{strokeWidth:t[0]},4&e&&{opacity:t[2]},2&e&&{stroke:t[1]},8&e&&{transition:t[3]}]):{};o.$set(n)},i(t){r||(ot(o.$$.fragment,t),r=!0)},o(t){rt(o.$$.fragment,t),r=!1},d(t){t&&v(e),dt(o)}}}function Ah(t,e,n){let o,r,i,a,{scale:s}=e,{count:c=10}=e,{extra:l=!1}=e,{values:h}=e,{width:d=.25}=e,{color:f="black"}=e,{opacity:y=1}=e,{transition:p}=e;const g=On();return u(t,g,(t=>n(10,a=t))),t.$$set=t=>{"scale"in t&&n(6,s=t.scale),"count"in t&&n(7,c=t.count),"extra"in t&&n(8,l=t.extra),"values"in t&&n(9,h=t.values),"width"in t&&n(0,d=t.width),"color"in t&&n(1,f=t.color),"opacity"in t&&n(2,y=t.opacity),"transition"in t&&n(3,p=t.transition)},t.$$.update=()=>{if(1024&t.$$.dirty&&"polar"===a.transformation)throw new Error("Rasters do'nt work with polar coordinates (for now)");1088&t.$$.dirty&&n(11,o=s?s.copy().range(a.rangeY):a.scaleY),3968&t.$$.dirty&&n(12,r=yh(h,o,c,l,a.zoomIdentity?{t:a.zoomIdentity.y,k:a.zoomIdentity.ky}:void 0)),7168&t.$$.dirty&&n(4,i=function(t,e,n){const o=e.bandwidth?e.bandwidth()/2:0,r=Yu(n.rangeX,t.length),i=t.map((t=>e(t)+o)).map((t=>[t,t]));return{x:()=>r,y:()=>i}}(r,o,a))},[d,f,y,p,i,g,s,c,l,h,a,o,r]}class jh extends yt{constructor(t){super(),ft(this,t,Ah,Lh,s,{scale:6,count:7,extra:8,values:9,width:0,color:1,opacity:2,transition:3})}}const{window:Wh}=it;function Rh(t,e,n){const o=t.slice();return o[20]=e[n],o}function Yh(t,e,n){const o=t.slice();return o[23]=e[n],o}function zh(t){let e,n;return e=new Al({props:{x:t[23].x,y:t[23].y,radius:2,fill:-1==t[23].label?"#8B8B8B":t[1][t[23].label].color,opacity:.9,transition:2e3}}),{c(){lt(e.$$.fragment)},m(t,o){ht(e,t,o),n=!0},p(t,n){const o={};4&n&&(o.x=t[23].x),4&n&&(o.y=t[23].y),6&n&&(o.fill=-1==t[23].label?"#8B8B8B":t[1][t[23].label].color),e.$set(o)},i(t){n||(ot(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){dt(e,t)}}}function Xh(t){let e,n,o,r;return e=new Al({props:{x:t[20].x,y:t[20].y,radius:6,fill:t[20].color,transition:2e3}}),o=new Al({props:{x:t[20].x,y:t[20].y,radius:10,strokeWidth:1,stroke:t[20].color,strokeOpacity:.5,fill:t[20].color,transition:2e3}}),{c(){lt(e.$$.fragment),n=w(),lt(o.$$.fragment)},m(t,i){ht(e,t,i),x(t,n,i),ht(o,t,i),r=!0},p(t,n){const r={};2&n&&(r.x=t[20].x),2&n&&(r.y=t[20].y),2&n&&(r.fill=t[20].color),e.$set(r);const i={};2&n&&(i.x=t[20].x),2&n&&(i.y=t[20].y),2&n&&(i.stroke=t[20].color),2&n&&(i.fill=t[20].color),o.$set(i)},i(t){r||(ot(e.$$.fragment,t),ot(o.$$.fragment,t),r=!0)},o(t){rt(e.$$.fragment,t),rt(o.$$.fragment,t),r=!1},d(t){dt(e,t),t&&v(n),dt(o,t)}}}function qh(t){let e,n,o,r,i,a,s,c,u,l,h=t[2],d=[];for(let e=0;e<h.length;e+=1)d[e]=zh(Yh(t,h,e));const f=t=>rt(d[t],1,1,(()=>{d[t]=null}));let y=t[1],p=[];for(let e=0;e<y.length;e+=1)p[e]=Xh(Rh(t,y,e));const g=t=>rt(p[t],1,1,(()=>{p[t]=null}));return o=new wh({props:{baseLineColor:Hh,tickColor:Hh,labelColor:Hh,labelOpacity:0}}),i=new Oh({props:{baseLineColor:Hh,tickColor:Hh,labelColor:Hh,labelOpacity:0}}),s=new Ph({props:{color:Hh,opacity:.3}}),u=new jh({props:{color:Hh,opacity:.3}}),{c(){for(let t=0;t<d.length;t+=1)d[t].c();e=w();for(let t=0;t<p.length;t+=1)p[t].c();n=w(),lt(o.$$.fragment),r=w(),lt(i.$$.fragment),a=w(),lt(s.$$.fragment),c=w(),lt(u.$$.fragment)},m(t,h){for(let e=0;e<d.length;e+=1)d[e].m(t,h);x(t,e,h);for(let e=0;e<p.length;e+=1)p[e].m(t,h);x(t,n,h),ht(o,t,h),x(t,r,h),ht(i,t,h),x(t,a,h),ht(s,t,h),x(t,c,h),ht(u,t,h),l=!0},p(t,o){if(6&o){let n;for(h=t[2],n=0;n<h.length;n+=1){const r=Yh(t,h,n);d[n]?(d[n].p(r,o),ot(d[n],1)):(d[n]=zh(r),d[n].c(),ot(d[n],1),d[n].m(e.parentNode,e))}for(et(),n=h.length;n<d.length;n+=1)f(n);nt()}if(2&o){let e;for(y=t[1],e=0;e<y.length;e+=1){const r=Rh(t,y,e);p[e]?(p[e].p(r,o),ot(p[e],1)):(p[e]=Xh(r),p[e].c(),ot(p[e],1),p[e].m(n.parentNode,n))}for(et(),e=y.length;e<p.length;e+=1)g(e);nt()}},i(t){if(!l){for(let t=0;t<h.length;t+=1)ot(d[t]);for(let t=0;t<y.length;t+=1)ot(p[t]);ot(o.$$.fragment,t),ot(i.$$.fragment,t),ot(s.$$.fragment,t),ot(u.$$.fragment,t),l=!0}},o(t){d=d.filter(Boolean);for(let t=0;t<d.length;t+=1)rt(d[t]);p=p.filter(Boolean);for(let t=0;t<p.length;t+=1)rt(p[t]);rt(o.$$.fragment,t),rt(i.$$.fragment,t),rt(s.$$.fragment,t),rt(u.$$.fragment,t),l=!1},d(t){k(d,t),t&&v(e),k(p,t),t&&v(n),dt(o,t),t&&v(r),dt(i,t),t&&v(a),dt(s,t),t&&v(c),dt(u,t)}}}function Fh(t){let e,n,o,r,i,a,s,c,u;return o=new Qc({props:{width:t[0],height:t[0],scaleX:[-6,Bh+6],scaleY:[-6,Bh+6],flipY:!0,padding:20,$$slots:{default:[qh]},$$scope:{ctx:t}}}),a=new St({}),a.$on("assign",t[5]),a.$on("update",t[4]),a.$on("fit",t[6]),a.$on("setLabel",t[7]),a.$on("setData",t[8]),a.$on("setError",t[9]),a.$on("reset",t[10]),{c(){e=b("main"),n=b("div"),lt(o.$$.fragment),r=w(),i=b("div"),lt(a.$$.fragment),T(n,"class","graph"),T(i,"class","controller"),T(e,"class","svelte-jj789r")},m(l,h){x(l,e,h),m(e,n),ht(o,n,null),m(e,r),m(e,i),ht(a,i,null),s=!0,c||(u=S(Wh,"resize",t[3]),c=!0)},p(t,[e]){const n={};1&e&&(n.width=t[0]),1&e&&(n.height=t[0]),67108870&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){s||(ot(o.$$.fragment,t),ot(a.$$.fragment,t),s=!0)},o(t){rt(o.$$.fragment,t),rt(a.$$.fragment,t),s=!1},d(t){t&&v(e),dt(o),dt(a),c=!1,u()}}}let Hh="#80DDF2",Bh=100;function Gh(t,e,n){let o=Math.min(window.innerWidth,window.innerHeight)-20,r=3,i=80,a=["#fe00fe","#fe007f","#fe0000","#febf00","#fefe00","#00fe00","#00fefe","#0080ff","#3f00fe"],s=30,c=Bh/2-20;const u=function(t,e){let n=t.x-e.x,o=t.y-e.y;return Math.sqrt(n*n+o*o)},l=function(t,e){let n=[];return e.forEach((({x:e,y:o})=>{for(let r=0;r<t;r++){const t=2*Math.PI*Math.random(),r={x:e+s*Math.cos(t)*Math.random(),y:o+s*Math.sin(t)*Math.random(),label:-1};n.push(r)}})),n};let h=[],d=[];for(let t=0;t<r;t++)d.push({x:Math.random()*Bh,y:Math.random()*Bh,color:a[t]}),h.push({x:Bh/2+Math.cos(Math.PI/r*2*t)*c,y:Bh/2+Math.sin(Math.PI/r*2*t)*c});let f=[];function y(){d.forEach(((t,e)=>{Object.assign(t,(t=>{const e=t.length;if(0==e)return{x:Bh/2,y:Bh/2};let n=0,o=0;return t.forEach((t=>{n+=t.x,o+=t.y})),{x:n/e,y:o/e}})(f.filter((t=>t.label==e))))})),n(1,d)}function p(){let t=!1,e=[];for(let t=0;t<r;t++)e.push(0);f.forEach((n=>{let o=u(n,d[0]),r=0;d.forEach(((t,e)=>{const i=u(n,t);i<o&&(r=e,o=i)})),t||(t=n.label!=r),e[r]+=1,n.label=r,xt(`Assigned (${n.x}, ${n.y}) to ${r}`)}));for(let t=0;t<r;t++)xt(`Label ${t} now contain ${e[t]} points`);return n(1,d),t}function g(){h=[];for(let t=0;t<r;t++)Object.assign(d[t],{x:Math.random()*Bh,y:Math.random()*Bh}),h.push({x:Bh/2+Math.cos(Math.PI/r*2*t)*c,y:Bh/2+Math.sin(Math.PI/r*2*t)*c});h=h,n(1,d),n(2,f=[]),n(2,f=l(i,h))}return f=l(i,h),[o,d,f,function(){n(0,o=Math.min(window.innerWidth,window.innerHeight)-20),console.log(o)},y,p,function(){let t=1,e=p();y();let n=setInterval((()=>{e=p(),y(),t++,e||(xt(`Fitted after ${t} interation(s)`),clearInterval(n))}),2e3)},function(t){const e=t.detail.num;if(r>e)f.map((t=>{t.label=-1})),n(1,d=d.slice(0,e));else{for(let t=r;t<e;t++)d.push({x:Math.random()*Bh,y:Math.random()*Bh,cor:a[t]});n(1,d)}r=e},function(t){const e=t.detail.num;i=e,g()},function(t){const e=t.detail.num;s=e,n(2,f=l(i,h))},g]}return new class extends yt{constructor(t){super(),ft(this,t,Gh,Fh,s,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
